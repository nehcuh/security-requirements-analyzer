(window["microFrontendproject-management"]=window["microFrontendproject-management"]||[]).push([["common-enterprise"],{"+9PU":function(e,t,a){e.exports={container:"container-1ngXb9yADQ","drop-zone":"drop-zone-17E85SS0nP",dropZone:"drop-zone-17E85SS0nP","drop-area":"drop-area-1sJ9hRbEBO",dropArea:"drop-area-1sJ9hRbEBO",icon:"icon-jMkcX0g4z9","icon-xlsx":"icon-xlsx-Ri6uiFjHhE",iconXlsx:"icon-xlsx-Ri6uiFjHhE","icon-csv":"icon-csv-QjhzqkuvBd",iconCsv:"icon-csv-QjhzqkuvBd","big-text":"big-text-38YzAu2ncw",bigText:"big-text-38YzAu2ncw","small-text":"small-text-3EYF2HviI7",smallText:"small-text-3EYF2HviI7",gap:"gap-30RFfRUFgL","gap-left":"gap-left-3o-_lUoyJh",gapLeft:"gap-left-3o-_lUoyJh",header:"header-3Hg3McYpMo",body:"body-1I0Mv5s0u3",blue:"blue-1J0YsvWV5R",desc:"desc-LMO1uf_I5N",line:"line-29WWLdQh5X",selections:"selections-3wzkgJz0DJ",item:"item-2YKDDooGsS",text:"text-2CIWpwWmqs","item-one":"item-one-BsL__KXGb8",itemOne:"item-one-BsL__KXGb8",scrolling:"scrolling-2_iwJqM3Jn",success:"success-1X3zIWJLmA",warning:"warning-1e8n4fdFWi",error:"error-2oYgu1PP1Q",loading:"loading-ovPsV6hNoF","oa-sync-container":"oa-sync-container-3M5erNzbKD",oaSyncContainer:"oa-sync-container-3M5erNzbKD","oa-req":"oa-req-2sB_FRinzG",oaReq:"oa-req-2sB_FRinzG","oa-query":"oa-query-19TDTp_uk0",oaQuery:"oa-query-19TDTp_uk0","oa-header":"oa-header-2sXpxOqfhL",oaHeader:"oa-header-2sXpxOqfhL","oa-table":"oa-table-3ZDwYNrKVM",oaTable:"oa-table-3ZDwYNrKVM","t-body":"t-body-2SQA5PJPCD",tBody:"t-body-2SQA5PJPCD","t-head":"t-head-J5oUxZJj9f",tHead:"t-head-J5oUxZJj9f",th:"th-2RmlaCiDTo",td:"td-2OGaWmYBcR"}},"+E08":function(e,t,a){e.exports={preview:"preview-QE3fhO4fcn",close:"close-1tk5gM57ut",wrapper:"wrapper-1ewZQt_lEl","img-wrapper":"img-wrapper-3TWtD7eecI",imgWrapper:"img-wrapper-3TWtD7eecI"}},"+sO4":function(e,t,a){e.exports={wrapper:"wrapper-1K2VE9_LHb",content:"content-3giLwcU7Lj","btn-area":"btn-area-AWLNrVKa1h",btnArea:"btn-area-AWLNrVKa1h",btn:"btn-3nKtCC8qOq",tips:"tips-1Kz7ROe5ow",tag:"tag-3TqTcqDpeu"}},"/Cp5":function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("Z2Ku"),a("f3/d"),a("xfY5");var r=a("mVeg"),o=n(a("cDcd")),i=n(a("17x9")),l=n(a("gp0q")),c=a("FaIw"),s=a("h74D"),u=n(a("1qdz")),d=function(e){var t,a=e.item,n=e.issueTypeDetail,i=e.userId,s=e.onDelete,d=e.allowUpdate,f=e.onEdit,p=(0,r.t)("\u4f7f\u7528\u4e86"),m=!(!["REQUIREMENT","MISSION","DEFECT"].includes(null===n||void 0===n?void 0:n.issueType)||"prd_issue"===(null===n||void 0===n?void 0:n.type)),v=a.id,h=a.recordHours,g=a.createdAt,E=a.startAt,y=a.workingDesc,b=a.user,I=b.avatar,S=b.name,T=b.id,w=m?(0,r.t)("\u5929"):(0,r.t)("\u5c0f\u65f6"),C=m?Number(null===(t=h/8)||void 0===t?void 0:t.toFixed(2)):h;return o.default.createElement("div",{className:u.default.listItem,key:v},o.default.createElement("div",{className:u.default.avatarDot},o.default.createElement(l.default,{src:I,className:u.default.avatar,size:"small"})),o.default.createElement("div",{className:u.default.workHourContent},o.default.createElement("div",{className:u.default.content},o.default.createElement("span",{className:u.default.name},S),"".concat((0,r.t)("\u5728 ")).concat("00:00"===(0,c.timeFormat)(E,"HH:mm")?(0,c.timeFormat)(E,"YYYY-MM-DD"):(0,c.timeFormat)(E,"YYYY-MM-DD HH:mm")," ").concat(p," ").concat(C).concat((0,r.t)(w))),o.default.createElement("div",{className:u.default.desc},y),o.default.createElement("div",{className:u.default.operation},o.default.createElement("span",null,(0,r.t)("\u53d1\u8868\u4e8e"),(0,c.formatFromNow)(g)),i===T&&d&&o.default.createElement(o.default.Fragment,null,o.default.createElement("span",{className:u.default.gap}),["REQUIREMENT","MISSION","DEFECT"].includes(null===n||void 0===n?void 0:n.issueType)&&"prd_issue"!==(null===n||void 0===n?void 0:n.type)&&o.default.createElement("span",{className:u.default.edit,style:{marginRight:"10px"},onClick:function(){return f(a)}},(0,r.t)("\u7f16\u8f91")),o.default.createElement("span",{className:u.default.del,onClick:function(){return s(a)}},(0,r.t)("\u5220\u9664"))))))};d.propTypes={item:i.default.object.isRequired,issueTypeDetail:i.default.object.isRequired,onDelete:i.default.func.isRequired,onEdit:i.default.func.isRequired,userId:i.default.number,allowUpdate:i.default.bool};var f=(0,s.connect)((function(e){return{userId:e.APP.user.id}}))(d);t.default=f},"/kNv":function(e,t,a){"use strict";a("I5cv"),a("RW0V"),a("ioFf"),a("0l/t"),a("mYba"),a("jm62"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d"),a("pIFo");var o,i,l,c=n(a("lSNA")),s=n(a("lwsE")),u=n(a("W8MJ")),d=n(a("PJYZ")),f=n(a("7W2i")),p=n(a("a1gu")),m=n(a("Nsbk")),v=a("mVeg"),h=M(a("cDcd")),g=n(a("17x9")),E=a("TJpk"),y=a("dtw8"),b=n(a("O9Lt")),I=a("xgZS"),S=a("Z4vw"),T=a("nuIr"),w=a("w3Wo"),C=n(a("LD9k")),O=n(a("YJB4")),N=M(a("v3Uf")),P=n(a("TT2u")),j=a("17N+"),D=n(a("K2gz")),k=n(a("G0so"));function R(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(R=function(e){return e?a:t})(e)}function M(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=R(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,m.default)(e);if(t){var r=(0,m.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,p.default)(this,a)}}var _=(0,N.default)(o=(0,P.default)((l=i=function(e){(0,f.default)(a,e);var t=x(a);function a(e){var n;return(0,s.default)(this,a),(n=t.call(this,e)).getSubIssueCode=function(){return n.props.params.subIssueCode},n.handleFullScreenChange=function(e){n.setState({isFullScreen:e})},n.state={detailInfo:void 0,isFullScreen:(0,j.getIsSlideFullScreen)()},n.updateCallback=n.updateCallback.bind((0,d.default)(n)),n.refreshCallback=n.refreshCallback.bind((0,d.default)(n)),n.getSpec=n.getSpec.bind((0,d.default)(n)),n}return(0,u.default)(a,[{key:"render",value:function(){var e=this.state,t=e.detailInfo,a=e.isFullScreen,n=e.issueType,r=this.props,o=r.currentProject,i=r.enterpriseName,l=r.projectPath,c=r.params,s="".concat(l,"/requirements/issues/").concat(c.requirementCode,"/detail"),u=a;return h.default.createElement(h.default.Fragment,null,u&&h.default.createElement("div",{className:k.default.fullScreenMask}),h.default.createElement("div",{className:(0,D.default)(k.default.root,k.default.subtaskRoot,"full-screen-style",u&&k.default.fullScreen)},t&&h.default.createElement(E.Helmet,null,h.default.createElement("title",null,"".concat(t.name).concat(n===T.ISSUE_TYPE.SUB_TASK?(0,v.t)(" - \u5b50\u5de5\u4f5c\u9879 - "):(0,v.t)(" - \u5b50\u4e8b\u9879 - ")).concat(o.display_name," - ").concat(i))),h.default.createElement(y.Link,{className:(0,D.default)(k.default.closeButton,u&&k.default.closeButtonFullScreen),to:s}),h.default.createElement("div",{id:"wm-spec",className:k.default.detailRoot},t?this.getSpec():h.default.createElement(b.default,{show:!0}))))}},{key:"getSpec",value:function(){var e,t=this.state,a=t.detailInfo,n=t.issueType,r=this.props,o=r.params,i=r.closeSlideslip,l=r.issueList,c=r.largeSize,s=r.subTasks,u=r.RequirementSpec;switch(n){case T.ISSUE_TYPE.ASSIGNMENT:e=h.default.createElement(C.default,{updateCallback:this.updateCallback,refreshCallback:this.refreshCallback,expanded:c,params:o,closeSlideslip:i,detailInfo:a,assignmentList:l(n),issueCode:this.getSubIssueCode(),issueTypeDetail:a.issueTypeDetail,onFullScreenChange:this.handleFullScreenChange,targetData:this.props.targetData});break;case T.ISSUE_TYPE.SUB_TASK:e=h.default.createElement(O.default,{updateCallback:this.updateCallback,refreshCallback:this.refreshCallback,expanded:c,params:o,detailInfo:a,affairList:s,issueCode:this.getSubIssueCode(),issueTypeDetail:a.issueTypeDetail,onFullScreenChange:this.handleFullScreenChange,onCodeChange:this.props.onCodeChange,targetData:this.props.targetData});break;default:e=h.default.createElement(u,{updateCallback:this.updateCallback,refreshCallback:this.refreshCallback,expanded:c,params:o,closeSlideslip:i,detailInfo:a,requirementList:l(n),issueCode:this.getSubIssueCode(),issueTypeDetail:a.issueTypeDetail,onFullScreenChange:this.handleFullScreenChange,targetData:this.props.targetData})}return e}},{key:"getDetailInfo",value:function(){var e=this,t=this.props,a=t.params,n=t.currentProject,r=t.projectPath,o=t.closeSlideslip,i=t.browserRouter,l="".concat(r,"/requirements/issues/").concat(a.requirementCode,"/detail"),c=this.getSubIssueCode();n.id&&c&&(0,w.fetchIssueDetailByCode)(n.id,c,{withDescriptionMarkup:!0}).then((function(t){var a=t.data;e.setState({detailInfo:a,issueType:a.type})}),(function(e){var t=e.msg;1400===e.code?((0,I.danger)((0,S.getErrorMessage)(t)),i.replace(r)):((0,I.danger)((0,S.getErrorMessage)(t)),o(),i.replace(l))}))}},{key:"updateCallback",value:function(e){var t=this.props.getList;t&&t(),e?this.setState({detailInfo:e}):this.getDetailInfo()}},{key:"refreshCallback",value:function(){var e=this.props.getList;e&&e()}},{key:"componentDidMount",value:function(){this.getDetailInfo()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.params,a=e.currentProject,n=this.props,r=n.params,o=n.currentProject;(a&&a.id!==o.id||t.subIssueCode!==r.subIssueCode)&&this.setState({detailInfo:void 0})}},{key:"componentDidUpdate",value:function(e){var t=e.params,a=e.currentProject,n=this.props,r=n.params,o=n.currentProject;(o&&o.id!==a.id||t.subIssueCode!==r.subIssueCode)&&this.getDetailInfo()}}]),a}(h.Component),i.propTypes=L(L({params:g.default.object,enterpriseName:g.default.string,projectPath:g.default.string,currentProject:g.default.object,closeSlideslip:g.default.func,issueList:g.default.func,getList:g.default.func},N.sizeProps),{},{browserRouter:g.default.object,RequirementSpec:g.default.any,onCodeChange:g.default.func,subTasks:g.default.array,parentType:g.default.string}),o=l))||o)||o;t.default=_},"/mbV":function(e,t,a){e.exports={title:"title-3pmvjN3Exy",field:"field-IIaQuTceR8","field-name":"field-name-1yGhvBSq7Y",fieldName:"field-name-1yGhvBSq7Y","field-input":"field-input-2zHATuF-E4",fieldInput:"field-input-2zHATuF-E4",required:"required-3pF_OjYwHH",footer:"footer-36XhgBh9bE",button:"button-1B9DxP8Nxb","button-confirm":"button-confirm-2UyrdJDbrH",buttonConfirm:"button-confirm-2UyrdJDbrH"}},"/p1d":function(e,t,a){"use strict";a("I5cv"),a("RW0V"),a("ioFf"),a("0l/t"),a("mYba"),a("jm62"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("bWfx"),a("f3/d");var o=n(a("lSNA")),i=n(a("RIqP")),l=n(a("lwsE")),c=n(a("W8MJ")),s=n(a("PJYZ")),u=n(a("7W2i")),d=n(a("a1gu")),f=n(a("Nsbk")),p=a("mVeg"),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=T(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),v=n(a("17x9")),h=n(a("yZ+p")),g=n(a("jdYl")),E=a("nuIr"),y=a("sWxF"),b=a("xgZS"),I=a("Z4vw"),S=n(a("Zsd2"));function T(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(T=function(e){return e?a:t})(e)}function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}var O=function(e){(0,u.default)(a,e);var t=C(a);function a(e){var n;return(0,l.default)(this,a),(n=t.call(this,e)).timer=null,n.localInputRef=(0,m.createRef)(),n.selectItem=function(e){var t=n.props,a=t.callback,r=t.projectID,o=t.issueCode;(0,y.joinDefectIntoRequirement)(r,o,e.code).then((function(){(0,b.success)((0,p.t)("\u6210\u529f\u5173\u8054\u7f3a\u9677")),n.setState({value:void 0},(function(){n.searchResults()})),a(null)}),(function(e){var t=e.msg;(0,b.danger)((0,I.getErrorMessage)(t))}))},n.searchResults=function(){var e=n.props,t=e.projectID,a=e.issueCode,r=n.state.value;n.timer&&clearTimeout(n.timer),n.timer=setTimeout((function(){(0,y.getDefectsWhichCanBeRelated)(t,a,{keyword:(0,S.default)(r)}).then((function(e){var t=e.data;n.setState({results:(0,i.default)(t.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e)})))})}))}),500)},n.handleKeyDown=function(e){27===e.keyCode&&n.props.onCancel&&n.props.onCancel()},n.state={value:void 0,results:[],isChecked:!1},n.handleChangeValue=n.handleChangeValue.bind((0,s.default)(n)),n.onChangeCheckbox=n.onChangeCheckbox.bind((0,s.default)(n)),n.onClear=n.onClear.bind((0,s.default)(n)),n.onShow=n.onShow.bind((0,s.default)(n)),n}return(0,c.default)(a,[{key:"render",value:function(){var e=this.props.inputRef,t=this.state,a=t.value,n=t.results;return m.default.createElement("div",{id:"affairs-associate-defect",className:g.default.inputWrapper},m.default.createElement(h.default,{value:a,className:g.default.customInput,ref:e||this.localInputRef,onChange:this.handleChangeValue,prefix:m.default.createElement("div",{className:g.default.customSearchIcon}),suffix:m.default.createElement("div",{className:g.default.cancelBtn,onClick:this.onClear},(0,p.t)("\u53d6\u6d88")),size:"medium",placeholder:(0,p.t)("\u8f93\u5165\u4e8b\u9879\u5f15\u7528 ID \u6216\u6807\u9898"),onKeyDown:this.handleKeyDown}),m.default.createElement("div",{className:g.default.customResult},m.default.createElement("div",{className:g.default.resultWrapper},!!n.length&&this.renderResult(),!n.length&&m.default.createElement("div",{className:g.default.resultEmpty},m.default.createElement("div",{className:"".concat(g.default.icon," ").concat(g.default.customSearchIcon)}),(0,p.t)("\u65e0\u641c\u7d22\u7ed3\u679c")))))}},{key:"renderResult",value:function(){var e=this,t=this.state.results;return m.default.createElement("div",{className:g.default.resultItems,onScroll:function(e){e.stopPropagation()}},t.map((function(t){return m.default.createElement("div",{className:g.default.item,key:t.code,onClick:function(){return e.selectItem(t)}},m.default.createElement("div",{className:"".concat(e.parseIcon(t.type)," ").concat(g.default.icon)}),m.default.createElement("div",{className:g.default.itemCode},"#",t.code),m.default.createElement("div",{className:"".concat(g.default.itemDetail," ").concat(g.default.customDetail)},m.default.createElement("div",{className:g.default.itemDetailTitle},t.name)),t.iteration&&m.default.createElement("div",{className:g.default.belongIteration},t.iteration.name),t.epic&&t.epic.name&&m.default.createElement("div",{className:g.default.belongEpic},m.default.createElement("div",{className:g.default.icon}),m.default.createElement("div",{className:g.default.detail},t.epic.name)))})))}},{key:"componentDidMount",value:function(){this.onShow(),this.searchResults()}},{key:"componentWillUnmount",value:function(){this.timer&&clearTimeout(this.timer)}},{key:"onChangeCheckbox",value:function(){var e=this.state.isChecked;this.setState({isChecked:!e},this.searchResults)}},{key:"handleChangeValue",value:function(e){this.setState({value:e.target.value},this.searchResults)}},{key:"onShow",value:function(){var e=this.props.inputRef||this.localInputRef;e&&e.current&&e.current.focus()}},{key:"focus",value:function(){var e,t=this.props.inputRef||this.localInputRef;null===t||void 0===t||null===(e=t.current)||void 0===e||e.focus()}},{key:"onClear",value:function(){this.setState({value:void 0,results:[]}),this.props.onCancel()}},{key:"parseIcon",value:function(e){switch(e){case E.ISSUE_TYPE.REQUIREMENT:return g.default.requirementIcon;case E.ISSUE_TYPE.ASSIGNMENT:return g.default.assignmentIcon;default:return g.default.issueIcon}}}]),a}(m.Component);O.propTypes={inputRef:v.default.oneOfType([v.default.func,v.default.shape({current:v.default.instanceOf(Element)})]),onCancel:v.default.func,callback:v.default.func,projectID:v.default.number,issueCode:v.default.number};var N=O;t.default=N},"/wWQ":function(e,t,a){"use strict";a.r(t);var n=a("mVeg"),r=a("cDcd"),o=a.n(r),i=a("KY5o"),l=a("xgZS"),c=a("K2gz"),s=a.n(c),u=a("eC7o"),d=a.n(u),f=a("sWxF"),p=a("gP5I"),m=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i};t.default=function(e){var t,a,c=e.detailInfo,u=e.isFromDetailPage,v=e.allowUpdate,h=e.onForwardLogs,g=e.onUpdate,E=m(Object(r.useState)(!1),2),y=E[0],b=E[1];return o.a.createElement("div",{className:s()([d.a.container,u?d.a.isDetail:"",!v&&d.a.disabled]),"data-container":!0,"data-title":"REQUIREMENT"===(null===(t=null===c||void 0===c?void 0:c.issueTypeDetail)||void 0===t?void 0:t.issueType)&&"requirement"!==(null===(a=null===c||void 0===c?void 0:c.issueTypeDetail)||void 0===a?void 0:a.type)?"\u9700\u6c42\u6c60\u586b\u62a5":"\u7814\u53d1\u7a7a\u95f4\u586b\u62a5"},o.a.createElement(i.a,{recordHours:c.recordedHours,remainingHours:c.remainingHours,className:v?d.a.progress:d.a.noPermissionProgress,onClick:function(){var e;"sub_task"===(null===(e=null===c||void 0===c?void 0:c.issueTypeDetail)||void 0===e?void 0:e.type)?Object(l.danger)("\u5de5\u65f6\u586b\u62a5\uff1a\u5de5\u65f6\u6682\u4e0d\u652f\u6301\u8be5\u5361\u7247\u7c7b\u578b\u7684\u586b\u62a5"):v&&b(!0)}}),h&&o.a.createElement("div",{className:d.a.log,onClick:h},Object(n.t)("\u67e5\u770b\u5de5\u65f6\u65e5\u5fd7")),y&&o.a.createElement(p.default,{header:Object(n.t)("\u767b\u8bb0\u5de5\u65f6"),show:y,body:e.detailInfo,onSetting:function(e){Object(f.editHourRecords)(c.projectId,c.code,e).then((function(e){if(0===e.code)return!g||g()})),b(!1)},onHide:function(){return b(!1)}}))}},"00Df":function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("o0o1")),i=n(a("yXPU")),l=n(a("lwsE")),c=n(a("W8MJ")),s=n(a("7W2i")),u=n(a("a1gu")),d=n(a("Nsbk")),f=a("mVeg"),p=n(a("17x9")),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),v=a("FaIw"),h=a("dtw8"),g=n(a("Rvrz")),E=a("w3Wo"),y=a("1qdz");function b(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(b=function(e){return e?a:t})(e)}function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var S={ADD:(0,f.t)("\u5173\u8054\u4e86\u9700\u6c42"),REMOVE:(0,f.t)("\u53d6\u6d88\u5173\u8054\u4e86\u9700\u6c42")},T=function(e){(0,s.default)(a,e);var t=I(a);function a(){var e;(0,l.default)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(){var t=(0,i.default)(o.default.mark((function t(a,n){var r,i,l,c,s,u;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,i=r.projectId,l=r.item,t.prev=1,a.preventDefault(),t.next=5,(0,E.fetchIssueDetailByCode)(i,null===l||void 0===l||null===(c=l.issueLog)||void 0===c||null===(s=c.content)||void 0===s?void 0:s.code);case 5:u=t.sent,u.data.code&&window.open(n),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(1);case 12:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,a){return t.apply(this,arguments)}}(),e}return(0,c.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.item,n=t.projectPath;return m.default.createElement("div",{className:y.listItem,key:a.id},m.default.createElement("div",{className:y.dot}),m.default.createElement("div",{className:y.content},m.default.createElement(g.default,{className:"mr-10 ".concat(y.moreDot)}),a.issueLog&&1===a.issueLog.old?"\u3010\u6e90\u3011":"",m.default.createElement("span",{className:y.user},a.creator.name),m.default.createElement("span",null,S[a.issueLog.action]),m.default.createElement(h.Link,{className:"ml-10 ".concat(y.moreDot),target:"_blank",onClick:function(t){e.handleClick(t,"".concat(n,"/requirements/issues/").concat(a.issueLog.content.code,"/detail"))}},"#",a.issueLog.content.code,"-",a.issueLog.content.name),m.default.createElement("span",{className:y.time},(0,v.timeFormat)(a.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(m.Component);t.default=T,T.propTypes={item:p.default.object,projectPath:p.default.string,projectId:p.default.number}},"0JYJ":function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("cDcd")).default.createContext({route:void 0});t.default=r},"0Zwn":function(e,t,a){"use strict";a.r(t);var n=a("mVeg"),r=a("cDcd"),o=a.n(r),i=a("xgZS"),l=a("f0Wu"),c=a.n(l),s=a("i6nV"),u=a.n(s),d=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),f=function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function i(e){try{c(n.next(e))}catch(t){o(t)}}function l(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}c((n=n.apply(e,t||[])).next())}))},p=function(e,t){var a,n,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(a=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){i.label=l[1];break}if(6===l[0]&&i.label<r[1]){i.label=r[1],r=l;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(l);break}r[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(c){l=[6,c],n=0}finally{a=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},m=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},v=function(e,t,a){if(a||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))},h=function(e){function t(t){var a=e.call(this,t)||this;return a.maskRef=o.a.createRef(),a.counter=0,a.dragOver=function(e){e.dataTransfer.types.indexOf("Files")<0||e.dataTransfer.types.indexOf("text/uri-list")>0||(e.preventDefault(),e.stopPropagation())},a.dragEnter=function(e){e.dataTransfer.types.indexOf("Files")<0||e.dataTransfer.types.indexOf("text/uri-list")>0||a.props.notUpload||(e.preventDefault(),e.stopPropagation(),a.counter++,a.setState({isFileDroppingIn:!0}))},a.dragLeave=function(e){e.dataTransfer.types.indexOf("Files")<0||e.dataTransfer.types.indexOf("text/uri-list")>0||a.props.notUpload||(e.preventDefault(),e.stopPropagation(),a.counter--,0===a.counter&&a.setState({isFileDroppingIn:!1}))},a.filterFiles=function(e){return new Promise((function(t){for(var a=e.length,n=[],r=0,o=function(){r===a-1&&t(n),r++},i=function(t){var a=e[t];if(a.type)n.push(a),o();else try{var r=new FileReader;r.readAsDataURL(a.slice(0,3)),r.addEventListener("load",(function(){r.result&&r.result.length>5&&n.push(a),o()}),!1),r.addEventListener("error",(function(){o()}),!1)}catch(i){o()}},l=0;l<a;l++)i(l)}))},a.drop=function(e){return f(a,void 0,void 0,(function(){var t,a,r,o,l,c,s,u,d=this;return p(this,(function(f){switch(f.label){case 0:return t=this.props,a=t.onHandleAttachments,r=t.currentAttachmentNum,e.dataTransfer.types.indexOf("Files")<0||e.dataTransfer.types.indexOf("text/uri-list")>0||this.props.notUpload?[2]:(e.preventDefault(),e.stopPropagation(),this.counter=0,this.setState({isFileDroppingIn:!1}),o=e.dataTransfer.files,l=v([],m(o),!1),[4,this.filterFiles(l)]);case 1:return 0===(c=f.sent()).length?[2]:c.length>20-r?(Object(i.warning)("".concat(Object(n.t)("\u6700\u591a\u53ea\u53ef\u4e0a\u4f20".concat(20,"\u4e2a\u9644\u4ef6\uff01")))),[2]):(s=(new Date).getTime(),(u=[]).splice.apply(u,v([u.length,0],m(c.map((function(e,t){return{size:e.size,name:d.getFilename(e.name),type:e.type,timestamp:s+10*t,file:new File([e],d.getFilename(e.name),{type:e.type}),fileId:-(s+10*t)}}))),!1)),a(u),[2])}}))}))},a.getFilename=function(e,t){void 0===t&&(t=!0);var a=/[^.]+$/.exec(e),n=a?a[0]:void 0,r=e.replace(/\.\w+$/,""),o=t?c()().format("YYYYMMDDHHmmss"):(new Date).getTime();return"".concat(r,"-").concat(o,".").concat(n)},a.state={isFileDroppingIn:!1},a}return d(t,e),t.prototype.renderNotUploadElemsHolder=function(){var e=this,t=this.props.notUploadElems,a=this.maskRef.current,n=null===a||void 0===a?void 0:a.getBoundingClientRect();return t&&0!==t.length?o.a.createElement(o.a.Fragment,null,t.map((function(t,r){var i=t;if(!a||!i)return o.a.createElement(o.a.Fragment,null);var l=i.getBoundingClientRect(),c={width:"".concat(l.width,"px"),height:"".concat(l.height,"px"),top:"".concat(l.top-n.top,"px"),marginLeft:"".concat(l.left-n.left,"px")};return o.a.createElement("div",{key:r,style:c,className:u.a.notUploadElem,onDragEnter:function(){var t;e.counter=0,null===(t=e.props)||void 0===t||t.onIntoUploadElems(),setTimeout((function(){e.setState({isFileDroppingIn:!1})}),0)}})}))):o.a.createElement(o.a.Fragment,null)},t.prototype.render=function(){var e=this.state.isFileDroppingIn;return o.a.createElement("div",{className:u.a.wrap,onDragEnter:this.dragEnter,onDragOver:this.dragOver,onDragLeave:this.dragLeave,onDrop:this.drop},e&&o.a.createElement("div",{className:u.a.isDropping,ref:this.maskRef},this.renderNotUploadElemsHolder()),this.props.children)},t}(o.a.Component);t.default=h},"0aOx":function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=g(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=n(a("74sH")),m=a("FaIw"),v=a("1qdz"),h=a("7FZc");function g(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(g=function(e){return e?a:t})(e)}function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,l.default)(a,e);var t=E(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item;return f.default.createElement("div",{className:v.listItem,key:e.id},f.default.createElement("div",{className:v.dot}),f.default.createElement("div",{className:v.content},f.default.createElement(p.default,{className:"mr-10 ".concat(v.icon)}),f.default.createElement("span",{className:v.user},e.creator.name)," ","DELETE"!==e.issueLog.action?"REMOVE"===e.issueLog.action?f.default.createElement(f.default.Fragment,null,f.default.createElement("span",null,(0,u.t)("\u79fb\u9664\u4e86{{name}}",{name:e.issueLog.targetName})),f.default.createElement(h.TooltipTrigger,{title:e.issueLog.content.val},f.default.createElement("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},e.issueLog.content.val))):"\u65e0"===e.issueLog.content.val?f.default.createElement("span",null,(0,u.t)("\u79fb\u9664\u4e86{{name}}",{name:e.issueLog.targetName})):f.default.createElement(f.default.Fragment,null,f.default.createElement("span",null,(0,u.t)("\u66f4\u65b0\u4e86{{name}}\u4e3a",{name:e.issueLog.targetName})),f.default.createElement(h.TooltipTrigger,{title:e.issueLog.content.val},f.default.createElement("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},e.issueLog.content.val))):f.default.createElement(f.default.Fragment,null,f.default.createElement("span",null,(0,u.t)("\u5e9f\u5f03\u4e86{{name}}",{name:e.issueLog.targetName})),f.default.createElement(h.TooltipTrigger,{title:e.issueLog.content.val},f.default.createElement("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},e.issueLog.content.val))),f.default.createElement("span",{className:v.time},(0,m.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=y,y.propTypes={item:d.default.object}},"0uC9":function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=n(a("2IoN")),v=a("1qdz");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E={UPDATE:(0,u.t)("\u66f4\u65b0\u4e86")},y=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item,t=e.id,a=e.creator,n=e.issueLog,r=n.action,o=n.content,i=e.createdAt;return f.default.createElement("div",{className:v.listItem,key:t},f.default.createElement("div",{className:v.dot}),f.default.createElement("div",{className:v.content},f.default.createElement(m.default,{className:"mr-10 ".concat(v.icon)}),f.default.createElement("span",{className:v.user},a.name),e.issueLog&&1===e.issueLog.old?"\u3010\u6e90\u3011":"",f.default.createElement("span",null,E[r],(0,u.t)("\u8fdb\u5ea6\u4e3a")," ",o.progress,"%"),f.default.createElement("span",{className:v.time},(0,p.timeFormat)(i,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=y,y.propTypes={item:d.default.object}},"1+2J":function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=n(a("u3SJ")),v=a("1qdz");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E={GENERATION_PRD_REQUIREMENT:(0,u.t)("\u4e00\u952e\u751f\u6210\u4ea7\u54c1\u9700\u6c42"),GENERATION_REQUIREMENT:(0,u.t)("\u4e00\u952e\u751f\u6210\u7528\u6237\u6545\u4e8b"),GENERATION_MISSION:(0,u.t)("\u4e00\u952e\u751f\u6210\u4efb\u52a1"),GENERATED:(0,u.t)("\u4e00\u952e\u751f\u6210")},y=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item;return f.default.createElement("div",{className:v.listItem,key:e.id},f.default.createElement("div",{className:v.dot}),f.default.createElement("div",{className:v.content},f.default.createElement(m.default,{className:"mr-10 ".concat(v.icon)}),f.default.createElement("span",{className:v.user},e.creator.name),e.issueLog&&1===e.issueLog.old?"\u3010\u6e90\u3011":"",f.default.createElement("span",{className:v.msg,title:e.issueLog.content.val},"GENERATED"===e.issueLog.action?"".concat(E[e.issueLog.action]," ").concat((0,u.t)(e.issueTypeName)):"".concat(E[e.issueLog.action]," \u3010").concat((0,u.t)(e.issueLog.content.generationName),"\u3011")),f.default.createElement("span",{className:v.time},(0,p.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=y,y.propTypes={item:d.default.object}},"1+AE":function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("0l/t");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=T(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),f=n(a("Yrbo")),p=n(a("246l")),m=n(a("yZ+p")),v=n(a("17x9")),h=n(a("9XYX")),g=n(a("yF+s")),E=n(a("K2gz")),y=a("LvDl"),b=a("qEFv"),I=a("nuIr"),S=a("nuIr");function T(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(T=function(e){return e?a:t})(e)}function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var C=function(e){(0,l.default)(a,e);var t=w(a);function a(e){var n;return(0,o.default)(this,a),(n=t.call(this,e)).inputRef=d.default.createRef(),n.debounceChange=(0,y.debounce)((function(e){var t=n.props.onChange;"function"===typeof t&&t(e)}),200),n.handleChange=function(e){n.setState({inputValue:e.target.value}),n.debounceChange({target:{value:e.target.value}})},n.handleCreate=(0,y.debounce)((function(e){if(!n.state.isShiftKey){var t=n.props.onCreate;"function"===typeof t&&t()}}),300),n.handleCancel=function(){var e=n.props.onCancel;"function"===typeof e&&e()},n.handleSelect=function(e){if(1===e.id){var t=n.props.onFullCreate;"function"===typeof t&&t()}},n.handleSelectAffairs=function(e){var t=n.props.onSelect;"function"===typeof t&&t(e)},n.handleKeyDown=function(e){27===e.keyCode&&n.props.onCancel&&n.props.onCancel()},n.fullCreate=function(e){if(n.setState({isShiftKey:e.shiftKey}),document.activeElement===n.inputRef.current.input&&e.shiftKey&&13===e.keyCode){var t=n.props.onFullCreate;"function"===typeof t&&t()}},n.state={inputValue:e.value||"",isShiftKey:!1},n}return(0,i.default)(a,[{key:"componentDidUpdate",value:function(e){this.props.value!==e.value&&this.setState({inputValue:this.props.value})}},{key:"render",value:function(){var e,t=this.props,a=t.placeholder,n=t.multiple,r=t.className,o=t.top,i=t.inputClassName,l=t.noIcon,c=t.currentProjectCooperateSettings,s=t.creationType,v=t.handleAssociate,y=t.id,T=t.associatePlaceholder,w=t.willCreateIssueType,C=t.onSelectIssueType,O=t.getContainer,N=t.portalContainer,P=t.portalAlign,j=t.isPortal,D=t.portalProps,k=c.ISSUE_TYPES.filter((function(e){return S.KA_DEFECT_EDIT_ENTRY_DISABLE?e.issueType===I.ISSUE_TYPE.DEFECT:e.issueType!==I.ISSUE_TYPE.EPIC&&e.issueType!==I.ISSUE_TYPE.SUB_TASK}));return e=l?null:n?d.default.createElement(b.CategorySelect,{value:w,onSelect:C,options:k,getContainer:O,portalContainer:N,portalAlign:P,isPortal:j,portalProps:D}):s&&"DEFECT"===s?d.default.createElement("div",{className:h.default.defectIcon}):d.default.createElement("div",{className:h.default.subTasksIcon}),d.default.createElement("div",{className:r},d.default.createElement("div",{id:y||"affairs-input",className:(0,E.default)(f.default.root,n?f.default.multiple:"")},d.default.createElement(m.default,{value:this.state.inputValue,className:(0,E.default)(f.default.customInput,i),ref:this.inputRef,onChange:this.handleChange,prefix:e,suffix:d.default.createElement("div",{className:f.default.operation},d.default.createElement(g.default,{onSelect:this.handleSelect,onClick:this.handleCreate,top:o,willCreateIssueType:w,creationType:s}),d.default.createElement("div",{className:(0,E.default)(f.default.cancelBtn,p.default.newButton,p.default.default,p.default.h24),onClick:this.handleCancel},(0,u.t)("\u53d6\u6d88"))),size:"medium",placeholder:a,onPressEnter:this.handleCreate,onKeyDown:this.handleKeyDown})),v&&d.default.createElement("div",{className:f.default.associate,onClick:v},T||(0,u.t)("\u5173\u8054\u5df2\u6709\u4e8b\u9879")))}},{key:"componentDidMount",value:function(){var e,t;null===(e=this.inputRef)||void 0===e||null===(t=e.current)||void 0===t||t.focus(),document.body.addEventListener("keydown",this.fullCreate)}},{key:"focus",value:function(){var e,t;null===(e=this.inputRef)||void 0===e||null===(t=e.current)||void 0===t||t.focus()}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("keydown",this.fullCreate)}}]),a}(d.Component);C.propTypes={id:v.default.string,className:v.default.string,inputClassName:v.default.string,placeholder:v.default.string,value:v.default.string,multiple:v.default.bool,creationType:v.default.string,onCancel:v.default.func,onCreate:v.default.func,onFullCreate:v.default.func,onChange:v.default.func,onSelect:v.default.func,top:v.default.bool,noIcon:v.default.bool,selectOptionsFixed:v.default.bool,currentProject:v.default.object,handleAssociate:v.default.func,associatePlaceholder:v.default.string,currentProjectCooperateSettings:v.default.object,defaultSelected:v.default.any,willCreateIssueType:v.default.any,onSelectIssueType:v.default.func,getContainer:v.default.any,portalContainer:v.default.any,portalAlign:v.default.any,isPortal:v.default.bool,portalProps:v.default.any};var O=C;t.default=O},"15vB":function(e,t,a){e.exports={item:"item-239boMx8_Q","item-hovering":"item-hovering-oSdUWhQwWU",itemHovering:"item-hovering-oSdUWhQwWU","item-icon":"item-icon-2BiANec2Ob",itemIcon:"item-icon-2BiANec2Ob","item-code":"item-code-2RmJRxoGlU",itemCode:"item-code-2RmJRxoGlU","item-name":"item-name-2b4rYShuXD",itemName:"item-name-2b4rYShuXD","item-date":"item-date-2sePg3bRFv",itemDate:"item-date-2sePg3bRFv","item-priority":"item-priority-166FVkzjZq",itemPriority:"item-priority-166FVkzjZq","item-status":"item-status-2lyUl11Tz1",itemStatus:"item-status-2lyUl11Tz1","item-assignee":"item-assignee-2NeuunRnEJ",itemAssignee:"item-assignee-2NeuunRnEJ","item-avatar":"item-avatar-FOd12gYPvs",itemAvatar:"item-avatar-FOd12gYPvs"}},"1hCk":function(e,t,a){e.exports={wrapper:"wrapper-314kD18k9t","close-button":"close-button-uFfRZXHUjx",closeButton:"close-button-uFfRZXHUjx","modal-loading":"modal-loading-pbE7r5Izk4",modalLoading:"modal-loading-pbE7r5Izk4",main:"main-3nLWQuSpn7","main-header":"main-header-3Sz4228zoA",mainHeader:"main-header-3Sz4228zoA","has-project-info":"has-project-info-trCanwT6bX",hasProjectInfo:"has-project-info-trCanwT6bX","header-info-section":"header-info-section-1tP7GxHpEN",headerInfoSection:"header-info-section-1tP7GxHpEN","project-info":"project-info-1KyAjSTtRy",projectInfo:"project-info-1KyAjSTtRy","type-icon":"type-icon-ns_FtnfBHk",typeIcon:"type-icon-ns_FtnfBHk","header-title-section":"header-title-section-_rWcJRWKVH",headerTitleSection:"header-title-section-_rWcJRWKVH","title-input":"title-input-3nDrtarlZq",titleInput:"title-input-3nDrtarlZq","attention-wrapper":"attention-wrapper-hHGW2v3BI6",attentionWrapper:"attention-wrapper-hHGW2v3BI6","main-body":"main-body-3F59le6UeK",mainBody:"main-body-3F59le6UeK","toolbar-portal":"toolbar-portal-fHp_mHGyBR",toolbarPortal:"toolbar-portal-fHp_mHGyBR",fixed:"fixed-bULfS4XHYa","description-placeholder":"description-placeholder-3-h6CS_ZYp",descriptionPlaceholder:"description-placeholder-3-h6CS_ZYp","editor-container":"editor-container-3406E7dQei",editorContainer:"editor-container-3406E7dQei","custom-section-zindex":"custom-section-zindex-2emXIO7ECC",customSectionZindex:"custom-section-zindex-2emXIO7ECC","editor-height":"editor-height-4r72-hrouE",editorHeight:"editor-height-4r72-hrouE","main-footer":"main-footer-34ALbV4EF7",mainFooter:"main-footer-34ALbV4EF7",sticky:"sticky-1YaSsZrqGk",nofile:"nofile-1_PEkaz94C","attachement-section-container":"attachement-section-container-JXR-qOk0Wv",attachementSectionContainer:"attachement-section-container-JXR-qOk0Wv","section-header":"section-header-34V-XZpe2c",sectionHeader:"section-header-34V-XZpe2c",title:"title-2JbPdzRc03","upload-button":"upload-button-vq5k_1asMQ",uploadButton:"upload-button-vq5k_1asMQ","import-out-resource-wrap":"import-out-resource-wrap-3Fkixe_Bu7",importOutResourceWrap:"import-out-resource-wrap-3Fkixe_Bu7","attachment-section":"attachment-section-3wEAMc9BP2",attachmentSection:"attachment-section-3wEAMc9BP2","section-placeholder":"section-placeholder-1QH9AjPcNk",sectionPlaceholder:"section-placeholder-1QH9AjPcNk","attachment-wrapper":"attachment-wrapper-1Sa-10mmtT",attachmentWrapper:"attachment-wrapper-1Sa-10mmtT","left-border":"left-border-1l9tbtOL3w",leftBorder:"left-border-1l9tbtOL3w","right-border":"right-border-3H4Z7NSrye",rightBorder:"right-border-3H4Z7NSrye","attachment-list":"attachment-list-30WFL5AzPB",attachmentList:"attachment-list-30WFL5AzPB","attachment-item":"attachment-item-XV531Xq3dE",attachmentItem:"attachment-item-XV531Xq3dE",next:"next-1o_NdX2anB",pre:"pre-3N1m46LY5G","operations-wrapper":"operations-wrapper-12sYyfq745",operationsWrapper:"operations-wrapper-12sYyfq745","operation-button":"operation-button-8xmELzkkfl",operationButton:"operation-button-8xmELzkkfl",wider:"wider-3ZmsCxPZKq",key:"key-3U85XBSIr7",enter:"enter-2dF_4IE6Ff",switch:"switch-1c4p1I1TdB","switch-text":"switch-text-1bgIBiKP2N",switchText:"switch-text-1bgIBiKP2N",aside:"aside-2nkxZPdzdu","aside-content":"aside-content-1hAX_FsCKj",asideContent:"aside-content-1hAX_FsCKj","issue-property-container":"issue-property-container-3OMHEilH_K",issuePropertyContainer:"issue-property-container-3OMHEilH_K","has-no-border":"has-no-border-27vIQ5TY2r",hasNoBorder:"has-no-border-27vIQ5TY2r","issue-property-section":"issue-property-section-TnsBZWqzSn",issuePropertySection:"issue-property-section-TnsBZWqzSn",highlight:"highlight-1ksWN4JUbM","divider-line":"divider-line-2l901dxbLc",dividerLine:"divider-line-2l901dxbLc","dropdown-style":"dropdown-style-2yPMKC_8BL",dropdownStyle:"dropdown-style-2yPMKC_8BL","trigger-style":"trigger-style-idexYfIyi7",triggerStyle:"trigger-style-idexYfIyi7","panel-custom-style":"panel-custom-style-qwF9U4XuHQ",panelCustomStyle:"panel-custom-style-qwF9U4XuHQ","title-style":"title-style-jQxtBFK6jv",titleStyle:"title-style-jQxtBFK6jv","iteration-wrapper":"iteration-wrapper-38OuLeckr7",iterationWrapper:"iteration-wrapper-38OuLeckr7","date-picker":"date-picker-3sntwx3RmT",datePicker:"date-picker-3sntwx3RmT"}},"1jgs":function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d"),a("bWfx");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("PJYZ")),c=n(a("7W2i")),s=n(a("a1gu")),u=n(a("Nsbk")),d=a("mVeg"),f=n(a("17x9")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=y(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),m=n(a("ca6d")),v=n(a("rNuH")),h=n(a("6D7B")),g=a("FaIw"),E=a("1qdz");function y(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(y=function(e){return e?a:t})(e)}function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var I=function(e){(0,c.default)(a,e);var t=b(a);function a(e){var n;return(0,o.default)(this,a),(n=t.call(this,e)).state={show:!1},n.onShow=n.onShow.bind((0,l.default)(n)),n.onHide=n.onHide.bind((0,l.default)(n)),n.renderSubContent=n.renderSubContent.bind((0,l.default)(n)),n}return(0,i.default)(a,[{key:"onShow",value:function(){this.setState({show:!0})}},{key:"onHide",value:function(){this.setState({show:!1})}},{key:"renderContent",value:function(e){return e.content.latest?p.default.createElement("span",{className:E.msg,title:e.content.latest},(0,d.t)("\u66f4\u65b0\u4e86\u6807\u7b7e\u4e3a -")," ",e.content.latest):p.default.createElement("span",{className:E.msg},(0,d.t)("\u79fb\u9664\u4e86\u6240\u6709\u6807\u7b7e"))}},{key:"renderButton",value:function(e){return e.content.actions.length>0&&(this.state.show?p.default.createElement(h.default,{onClick:this.onHide,className:E.moreButton}):p.default.createElement(v.default,{onClick:this.onShow,className:E.moreButton}))}},{key:"renderSubContent",value:function(e,t){return p.default.createElement("div",{className:E.subContent,key:t},p.default.createElement(m.default,{className:"".concat("ADD"===e.action?E.green:E.red," mr-5")}),p.default.createElement("span",null,"ADD"===e.action?(0,d.t)("\u6dfb\u52a0\u4e86\u6807\u7b7e -"):(0,d.t)("\u79fb\u9664\u4e86\u6807\u7b7e -")," ",e.name))}},{key:"render",value:function(){var e=this.props.item,t=e.issueLog.content.actions;return p.default.createElement("div",{className:E.listItem,key:e.id},p.default.createElement("div",{className:E.dot}),p.default.createElement("div",{className:E.multiContent},p.default.createElement("div",{className:E.content},p.default.createElement(m.default,{className:"mr-10 ".concat(E.icon)}),p.default.createElement("span",{className:E.user},e.creator.name),e.issueLog&&1===e.issueLog.old?"\u3010\u6e90\u3011":"",this.renderContent(e.issueLog),p.default.createElement("span",{className:E.time},(0,g.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm")),this.renderButton(e.issueLog)),this.state.show&&p.default.createElement("div",null,t.map(this.renderSubContent))))}}]),a}(p.Component);t.default=I,I.propTypes={item:f.default.object}},"1lUc":function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),f=n(a("17x9")),p=n(a("sftu")),m=n(a("A2I3")),v=n(a("zmh9"));function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.show,n=e.onClose,r=e.onConfirm;return d.default.createElement(p.default,{closeButton:!0,outsideClickCloseable:!1,show:a,onHide:n,className:m.default.customModal},d.default.createElement("div",{className:m.default.title},t,"?"),d.default.createElement("div",{className:m.default.btnArea},d.default.createElement(v.default,{className:m.default.customBtn,onClick:r},(0,u.t)("\u786e\u5b9a")),d.default.createElement(v.default,{empty:!0,onClick:n},(0,u.t)("\u53d6\u6d88"))))}}]),a}(d.Component);E.propTypes={title:f.default.string,show:f.default.bool,onConfirm:f.default.func,onClose:f.default.func};var y=E;t.default=y},"1qdz":function(e,t,a){e.exports={header:"header-2oe6Bus1g-",title:"title-1o-WFmbJe2","divide-line":"divide-line-3LpyIaJspt",divideLine:"divide-line-3LpyIaJspt",right:"right-2EjPaQdvla","left-icon":"left-icon-1u6-iAcQf6",leftIcon:"left-icon-1u6-iAcQf6",container:"container-1-olOUiXhz","container-hide-title":"container-hide-title-27_Dwd8dru",containerHideTitle:"container-hide-title-27_Dwd8dru","comment-below":"comment-below-cWvdfaKFgP",commentBelow:"comment-below-cWvdfaKFgP","no-comment":"no-comment-kHwWQ-Dgig",noComment:"no-comment-kHwWQ-Dgig",list:"list-1hcrDD8PV4","list-item":"list-item-ZbBQ2HeJJN",listItem:"list-item-ZbBQ2HeJJN","multi-content":"multi-content-Cx8Oy0GVM3",multiContent:"multi-content-Cx8Oy0GVM3",content:"content-1qc7nWwL99",icon:"icon-21XxlD8kFo","issue-review-icon":"issue-review-icon-1IWwA8GJ6W",issueReviewIcon:"issue-review-icon-1IWwA8GJ6W",content2:"content2-3_6d4au8ab","sub-content":"sub-content-2Sx3PMPJEn",subContent:"sub-content-2Sx3PMPJEn",user:"user-23mH0wC7Us",gray:"gray-2TTA88HyPP",green:"green-gqHPsnrg6S",red:"red-3vSmWR_ori",msg:"msg-35n9k9sx0b",time:"time-1MtJU6b7pa",dot:"dot-3MJ4BJArXW","comment-item":"comment-item-B0VMgaJpV9",commentItem:"comment-item-B0VMgaJpV9","comment-container":"comment-container-1dsesOWN5a",commentContainer:"comment-container-1dsesOWN5a","custom-avatar-wrapper":"custom-avatar-wrapper-1131Ti5rgw",customAvatarWrapper:"custom-avatar-wrapper-1131Ti5rgw","avatar-size":"avatar-size-2SyNq6t-bp",avatarSize:"avatar-size-2SyNq6t-bp","tm-icon":"tm-icon-28EW7DycbV",tmIcon:"tm-icon-28EW7DycbV","tm-icon-image":"tm-icon-image--WmXHbtEQ7",tmIconImage:"tm-icon-image--WmXHbtEQ7",avatar:"avatar-1itDtueB5m","comment-box":"comment-box-218Y0sGunO",commentBox:"comment-box-218Y0sGunO",achor:"achor-VM97xQFCG2","current-comment":"current-comment-2lGk_2E8NJ",currentComment:"current-comment-2lGk_2E8NJ","comment-content":"comment-content-22FuJDUj2n",commentContent:"comment-content-22FuJDUj2n","comment-button":"comment-button-2J8F1vh5sR",commentButton:"comment-button-2J8F1vh5sR","meeting-content":"meeting-content-VkvQsqXH05",meetingContent:"meeting-content-VkvQsqXH05","meeting-title":"meeting-title-3MmMWQ80YV",meetingTitle:"meeting-title-3MmMWQ80YV",bold:"bold-10cporSqLp",body:"body-Va2BMCwQ4P",row:"row-cqsc30RNEI",label:"label-1SkthhL_gZ",text:"text-2sk97B48js",footer:"footer-1vddYHSpcb","meeting-icon":"meeting-icon-3MNavz8KPN",meetingIcon:"meeting-icon-3MNavz8KPN","comment-stat":"comment-stat-2vMy6ghUGL",commentStat:"comment-stat-2vMy6ghUGL","comment-user":"comment-user-Vw7mLD3RDb",commentUser:"comment-user-Vw7mLD3RDb","comment-user-detail":"comment-user-detail-2MM92Gt_I_",commentUserDetail:"comment-user-detail-2MM92Gt_I_","comment-user-name":"comment-user-name-2hiAy-zUxq",commentUserName:"comment-user-name-2hiAy-zUxq","comment-toggle":"comment-toggle-3g_OIwJfWi",commentToggle:"comment-toggle-3g_OIwJfWi","with-arrow":"with-arrow-32L7y9N-YQ",withArrow:"with-arrow-32L7y9N-YQ","comment-input-container":"comment-input-container-2F3lC2ulyI",commentInputContainer:"comment-input-container-2F3lC2ulyI","comment-input":"comment-input-1f8ipiz4_W",commentInput:"comment-input-1f8ipiz4_W",child:"child-2XdnLEBNb1","child-avatar":"child-avatar-2TDCZb1Krd",childAvatar:"child-avatar-2TDCZb1Krd","child-content":"child-content-2cKo4v1TmK",childContent:"child-content-2cKo4v1TmK",smileo:"smileo-3cF5KUbyq0","arrow-right":"arrow-right-35U9hoiiuU",arrowRight:"arrow-right-35U9hoiiuU",history:"history-3Gm3I8iU6D","all-message":"all-message-1zOl2-XTIr",allMessage:"all-message-1zOl2-XTIr","more-button":"more-button-347dl6VxF5",moreButton:"more-button-347dl6VxF5","create-icon":"create-icon-2GLDUMN7KC",createIcon:"create-icon-2GLDUMN7KC","status-icon":"status-icon-1j2Z1eZdkw",statusIcon:"status-icon-1j2Z1eZdkw","photo-icon":"photo-icon-2WvPn2OVvn",photoIcon:"photo-icon-2WvPn2OVvn","tag-icon":"tag-icon-X5STN2aAo2",tagIcon:"tag-icon-X5STN2aAo2","people-icon":"people-icon-2YRqJVxeF8",peopleIcon:"people-icon-2YRqJVxeF8","priority-icon":"priority-icon-1Ne0-IlatB",priorityIcon:"priority-icon-1Ne0-IlatB","module-icon":"module-icon-2I3MDjUl1O",moduleIcon:"module-icon-2I3MDjUl1O","calendar-icon":"calendar-icon-3ViyUEzHW2",calendarIcon:"calendar-icon-3ViyUEzHW2","description-icon":"description-icon-2uXx8KRluF",descriptionIcon:"description-icon-2uXx8KRluF","edit-icon":"edit-icon-18YHdTMqBl",editIcon:"edit-icon-18YHdTMqBl","watch-icon":"watch-icon-sYPxIShQwJ",watchIcon:"watch-icon-sYPxIShQwJ","type-icon":"type-icon-2WZ6G1oWnk",typeIcon:"type-icon-2WZ6G1oWnk","attach-icon":"attach-icon-21qCp_ddW5",attachIcon:"attach-icon-21qCp_ddW5","work-hours-icon":"work-hours-icon-LWxKC4Lsxq",workHoursIcon:"work-hours-icon-LWxKC4Lsxq","link-icon":"link-icon-1-hXnklBbk",linkIcon:"link-icon-1-hXnklBbk","unlink-icon":"unlink-icon-3JmWjX3fll",unlinkIcon:"unlink-icon-3JmWjX3fll","delete-icon":"delete-icon-1o6k77dRQU",deleteIcon:"delete-icon-1o6k77dRQU","property-icon":"property-icon-1_sKo8OTiJ",propertyIcon:"property-icon-1_sKo8OTiJ","start-icon":"start-icon-Y9b4_4pDfb",startIcon:"start-icon-Y9b4_4pDfb","done-icon":"done-icon-1yiri0AC1_",doneIcon:"done-icon-1yiri0AC1_","iteration-icon":"iteration-icon-2UVawrvajT",iterationIcon:"iteration-icon-2UVawrvajT","flash-content":"flash-content-SHiJbCoZSz",flashContent:"flash-content-SHiJbCoZSz",flash:"flash-3Ty4toB65X",flashToggle:"flashToggle-2B1Am2ZE_E","empty-content":"empty-content-2mY9pzRwuH",emptyContent:"empty-content-2mY9pzRwuH","history-record":"history-record-3lc7OCc19O",historyRecord:"history-record-3lc7OCc19O","history-icon":"history-icon-3RPHHCS-S4",historyIcon:"history-icon-3RPHHCS-S4","custom-action":"custom-action--GG69mp7CG",customAction:"custom-action--GG69mp7CG","more-dot":"more-dot-1DvtsNQnWd",moreDot:"more-dot-1DvtsNQnWd","activity-tab":"activity-tab-5BJhrjHENw",activityTab:"activity-tab-5BJhrjHENw","avatar-dot":"avatar-dot-1tNKdKS9pe",avatarDot:"avatar-dot-1tNKdKS9pe","work-hour-content":"work-hour-content-1WtHQvIWr-",workHourContent:"work-hour-content-1WtHQvIWr-",name:"name-1-gHkskqOC",desc:"desc-a5q6Dtux25",operation:"operation-3xelKBQ4j8",gap:"gap-2uA39NLhOQ",edit:"edit-1KCuUYvGLs",del:"del-3NIU-J_rId","is-edited":"is-edited-1asFHtUd9v",isEdited:"is-edited-1asFHtUd9v","child-container":"child-container-3AwKHncTX2",childContainer:"child-container-3AwKHncTX2","comment-icon":"comment-icon-82jBmkB08S",commentIcon:"comment-icon-82jBmkB08S",clock:"clock-1bnP4BEptA",comment:"comment-2Y00epmfyV",reply:"reply-1mKrJw2fc3",remove:"remove-2riEsK9-o0"}},"27RU":function(e,t,a){e.exports={wrapper:"wrapper-23g3Hd5JW2",container:"container-Gxe5wxQGkv",title:"title-13jS5H53mz",line:"line-nN8GFqAYQ-",label:"label-4YwN3qRfEr",highlight:"highlight-ZhFvzBvrr5",divider:"divider-2bua-gP9-1",procedure:"procedure-1Eoq6z7Su4","procedure-line":"procedure-line-2YU9GEvis4",procedureLine:"procedure-line-2YU9GEvis4","procedure-title":"procedure-title-1LC0W6NQ54",procedureTitle:"procedure-title-1LC0W6NQ54","procedure-title-icon":"procedure-title-icon-2rSBufKxre",procedureTitleIcon:"procedure-title-icon-2rSBufKxre","procedure-title-name":"procedure-title-name-3w4UzhDIYi",procedureTitleName:"procedure-title-name-3w4UzhDIYi","procedure-user":"procedure-user-3cy2F7cIf9",procedureUser:"procedure-user-3cy2F7cIf9","procedure-user-item":"procedure-user-item-vqvWLfb7Sz",procedureUserItem:"procedure-user-item-vqvWLfb7Sz",upload:"upload-143QzIwz6Z","upload-icon":"upload-icon-1Xjfv3Znfp",uploadIcon:"upload-icon-1Xjfv3Znfp",button:"button-1zA4i6rhYL",empty:"empty-2Z0Nf8_3lE"}},"28Uz":function(e,t,a){"use strict";a("I5cv"),a("RW0V"),a("ioFf"),a("mYba"),a("jm62"),a("EK0E"),a("XfO3"),a("yt8O"),a("rGqo");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("0l/t"),a("CX2u"),a("Btvt"),a("VRzm"),a("f3/d"),a("bWfx");var o=n(a("lSNA")),i=n(a("lwsE")),l=n(a("W8MJ")),c=n(a("PJYZ")),s=n(a("7W2i")),u=n(a("a1gu")),d=n(a("Nsbk")),f=a("mVeg"),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=j(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),m=n(a("17x9")),v=n(a("mtLS")),h=n(a("MOjz")),g=a("7FZc"),E=n(a("Qkhu")),y=a("DKcV"),b=a("nuIr"),I=n(a("K2gz")),S=n(a("P5Jw")),T=a("xgZS"),w=n(a("T8xO")),C=(n(a("WN9O")),n(a("KUqB")),a("JTQj")),O=(a("nuIr"),a("uelK")),N=a("dBa0"),P=a("9+7+");function j(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(j=function(e){return e?a:t})(e)}function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var M=function(e){(0,s.default)(a,e);var t=R(a);function a(e){var n;return(0,i.default)(this,a),(n=t.call(this,e)).handleMouseEnter=function(){1!==n.getRequirementOptions().length&&n.setState({requirementsShow:!0})},n.handleMouseLeave=function(){n.setState({requirementsShow:!1})},n.requirementDropdownRef=(0,p.createRef)(),n.getRequirementOptions=function(){return n.props.currentProjectCooperateSettings.ISSUE_TYPES.filter((function(e){return"REQUIREMENT"===e.issueType}))},n.openConfirmModal=function(){n.setState({showModal:!0}),n.props.fetchCustomTip&&(n.setState({isLoading:!0}),n.props.fetchCustomTip().then((function(e){n.setState({customDelInfo:{message:e.msg,canDelete:e.canDelete,associateDatas:e.associateDatas}})})).finally((function(){n.setState({isLoading:!1})})))},n.state={expanded:!1,showModal:!1,requirementsShow:!1,slotConfiguration:{},isLoading:!1,customDelInfo:{message:"",canDelete:!0,associateDatas:[]}},n.toggleExpand=n.toggleExpand.bind((0,c.default)(n)),n.openPanel=n.openPanel.bind((0,c.default)(n)),n.closePanel=n.closePanel.bind((0,c.default)(n)),n}return(0,l.default)(a,[{key:"componentDidMount",value:function(){this.getSlotInfo()}},{key:"getSlotInfo",value:function(){var e=this;(0,O.getSlotConfiguration)({slot:N.SLOTS.COLLABORATION_DETAIL_DROPDOWN_MENU_ONE,type:"CURRENT"}).then((function(t){var a=t.data;e.setState({slotConfiguration:a||{}})}))}},{key:"componentDidUpdate",value:function(e){this.props.controlHideMore&&e.controlHideMore!==this.props.controlHideMore&&this.closePanel()}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.expanded,r=a.showModal,o=(a.requirementsShow,a.slotConfiguration),i=a.customDelInfo,l=a.isLoading,c=this.props,s=c.type,u=c.deleteFunction,d=c.cancelRelatedFunction,m=c.hasParent,T=c.hasEpic,O=c.handleRemoveEpic,j=c.handleEpic,D=c.currentProjectCooperateSettings,k=c.onIsFullWidthChange,R=c.isFullWidth,M=c.isShowFullWidthOption,A=c.isPermissible,L=(c.convertIntoRequirement,c.isSensitiveAdmin),x=c.isSensitive,_=c.operateSensitive,F=c.premiumVersion,W=c.viewDescriptionVersion,B=c.copyLink,H=c.copyTitle,U=c.issueTypeDetail,Y=c.slotCallback,q=c.copyCommit,G=c.copyFunction,z=(c.copyIssues,D&&D.EPIC===b.MODULE_SWITCH.OPENED),V=A([{function:y.ProjectPermissionFunction.PROJECT_ISSUE,action:y.ProjectPermissionAction.UPDATE}]),Z=A([{function:y.ProjectPermissionFunction.PROJECT_ISSUE,action:y.ProjectPermissionAction.DELETE}]);return p.default.createElement("div",{className:(0,I.default)(v.default.root,h.default.root,n&&v.default.expandedStyle)},p.default.createElement(g.TooltipTrigger,{title:(0,f.t)("\u66f4\u591a")},p.default.createElement("div",{className:v.default.trigger,onClick:this.toggleExpand})),p.default.createElement(E.default,{show:r,associateDatas:i.associateDatas,type:s,issueTypeDetail:U,text:(0,f.t)("\u5220\u9664\u4e8b\u9879"),onConfirm:u,onClose:function(){t.setState({showModal:!1})},hasType:!i.message,customTip:i.message,allowDelete:i.canDelete,isLoading:l}),n&&p.default.createElement("ul",{className:(0,I.default)(v.default.dropdown,h.default.dropdown)},p.default.createElement(S.default,{text:B},p.default.createElement("li",{className:h.default.item,onClick:this.onCopy},(0,f.t)("\u590d\u5236\u94fe\u63a5"))),p.default.createElement("li",{className:v.default.divideLine}),p.default.createElement(S.default,{text:"".concat(H,"\r\n").concat(B)},p.default.createElement("li",{className:h.default.item,onClick:this.onCopy},(0,f.t)("\u590d\u5236\u6807\u9898\u548c\u94fe\u63a5"))),P.KA_ISSUE_COPY_COMMITID_SWITCH&&p.default.createElement(S.default,{text:q},p.default.createElement("li",{className:h.default.item,onClick:this.onCopy},(0,f.t)("\u590d\u5236 commit \u4fe1\u606f"))),P.KA_DEFECT_COPY_SWITCH&&"DEFECT"===s&&p.default.createElement("li",{className:h.default.item,onClick:G},(0,f.t)("\u590d\u5236\u7f3a\u9677")),z&&m&&V&&p.default.createElement(p.default.Fragment,null,p.default.createElement("li",{className:v.default.divideLine}),p.default.createElement("li",{onClick:d},(0,f.t)("\u53d6\u6d88\u5173\u8054\u7236\u9700\u6c42"))),z&&V&&p.default.createElement(p.default.Fragment,null,p.default.createElement("li",{className:v.default.divideLine}),p.default.createElement("li",{onClick:j,className:h.default.item},(0,f.t)("\u66f4\u6539\u53f2\u8bd7"))),z&&T&&V&&p.default.createElement(p.default.Fragment,null,p.default.createElement("li",{onClick:O,className:h.default.item},(0,f.t)("\u53d6\u6d88\u5173\u8054\u53f2\u8bd7"))),!1,F&&L&&p.default.createElement("li",{className:v.default.divideLine}),F&&L&&x&&p.default.createElement("li",{className:h.default.item,onClick:_},(0,f.t)("\u53d6\u6d88\u6807\u8bb0\u654f\u611f\u5185\u5bb9")),F&&L&&!x&&p.default.createElement("li",{className:(0,I.default)(h.default.item,v.default.addSensitive),onClick:_},(0,f.t)("\u6807\u8bb0\u4e3a\u654f\u611f\u5185\u5bb9"),p.default.createElement(g.TooltipTrigger,{placement:"top",title:(0,f.t)("\u67e5\u770b\u5e2e\u52a9\u6587\u6863")},p.default.createElement("div",{onClick:function(e){e.stopPropagation(),window.open((0,C.getHelp)("/docs/pro/access-audit.html"),"_blank")},className:v.default.helpIcon}))),p.default.createElement("li",{className:v.default.divideLine}),p.default.createElement("li",{className:h.default.item,onClick:W},(0,f.t)("\u5386\u53f2\u7248\u672c")),M&&p.default.createElement(p.default.Fragment,null,p.default.createElement("li",{className:(0,I.default)(v.default.divideLine,h.default.minWidthHide)}),p.default.createElement("li",{className:(0,I.default)(h.default.item,h.default.minWidthHide,v.default.item),onClick:function(e){e.stopPropagation()},ref:this.fullScreenRef},(0,f.t)("\u5168\u5bbd\u663e\u793a"),p.default.createElement(g.TooltipTrigger,{title:(0,f.t)("\u63cf\u8ff0\u533a\u57df\u4e0d\u9650\u5236\u6700\u5927\u5bbd\u5ea6\u663e\u793a")},p.default.createElement("span",{className:(0,I.default)(v.default.helpIcon,v.default.fullScreenHelpIcon)})),p.default.createElement(w.default,{checked:R,onChange:function(e){k&&k(e),t.closePanel()}}))),(null===o||void 0===o||null===(e=o.slot)||void 0===e?void 0:e.identity)&&p.default.createElement(p.default.Fragment,null,p.default.createElement("li",{className:v.default.divideLine}),p.default.createElement("li",{className:v.default.item,onClick:function(){Y(N.SLOTS.COLLABORATION_DETAIL_DROPDOWN_MENU_ONE)}},null===o||void 0===o?void 0:o.triggerText)),Z&&p.default.createElement(p.default.Fragment,null,p.default.createElement("li",{className:v.default.divideLine}),p.default.createElement("li",{className:F&&L?(0,I.default)(v.default.deleteStyle,v.default.border):v.default.deleteStyle,onClick:this.openConfirmModal},(0,f.t)("\u5220\u9664")))))}},{key:"toggleExpand",value:function(e){var t=this.state.expanded,a=this.props.onClickTrigger;e.stopPropagation(),a&&a(),t?this.closePanel():this.openPanel()}},{key:"openPanel",value:function(){this.setState({expanded:!0}),document.addEventListener("click",this.closePanel)}},{key:"closePanel",value:function(){this.setState({expanded:!1,requirementsShow:!1}),document.removeEventListener("click",this.closePanel)}},{key:"onCopy",value:function(e){e.stopPropagation(),(0,T.success)((0,f.t)("\u5df2\u590d\u5236"))}}]),a}(p.Component);M.propTypes=k(k({projectID:m.default.number,type:m.default.string,copyFunction:m.default.func,deleteFunction:m.default.func,hasParent:m.default.bool,cancelRelatedFunction:m.default.func,handleEpic:m.default.func,hasEpic:m.default.bool,handleRemoveEpic:m.default.func,currentProject:m.default.object},y.WithProjectPermissionProps),{},{currentProjectCooperateSettings:m.default.object,onIsFullWidthChange:m.default.func,isFullWidth:m.default.bool,isShowFullWidthOption:m.default.bool,isSensitiveAdmin:m.default.bool,isSensitive:m.default.bool,operateSensitive:m.default.func,premiumVersion:m.default.bool,issueTypeDetail:m.default.object,copyLink:m.default.string,copyTitle:m.default.string,onClickTrigger:m.default.func,controlHideMore:m.default.number,slotCallback:m.default.func,copyCommit:m.default.string,copyIssues:m.default.func,fetchCustomTip:m.default.func});var A=M;t.default=A},"2CT0":function(e,t,a){"use strict";a("I5cv"),a("RW0V"),a("ioFf"),a("0l/t"),a("mYba"),a("jm62"),a("EK0E"),a("XfO3"),a("yt8O"),a("rGqo");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("o0o1"));a("bWfx"),a("INYr"),a("f3/d"),a("CX2u"),a("Btvt"),a("VRzm");var i=n(a("lSNA")),l=n(a("yXPU")),c=n(a("lwsE")),s=n(a("W8MJ")),u=n(a("PJYZ")),d=n(a("7W2i")),f=n(a("a1gu")),p=n(a("Nsbk")),m=a("mVeg"),v=M(a("cDcd")),h=n(a("17x9")),g=(n(a("K2gz")),n(a("V/h/"))),E=n(a("sftu")),y=n(a("zmh9")),b=n(a("oZEX")),I=n(a("gp0q")),S=a("w3Wo"),T=n(a("30Wv")),w=a("xgZS"),C=a("FaIw"),O=a("3RH6"),N=n(a("/HJl")),P=a("/HD1"),j=a("w3Wo"),D=M(a("NI22")),k=(n(a("HtPo")),M(a("Mdvu")));function R(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(R=function(e){return e?a:t})(e)}function M(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=R(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,f.default)(this,a)}}var _=function(e){(0,d.default)(a,e);var t=x(a);function a(e){var n;return(0,c.default)(this,a),(n=t.call(this,e)).refs=null,n.isHistoryOutdate=function(e){return e.some((function(e){return!e.historyId}))},n.recordTransform=function(){var e=n.props,t=e.currentProject,a=e.issueCode;n.state.currentRecord;return(0,j.issueDescriptionTransform)(t.id,a).then()},n.checkTransformation=function(e){var t=n.props,a=t.currentProject,r=t.issueCode,o=n.state,i=o.currentRecord,l=o.records;return n.tranformTimer&&clearTimeout(n.tranformTimer),(0,j.checkHistoryId)(a.id,r,e).then((function(t){var a=t.data.historyId;a?n.setState({records:(0,g.default)(l,(function(t){t.map((function(t){t.issueLogId===e&&(t.historyId=a)}))})),currentRecord:(0,g.default)(i,(function(e){e.historyId=a}))}):n.tranformTimer=setTimeout((function(){return n.checkTransformation(e)}),1e3)}))},n.state={records:null,currentRecord:null,isLoading:!1},n.getHistory=n.getHistory.bind((0,u.default)(n)),n.viewDetailRecord=n.viewDetailRecord.bind((0,u.default)(n)),n.changeCurrent=n.changeCurrent.bind((0,u.default)(n)),n.updateRecord=n.updateRecord.bind((0,u.default)(n)),n.tranformTimer=null,n}return(0,s.default)(a,[{key:"render",value:function(){var e=this.props,t=e.show,a=e.closeHandle,n=e.currentProject,r=e.pageId,o=this.state,i=o.currentRecord;return o.records?v.default.createElement(E.default,{closeButton:!0,outsideClickCloseable:!1,show:t,onHide:a,className:b.default.wrapper},v.default.createElement("div",{className:b.default.header},v.default.createElement("div",{className:b.default.leftColumn},(0,m.t)("\u5386\u53f2\u7248\u672c")),this.renderHeader()),v.default.createElement("div",{className:b.default.container,id:"wm-record"},v.default.createElement("div",{className:b.default.leftColumn},this.renderList()),v.default.createElement("div",{className:b.default.rightColumn},v.default.createElement("div",{className:b.default.detail},v.default.createElement("div",{className:"".concat(b.default.description," ").concat(i&&i.description?"":b.default.isEmpty)},i&&!i.description&&(0,m.t)("\u8be5\u7248\u672c\u65e0\u5185\u5bb9"),i&&i.description&&(!i.historyId||!r)&&v.default.createElement(T.default,{html:i.description,enableCodeCopy:!0}),i&&i.description&&r&&i.historyId&&v.default.createElement(D.default,{readOnly:!0,showToolBar:!1,hasBorder:!1,currentProject:n,initEditorData:{pageId:r,historyId:i.historyId},mode:"history"})))))):null}},{key:"renderHeader",value:function(){var e=this,t=this.state,a=t.records,n=t.currentRecord,r=t.isLoading,o=this.props.allowUpdate,i=a.findIndex((function(e){return e.issueLogId===n.issueLogId})),l=i>0?a[i-1].issueLogId:void 0,c=i<a.length-1?a[i+1].issueLogId:void 0;return v.default.createElement("div",{className:b.default.rightColumn},n&&v.default.createElement("div",{className:b.default.userInfo},v.default.createElement(I.default,{className:b.default.avatar,src:n&&n.creator&&n.creator.avatar}),v.default.createElement("div",{className:b.default.userDetail},v.default.createElement("div",{className:b.default.name},n&&n.creator&&n.creator.name),v.default.createElement("div",{className:b.default.date},(0,m.t)("\u4fee\u6539\u4e8e")," ",n&&n.createdAt&&(0,C.timeFormat)(n.createdAt,"YYYY/MM/DD HH:mm")))),v.default.createElement("div",{className:b.default.actionRight},v.default.createElement(y.default,{className:b.default.recovery,disabled:!l||!o,onClick:this.updateRecord,loading:r},l?(0,m.t)("\u6062\u590d\u7248\u672c"):(0,m.t)("\u5f53\u524d\u7248\u672c")),v.default.createElement("div",{className:b.default.nav},v.default.createElement("div",{className:b.default.box,onClick:function(){return e.changeCurrent(l)}},v.default.createElement("div",{className:"".concat(b.default.arrow," ").concat(b.default.prev," ").concat(l?"":b.default.disabled)})),v.default.createElement("div",{className:b.default.box,onClick:function(){return e.changeCurrent(c)}},v.default.createElement("div",{className:"".concat(b.default.arrow," ").concat(b.default.next," ").concat(c?"":b.default.disabled)})))))}},{key:"renderList",value:function(){var e=this,t=this.state,a=t.records,n=t.currentRecord;return this.refs=a.reduce((function(e,t){return e[t.issueLogId]=v.default.createRef(),e}),{}),v.default.createElement("div",{className:b.default.userList,onScroll:function(e){return e.stopPropagation()}},a&&!!a.length&&a.map((function(t){return v.default.createElement("div",{key:t.issueLogId,className:"".concat(b.default.userItem," ").concat(t.issueLogId===n.issueLogId?b.default.isSelected:""),onClick:function(){return e.viewDetailRecord(t.issueLogId)},ref:e.refs[t.issueLogId]},v.default.createElement(I.default,{className:b.default.avatar,src:t.creator&&t.creator.avatar}),v.default.createElement("div",{className:b.default.userDetail},v.default.createElement("div",{className:b.default.name},t.creator&&t.creator.name),v.default.createElement("div",{className:b.default.date},(0,C.timeFormat)(t.createdAt,"YYYY/MM/DD HH:mm"))))})))}},{key:"componentDidMount",value:function(){var e=this.props,t=e.user,a=e.watermark;this.getHistory().then((function(){if(void 0!==a)try{JSON.parse(a).issue&&(0,O.watermarkService)(a,(0,O.getText)(t),!1,!0)}catch(e){return null}return null}))}},{key:"componentWillUnmount",value:function(){var e=this.props.watermark;if(this.tranformTimer&&clearTimeout(this.tranformTimer),void 0!==e)try{JSON.parse(e).issue&&(0,O.removeWatermark)(!1,!0)}catch(t){return null}return null}},{key:"getHistory",value:function(){var e=(0,l.default)(o.default.mark((function e(){var t,a,n,r,i,l,c,s,u=this,d=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(d.length>0&&void 0!==d[0])||d[0],a=this.props,n=a.issueType,r=a.currentProject,i=a.issueCode,l=a.currentLogId,"risks"!==n){e.next=8;break}return e.next=5,(0,P.getRiskHistory)(r.name,i);case 5:c=e.sent,e.next=17;break;case 8:if("work-items"!==n){e.next=14;break}return e.next=11,(0,P.getWorkItemHistory)(r.name,i);case 11:c=e.sent,e.next=17;break;case 14:return e.next=16,(0,S.fetchDescriptionHistory)(r.id,n,i);case 16:c=e.sent;case 17:s=c.data,this.setState(L({records:s},t?{currentRecord:function(){var e;if(l){var t=s.findIndex((function(e){return e.issueLogId===l}));e=s[t]}else e=s[0];return e}()}:null),(function(){l&&setTimeout((function(){u.refs[l].current&&u.refs[l].current.scrollIntoView()})),u.isHistoryOutdate(s)&&u.recordTransform()}));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateRecord",value:function(){var e=this,t=this.state.currentRecord,a=this.props,n=a.handleUpdate,r=a.currentProject,o=(a.issueCode,a.parentDescriptionType);if(this.setState({isLoading:!0}),(0,D.isBlockType)(o))n({historyId:t.historyId,issueLogId:t.issueLogId,description:t.description}).then((function(){(0,w.success)((0,m.t)("\u63cf\u8ff0\u5df2\u6062\u590d\u5230 {{time}} \u7684\u7248\u672c",{time:(0,C.timeFormat)(t.createdAt,"YYYY/MM/DD HH:mm")}))})).finally((function(){e.setState({isLoading:!1},(function(){return e.getHistory(!1)}))}));else{var i;if(!r.id)return;k.default.emit(k.EventBusType.MdDesc,k.EventBusKeys.revertHistoryMdDesc,{content:null!==(i=t.markdown)&&void 0!==i?i:"",slateRaw:"",descriptionType:D.EditorType.MARKDOWN,cb:function(){(0,w.success)((0,m.t)("\u63cf\u8ff0\u5df2\u6062\u590d\u5230 {{time}} \u7684\u7248\u672c",{time:(0,C.timeFormat)(t.createdAt,"YYYY/MM/DD HH:mm")})),e.setState({isLoading:!1},(function(){return e.getHistory(!1)}))}})}}},{key:"changeCurrent",value:function(e){var t=this;if(e){var a=this.state.records,n=a.findIndex((function(t){return t.issueLogId===e}));this.setState({currentRecord:a[n]},(function(){t.refs[e].current.scrollIntoView()}))}}},{key:"viewDetailRecord",value:function(e){var t=this.state.records,a=t.findIndex((function(t){return t.issueLogId===e}));this.setState({currentRecord:t[a]},(function(){}))}}]),a}(v.Component);_.propTypes={enterpriseGlobalKey:h.default.string,currentProject:h.default.object,issueType:h.default.string,issueCode:h.default.number,pageId:h.default.number,currentLogId:h.default.number,show:h.default.bool,closeHandle:h.default.func,handleUpdate:h.default.func,allowUpdate:h.default.bool,watermark:h.default.string,user:h.default.object,parentDescriptionType:h.default.number};var F=(0,N.default)((function(e){return{user:e.APP.user,watermark:e.APP.enterprise.watermark}}),{})(_);t.default=F},"2ISD":function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=n(a("e/ZG")),m=a("FaIw"),v=a("1qdz");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item;return f.default.createElement("div",{className:v.listItem,key:e.id},f.default.createElement("div",{className:v.dot}),f.default.createElement("div",{className:v.content},f.default.createElement(p.default,{className:"mr-10"}),f.default.createElement("span",{className:v.user},e.creator.name)," ",f.default.createElement("span",null,(0,u.t)("\u66f4\u65b0\u4e86{{name}}\u4e3a",{name:e.issueLog.targetName})),f.default.createElement("span",{className:"ml-10"},e.issueLog.content.name),f.default.createElement("span",{className:v.time},(0,m.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=E,E.propTypes={item:d.default.object}},"2K9c":function(e,t,a){e.exports={body:"body-2vwl-1NuTO",list:"list-2jvmYOWFO-","list-item":"list-item-22IQw038wa",listItem:"list-item-22IQw038wa",branch:"branch-1jalAHQN-_",code:"code-1O4SzoAyLz",commit:"commit-12zPeBJIDg","link-wrapper":"link-wrapper-3hYYtsEezo",linkWrapper:"link-wrapper-3hYYtsEezo","vcs-icon":"vcs-icon-3d9SCXsQ3m",vcsIcon:"vcs-icon-3d9SCXsQ3m","branch-icon":"branch-icon-2pWTB1mTqs",branchIcon:"branch-icon-2pWTB1mTqs"}},"2Nvq":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+ZmlsZS1pY29ucy8yNHB4L2FpPC90aXRsZT4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGQ9Ik01LjI1LDIgTDE1LDIgTDE1LDIgTDIxLDggTDIxLDE5Ljc1IEMyMSwyMC45OTI2NDA3IDE5Ljk5MjY0MDcsMjIgMTguNzUsMjIgTDUuMjUsMjIgQzQuMDA3MzU5MzEsMjIgMywyMC45OTI2NDA3IDMsMTkuNzUgTDMsNC4yNSBDMywzLjAwNzM1OTMxIDQuMDA3MzU5MzEsMiA1LjI1LDIgWiIgaWQ9InBhdGgtMSI+PC9wYXRoPgogICAgICAgIDxmaWx0ZXIgeD0iLTguMyUiIHk9Ii03LjUlIiB3aWR0aD0iMTE2LjclIiBoZWlnaHQ9IjExNS4wJSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTIiPgogICAgICAgICAgICA8ZmVPZmZzZXQgZHg9IjAiIGR5PSIwIiBpbj0iU291cmNlQWxwaGEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0T3V0ZXIxIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIwLjUiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUdhdXNzaWFuQmx1cj4KICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAgICAwIDAgMCAwIDAgICAwIDAgMCAwIDAgIDAgMCAwIDAuMDUgMCIgdHlwZT0ibWF0cml4IiBpbj0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgPC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Ikljb25zL0ZpbGUvMjRweC9BSSI+CiAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtQ29weSI+CiAgICAgICAgICAgICAgICA8dXNlIGZpbGw9ImJsYWNrIiBmaWxsLW9wYWNpdHk9IjEiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjRjY4NzAxIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik05Ljk1NDc1LDE2Ljc1IEwxMC4xOTEsMTYuMDM0NSBMMTEuNjY5MjUsMTYuMDM0NSBMMTEuODkyLDE2Ljc1IEwxMy4xMjcyNSwxNi43NSBMMTEuMzc5LDExLjk0NCBMMTAuNDY3NzUsMTEuOTQ0IEw4LjcxOTUsMTYuNzUgTDkuOTU0NzUsMTYuNzUgWiBNMTEuMzU4NzUsMTUuMDQ5IEwxMC41MjE3NSwxNS4wNDkgTDEwLjk1Mzc1LDEzLjc2NjUgTDExLjM1ODc1LDE1LjA0OSBaIE0xNC43OTQ1LDE2Ljc1IEwxNC43OTQ1LDExLjk0NCBMMTMuNjEzMjUsMTEuOTQ0IEwxMy42MTMyNSwxNi43NSBMMTQuNzk0NSwxNi43NSBaIiBpZD0iQUkiIGZpbGw9IiNGRkZGRkYiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMC45MDAwMDAwMzYiPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggZD0iTTE1LDIgTDIxLDggTDE3LjI1LDggQzE2LjAwNzM1OTMsOCAxNSw2Ljk5MjY0MDY5IDE1LDUuNzUgTDE1LDIgTDE1LDIgWiIgaWQ9IlJlY3RhbmdsZS1Db3B5LTMiIGZpbGw9IiNGRkZGRkYiIG9wYWNpdHk9IjAuNDAwMDAwMDA2Ij48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},"34zm":function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("pVnL")),i=n(a("lwsE")),l=n(a("W8MJ")),c=n(a("7W2i")),s=n(a("a1gu")),u=n(a("Nsbk")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),f=n(a("0JYJ"));function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var v=function(e){return function(t){(0,c.default)(n,t);var a=m(n);function n(){return(0,i.default)(this,n),a.apply(this,arguments)}return(0,l.default)(n,[{key:"render",value:function(){var t=this;return d.default.createElement(f.default.Consumer,null,(function(a){var n=a.route;return d.default.createElement(e,(0,o.default)({route:n},t.props))}))}}]),n}(d.Component)};t.default=v},"38k+":function(e,t,a){"use strict";a.r(t);var n=a("mVeg"),r=(a("XDpg"),a("Nv36")),o=a("cDcd"),i=a.n(o),l=a("f0Wu"),c=a.n(l),s=a("sftu"),u=a.n(s),d=a("ooH1"),f=a("zmh9"),p=a.n(f),m=a("yZ+p"),v=a.n(m),h=a("xgZS"),g=a("gEak"),E=a.n(g),y=a("+eQT"),b=a("9yH6"),I=a("Z4vw"),S=a("sWxF"),T=a("5JFE"),w=a("TRyi"),C=a.n(w),O=a("nuIr"),N=function(){return(N=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},P=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},j=y.a.RangePicker;function D(e){var t=e.value,a=e.onChange,r=e.disabled,o="null"===t||null===t||void 0===t||""===t?Object(n.t)("\u8bf7\u8f93\u5165\u5de5\u65f6"):t,l=/^(([0-9]+)|([0-9]+\.[0-9]{0,2}))$/;return i.a.createElement(v.a,{value:t,placeholder:o,className:E.a.input,autoComplete:"off",disabled:r,onChange:function(e){var r=e.target.value;Number(r)>999.99?Object(h.warning)(Object(n.t)("\u6700\u591a\u652f\u6301 999 \u5929")):""===r||l.test(r)?a(r):a(t)}})}function k(e){var t=e.header,a=e.show,l=e.body,s=e.onSetting,f=e.onHide,m=e.user,v=e.fillDetail,g=P(Object(o.useState)(void 0),2),w=g[0],k=g[1],R=P(Object(o.useState)(!1),2),M=R[0],A=R[1],L=P(Object(o.useState)([]),2),x=L[0],_=L[1],F=P(Object(o.useState)((function(){var e=l.workHourType,t=l.workingHours;return{fillType:"multiple",remainingHour:0,totalTime:t?Math.round(t/8*100)/100:t,actualTime:0,workHourType:e}})),2),W=F[0],B=F[1],H=P(Object(o.useState)(),2),U=H[0],Y=H[1],q=P(Object(o.useState)(1),2),G=q[0],z=q[1],V=P(Object(o.useState)(),2),Z=V[0],K=V[1],J=Object(o.useMemo)((function(){var e,t;return"REQUIREMENT"===(null===(e=null===l||void 0===l?void 0:l.issueTypeDetail)||void 0===e?void 0:e.issueType)&&"requirement"===(null===(t=null===l||void 0===l?void 0:l.issueTypeDetail)||void 0===t?void 0:t.type)}),[l]),Q=function(e){return Number(null===e||void 0===e?void 0:e.toFixed(2))};Object(o.useEffect)((function(){if(W.totalTime||W.actualTime){var e="multiple"===W.fillType?G:1,t=Q(Number(W.totalTime)-Number(W.actualTime)*e);v.workHour&&(t=Q(Number(t)-Number(v.workHour))),B(N(N({},W),{remainingHour:t}))}}),[W.actualTime]);var X=function(e){return 0===e||"0"===e||""!==e},$=function(e,t){void 0===t&&(t=!1);var a=c()(e).endOf("week").valueOf()<=c()().endOf("week").valueOf();if(t){var n=c()(e).format("YYYY-MM-DD");return!a||x.includes(n)}return!a};Object(o.useEffect)((function(){U&&ee()}),[U]);var ee=function(){Object(S.getqueryWorkHourFillingReportInfoApi)({assignee:m.id,startDate:c()(U).format("YYYY-MM-DD"),endDate:c()(U).format("YYYY-MM-DD")}).then((function(e){0===e.code&&e.data?k(e.data):k(void 0)}))},te=function(e){var t=c()(e).format("YYYY-MM-DD");return c()("".concat(t," 00:00:00")).valueOf()},ae=function(e,t){for(var a=[],n=Math.floor((t-e)/864e5),r=1;r<n;r++){var o=c()(e).add(1*r,"day").valueOf();a.push(o)}return a.filter((function(e){var t=c()(e).format("YYYY-MM-DD");return x.includes(t)}))},ne=Object(o.useCallback)((function(e){return i.a.createElement(i.a.Fragment,null,"multiple"===W.fillType&&i.a.createElement(T.Tooltip,{title:O.MUTIPLE_TIME_TYPE[e]},i.a.createElement(C.a,{className:E.a.icon,style:{marginLeft:2}})))}),[W.fillType]);return Object(o.useEffect)((function(){Object(S.fetchHolidayApi)().then((function(e){var t;_(null!==(t=e.data)&&void 0!==t?t:[])}))}),[]),i.a.createElement(u.a,{show:a,className:E.a.settingViewer,onScroll:function(e){return e.stopPropagation()}},i.a.createElement("div",{className:E.a.header},t),(null===W||void 0===W?void 0:W.totalTime)&&i.a.createElement("div",{className:E.a.adjustContainer},i.a.createElement(d.a,{recordHours:"single"===W.fillType?Q(Number(v.workHour)+Number(G)):Q(Number(v.workHour)+Number(W.actualTime))*G,remainingHours:Q(Number(W.totalTime)-(Number(v.workHour)+Number("multiple"===W.fillType?W.actualTime*G:G))),segmentMargin:8})),i.a.createElement(i.a.Fragment,null,J&&i.a.createElement("div",{className:E.a.workingHourHeader},Object(n.t)("\u5de5\u65f6\u6240\u5c5e\u9879\u76ee"),i.a.createElement("div",{className:E.a.workingHourProgramName,title:v.programName},v.programName)),i.a.createElement("div",{className:E.a.workingHourContainer},i.a.createElement("div",{className:E.a.workingHourBox},i.a.createElement("div",{className:E.a.workingHourHeader},Object(n.t)("\u5de5\u65f6\u586b\u62a5\u7c7b\u578b"),ne("TIME_TYPE")),i.a.createElement(b.a.Group,{className:E.a.dimensionRadio,style:{width:"100%"},value:W.fillType,onChange:function(e){z(1),"single"===e.target.value?B(N(N({},W),{fillType:e.target.value,actualTime:1})):B(N(N({},W),{fillType:e.target.value,actualTime:0})),K(void 0),Y(void 0)}},i.a.createElement(b.a,{value:"multiple"},Object(n.t)("\u6279\u91cf\u586b\u62a5")),i.a.createElement(b.a,{value:"single"},Object(n.t)("\u5355\u65e5\u586b\u62a5")))),"multiple"===W.fillType&&i.a.createElement("div",{className:E.a.workingHourBox},i.a.createElement("div",{className:E.a.workingHourHeader},i.a.createElement("span",{className:E.a.point},"*"),Object(n.t)("\u8d77\u6b62\u65f6\u95f4"),ne("START_TIME")),i.a.createElement(j,{locale:r.a,value:Z,onChange:function(e){return function(e){var t;K(e);var a=e[1].diff(e[0],"day"),n=a+1;if("multiple"===W.fillType&&a){var r=te(e[0]),o=te(e[1]);n-=(null===(t=ae(r,o))||void 0===t?void 0:t.length)||0}B(N(N({},W),{actualTime:n}))}(e)},style:{width:"100%"},allowClear:!1,disabledDate:function(e){return $(e,!0)}})),"single"===W.fillType&&i.a.createElement("div",{className:E.a.workingHourBox},i.a.createElement("div",{className:E.a.workingHourHeader},i.a.createElement("span",{className:E.a.point},"*"),Object(n.t)("\u5de5\u65f6\u586b\u62a5\u65e5\u671f")),i.a.createElement(y.a,{onChange:function(e){Y(e),B(N(N({},W),{actualTime:1})),z(1)},locale:r.a,value:U,style:{width:"100%"},disabledDate:$})))),i.a.createElement(i.a.Fragment,null,"multiple"===W.fillType&&i.a.createElement("div",{className:E.a.workingHourContainer},i.a.createElement("div",{className:E.a.workingHourBox},i.a.createElement("div",{className:E.a.workingHourHeader},i.a.createElement("span",{className:E.a.point},"*"),Object(n.t)("\u6bcf\u65e5\u5b9e\u9645\u6295\u5165\u5de5\u65f6")),i.a.createElement("div",{className:E.a.mutipleSelect},i.a.createElement(T.InputNumber,{addonAfter:"\u5929",step:.01,min:.01,precision:2,max:3===(null===m||void 0===m?void 0:m.account_type)?1:3,value:G,onChange:function(e){z(e);var t=Q(Number(W.totalTime)-Number(W.actualTime)*e);t=Q(Number(t)-Number(v.workHour)),B(N(N({},W),{remainingHour:t}))},style:{width:"100%"}}))),(null===W||void 0===W?void 0:W.totalTime)&&i.a.createElement("div",{className:E.a.workingHourBox},i.a.createElement("div",{className:E.a.workingHourHeader},Object(n.t)("\u5269\u4f59\u5de5\u65f6")),i.a.createElement(D,{disabled:!0,style:{width:"100%"},modified:M,value:X(W.remainingHour)?W.remainingHour:W.actualTime?Number(W.totalTime)-Number(W.actualTime):W.totalTime?Number(W.totalTime):void 0,onChange:function(e){A(!0),""===e&&A(!1),B(N(N({},W),{remainingHour:""!==e?e:W.actualTime?Number(W.totalTime)-Number(W.actualTime):void 0}))}}),i.a.createElement("div",{className:E.a.inputAfter},Object(n.t)("\u5929")))),"single"===W.fillType&&i.a.createElement("div",{className:E.a.workingHourContainer},i.a.createElement("div",{className:E.a.workingHourBox},i.a.createElement("div",{className:E.a.workingHourHeader},i.a.createElement("span",{className:E.a.point},"*"),Object(n.t)("\u5b9e\u9645\u6295\u5165\u5de5\u65f6")),i.a.createElement(D,{value:G,onChange:function(e){var t=3===(null===m||void 0===m?void 0:m.account_type)?1:3;""===e&&B(N(N({},W),{remainingHour:Q(Number(W.totalTime)-Number(v.workHour))})),e>=0&&e<=t?(z(e),B(N(N({},W),{remainingHour:Q(Number(W.totalTime)-Number(v.workHour)-Number(e))}))):(e<0||"string"===typeof e)&&(z(t),B(N(N({},W),{remainingHour:Q(Number(W.totalTime)-Number(v.workHour)-t)})))},style:{width:"100%"}}),i.a.createElement("div",{className:E.a.inputAfter},Object(n.t)("\u5929"))),(null===W||void 0===W?void 0:W.totalTime)&&i.a.createElement("div",{className:E.a.workingHourBox},i.a.createElement("div",{className:E.a.workingHourHeader},Object(n.t)("\u5269\u4f59\u5de5\u65f6")),i.a.createElement(D,{disabled:!0,style:{width:"100%"},modified:M,value:X(W.remainingHour)?W.remainingHour:W.actualTime?Q(Number(W.totalTime)-Number(W.actualTime)*("multiple"===W.fillType?G:1)):W.totalTime?Number(W.totalTime):void 0,onChange:function(e){A(!0),""===e&&A(!1),B(N(N({},W),{remainingHour:""!==e?e:W.actualTime?Number(W.totalTime)-Number(W.actualTime)*("multiple"===W.fillType?G:1):void 0}))}}),i.a.createElement("div",{className:E.a.inputAfter},Object(n.t)("\u5929")))),"single"===W.fillType&&U&&w&&0!==(null===w||void 0===w?void 0:w.workHour)&&void 0!==(null===w||void 0===w?void 0:w.workHour)&&(null===w||void 0===w?void 0:w.workHour)<=3&&i.a.createElement("div",{className:E.a.workingHourContainer},i.a.createElement("div",{className:E.a.workingHourBox},i.a.createElement("span",{style:{fontSize:"12px",color:"#a9a6a6",lineHeight:"22px",paddingRight:"12px",height:"22px"}},Object(n.t)("\u5df2\u586b\u5de5\u65f6".concat(null===w||void 0===w?void 0:w.workHour,"\u5929"))))),"single"===W.fillType&&U&&3!==(null===m||void 0===m?void 0:m.account_type)&&(Number(G)>1||w&&(null===w||void 0===w?void 0:w.workHour)&&Number(Number(null===w||void 0===w?void 0:w.workHour)+Number(G))>1)&&i.a.createElement("div",{className:E.a.workingHourContainer},i.a.createElement("div",{className:E.a.dimensionBox},Object(n.t)("".concat(c()(U).format("YYYY\u5e74MM\u6708DD\u65e5"),"\u586b\u62a5\u5de5\u65f6\u5df2\u8d85\u8fc71\u4eba\u5929\uff0c\u8bf7\u786e\u4fdd\u5df2\u6309\u8981\u6c42\u63d0\u4ea4\u4e86\u52a0\u73ed\u7533\u8bf7\u6d41\u7a0b\uff0c\u586b\u62a5\u7684\u52a0\u73ed\u5de5\u65f6\u5e94\u4e0e\u6d41\u7a0b\u4e2d\u4e00\u81f4\u3002")),i.a.createElement("span",{className:E.a.dimensionJump,onClick:function(){return window.open("https://workflow.cmschina.com.cn/web/#/mklogin")}},Object(n.t)("\u52a0\u73ed\u7533\u8bf7\u94fe\u63a5\uff1ahttps://workflow.cmschina.com.cn/web/#/mklogin"))))),i.a.createElement("div",{className:E.a.btnArea},i.a.createElement(p.a,{type:"default",empty:!0,onClick:function(){return f()}},Object(n.t)("\u53d6\u6d88")),i.a.createElement(p.a,{onClick:function(){var e=W.actualTime,t=W.fillType;if("multiple"===t&&!Z)return Object(h.danger)(Object(I.getErrorMessage)("\u8d77\u6b62\u65f6\u95f4\u4e0d\u80fd\u4e3a\u7a7a\uff01"));if("single"===t&&!U)return Object(h.danger)(Object(I.getErrorMessage)("\u5de5\u65f6\u586b\u62a5\u65e5\u671f\u4e0d\u80fd\u4e3a\u7a7a\uff01"));if(!e)return Object(h.danger)(Object(I.getErrorMessage)("\u5b9e\u9645\u6295\u5165\u5de5\u65f6\u4e0d\u80fd\u4e3a\u7a7a\uff01"));var a={workHour:G||null,workHourType:v.currentWorkHourType,programId:(null===v||void 0===v?void 0:v.id)||0,refId:l.id,creator:m.id,assignee:m.id,fillingDate:"single"===t?c()(U).format("YYYYMMDD"):Z?"".concat(c()(Z[0]).format("YYYYMMDD"),",").concat(c()(Z[1]).format("YYYYMMDD")):""};if("multiple"===t&&Z){var n=te(Z[0]),r=te(Z[1]);a.excludeDateList=ae(n,r).map((function(e){return c()(e).format("YYYYMMDD")}))}s(a)}},Object(n.t)("\u786e\u5b9a\u767b\u8bb0"))))}k.defaultProps={header:Object(n.t)("\u767b\u8bb0\u5de5\u65f6")},t.default=k},"3B9i":function(e,t,a){e.exports=a.p+"cdb4eec767b32b6b3729b3628662393d.svg"},"44P4":function(e,t,a){e.exports={"table-title":"table-title-2FI8MqKegD",tableTitle:"table-title-2FI8MqKegD","title-wrapper":"title-wrapper-1zeqLfb7j9",titleWrapper:"title-wrapper-1zeqLfb7j9",title:"title-dbuO3rAVxa","title-detail":"title-detail-1r3nMI-wNr",titleDetail:"title-detail-1r3nMI-wNr",current:"current-2MIDH68pP7",icon:"icon-25dZMObMjj",assignment:"assignment-iNugI1abxd","sub-task":"sub-task-1aWOu6kkxm",subTask:"sub-task-1aWOu6kkxm",requirement:"requirement-3pMqsIOF7Y","sub-requirement":"sub-requirement-odCyVNQOnj",subRequirement:"sub-requirement-odCyVNQOnj",defect:"defect-2QDB0yemsW",epic:"epic-1fc9WQJljX","is-sub-issue":"is-sub-issue-5FgRAVi-H1",isSubIssue:"is-sub-issue-5FgRAVi-H1",tag:"tag-3NP4rLmY45",orange:"orange-32M7gxdSXM",red:"red-2y6tKw0tkH",gray:"gray-1n3SCIyXDS",sub:"sub-3fEzC4-QLq",classic:"classic-3DfElK4_zW","due-date":"due-date-3fM-EVhZBq",dueDate:"due-date-3fM-EVhZBq",detail:"detail-2r11BNUoGr","icon-placeholder":"icon-placeholder-2ytKfOXS7o",iconPlaceholder:"icon-placeholder-2ytKfOXS7o","branch-icon":"branch-icon-1rORgygl3K",branchIcon:"branch-icon-1rORgygl3K",root:"root-18BD4RdltV","list-wrapper":"list-wrapper-oUUiBzvqZA",listWrapper:"list-wrapper-oUUiBzvqZA","filter-header":"filter-header-1MzPKr9Bc-",filterHeader:"filter-header-1MzPKr9Bc-","left-wrapper":"left-wrapper-3_gqd5L7B6",leftWrapper:"left-wrapper-3_gqd5L7B6","save-as":"save-as-2ZdHkewAc0",saveAs:"save-as-2ZdHkewAc0","empty-button":"empty-button-3NCfdU3hmk",emptyButton:"empty-button-3NCfdU3hmk",disabled:"disabled-m0wxBNvRbV","default-cancel-banner":"default-cancel-banner-126wo6cwyR",defaultCancelBanner:"default-cancel-banner-126wo6cwyR","drop-column-cancel":"drop-column-cancel-1qUfWQEST3",dropColumnCancel:"drop-column-cancel-1qUfWQEST3","page-container":"page-container-1PsvqAyHQe",pageContainer:"page-container-1PsvqAyHQe","kanban-view":"kanban-view-1HjiFMTx5b",kanbanView:"kanban-view-1HjiFMTx5b","issue-list":"issue-list-1bl0_AoYnq",issueList:"issue-list-1bl0_AoYnq","issue-bar":"issue-bar-2Ph6XkfZa-",issueBar:"issue-bar-2Ph6XkfZa-",active:"active-1oonZlenCG","issue-brief-info":"issue-brief-info-RJGUFbXM81",issueBriefInfo:"issue-brief-info-RJGUFbXM81","issue-priority":"issue-priority-2UK-i1hM4I",issuePriority:"issue-priority-2UK-i1hM4I",issueID:"issueID-1Qr27FJb5t",issueId:"issueID-1Qr27FJb5t","issue-title-wrapper":"issue-title-wrapper-3Whz2NlqTj",issueTitleWrapper:"issue-title-wrapper-3Whz2NlqTj","issue-title":"issue-title-1YLAFfgwFD",issueTitle:"issue-title-1YLAFfgwFD","has-content-icon":"has-content-icon-1m0RbCzPM6",hasContentIcon:"has-content-icon-1m0RbCzPM6","issue-create-info":"issue-create-info-2Ptp0Nssxa",issueCreateInfo:"issue-create-info-2Ptp0Nssxa","issue-detail":"issue-detail-8Lo0gzmLLO",issueDetail:"issue-detail-8Lo0gzmLLO","checkbox-wrapper":"checkbox-wrapper-BRYDFxdzaH",checkboxWrapper:"checkbox-wrapper-BRYDFxdzaH","label-wrapper":"label-wrapper-3q0kq9UefM",labelWrapper:"label-wrapper-3q0kq9UefM","without-label":"without-label-2oFsXk3geg",withoutLabel:"without-label-2oFsXk3geg","name-wrapper":"name-wrapper-22e9Jxm1HA",nameWrapper:"name-wrapper-22e9Jxm1HA","label-group":"label-group-1H8Qcnr_ob",labelGroup:"label-group-1H8Qcnr_ob",loading:"loading-1ckwZAwnwu","issue-pagination":"issue-pagination-2GvzbxgCYt",issuePagination:"issue-pagination-2GvzbxgCYt","issue-list-info":"issue-list-info-21MD-BcwEt",issueListInfo:"issue-list-info-21MD-BcwEt","refresh-icon":"refresh-icon-SfoThr4wDT",refreshIcon:"refresh-icon-SfoThr4wDT",rotating:"rotating-Z8tVVQu5z5",rotation:"rotation-3XfJW9621U","page-action-wrapper":"page-action-wrapper-1MLGLpq7Cn",pageActionWrapper:"page-action-wrapper-1MLGLpq7Cn","page-action":"page-action--Rq_gpntIN",pageAction:"page-action--Rq_gpntIN","page-action-left":"page-action-left-l6w5blC8Us",pageActionLeft:"page-action-left-l6w5blC8Us","page-action-right":"page-action-right-QYLD2AnTPh",pageActionRight:"page-action-right-QYLD2AnTPh","column-container":"column-container-bnOWX9H6Cc",columnContainer:"column-container-bnOWX9H6Cc",before:"before-2HXuZVPyHE",after:"after-229mtgmq6w","table-wrapper":"table-wrapper-2r6WrZyNEr",tableWrapper:"table-wrapper-2r6WrZyNEr","caret-down":"caret-down-38ctc8zS2P",caretDown:"caret-down-38ctc8zS2P","table-id":"table-id-3ZwtL_Be4J",tableId:"table-id-3ZwtL_Be4J","parent-id":"parent-id-o6IcNZ-00L",parentId:"parent-id-o6IcNZ-00L","devison-line":"devison-line-jwZ3SeqE2f",devisonLine:"devison-line-jwZ3SeqE2f",code:"code-18KnbuX4YU","blank-icon":"blank-icon-vZfjTFw__L",blankIcon:"blank-icon-vZfjTFw__L","table-assignee":"table-assignee-1tVXKMQOkQ",tableAssignee:"table-assignee-1tVXKMQOkQ","user-name":"user-name-X6x5LMvOpy",userName:"user-name-X6x5LMvOpy","default-avatar":"default-avatar-2NdAokMOcI",defaultAvatar:"default-avatar-2NdAokMOcI","default-avatar-tip":"default-avatar-tip-3txz2eKfbE",defaultAvatarTip:"default-avatar-tip-3txz2eKfbE","table-time":"table-time-jlQy-Mm8YP",tableTime:"table-time-jlQy-Mm8YP","flex-box":"flex-box-3tm47ta8KU",flexBox:"flex-box-3tm47ta8KU",priority:"priority-WOWN7XIM0j","status-box":"status-box-3w80jdM6EQ",statusBox:"status-box-3w80jdM6EQ","text-wrap":"text-wrap-41-xqJ8-mj",textWrap:"text-wrap-41-xqJ8-mj","item-text":"item-text-2G3AXR7VVS",itemText:"item-text-2G3AXR7VVS","table-checkbox":"table-checkbox-zJHBAHXgIB",tableCheckbox:"table-checkbox-zJHBAHXgIB","bult-action":"bult-action-3Cq3Dd7K9E",bultAction:"bult-action-3Cq3Dd7K9E",cancel:"cancel-2sMBWARqbi","divide-line":"divide-line-1ekSAJMBty",divideLine:"divide-line-1ekSAJMBty","custom-avatar":"custom-avatar-Vk-2NNsR93",customAvatar:"custom-avatar-Vk-2NNsR93","collapse-icon":"collapse-icon-1Evnewul0j",collapseIcon:"collapse-icon-1Evnewul0j",collapsed:"collapsed-2gtTJf0PR2","select-arrow-wrapper":"select-arrow-wrapper-dxu1p7MzVP",selectArrowWrapper:"select-arrow-wrapper-dxu1p7MzVP","is-expanded":"is-expanded-3qA5IlS0Hr",isExpanded:"is-expanded-3qA5IlS0Hr","issue-status":"issue-status-2naKcfpdkb",issueStatus:"issue-status-2naKcfpdkb","is-clickable":"is-clickable-3C_tBN1ffv",isClickable:"is-clickable-3C_tBN1ffv","priority-icon-14":"priority-icon-14-Ens3wBpbHC",priorityIcon14:"priority-icon-14-Ens3wBpbHC",assignee:"assignee-Z_RSozXhw1","avatar-name":"avatar-name-3y5CSPRFpf",avatarName:"avatar-name-3y5CSPRFpf","no-assignee":"no-assignee-DIkC8ZjWH7",noAssignee:"no-assignee-DIkC8ZjWH7","custom-priority":"custom-priority-2eoQqLWtEB",customPriority:"custom-priority-2eoQqLWtEB","cart-down":"cart-down-3EwRjR2_uC",cartDown:"cart-down-3EwRjR2_uC","search-icon":"search-icon-1PKFBBy6X-",searchIcon:"search-icon-1PKFBBy6X-","clear-icon":"clear-icon-7dj-p0OwJe",clearIcon:"clear-icon-7dj-p0OwJe","cooperate-table":"cooperate-table-2xvzNsdX1S",cooperateTable:"cooperate-table-2xvzNsdX1S"}},"4FS9":function(e,t,a){e.exports={"risk-modal-footer":"risk-modal-footer-26RNqlBgUS",riskModalFooter:"risk-modal-footer-26RNqlBgUS","footer-btn":"footer-btn-3mLdoJ_wDF",footerBtn:"footer-btn-3mLdoJ_wDF"}},"5F3H":function(e,t,a){e.exports=a.p+"625784ba3efb92b61698cc1414144a13.svg"},"5N4S":function(e,t,a){e.exports={wrapper:"wrapper-3gg1KTzJ9X",trigger:"trigger-3f5FrMAY-9","trigger-icon":"trigger-icon-1RSBWegP9_",triggerIcon:"trigger-icon-1RSBWegP9_","trigger-text":"trigger-text-10m0BxNYPB",triggerText:"trigger-text-10m0BxNYPB",overlay:"overlay-2pSxLQZcN6","overlay-footer":"overlay-footer-H3LQOPLGaT",overlayFooter:"overlay-footer-H3LQOPLGaT","overlay-footer-button":"overlay-footer-button-1s_sR8HuqD",overlayFooterButton:"overlay-footer-button-1s_sR8HuqD","overlay-footer-button-default":"overlay-footer-button-default-3_E4hPS-Id",overlayFooterButtonDefault:"overlay-footer-button-default-3_E4hPS-Id","overlay-footer-button-primary":"overlay-footer-button-primary-19kBalccw6",overlayFooterButtonPrimary:"overlay-footer-button-primary-19kBalccw6","overlay-footer-button-disabled":"overlay-footer-button-disabled-34d6UiHuvC",overlayFooterButtonDisabled:"overlay-footer-button-disabled-34d6UiHuvC","user-overlay":"user-overlay-1s3AaMHbbc",userOverlay:"user-overlay-1s3AaMHbbc","user-overlay-search":"user-overlay-search-pA2w2AM9S3",userOverlaySearch:"user-overlay-search-pA2w2AM9S3","user-overlay-search-icon":"user-overlay-search-icon-32d0LHU8Sm",userOverlaySearchIcon:"user-overlay-search-icon-32d0LHU8Sm","user-overlay-search-input":"user-overlay-search-input-paH-Jkbrhs",userOverlaySearchInput:"user-overlay-search-input-paH-Jkbrhs","user-overlay-search-remove-icon":"user-overlay-search-remove-icon-yuvXd38tt2",userOverlaySearchRemoveIcon:"user-overlay-search-remove-icon-yuvXd38tt2","user-overlay-to-project":"user-overlay-to-project-1utYbDHJdw",userOverlayToProject:"user-overlay-to-project-1utYbDHJdw","user-overlay-to-project-inner":"user-overlay-to-project-inner-36fciJB3ry",userOverlayToProjectInner:"user-overlay-to-project-inner-36fciJB3ry","user-overlay-to-project-right-icon":"user-overlay-to-project-right-icon-1ySOt3U0yJ",userOverlayToProjectRightIcon:"user-overlay-to-project-right-icon-1ySOt3U0yJ","user-overlay-to-project-left-icon":"user-overlay-to-project-left-icon-u05-Vr0116",userOverlayToProjectLeftIcon:"user-overlay-to-project-left-icon-u05-Vr0116","user-overlay-to-project-text":"user-overlay-to-project-text-bYoZji0xUR",userOverlayToProjectText:"user-overlay-to-project-text-bYoZji0xUR","user-overlay-list":"user-overlay-list-Ij99OTI-FW",userOverlayList:"user-overlay-list-Ij99OTI-FW","user-overlay-list-higher":"user-overlay-list-higher-3PNKgFf5tT",userOverlayListHigher:"user-overlay-list-higher-3PNKgFf5tT","selected-overlay":"selected-overlay-1NJtnNP7zv",selectedOverlay:"selected-overlay-1NJtnNP7zv","selected-overlay-expand":"selected-overlay-expand-172o9cnHa4",selectedOverlayExpand:"selected-overlay-expand-172o9cnHa4","selected-overlay-header":"selected-overlay-header-1QJj9cwZqd",selectedOverlayHeader:"selected-overlay-header-1QJj9cwZqd","selected-overlay-header-icon":"selected-overlay-header-icon-3UFOpaKdFF",selectedOverlayHeaderIcon:"selected-overlay-header-icon-3UFOpaKdFF","selected-overlay-header-text":"selected-overlay-header-text-uPoPU0Wei3",selectedOverlayHeaderText:"selected-overlay-header-text-uPoPU0Wei3","selected-overlay-list":"selected-overlay-list-1CD4BBEvl_",selectedOverlayList:"selected-overlay-list-1CD4BBEvl_","project-overlay":"project-overlay-1b3BeLkdbw",projectOverlay:"project-overlay-1b3BeLkdbw","project-overlay-header":"project-overlay-header-21llLL2dLJ",projectOverlayHeader:"project-overlay-header-21llLL2dLJ","project-overlay-header-icon":"project-overlay-header-icon-b0ynHnn2-6",projectOverlayHeaderIcon:"project-overlay-header-icon-b0ynHnn2-6","project-overlay-search":"project-overlay-search-3gC1IdeNQj",projectOverlaySearch:"project-overlay-search-3gC1IdeNQj","project-overlay-search-icon":"project-overlay-search-icon-3s5IuHsZRj",projectOverlaySearchIcon:"project-overlay-search-icon-3s5IuHsZRj","project-overlay-search-input":"project-overlay-search-input-1GHizHlv6V",projectOverlaySearchInput:"project-overlay-search-input-1GHizHlv6V","project-overlay-search-remove-icon":"project-overlay-search-remove-icon-1gpLqs5ykC",projectOverlaySearchRemoveIcon:"project-overlay-search-remove-icon-1gpLqs5ykC","project-overlay-list":"project-overlay-list-2mDSxgf46r",projectOverlayList:"project-overlay-list-2mDSxgf46r","project-overlay-list-higher":"project-overlay-list-higher-3H-megASwD",projectOverlayListHigher:"project-overlay-list-higher-3H-megASwD","user-item":"user-item-1Lp7TFl7Kn",userItem:"user-item-1Lp7TFl7Kn","user-item-avatar":"user-item-avatar-1dfXYMCxr1",userItemAvatar:"user-item-avatar-1dfXYMCxr1","user-item-name":"user-item-name-h3BJXzg2zA",userItemName:"user-item-name-h3BJXzg2zA","user-item-check":"user-item-check-1AVZNxB-aN",userItemCheck:"user-item-check-1AVZNxB-aN","project-item":"project-item-Oi-YB4oEWe",projectItem:"project-item-Oi-YB4oEWe","project-item-arrow":"project-item-arrow-2FfMw8hUH2",projectItemArrow:"project-item-arrow-2FfMw8hUH2","project-item-sticky":"project-item-sticky-1kTVquz-NQ",projectItemSticky:"project-item-sticky-1kTVquz-NQ","project-item-expand":"project-item-expand-3ETmIF2MpL",projectItemExpand:"project-item-expand-3ETmIF2MpL","project-item-avatar":"project-item-avatar-1_xVYqdo-1",projectItemAvatar:"project-item-avatar-1_xVYqdo-1","project-item-name":"project-item-name-1xtZih82zv",projectItemName:"project-item-name-1xtZih82zv","project-item-check":"project-item-check-370tWkj-X0",projectItemCheck:"project-item-check-370tWkj-X0","selected-item":"selected-item-1nfyNIvfQ_",selectedItem:"selected-item-1nfyNIvfQ_","selected-item-remove":"selected-item-remove-1BZwGHYBWN",selectedItemRemove:"selected-item-remove-1BZwGHYBWN","selected-item-avatar":"selected-item-avatar-1ELQzn6bkq",selectedItemAvatar:"selected-item-avatar-1ELQzn6bkq","selected-item-name":"selected-item-name-1G4k7w--Ce",selectedItemName:"selected-item-name-1G4k7w--Ce","search-empty":"search-empty-Qs87aCAzVm",searchEmpty:"search-empty-Qs87aCAzVm","search-empty-icon":"search-empty-icon-1qNVCQJ_lb",searchEmptyIcon:"search-empty-icon-1qNVCQJ_lb","search-empty-text":"search-empty-text-1nWbCjzolb",searchEmptyText:"search-empty-text-1nWbCjzolb"}},"5YzM":function(e,t,a){e.exports={trigger:"trigger-2CaRMKTcQ0",hovered:"hovered-23VEW5D-4l","trigger-closed":"trigger-closed-ZPvQgnFFGk",triggerClosed:"trigger-closed-ZPvQgnFFGk"}},"5eN8":function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=n(a("17x9")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),f=a("FaIw"),p=n(a("74sH")),m=a("7FZc"),v=a("1qdz");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,l.default)(a,e);var t=g(a);function a(){var e;(0,o.default)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).getContent=function(){var t=e.props.item.issueLog;if("success"===t.content.result){var a='\u7cfb\u7edf\u6267\u884c\u7236\u5b50\u6d41\u7a0b\uff08\u7236\uff09\u89c4\u5219\u6210\u529f\uff0c\u7236\u4e8b\u9879\u72b6\u6001\u53d8\u4e3a"'.concat(t.content.statusName,'"\u65f6\uff0c\u5b50\u4e8b\u9879\u72b6\u6001\u53d8\u4e3a"').concat(t.content.anotherStatusName,'"');return d.default.createElement(m.TooltipTrigger,{title:a},d.default.createElement("span",null,a))}if("failed"===t.content.result)return"\u7cfb\u7edf\u6267\u884c\u7236\u5b50\u6d41\u7a0b\uff08\u7236\uff09\u89c4\u5219\u5931\u8d25\uff0c\u6761\u4ef6\u4e0d\u6ee1\u8db3"},e}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item;return d.default.createElement("div",{className:v.listItem,key:e.id},d.default.createElement("div",{className:v.dot}),d.default.createElement("div",{className:v.content},d.default.createElement(p.default,{className:"mr-10 ".concat(v.icon)}),d.default.createElement("span",{className:v.msg},this.getContent()),d.default.createElement("span",{className:v.time},(0,f.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(d.Component);t.default=E,E.propTypes={item:u.default.object}},"5hex":function(e,t,a){"use strict";var n=a("cDcd"),r=a.n(n),o=a("tTuW"),i=a.n(o),l=a("mVeg"),c=a("bD1J"),s=a.n(c),u=a("K2gz"),d=a.n(u),f=a("6RcS"),p=a("Z4vw"),m=a("TT2u"),v=a.n(m),h=a("Qkhu"),g=a.n(h),E=a("cbX5"),y=a("xgZS"),b=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),I=function(){return(I=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},S=function(e){return"jpeg"===e||"jpg"===e||"png"===e},T=function(e){function t(t){var a=e.call(this,t)||this;return a.isCanceled=!1,a.state={progress:0,isImage:!1,imgSrc:"",attachmentState:void 0,showModal:!1},a.handleClick=a.handleClick.bind(a),a.handleFilePreview=a.handleFilePreview.bind(a),a}return b(t,e),t.prototype.componentDidMount=function(){var e=this.props.attachment;this.setState({isImage:e&&e.fileType?S(e.fileType):"string"===typeof e.type&&!/\.*\.svg$/.test(e.name)&&/^image/.test(e.type)}),e&&e.id?e.fileType?this.getAttachmentItemUrl(e):this.createPreImage():(this.createPreImage(),this.createUploadFile(e.file))},t.prototype.render=function(){var e,t,a,n,o=this,i=this.props,c=i.attachment,u=i.classNames,f=this.state,p=f.isImage,m=f.imgSrc,v=f.progress,h=f.showModal,E=!(c&&c.id),y=E?{backgroundImage:"url("+m+")"}:{};return r.a.createElement("div",{className:d()(s.a.attachmentsItem,u,(e={},e[s.a.isImage]=p,e[s.a.isDisabled]=E,e))},r.a.createElement(g.a,{show:h,type:"ATTACHMENT",text:Object(l.t)("\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f"),onConfirm:function(){o.props.uploadFileDelete(c),o.setState({showModal:!1})},onClose:function(){o.setState({showModal:!1})}}),r.a.createElement("div",{className:d()(s.a.attachmentsItemCover,(t={},t[s.a.isImage]=p,t)),style:y},p&&!E&&this.renderImage(m),r.a.createElement("div",{className:d()(s.a.attachmentsItemWrapper,(a={},a[s.a.isImage]=p,a)),onClick:function(e){return o.handleFilePreview(e,E)}},r.a.createElement("div",{className:d()(s.a.attachmentsItemTitle,(n={},n[s.a.isImage]=p,n))},c.name),this.renderActionBar(p,E)),E&&this.renderProgress(v)))},t.prototype.renderImage=function(e){return r.a.createElement("div",{className:s.a.attachmentsItemImg,style:{backgroundImage:"url("+e+")"}})},t.prototype.renderActionBar=function(e,t){var a,n,o=this,i=this.props,l=i.attachment,c=i.disabled;return r.a.createElement("div",{className:d()(s.a.attachmentsItemBar,(a={},a[s.a.isImage]=e,a))},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:s.a.attachmentsItemLogo,style:{backgroundImage:"url("+this.getStaticFile(l.name)+")"}}),r.a.createElement("div",{className:s.a.attachmentsItemSize},function(e){if(e){var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+["B","KB","MB","GB","TB"][t]}return"0B"}(l.size))),!c&&r.a.createElement("div",{className:d()(s.a.attachmentsItemAction,(n={},n[s.a.cancel]=!e&&t,n[s.a.isImage]=t&&e,n[s.a.del]=!t,n)),onClick:function(e){return o.handleClick(e,t)}}))},t.prototype.renderProgress=function(e){return r.a.createElement("div",{className:s.a.attachmentsItemProgress,style:{width:e+"%"}})},t.prototype.handleFilePreview=function(e,t){var a=this.props,n=a.allowPreview,r=a.onPreview,o=a.attachment;n&&(t||o.id&&r(o))},t.prototype.handleClick=function(e,t){e.preventDefault(),e.stopPropagation();var a=this.props.attachment;t?(this.isCanceled=!0,this.props.uploadFileCancel(a)):this.setState({showModal:!0})},t.prototype.getStaticFile=function(e){var t=e&&e.replace(/.+\./,"").toUpperCase(),n=f.FILE_TYPE_MAP.get(t)||"others";return a("caD3")("./".concat(n,".svg"))},t.prototype.createUploadFile=function(e){var t=this,a=this.props.attachment;Object(E.a)("/collaboration/api/issue-reviews/preSignUpload",{file:e},void 0,(function(e,a){var n=a.loaded,r=a.total,o=parseFloat((100*n/r).toFixed(2));t.setState({progress:o===1/0?100:+o})})).then((function(e){var n=Object(p.toCamelCase)(e);t.props.uploadFileSuccess(I(I({},a),{id:n.storageKey,attachmentId:n.attachmentId,fileId:n.attachmentId,isCanceled:t.isCanceled}))})).catch((function(e){(null===e||void 0===e?void 0:e.message)&&Object(y.danger)(null===e||void 0===e?void 0:e.message),t.props.uploadFileFailed(I({},a))}))},t.prototype.createPreImage=function(){var e=this,t=this.props.attachment;if(t&&"string"===typeof t.type&&/^image/.test(t.type)){var a=new FileReader;a.onload=function(){var t=a.result;e.setState({imgSrc:t})},a.readAsDataURL(t.file)}},t.prototype.getAttachmentItemUrl=function(e){this.setState({imgSrc:S(e.fileType)&&e.previewUrl})},t.defaultProps={width:128,height:80,allowPreview:!0},t}(n.Component),w=v()(T),C=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i};t.a=function(e){var t=e.allowPreview,a=e.attachments,o=e.disabled,l=e.uploadFileSuccess,c=e.uploadFileFailed,s=e.uploadFileDelete,u=e.uploadFileCancel,d=e.onPreview,f=Object(n.useRef)(null),p=function(e){void 0===e&&(e="left"),"left"===e&&f.current&&(f.current.scrollLeft=f.current.scrollLeft-f.current.clientWidth),"right"===e&&f.current&&(f.current.scrollLeft=f.current.scrollLeft+f.current.clientWidth)},m=C(Object(n.useState)(!1),2),v=m[0],h=m[1];return Object(n.useEffect)((function(){h(!0)}),[]),r.a.createElement("div",{className:i.a.wrapper},f.current&&f.current.scrollLeft>0&&v&&r.a.createElement("div",{className:i.a.prev,onClick:function(){return p()}}),f.current&&f.current.scrollLeft+f.current.clientWidth<f.current.scrollWidth&&v&&r.a.createElement("div",{className:i.a.next,onClick:function(){return p("right")}}),r.a.createElement("div",{className:i.a.container},r.a.createElement("div",{className:i.a.slider,ref:f},r.a.createElement("div",{className:i.a.list},a.filter((function(e){return!e.isCanceled})).map((function(e){return r.a.createElement("div",{className:i.a.item,key:e.fileId},r.a.createElement(w,{allowPreview:t,disabled:o,attachment:e,uploadFileSuccess:l,uploadFileFailed:c,uploadFileDelete:s,uploadFileCancel:u,onPreview:d}))}))))))}},"5nF9":function(e,t,a){e.exports={"menu-bar":"menu-bar-29XDfMERkk",menuBar:"menu-bar-29XDfMERkk","right-section":"right-section-JX4E-8qJkj",rightSection:"right-section-JX4E-8qJkj","left-section":"left-section-zbc71mGzpV",leftSection:"left-section-zbc71mGzpV",divider:"divider-37W-X9rw6Y","tab-link":"tab-link-3c7kD1Xhhz",tabLink:"tab-link-3c7kD1Xhhz",active:"active-9I3lkhNdj6"}},"6Ady":function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=n(a("17x9")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),f=a("FaIw"),p=n(a("74sH")),m=a("1qdz"),v=a("7FZc");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,l.default)(a,e);var t=g(a);function a(){var e;(0,o.default)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).getContent=function(){var t=e.props.item.issueLog;if("success"===t.content.result){var a='\u7cfb\u7edf\u6267\u884c\u7236\u5b50\u6d41\u7a0b\uff08\u5b50\uff09\u89c4\u5219\u6210\u529f\uff0c\u5b50\u4e8b\u9879\u72b6\u6001\u53d8\u4e3a"'.concat(t.content.statusName,'"\u65f6\uff0c\u7236\u4e8b\u9879\u72b6\u6001\u53d8\u4e3a"').concat(t.content.anotherStatusName,'"');return d.default.createElement(v.TooltipTrigger,{title:a},d.default.createElement("span",null,a))}if("failed"===t.content.result)return"\u7cfb\u7edf\u6267\u884c\u7236\u5b50\u6d41\u7a0b\uff08\u5b50\uff09\u89c4\u5219\u5931\u8d25\uff0c\u6761\u4ef6\u4e0d\u6ee1\u8db3"},e}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item;return d.default.createElement("div",{className:m.listItem,key:e.id},d.default.createElement("div",{className:m.dot}),d.default.createElement("div",{className:m.content},d.default.createElement(p.default,{className:"mr-10 ".concat(m.icon)}),d.default.createElement("span",{className:m.msg,title:e.issueLog.content.val},this.getContent()),d.default.createElement("span",{className:m.time},(0,f.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(d.Component);t.default=E,E.propTypes={item:u.default.object}},"6RcS":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FILE_TYPE_MAP=void 0,a("RW0V"),a("9AAn"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo");var n={image:["PNG","JPG","JPEG","BMP","GIF","WEBP","TIFF"],video:["MP4","MOV","AVI","MPEG","MPG","TS"],audio:["MP3","AAC","WAV","WMA","CDA","FLAC","M4A","MID","MKA","MP2","MPA","MPC","APE","OFR","OGG","RA","WV","TTA","AC3","DTS"],archive:["ZIP","RAR","7Z","GZ","XZ",".BZ2"],code:["HTML","CSS","JS","JAVA","PY","PHP","ASP","JSP","NET","JSX","CONFIG","XML","WXML","C","SASS","STYLUS","LESS"],xls:["XLS","XLSX","CSV"],pdf:["PDF"],ppt:["PPT","PPTX"],doc:["DOC","DOCX"],txt:["TXT"],photoshop:["PSD"],illustrator:["AI"],md:["MD","MDOWN","MARKDOWN"],svg:["SVG"]},r=Object.keys(n).reduce((function(e,t){return n[t].forEach((function(a){e.set(a,t)})),e}),new Map);t.FILE_TYPE_MAP=r},"7Oud":function(e,t,a){e.exports={progress:"progress-22SfZNALv5",header:"header-3kn92xtlI2",noted:"noted-2oA8cE-vA6","empty-record-tip":"empty-record-tip-1Z793wBWEz",emptyRecordTip:"empty-record-tip-1Z793wBWEz","record-text":"record-text-2ktGjFSCYt",recordText:"record-text-2ktGjFSCYt","left-text":"left-text-3iRExfXibW",leftText:"left-text-3iRExfXibW"}},"7XaK":function(e,t,a){e.exports={add:"add-3XRq82OYmj","add-icon":"add-icon-1SPifT9QFj",addIcon:"add-icon-1SPifT9QFj","add-icon-active":"add-icon-active-3YrVUSeXuQ",addIconActive:"add-icon-active-3YrVUSeXuQ",popup:"popup-1C8G_PIBZE","popup-item":"popup-item-hK-M91Uuoh",popupItem:"popup-item-hK-M91Uuoh",exclude:"exclude-3Hqk5HsvhU"}},"7hiy":function(e,t,a){"use strict";a.r(t);var n=a("mVeg"),r=a("cDcd"),o=a.n(r),i=a("O0Gi"),l=a.n(i),c=a("EyEP"),s=a.n(c),u=a("OajT"),d=a.n(u),f=a("f0Wu"),p=a.n(f),m=a("iR1w"),v=a("Gtz0"),h=a.n(v);t.default=d()(h()((function(e){var t=e.sectionExpanded,a=e.SectionToggletrigger,i=e.feedBackList,c=e.moduleConfig,u=Object(r.useCallback)((function(e){var t=e.index,a=e.style,n=e.data.list[t];return o.a.createElement("div",{className:l.a.feedBack,onClick:function(){return window.open(n.url)},key:n.id,style:a},o.a.createElement("div",{className:l.a.icon}),o.a.createElement("div",{className:l.a.word,title:n.title},n.title),o.a.createElement("div",{className:l.a.time},p()(n.created_at).format("YYYY/MM/DD HH:mm")))}),[]);return o.a.createElement("div",{className:l.a.wrapper},!!i.length&&c.txc&&o.a.createElement("div",{className:s.a.header},o.a.createElement(a,null),o.a.createElement("div",{className:s.a.text},Object(n.t)("\u5173\u8054\u7528\u6237\u53cd\u9988"))),!!i.length&&c.txc&&t&&o.a.createElement("div",{className:l.a.list},o.a.createElement(m.FixedSizeList,{itemCount:i.length,itemSize:36,width:"100%",height:Math.min(345,36*i.length),itemData:{list:i}},u)))})))},"7kQb":function(e,t,a){e.exports={body:"body-3zJ4RW1dqU",title:"title-2k6lePGWjN",list:"list-151Ev41Mfx",header:"header-3Js0JWWkrZ",progress:"progress-3AMrbP-UOv","progress-bar":"progress-bar-XQxuwNj9Kl",progressBar:"progress-bar-XQxuwNj9Kl","progress-bar-inner":"progress-bar-inner-3wjc8PkEHx",progressBarInner:"progress-bar-inner-3wjc8PkEHx","progress-text":"progress-text-2iewEdCa9b",progressText:"progress-text-2iewEdCa9b","reference-list":"reference-list-3lS3QIYmi-",referenceList:"reference-list-3lS3QIYmi-",icon:"icon-3uyMwa2C_h","resource-id":"resource-id-1uXEu8h3ju",resourceId:"resource-id-1uXEu8h3ju","resource-title":"resource-title-2O5bcJsfzi",resourceTitle:"resource-title-2O5bcJsfzi","resource-status":"resource-status-2OZ1rxGHPe",resourceStatus:"resource-status-2OZ1rxGHPe","delete-status":"delete-status-gq4_34cNKY",deleteStatus:"delete-status-gq4_34cNKY","disable-link":"disable-link-1h0XKhzTiN",disableLink:"disable-link-1h0XKhzTiN","delete-style":"delete-style-1nt2Qhsi0z",deleteStyle:"delete-style-1nt2Qhsi0z","add-reference":"add-reference-2LfApTjv-C",addReference:"add-reference-2LfApTjv-C","vcs-detail":"vcs-detail-YOu1J6ZNTD",vcsDetail:"vcs-detail-YOu1J6ZNTD","vcs-tag":"vcs-tag-3hsvRisNvD",vcsTag:"vcs-tag-3hsvRisNvD","vcs-icon":"vcs-icon-1GhL8yD6eJ",vcsIcon:"vcs-icon-1GhL8yD6eJ","vcs-text":"vcs-text-SokfA8NJ07",vcsText:"vcs-text-SokfA8NJ07","vcs-committer":"vcs-committer-2qoNx3BQKc",vcsCommitter:"vcs-committer-2qoNx3BQKc"}},"7oEN":function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("o0o1")),i=n(a("yXPU")),l=n(a("lwsE")),c=n(a("W8MJ")),s=n(a("PJYZ")),u=n(a("7W2i")),d=n(a("a1gu")),f=n(a("Nsbk")),p=a("mVeg"),m=n(a("17x9")),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=S(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),h=a("FaIw"),g=n(a("zIEN")),E=n(a("/Ypu")),y=a("dtw8"),b=a("w3Wo"),I=a("1qdz");function S(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(S=function(e){return e?a:t})(e)}function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}var w={ADD:(0,p.t)("\u7eb3\u5165\u4e86"),REMOVE:(0,p.t)("\u89e3\u9664"),CREATE:(0,p.t)("\u521b\u5efa\u5e76\u5173\u8054\u4e86"),DELETE:(0,p.t)("\u5220\u9664\u4e86\u5173\u8054")},C=function(e){(0,u.default)(a,e);var t=T(a);function a(e){var n;return(0,l.default)(this,a),(n=t.call(this,e)).handleClick=function(){var e=(0,i.default)(o.default.mark((function e(t,a){var r,i,l,c,s,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l=n.props,c=l.projectId,s=l.item,t.preventDefault(),e.next=5,(0,b.fetchIssueDetailByCode)(c,null===s||void 0===s||null===(r=s.issueLog)||void 0===r||null===(i=r.content)||void 0===i?void 0:i.code);case 5:u=e.sent,u.data.code&&window.open(a),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}(),n.renderLink=n.renderLink.bind((0,s.default)(n)),n}return(0,c.default)(a,[{key:"render",value:function(){var e=this.props.item;return v.default.createElement("div",{className:I.listItem,key:e.id},v.default.createElement("div",{className:I.dot}),v.default.createElement("div",{className:I.content},"DELETE"===e.issueLog.action&&v.default.createElement(E.default,{className:"mr-10 ".concat(I.icon)}),"DELETE"!==e.issueLog.action&&v.default.createElement(g.default,{className:"mr-10 ".concat(I.icon)}),v.default.createElement("span",{className:I.user},e.creator.name),v.default.createElement("span",null,w[e.issueLog.action],e.issueLog.content.issueTypeName),"DELETE"!==e.issueLog.action?this.renderLink(e):v.default.createElement("span",{className:"ml-10 ".concat(I.moreDot)},"#",e.issueLog.content.code,"-",e.issueLog.content.name),"REMOVE"===e.issueLog.action&&v.default.createElement("span",{className:"ml-10"},(0,p.t)("\u7684\u5173\u8054")),v.default.createElement("span",{className:I.time},(0,h.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}},{key:"renderLink",value:function(e){var t=this,a=this.props.projectPath;switch(e.issueLog.content.type){case"REQUIREMENT":return v.default.createElement(y.Link,{className:"ml-10 ".concat(I.moreDot),target:"_blank",onClick:function(n){t.handleClick(n,"".concat(a,"/requirements/issues/").concat(e.issueLog.content.code,"/detail"))}},"#",e.issueLog.content.code,"-",e.issueLog.content.name);case"MISSION":return v.default.createElement(y.Link,{className:"ml-10 ".concat(I.moreDot),target:"_blank",onClick:function(n){t.handleClick(n,"".concat(a,"/assignments/issues/").concat(e.issueLog.content.code,"/detail"))}},"#",e.issueLog.content.code,"-",e.issueLog.content.name);case"DEFECT":return v.default.createElement(y.Link,{className:"ml-10 ".concat(I.moreDot),target:"_blank",onClick:function(n){t.handleClick(n,"".concat(a,"/bug-tracking/issues/").concat(e.issueLog.content.code,"/detail"))}},"#",e.issueLog.content.code,"-",e.issueLog.content.name);default:return v.default.createElement(y.Link,{className:"ml-10 ".concat(I.moreDot),target:"_blank",onClick:function(n){t.handleClick(n,"".concat(a,"/epics/issues/").concat(e.issueLog.content.code,"/detail"))}},"#",e.issueLog.content.code,"-",e.issueLog.content.name)}}}]),a}(v.Component);t.default=C,C.propTypes={item:m.default.object,projectPath:m.default.string,projectId:m.default.number}},"8+Mu":function(e,t,a){"use strict";a("I5cv"),a("RW0V"),a("ioFf"),a("mYba"),a("jm62"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("bWfx"),a("0l/t");var o,i,l,c=n(a("lSNA")),s=n(a("lwsE")),u=n(a("W8MJ")),d=n(a("PJYZ")),f=n(a("7W2i")),p=n(a("a1gu")),m=n(a("Nsbk")),v=a("mVeg"),h=n(a("17x9")),g=O(a("cDcd")),E=n(a("Cjhb")),y=n(a("K2gz")),b=n(a("SLo4")),I=n(a("z0hg")),S=O(a("OajT")),T=n(a("SUhN")),w=a("xgZS");function C(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(C=function(e){return e?a:t})(e)}function O(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=C(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function j(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,m.default)(e);if(t){var r=(0,m.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,p.default)(this,a)}}var D=(0,S.default)((l=i=function(e){(0,f.default)(a,e);var t=j(a);function a(){var e;return(0,s.default)(this,a),(e=t.call(this)).handleAttachmentLimit=function(){(0,w.warning)((0,v.t)("\u6700\u591a\u53ea\u53ef\u4e0a\u4f2020\u4e2a\u9644\u4ef6"))},e.showImportOutResourcePicker=function(){e.setState({isShowImportOutResourcePicker:!0})},e.hideImportOutResourcePicker=function(){e.setState({isShowImportOutResourcePicker:!1})},e.uploadFileSuccess=function(t){e.hideImportOutResourcePicker(),e.props.uploadFileSuccess(t)},e.state={showButton:!1,toLeft:0,isShowImportOutResourcePicker:!1},e.wrapperRef=g.default.createRef(),e.listRef=g.default.createRef(),e.moveContent=e.moveContent.bind((0,d.default)(e)),e}return(0,u.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.SectionToggletrigger,n=t.sectionExpanded,r=t.attachments,o=t.currentProjectID,i=t.uploadFileFailed,l=t.uploadFileDelete,c=t.uploadFileCancel,s=t.disabled,u=t.currentAttachmentNum,d=t.onHandleAttachments,f=t.enterpriseGlobalKey,p=t.currentProjectName,m=t.issueCode,h=t.dir,S=t.noThirdLink,w=t.previewItemHandle,C=t.userID,O=this.state,N=O.showButton,P=O.toLeft,j=O.isShowImportOutResourcePicker,D=this.uploadFileSuccess,k=r.length>=20;return g.default.createElement("div",{className:E.default.root},g.default.createElement("div",{className:E.default.title},(0,v.t)("\u9644\u4ef6"),!s&&g.default.createElement("div",{className:E.default.divideLine}),!s&&g.default.createElement(b.default,{attachmentLimit:k,disabled:s,onHandleAttachments:d,currentAttachmentNum:u},g.default.createElement("a",{className:E.default.editButton},(0,v.t)("\u4e0a\u4f20\u9644\u4ef6"))),!s&&g.default.createElement("div",{className:E.default.importOutResourceWrap},g.default.createElement(T.default,{onHandleAttachments:d,isShowPicker:j,onShow:this.showImportOutResourcePicker,onHide:this.hideImportOutResourcePicker,noThirdLink:S,attachmentLimit:k})),g.default.createElement(a,null)),n&&(r.length?g.default.createElement("div",{className:E.default.list},g.default.createElement("div",{className:(0,y.default)(E.default.attachmentListContainer,N&&E.default.rightBorder,P<0&&E.default.leftBorder),ref:this.wrapperRef},g.default.createElement("div",{className:E.default.attachmentList,ref:this.listRef,style:{left:"".concat(P,"px")}},r.filter((function(e){return!e.isCanceled})).map((function(e){return g.default.createElement("div",{className:E.default.attachmentItem,key:e.fileId},g.default.createElement(I.default,{currentProjectId:o,userId:C,dir:h,disabled:s,attachment:e,uploadFileSuccess:D,uploadFileFailed:i,uploadFileDelete:l,uploadFileCancel:c,enterpriseGlobalKey:f,currentProjectName:p,issueCode:m,previewItemHandle:w}))})))),N&&g.default.createElement("a",{className:E.default.next,onClick:this.moveContent}),P<0&&g.default.createElement("a",{className:E.default.pre,onClick:function(){return e.moveContent(!1)}})):g.default.createElement("p",{className:E.default.emptySlogan},s?(0,v.t)("\u65e0\u9644\u4ef6"):(0,v.t)("\u5c1a\u672a\u6dfb\u52a0\u9644\u4ef6"))))}},{key:"componentDidMount",value:function(){this.whetherShowMoveButton()}},{key:"componentDidUpdate",value:function(e){e.attachments.length===this.props.attachments.length&&e.expanded===this.props.expanded||this.whetherShowMoveButton()}},{key:"whetherShowMoveButton",value:function(){if(this.wrapperRef.current&&this.listRef.current){var e=this.wrapperRef.current.getBoundingClientRect().width,t=this.listRef.current.getBoundingClientRect().width;this.setState({showButton:t>e})}}},{key:"moveContent",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.wrapperRef.current&&this.listRef.current){var t=this.state.toLeft,a=this.wrapperRef.current.getBoundingClientRect(),n=a.width,r=this.listRef.current.getBoundingClientRect(),o=r.width,i=o+t-n;e?i<=n?this.setState({toLeft:t+-1*i,showButton:!1}):this.setState({toLeft:t-n}):i<=n?this.setState({toLeft:0,showButton:!0}):this.setState({toLeft:t+n})}}}]),a}(g.Component),i.propTypes=P(P({expanded:h.default.bool,currentProjectID:h.default.number,date:h.default.number,disabled:h.default.bool,attachments:h.default.array,uploadFileSuccess:h.default.func,uploadFileFailed:h.default.func,uploadFileDelete:h.default.func,uploadFileCancel:h.default.func,onHandleAttachments:h.default.func,currentAttachmentNum:h.default.number,enterpriseGlobalKey:h.default.string,currentProjectName:h.default.string,userID:h.default.number,issueCode:h.default.oneOfType([h.default.number,h.default.string]),dir:h.default.number},S.ToggleSectionWrapperProps),{},{noThirdLink:h.default.bool,previewItemHandle:h.default.func}),o=l))||o;t.default=D},"885C":function(e,t,a){"use strict";a("RW0V"),a("ioFf"),a("0l/t"),a("mYba"),a("jm62"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(t){var a,n=(0,c.useState)(null),r=(0,l.default)(n,2),i=r[0],s=r[1],u=(0,c.useState)(void 0),f=(0,l.default)(u,2),p=f[0],v=f[1],h=function(){var e=t.currentProject.id;if(p){var a=p.data;if(0===p.code&&a&&a.list&&a.list.length){var n=a.list.reduce((function(e,t){return e[t.name]=m({},t),e}),{});s(n)}}else{var r,o,i;if(!e)e=null===(r=t.targetData)||void 0===r?void 0:r.projectId;if(t.fromDM)e=null===t||void 0===t||null===(o=t.dmData)||void 0===o||null===(i=o.targetProject)||void 0===i?void 0:i.id;e&&(0,d.fetchHiddenFolderDirs)(e).then((function(e){var t=e.data;if(t&&t.list&&t.list.length){var a=t.list.reduce((function(e,t){return e[t.name]=m({},t),e}),{});s(a)}}))}},E=t.currentProject.id;E||(E=null===(a=t.targetData)||void 0===a?void 0:a.projectId);return(0,c.useEffect)((function(){h()}),[E,p]),c.default.createElement(g,{value:{hiddenFolderDirs:i,getHiddenFloderDirs:h}},c.default.createElement(e,(0,o.default)({},t,{changeHiddenFloderDirsFromZip:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;v(e)}})))};return t.propTypes={currentProject:s.default.object,targetData:s.default.object},(0,u.default)(v)(t)},t.ThemeConsumer=t.ThemeProvider=t.ThemeContext=void 0,a("f3/d");var o=n(a("pVnL")),i=n(a("lSNA")),l=n(a("J4zp")),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=f(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),s=n(a("17x9")),u=n(a("/HJl")),d=a("w3Wo");function f(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(f=function(e){return e?a:t})(e)}function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function v(e){return{currentProject:e.APP.currentProject}}var h=c.default.createContext();t.ThemeContext=h;var g=h.Provider;t.ThemeProvider=g;var E=h.Consumer;t.ThemeConsumer=E},"8LfU":function(e,t,a){"use strict";a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("J4zp")),i=a("mVeg"),l=n(a("17x9")),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=v(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),s=n(a("sftu")),u=n(a("+9PU")),d=n(a("zmh9")),f=n(a("yZ+p")),p=a("xgZS"),m=a("sWxF");function v(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(v=function(e){return e?a:t})(e)}var h=function(e){var t=(0,c.useState)(""),a=(0,o.default)(t,2),n=a[0],r=a[1],l=(0,c.useState)(""),v=(0,o.default)(l,2),h=v[0],g=v[1],E=(0,c.useState)(""),y=(0,o.default)(E,2),b=y[0],I=y[1],S=(0,c.useState)(""),T=(0,o.default)(S,2),w=T[0],C=T[1],O=e.show,N=e.onHide,P=e.currentProject,j=function(){n?(D(),(0,m.getOASyncRequirementInfo)(n,P.id).then((function(e){0===e.code?(g(e.data.requestId),I(e.data.requestName),C(e.data.status)):(0,p.danger)(e.msg.error)})).catch((function(e){(0,p.danger)(e.msg.error)}))):(0,p.danger)((0,i.t)("\u9700\u6c42\u7f16\u53f7\u53c2\u6570\u4e0d\u80fd\u4e3a\u7a7a"))},D=function(){g(""),I(""),C("")},k=function(){D(),r(""),N()},R=function(){if(n){if(w&&b)return(0,m.getOASyncRequirementStart)(n,P.id).then((function(e){0===e.code?(0,p.success)((0,i.t)("\u540c\u6b65\u6210\u529f\uff01")):(0,p.danger)(e.msg.error),D(),r(""),N()})).catch((function(e){(0,p.danger)(e.msg.error)}));(0,p.danger)((0,i.t)("\u8bf7\u5148\u67e5\u8be2OA\u9700\u6c42\u4fe1\u606f"))}else(0,p.danger)((0,i.t)("\u9700\u6c42\u7f16\u53f7\u53c2\u6570\u4e0d\u80fd\u4e3a\u7a7a"))};return c.default.createElement("div",null,c.default.createElement(s.default,{className:u.default.oaSyncContainer,show:O},c.default.createElement(s.default.Header,null,c.default.createElement("div",{className:u.default.oaHeader},c.default.createElement("div",{className:u.default.oaReq},c.default.createElement("span",null,(0,i.t)("\u9700\u6c42\u7f16\u53f7"))),c.default.createElement(f.default,{autoFocus:!0,size:"medium",placeholder:(0,i.t)("\u8bf7\u8f93\u5165\u9700\u6c42\u7f16\u53f7"),value:n,onChange:function(e){return r(e.target.value)}}),c.default.createElement(d.default,{className:u.default.oaQuery,onClick:j},(0,i.t)("\u67e5\u8be2")))),c.default.createElement(s.default.Body,null,c.default.createElement("table",{className:u.default.oaTable},c.default.createElement("thead",{className:u.default.tHead},c.default.createElement("th",{style:{width:"100px"},className:u.default.th},(0,i.t)("\u9700\u6c42\u7f16\u53f7")),c.default.createElement("th",{className:u.default.th},(0,i.t)("\u6807\u9898")),c.default.createElement("th",{style:{width:"100px"},className:u.default.th},(0,i.t)("\u72b6\u6001"))),h&&c.default.createElement("tbody",{className:u.default.tBody},c.default.createElement("tr",null,c.default.createElement("td",{style:{width:"100px"},className:u.default.td},h),c.default.createElement("td",{className:u.default.td},b),c.default.createElement("td",{style:{width:"100px"},className:u.default.td},w))))),c.default.createElement(s.default.Footer,null,c.default.createElement("div",null,c.default.createElement(d.default,{className:u.default.gap,onClick:R},(0,i.t)("\u786e\u5b9a")),c.default.createElement(d.default,{empty:!0,onClick:k},(0,i.t)("\u53d6\u6d88"))))))};h.propTypes={show:l.default.bool,onHide:l.default.func,currentProject:l.default.object};var g=h;t.default=g},"8Slx":function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("bHtr"),a("f3/d"),a("bWfx"),a("I78e");var o,i,l,c,s=n(a("RIqP")),u=n(a("lSNA")),d=n(a("lwsE")),f=n(a("W8MJ")),p=n(a("PJYZ")),m=n(a("7W2i")),v=n(a("a1gu")),h=n(a("Nsbk")),g=a("mVeg"),E=n(a("17x9")),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=_(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),b=n(a("gp0q")),I=n(a("tEAi")),S=n(a("fTwc")),T=n(a("30Wv")),w=a("lIIp"),C=a("FaIw"),O=n(a("E+oP")),N=a("dtw8"),P=n(a("82zu")),j=a("FpRC"),D=a("9aAT"),k=a("xgZS"),R=n(a("Qkhu")),M=n(a("K2gz")),A=n(a("jlRX")),L=a("AoGB"),x=a("1qdz");function _(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(_=function(e){return e?a:t})(e)}function F(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,h.default)(e);if(t){var r=(0,h.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,v.default)(this,a)}}var W=(o=(0,w.withAsyncMarkEditor)(),(0,N.withRouter)(i=(0,L.WithIssueEditingCtxDecorator)(i=o((c=l=function(e){(0,m.default)(a,e);var t=F(a);function a(e){var n;return(0,d.default)(this,a),(n=t.call(this,e)).onSaveRef=function(e){n.editor=e},n.openModal=function(e){n.setState({commentID:e,showModal:!0})},n.state={show:n.props.item.issueComment.childrenCommentsNumber>0,showBlueBorder:!1,editorState:e.defaultEditorState,showflash:!1,showModal:!1,commentID:void 0,isCommentEditorVisible:!1,childCommentsEditorVisibleArr:Array(n.props.item.issueComment.childrenCommentsNumber).fill(!1),commentDetail:""},n.getCommentAnchor=n.getCommentAnchor.bind((0,p.default)(n)),n.onToggle=n.onToggle.bind((0,p.default)(n)),n.onChange=n.onChange.bind((0,p.default)(n)),n.onEmojiPick=n.onEmojiPick.bind((0,p.default)(n)),n.onReply=n.onReply.bind((0,p.default)(n)),n.onPublishChildComment=n.onPublishChildComment.bind((0,p.default)(n)),n.onDeleteComment=n.onDeleteComment.bind((0,p.default)(n)),n.renderComment=n.renderComment.bind((0,p.default)(n)),n.renderChildComment=n.renderChildComment.bind((0,p.default)(n)),n.onCommentEditorVisible=n.onCommentEditorVisible.bind((0,p.default)(n)),n.onChildCommentEditorVisible=n.onChildCommentEditorVisible.bind((0,p.default)(n)),n}return(0,f.default)(a,[{key:"getCommentAnchor",value:function(e){return"comment-".concat(e||this.props.item.issueComment.id)}},{key:"isCurrentComment",value:function(){var e=this,t=this.props.location.hash;if(t==="#".concat(this.getCommentAnchor()))return!0;var a=!1;return(this.props.item.issueComment.childrenComments||[]).forEach((function(n){t==="#".concat(e.getCommentAnchor(n.id))&&(a=!0)})),a}},{key:"isCurrentCommentFromDomID",value:function(e){var t=this,a=e;if(a==="#".concat(this.getCommentAnchor()))return!0;var n=!1;return(this.props.item.issueComment.childrenComments||[]).forEach((function(e){a==="#".concat(t.getCommentAnchor(e.id))&&(n=!0)})),n}},{key:"onToggle",value:function(){var e=this,t=!this.state.show;this.setState({show:t},(function(){return t&&e.editor.focusToEnd()}))}},{key:"onChange",value:function(e){var t=this.props,a=t.getPlainText;(0,t.updateEditing)({isEditing:a(e),type:"COMMENT"}),this.setState({editorState:e})}},{key:"onEmojiPick",value:function(e){var t=this,a=this.props.getPlainText(this.state.editorState);a=a?"".concat(a," :").concat(e,": "):":".concat(e,": "),this.setState({editorState:this.props.createWithContent(a)},(function(){return t.editor.focusToEnd()}))}},{key:"onReply",value:function(e){var t=this,a=(0,D.atUser)(this.props.getPlainText(this.state.editorState),e.name);this.setState({show:!0,editorState:this.props.createWithContent(a)},(function(){return t.editor.focusToEnd()}))}},{key:"onPublishChildComment",value:function(){var e=this,t=this.props,a=t.code,n=t.onPublishChildComment,r=t.updateEditing,o=this.props.project.id,i=this.props.item.issueComment.id,l=this.props.getPlainText(this.state.editorState);l.trim()?n(o,a,l,i,(function(){r({isEditing:!1,type:""}),e.setState({editorState:e.props.defaultEditorState},(function(){return e.editor.focusToEnd()}))})):(0,k.danger)((0,g.t)("\u8bc4\u8bba\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"))}},{key:"onDeleteComment",value:function(){var e=this.props,t=e.code,a=e.onDeleteComment;a(this.props.project.id,t,this.state.commentID)}},{key:"isAllowedEditComment",value:function(e){if((0,O.default)(this.props.user))return!1;var t=this.props.user.global_key;return e?t===e.creator.globalKey:t===this.props.item.issueComment.creator.globalKey}},{key:"isCommentOwner",value:function(e){if((0,O.default)(this.props.user))return!1;var t=this.props.user.global_key;return t===this.props.item.issueComment.creator.globalKey||e&&t===e.creator.globalKey}},{key:"renderComment",value:function(){var e=this,t=this.props,a=t.item,n=t.isDetail,r=this.getCommentAnchor(),o=a.issueComment.content;return y.default.createElement("div",{className:x.commentContent},a.issueComment.updatedAt&&a.issueComment.createdAt!==a.issueComment.updatedAt&&y.default.createElement("div",{className:x.isEdited},(0,g.t)("\u5df2\u7f16\u8f91")),y.default.createElement(T.default,{html:o}),y.default.createElement("div",{className:x.commentStat},y.default.createElement("span",{className:(0,M.default)(x.commentUser,n&&x.commentUserDetail)},y.default.createElement("span",{className:x.commentUserName,title:a.creator.name},a.creator.name)),y.default.createElement(N.Link,{to:"".concat(location.pathname,"#").concat(r),className:x.time,onClick:function(){return e.onScroll(r)}},y.default.createElement("div",{className:(0,M.default)(x.commentIcon,x.clock)}),(0,C.timeFormat)(a.issueComment.updatedAt||a.issueComment.createdAt,"YYYY-MM-DD HH:mm")),y.default.createElement("span",{onClick:this.onToggle,className:(0,M.default)(x.commentToggle,(0,u.default)({},x.withArrow,this.state.show))},y.default.createElement("div",{className:(0,M.default)(x.commentIcon,x.comment)}),this.state.show?y.default.createElement("span",null,(0,g.t)("\u6536\u8d77\u8bc4\u8bba")):y.default.createElement("span",null,(0,g.t)("\u6253\u5f00\u8bc4\u8bba ({{num}}\uff09",{num:a.issueComment.childrenCommentsNumber}))),y.default.createElement("span",{className:x.commentButton,onClick:function(){return e.onReply(a.creator)}},y.default.createElement("div",{className:(0,M.default)(x.commentIcon,x.reply)}),y.default.createElement("span",null,(0,g.t)("\u56de\u590d"))),this.isAllowedEditComment()&&y.default.createElement("span",{className:x.commentButton,onClick:function(){return e.onCommentEditorVisible(a.issueComment.id,a.issueComment.rawContent)}},y.default.createElement("div",{className:(0,M.default)(x.commentIcon,x.edit)}),y.default.createElement("span",null,(0,g.t)("\u7f16\u8f91"))),this.isCommentOwner()&&y.default.createElement("span",{className:x.commentButton,onClick:function(){return e.openModal(a.issueComment.id)}},y.default.createElement("div",{className:(0,M.default)(x.commentIcon,x.remove)}),y.default.createElement("span",null,(0,g.t)("\u5220\u9664")))))}},{key:"renderChildComment",value:function(){var e=this,t=this.state.childCommentsEditorVisibleArr,a=this.props,n=a.project,r=a.code,o=a.editCommentCallback,i=a.itemType,l=a.user;return(this.props.item.issueComment.childrenComments||[]).map((function(a,c){var s=e.getCommentAnchor(a.id),u=a.content;return y.default.createElement("div",{key:c,className:x.childContainer},!t[c]&&y.default.createElement("div",{className:x.child},a.createdAt&&a.updatedAt&&a.createdAt!==a.updatedAt&&y.default.createElement("div",{className:x.isEdited},(0,g.t)("\u5df2\u7f16\u8f91")),y.default.createElement(b.default,{src:a.creator.avatar,className:x.childAvatar,size:"tiny"}),y.default.createElement("div",{className:x.achor,id:s}),y.default.createElement("div",{className:x.childContent},y.default.createElement(T.default,{html:u}),y.default.createElement("div",{className:x.commentStat},y.default.createElement("span",{className:x.commentUser},y.default.createElement("span",{className:x.commentUserName,title:a.creator.name},a.creator.name)),y.default.createElement(N.Link,{className:x.time,to:"".concat(location.pathname,"#").concat(s),onClick:function(){return e.onScroll(s)}},y.default.createElement("div",{className:(0,M.default)(x.commentIcon,x.clock)}),(0,C.timeFormat)(a.updatedAt||a.createdAt,"YYYY-MM-DD HH:mm")),y.default.createElement("span",{className:x.commentButton,onClick:function(){return e.onReply(a.creator)}},y.default.createElement("div",{className:(0,M.default)(x.commentIcon,x.reply)}),(0,g.t)("\u56de\u590d")),e.isAllowedEditComment(a)&&y.default.createElement("span",{className:x.commentButton,onClick:function(){return e.onChildCommentEditorVisible(a.id,a.rawContent,c)}},y.default.createElement("div",{className:(0,M.default)(x.commentIcon,x.edit)}),(0,g.t)("\u7f16\u8f91")),e.isCommentOwner(a)&&y.default.createElement("span",{className:x.commentButton,onClick:function(){return e.openModal(a.id)}},y.default.createElement("div",{className:(0,M.default)(x.commentIcon,x.remove)}),(0,g.t)("\u5220\u9664"))))),t[c]&&y.default.createElement(A.default,{show:t[c],currentProject:n,commentId:a.id,commentDetail:a.rawContent,issueCode:r,editCommentCallback:o,issueType:i,userId:l.id,closeHandle:function(){return e.onChildCommentEditorVisible(a.id,a.rawContent,c)}}))}))}},{key:"renderInput",value:function(){var e=this.props.ZenMarkEditorWithExtraSuggestions;return y.default.createElement("div",{className:x.commentInputContainer},y.default.createElement(e,{className:x.commentInput,editorState:this.state.editorState,onChange:this.onChange,placeholder:(0,g.t)("\u8bc4\u8bba\u8be5\u56de\u7b54"),onEnter:this.onPublishChildComment,projectId:this.props.project.id||0,currentProject:this.props.project,excludeds:[{code:this.props.code,id:this.props.project.id}],mentionParams:{project_id:this.props.project.id},hashSearchParams:{owner:this.props.project.owner_user_name,project:this.props.project.name,id:this.props.project.id},ref:this.onSaveRef}),y.default.createElement(P.default,{onPick:this.onEmojiPick},y.default.createElement(S.default,{className:x.smileo})),y.default.createElement(I.default,{className:x.arrowRight,onClick:this.onPublishChildComment}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.showflash,n=t.showModal,r=t.isCommentEditorVisible,o=t.commentID,i=t.commentDetail,l=this.props,c=l.item,s=l.project,d=l.code,f=l.editCommentCallback,p=l.itemType,m=l.user;return y.default.createElement("div",{className:(0,M.default)(x.listItem,x.commentItem,a&&x.flashContent,a&&x.flash)},y.default.createElement("div",{className:x.dot}),y.default.createElement("div",{className:x.commentContainer},y.default.createElement("div",{className:x.customAvatarWrapper},y.default.createElement("div",{className:x.avatarSize},y.default.createElement(b.default,{src:c.creator.avatar,className:x.avatar,size:"small"}))),y.default.createElement("div",{className:(0,M.default)(x.commentBox,(0,u.default)({},x.currentComment,this.isCurrentComment()&&this.state.showBlueBorder))},y.default.createElement("div",{className:x.achor,id:this.getCommentAnchor()}),!r&&this.renderComment(),r&&y.default.createElement(A.default,{show:r,currentProject:s,commentId:o,commentDetail:i,issueCode:d,editCommentCallback:f,issueType:p,userId:m.id,closeHandle:function(){return e.onCommentEditorVisible(o,i)}}),this.state.show&&this.renderChildComment(),this.state.show&&this.renderInput())),y.default.createElement(R.default,{show:n,type:"COMMENT",text:(0,g.t)("\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f"),onConfirm:function(){e.onDeleteComment(),e.setState({showModal:!1,commentID:void 0})},onClose:function(){e.setState({showModal:!1,commentID:void 0})}}))}},{key:"componentDidMount",value:function(){var e=this.props.domID;this.isCurrentCommentFromDomID(e)&&!this.state.showflash&&this.toggleFlash()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.domID,n=t.isInited;this.isCurrentCommentFromDomID(a)&&!this.state.showflash&&this.toggleFlash(),!e.isInited&&n&&this.onScroll()}},{key:"onCommentEditorVisible",value:function(e,t){var a=this.state.isCommentEditorVisible;(0,this.props.handleEditComment)(!a),this.setState({isCommentEditorVisible:!a,commentID:a?void 0:e,commentDetail:a?"":t})}},{key:"onChildCommentEditorVisible",value:function(e,t,a){var n=this.state.childCommentsEditorVisibleArr;(0,this.props.handleEditComment)(!n[a]);var r=n[a];n[a]=!n[a],this.setState({childCommentsEditorVisibleArr:(0,s.default)(n),commentID:r?void 0:e,commentDetail:r?"":t})}},{key:"onScroll",value:function(){var e=this.props.scrollRef;if(this.isCurrentComment()){var t=this.props.location.hash.slice(1);(0,j.scrollRelatedToTopMenu)(t,0,e.current),this.toggleFlash()}}},{key:"toggleFlash",value:function(){var e=this,t=this.props,a=t.flashAnchor;(0,t.toggleExpandControlled)(!0,(function(){e.setState({showflash:!0}),window.setTimeout((function(){a(),e.setState({showflash:!1})}),1500)}))}}]),a}(y.Component),l.propTypes={item:E.default.object,user:E.default.object,project:E.default.object,code:E.default.number,onPublishChildComment:E.default.func,onDeleteComment:E.default.func,location:E.default.object,defaultEditorState:E.default.object,ZenMarkEditorWithExtraSuggestions:E.default.func,getPlainText:E.default.func,createWithContent:E.default.func,domID:E.default.string,flashAnchor:E.default.func,toggleExpandControlled:E.default.func,isInited:E.default.bool,scrollRef:E.default.any,router:E.default.object,route:E.default.object,updateEditing:E.default.func,editCommentCallback:E.default.func,itemType:E.default.string,handleEditComment:E.default.func,isDetail:E.default.func},i=c))||i)||i)||i);t.default=W},"9+e/":function(e,t,a){e.exports={item:"item-3lg6dQxvdx","help-icon":"help-icon-1PQ9jPAKWO",helpIcon:"help-icon-1PQ9jPAKWO","min-width-hide":"min-width-hide-29D08gF5H2",minWidthHide:"min-width-hide-29D08gF5H2"}},"9+fn":function(e,t,a){"use strict";a.r(t);var n=a("mVeg"),r=(a("XDpg"),a("Nv36")),o=a("cDcd"),i=a.n(o),l=a("f0Wu"),c=a.n(l),s=a("sftu"),u=a.n(s),d=a("ooH1"),f=a("zmh9"),p=a.n(f),m=a("yZ+p"),v=a.n(m),h=a("xgZS"),g=a("o2bY"),E=a.n(g),y=a("9yH6"),b=a("+eQT"),I=a("Z4vw"),S=a("sWxF"),T=function(){return(T=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},w=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i};function C(e){var t=e.value,a=e.onChange,r=e.disabled,o="null"===t||null===t||void 0===t||""===t?Object(n.t)("\u8bf7\u8f93\u5165\u5de5\u65f6"):t,l=/^(([0-9]+)|([0-9]+\.[0-9]{0,2}))$/;return i.a.createElement(v.a,{value:t,placeholder:o,className:E.a.input,autoComplete:"off",disabled:r,onChange:function(e){var r=e.target.value;Number(r)>999.99?Object(h.warning)(Object(n.t)("\u6700\u591a\u652f\u6301 999 \u5929")):""===r||l.test(r)?a(r):a(t)}})}function O(e){var t,a,l=e.header,s=e.show,f=e.body,m=e.onSetting,v=e.onHide,g=e.user,O=e.fillDetail,N=e.item,P=w(Object(o.useState)(!1),1)[0],j=w(Object(o.useState)(void 0),2),D=j[0],k=j[1],R=w(Object(o.useState)((function(){var e=f.workHourType,t=f.workingHours;return{fillType:"single",remainingHour:0,actualTime:0,totalTime:t?Math.round(t/8*100)/100:t,workHourType:e}})),2),M=R[0],A=R[1],L=w(Object(o.useState)(),2),x=L[0],_=L[1],F=w(Object(o.useState)(1),2),W=F[0],B=F[1],H=Number(null===(t=null===O||void 0===O?void 0:O.workHour)||void 0===t?void 0:t.toFixed(2))-Number(null===(a=(null===N||void 0===N?void 0:N.recordHours)/8)||void 0===a?void 0:a.toFixed(2)),U=Object(o.useMemo)((function(){var e,t;return"REQUIREMENT"===(null===(e=null===f||void 0===f?void 0:f.issueTypeDetail)||void 0===e?void 0:e.issueType)&&"requirement"===(null===(t=null===f||void 0===f?void 0:f.issueTypeDetail)||void 0===t?void 0:t.type)}),[f]),Y=function(e){return Number(null===e||void 0===e?void 0:e.toFixed(2))};Object(o.useEffect)((function(){var e,t,a;s&&((null===N||void 0===N?void 0:N.startAt)&&_(c()(N.startAt)),B(Number(null===(e=(null===N||void 0===N?void 0:N.recordHours)/8)||void 0===e?void 0:e.toFixed(2))),A(T(T({},M),{actualTime:null===(t=Number(null===O||void 0===O?void 0:O.workHour))||void 0===t?void 0:t.toFixed(2),remainingHour:null===(a=Number(M.totalTime-(null===O||void 0===O?void 0:O.workHour)))||void 0===a?void 0:a.toFixed(2)})))}),[s]);Object(o.useEffect)((function(){x&&q()}),[x]);var q=function(){Object(S.getqueryWorkHourFillingReportInfoApi)({assignee:g.id,startDate:c()(x).format("YYYY-MM-DD"),endDate:c()(x).format("YYYY-MM-DD"),issueLogId:N.id}).then((function(e){0===e.code&&e.data?k(e.data):k(void 0)}))};return i.a.createElement(u.a,{show:s,className:E.a.settingViewer,onScroll:function(e){return e.stopPropagation()}},i.a.createElement("div",{className:E.a.header},l),(null===M||void 0===M?void 0:M.totalTime)&&i.a.createElement("div",{className:E.a.adjustContainer},i.a.createElement(d.a,{recordHours:Number(M.actualTime),remainingHours:Number(M.remainingHour),segmentMargin:8})),i.a.createElement(i.a.Fragment,null,U&&i.a.createElement("div",{className:E.a.workingHourHeader},Object(n.t)("\u5de5\u65f6\u6240\u5c5e\u9879\u76ee"),i.a.createElement("div",{className:E.a.workingHourProgramName,title:null===D||void 0===D?void 0:D.programName},null===D||void 0===D?void 0:D.programName)),i.a.createElement("div",{className:E.a.workingHourContainer},i.a.createElement("div",{className:E.a.workingHourBox},i.a.createElement("div",{className:E.a.workingHourHeader},Object(n.t)("\u5de5\u65f6\u586b\u62a5\u7c7b\u578b")),i.a.createElement(y.a.Group,{className:E.a.dimensionRadio,style:{width:"100%"},value:M.fillType,disabled:!0},i.a.createElement(y.a,{value:"multiple"},Object(n.t)("\u6279\u91cf\u586b\u62a5")),i.a.createElement(y.a,{value:"single"},Object(n.t)("\u5355\u65e5\u586b\u62a5")))),"single"===M.fillType&&i.a.createElement("div",{className:E.a.workingHourBox},i.a.createElement("div",{className:E.a.workingHourHeader},i.a.createElement("span",{className:E.a.point},"*"),Object(n.t)("\u5de5\u65f6\u586b\u62a5\u65e5\u671f")),i.a.createElement(b.a,{disabled:!0,locale:r.a,value:x,style:{width:"100%"}})))),i.a.createElement(i.a.Fragment,null,"single"===M.fillType&&i.a.createElement("div",{className:E.a.workingHourContainer},i.a.createElement("div",{className:E.a.workingHourBox},i.a.createElement("div",{className:E.a.workingHourHeader},i.a.createElement("span",{className:E.a.point},"*"),Object(n.t)("\u5b9e\u9645\u6295\u5165\u5de5\u65f6")),i.a.createElement(C,{value:W,onChange:function(e){var t,a,n=3===(null===g||void 0===g?void 0:g.account_type)?1:3;""===e&&A(T(T({},M),{remainingHour:Y(Number(M.totalTime)-Number(O.workHour))})),e>=0&&e<=n?(B(e),A(T(T({},M),{actualTime:null===(t=Number(H+Number(e)))||void 0===t?void 0:t.toFixed(2),remainingHour:Y(Number(M.totalTime)-Number(H)-Number(e))}))):(e<0||"string"===typeof e)&&(B(n),A(T(T({},M),{actualTime:null===(a=Number(H+Number(e)))||void 0===a?void 0:a.toFixed(2),remainingHour:Y(Number(M.totalTime)-Number(H)-n)})))},style:{width:"100%"}}),i.a.createElement("div",{className:E.a.inputAfter},Object(n.t)("\u5929"))),(null===M||void 0===M?void 0:M.totalTime)&&i.a.createElement("div",{className:E.a.workingHourBox},i.a.createElement("div",{className:E.a.workingHourHeader},Object(n.t)("\u5269\u4f59\u5de5\u65f6")),i.a.createElement(C,{disabled:!0,style:{width:"100%"},modified:P,value:M.remainingHour}),i.a.createElement("div",{className:E.a.inputAfter},Object(n.t)("\u5929")))),"single"===M.fillType&&x&&D&&0!==(null===D||void 0===D?void 0:D.workHour)&&void 0!==(null===D||void 0===D?void 0:D.workHour)&&(null===D||void 0===D?void 0:D.workHour)<=3&&i.a.createElement("div",{className:E.a.workingHourContainer},i.a.createElement("div",{className:E.a.workingHourBox},i.a.createElement("span",{style:{fontSize:"12px",color:"#a9a6a6",lineHeight:"22px",paddingRight:"12px",height:"22px"}},Object(n.t)("\u5df2\u586b\u5de5\u65f6".concat(null===D||void 0===D?void 0:D.workHour,"\u5929"))))),"single"===M.fillType&&x&&3!==(null===g||void 0===g?void 0:g.account_type)&&(Number(W)>1||D&&(null===D||void 0===D?void 0:D.workHour)&&Number(Number(null===D||void 0===D?void 0:D.workHour)+Number(W))>1)&&i.a.createElement("div",{className:E.a.workingHourContainer},i.a.createElement("div",{className:E.a.dimensionBox},Object(n.t)("".concat(c()(x).format("YYYY\u5e74MM\u6708DD\u65e5"),"\u586b\u62a5\u5de5\u65f6\u5df2\u8d85\u8fc71\u4eba\u5929\uff0c\u8bf7\u786e\u4fdd\u5df2\u6309\u8981\u6c42\u63d0\u4ea4\u4e86\u52a0\u73ed\u7533\u8bf7\u6d41\u7a0b\uff0c\u586b\u62a5\u7684\u52a0\u73ed\u5de5\u65f6\u5e94\u4e0e\u6d41\u7a0b\u4e2d\u4e00\u81f4\u3002")),i.a.createElement("span",{className:E.a.dimensionJump,onClick:function(){return window.open("https://workflow.cmschina.com.cn/web/#/mklogin")}},Object(n.t)("\u52a0\u73ed\u7533\u8bf7\u94fe\u63a5\uff1ahttps://workflow.cmschina.com.cn/web/#/mklogin"))))),i.a.createElement("div",{className:E.a.btnArea},i.a.createElement(p.a,{type:"default",empty:!0,onClick:function(){return v()}},Object(n.t)("\u53d6\u6d88")),i.a.createElement(p.a,{onClick:function(){var e=M.actualTime,t=M.fillType;if("single"===t&&!x)return Object(h.danger)(Object(I.getErrorMessage)("\u5de5\u65f6\u586b\u62a5\u65e5\u671f\u4e0d\u80fd\u4e3a\u7a7a\uff01"));if(!e)return Object(h.danger)(Object(I.getErrorMessage)("\u5b9e\u9645\u6295\u5165\u5de5\u65f6\u4e0d\u80fd\u4e3a\u7a7a\uff01"));var a={workHour:W||null,workHourType:O.currentWorkHourType,programId:(null===O||void 0===O?void 0:O.id)||0,refId:f.id,creator:g.id,assignee:g.id,fillingDate:"single"===t?c()(x).format("YYYYMMDD"):""};m(a)}},Object(n.t)("\u786e\u5b9a\u767b\u8bb0"))))}O.defaultProps={header:Object(n.t)("\u7f16\u8f91\u5de5\u65f6")},t.default=O},"96Xf":function(e,t,a){e.exports=a.p+"1a14718934ec82c6eb930b04811aee91.svg"},"9XYX":function(e,t,a){e.exports={root:"root-23BWEOq4JJ","expanded-style":"expanded-style-PAOjhw1Iak",expandedStyle:"expanded-style-PAOjhw1Iak","add-sub":"add-sub-1zEWdzRw9n",addSub:"add-sub-1zEWdzRw9n","link-sub":"link-sub-yens8-CvCx",linkSub:"link-sub-yens8-CvCx","add-icon":"add-icon-39gbyBgcU2",addIcon:"add-icon-39gbyBgcU2",trigger:"trigger-2-CslVpnSG","select-arrow-wrapper":"select-arrow-wrapper-E30zRGKHpS",selectArrowWrapper:"select-arrow-wrapper-E30zRGKHpS","label-trigger":"label-trigger-1rzTPAiDBa",labelTrigger:"label-trigger-1rzTPAiDBa","is-expanded":"is-expanded-35fR9MUl81",isExpanded:"is-expanded-35fR9MUl81","requirement-icon":"requirement-icon-y-gQvgmspF",requirementIcon:"requirement-icon-y-gQvgmspF","issue-icon":"issue-icon-1ad9j1QxyW",issueIcon:"issue-icon-1ad9j1QxyW","assignment-icon":"assignment-icon-41Hqh_vz3S",assignmentIcon:"assignment-icon-41Hqh_vz3S","defect-icon":"defect-icon-38be9cBiAf",defectIcon:"defect-icon-38be9cBiAf","sub-tasks-icon":"sub-tasks-icon-2Hj63bAWRx",subTasksIcon:"sub-tasks-icon-2Hj63bAWRx","sub-requirement-icon":"sub-requirement-icon-dn333awYwW",subRequirementIcon:"sub-requirement-icon-dn333awYwW","custom-dropdown":"custom-dropdown-eR7PUB_UaQ",customDropdown:"custom-dropdown-eR7PUB_UaQ",center:"center-gCR-8iHMFT",left:"left-2zZv-xgOjj","custom-issue-icon":"custom-issue-icon-4-_aR6UxB5",customIssueIcon:"custom-issue-icon-4-_aR6UxB5"}},"9bl7":function(e,t,a){e.exports={filter:"filter-2arW0Mc9ZJ",show:"show-yHveVqY1eg",closeoption:"closeoption-6NCEKCpO-m",selected:"selected-z7N5X2AO8f",selectedtext:"selectedtext-14aSAqTm5J",icon:"icon-2n9IJ5Q1s0",optionsBody:"optionsBody-2WrdFWXOr1",FilterInput:"FilterInput-n6epUdM59f",filterInput:"FilterInput-n6epUdM59f",optionClose:"optionClose-BFZwIkk7rU",optionIcon:"optionIcon-3EpPgDIe_b",optionsUl:"optionsUl-2Sn7SZuzQA",active:"active-3hwAkl9W44",optionsLi:"optionsLi-1f2RFbm74h",optionsLiIcon:"optionsLiIcon-1o__CUAXR-"}},"9kHG":function(e,t,a){"use strict";a("RW0V"),a("ioFf"),a("0l/t"),a("mYba"),a("jm62"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("lSNA")),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),l=a("l8Oe"),c=n(a("17x9")),s=a("DDKl");function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p=i.default.forwardRef((function(e,t){var a=e.children,n=e.isDragging,r=e.connectDragSource,o=e.connectDropTarget,l=e.connectDragPreview,c=e.style,u=(0,i.useRef)(null);r(u),o(u),l((0,s.getEmptyImage)(),{captureDraggingState:!0}),(0,i.useImperativeHandle)(t,(function(){return{getNode:function(){return u.current}}}));var d=c||{};return i.default.createElement("div",{ref:u,style:f({cursor:"move",background:"#f4f5f7"},d)},a({isDragging:n}))}));p.propTypes={id:c.default.oneOfType([c.default.number,c.default.string]),children:c.default.func,index:c.default.oneOfType([c.default.number,c.default.string]),containerId:c.default.oneOfType([c.default.number,c.default.string]),handleMove:c.default.func,handleMoveEnd:c.default.func,connectDragSource:c.default.func,isDragging:c.default.bool,connectDropTarget:c.default.func,style:c.default.object};var m=(0,l.DropTarget)("subtask-drag-drop",{hover:function(e,t,a){if(!a)return null;var n=a.getNode();if(!n)return null;var r=t.getItem().id,o=e.id;if(r!==o){var i=n.getBoundingClientRect(),l=(i.bottom-i.top)/3,c=t.getClientOffset().y-i.top,s=t.getDifferenceFromInitialOffset();if(!(s.y>0&&c<l)&&!(s.y<0&&c>l))return e.handleMove(t.getItem(),{id:e.id,containerId:e.containerId,containerName:e.containerName},(function(){t.getItem().index=o,t.getItem().containerId=e.containerId})),null}}},(function(e,t){return{connectDropTarget:e.dropTarget()}}))((0,l.DragSource)("subtask-drag-drop",{beginDrag:function(e,t,a){var n;if(a){var r=a.getNode();r&&(n=r.getBoundingClientRect().top)}return e.handleMoveStart&&e.handleMoveStart(e.containerId,e.id,n),{id:e.id,index:e.index,containerId:e.containerId}},isDragging:function(e,t){return e.id===t.getItem().id},endDrag:function(e,t){e.handleMoveEnd&&e.handleMoveEnd(t.getItem())}},(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging(),connectDragPreview:e.dragPreview()}}))(p));t.default=m},A2I3:function(e,t,a){e.exports={"custom-modal":"custom-modal-KyDv6IZdiF",customModal:"custom-modal-KyDv6IZdiF",title:"title-3bdjjmu5Mh",tip:"tip-3xCoMoq3du","items-wrapper":"items-wrapper-VPYMb3n8ZF",itemsWrapper:"items-wrapper-VPYMb3n8ZF",item:"item-35PmC73pNf","item-avatar":"item-avatar-2kqztEhtLK",itemAvatar:"item-avatar-2kqztEhtLK","item-detail":"item-detail-12X8t-J1nY",itemDetail:"item-detail-12X8t-J1nY",desc:"desc-10sKM1NExO","btn-area":"btn-area-3zZsAohqtW",btnArea:"btn-area-3zZsAohqtW","custom-btn":"custom-btn-3my1tRPMoO",customBtn:"custom-btn-3my1tRPMoO",warning:"warning-3ClBqUqSLq"}},AMAM:function(e,t,a){"use strict";a.r(t),a.d(t,"getDraftUniqueId",(function(){return l})),a.d(t,"setIssueDescriptionDraft",(function(){return s})),a.d(t,"getIssueDescriptionDraft",(function(){return u})),a.d(t,"clearLocalStorage",(function(){return d}));var n=a("EcEN"),r=a.n(n),o=function(){return(o=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},i={};window.name||(window.name=r()());var l=function(e){var t="".concat(e,"_draft_session_id:name:"),a=window.sessionStorage.getItem(t+window.name);if(a)return a;var n=r()();return window.sessionStorage.setItem(t+window.name,n),n},c=function(e){return function(){var t=function(e){var t=window.localStorage.getItem(e);return t?JSON.parse(t):null}(e);t&&t.draftId===l(e)&&(delete t.draftId,window.localStorage.setItem(e,JSON.stringify(t)))}},s=function(e,t){var a=e+":uuid:".concat(window.name);if(!t)return localStorage.removeItem(a),void window.sessionStorage.removeItem(a);var n=window.localStorage.getItem(a);if(n){var r=JSON.parse(n);r.draftId!==l(e)?window.sessionStorage.setItem(a,JSON.stringify(o(o({},t),{draftId:l(e)}))):window.localStorage.setItem(e,JSON.stringify(o(o({},t),{draftId:r.draftId})))}else window.localStorage.setItem(a,JSON.stringify(o(o({},t),{draftId:l(e)})))},u=function(e){var t=e+":uuid:".concat(window.name),a=window.localStorage.getItem(t);if(function(e){var t=l(e);i[t]||(i[t]=c(e),window.onbeforeunload=i[t])}(e),!a)return null;var n=JSON.parse(a);if(!n.draftId)return n.draftId=l(e),window.localStorage.setItem(e,JSON.stringify(n)),n;if(n.draftId===l(e))return n;var r=window.sessionStorage.getItem(t);return r?JSON.parse(r):null},d=function(e){var t="",a=e.issueCode,n=e.params,r=e.projectPath,o=e.issueTypeDetail.issueType,i=n.project;switch(o){case"DEFECT":case"EPIC":t="ISSUE";break;case"MISSION":t="ASSIGNMENT";break;case"RISK":t="RISK";break;case"WORK_ITEM":t="WORK_ITEM";break;case"REQUIREMENT":t="REQUIREMENT";break;case"SUB_TASK":t="SUBTASK"}var l="".concat(i||r.replace("/p/",""),"_").concat(t,"_DETAIL_DESCRIPTION-").concat(a);s(l)}},ANqr:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=n(a("74sH")),v=a("1qdz");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item;return f.default.createElement("div",{className:v.listItem,key:e.id},f.default.createElement("div",{className:v.dot}),f.default.createElement("div",{className:v.content},f.default.createElement(m.default,{className:"mr-10 ".concat(v.icon)}),f.default.createElement("span",{className:v.user},e.creator.name),e.issueLog&&1===e.issueLog.old?"\u3010\u6e90\u3011":"",f.default.createElement("span",null,(0,u.t)("\u66f4\u65b0\u4e86\u6545\u4e8b\u70b9\u4e3a")),f.default.createElement("span",{className:"ml-10"},e.issueLog.content.val||(0,u.t)("\u672a\u6307\u5b9a")),f.default.createElement("span",{className:v.time},(0,p.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=E,E.propTypes={item:d.default.object}},AVuq:function(e,t,a){"use strict";a("I5cv"),a("RW0V"),a("ioFf"),a("mYba"),a("jm62"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("o0o1"));a("f3/d"),a("bWfx"),a("0l/t"),a("dRSK"),a("L9s1"),a("Z2Ku"),a("hhXQ");var i,l,c,s=n(a("lSNA")),u=n(a("yXPU")),d=n(a("lwsE")),f=n(a("W8MJ")),p=n(a("PJYZ")),m=n(a("7W2i")),v=n(a("a1gu")),h=n(a("Nsbk")),g=a("mVeg"),E=n(a("17x9")),y=Ce(a("cDcd")),b=a("1qdz"),I=n(a("MsSz")),S=n(a("8Slx")),T=n(a("qjwa")),w=n(a("OyuZ")),C=n(a("scNj")),O=n(a("WpLf")),N=n(a("w9Zt")),P=n(a("1jgs")),j=n(a("pKv4")),D=n(a("VVg6")),k=n(a("cIiR")),R=n(a("Tjbd")),M=n(a("uZPZ")),A=n(a("rOfl")),L=n(a("FsZr")),x=n(a("MV+9")),_=n(a("f4ee")),F=n(a("Q/6I")),W=n(a("yjaU")),B=n(a("unJ8")),H=n(a("mQA3")),U=n(a("LFMZ")),Y=n(a("jj1q")),q=n(a("7oEN")),G=n(a("MwrM")),z=n(a("ANqr")),V=n(a("c1w3")),Z=n(a("e7MF")),K=n(a("00Df")),J=n(a("jbvx")),Q=n(a("0uC9")),X=n(a("ezwj")),$=n(a("PbN/")),ee=n(a("BGrg")),te=n(a("fFua")),ae=a("XnCo"),ne=Ce(a("OajT")),re=n(a("W8YX")),oe=a("w3Wo"),ie=n(a("0aOx")),le=n(a("2ISD")),ce=n(a("HGG5")),se=n(a("uLjc")),ue=a("wSCF"),de=n(a("jxN3")),fe=n(a("V/h/")),pe=n(a("Rya+")),me=n(a("r1tQ")),ve=n(a("wYSa")),he=n(a("1+2J")),ge=n(a("a3nu")),Ee=n(a("5eN8")),ye=n(a("6Ady")),be=n(a("SPzU")),Ie=n(a("IP2A")),Se=n(a("cHAH")),Te=n(a("uH1L"));function we(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(we=function(e){return e?a:t})(e)}function Ce(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=we(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}function Oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Oe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Pe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,h.default)(e);if(t){var r=(0,h.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,v.default)(this,a)}}var je={ALL:"ALL",WITHOUT_COMMENT:"WITHOUT_COMMENT",COMMENT:"COMMENT"},De=(0,ne.default)((c=l=function(e){(0,m.default)(a,e);var t=Pe(a);function a(e){var n;(0,d.default)(this,a),(n=t.call(this,e)).changeType=function(e){n.setState({type:e})};var r=[{value:je.ALL,text:(0,g.t)("\u5168\u90e8")},{value:je.WITHOUT_COMMENT,text:(0,g.t)("\u53ea\u770b\u65e5\u5fd7")},{value:je.COMMENT,text:(0,g.t)("\u53ea\u770b\u8bc4\u8bba")}];return n.state={type:[],items:r,fetchingFavorite:!1},n.renderItem=n.renderItem.bind((0,p.default)(n)),n.onSelect=n.onSelect.bind((0,p.default)(n)),n.translateType=n.translateType.bind((0,p.default)(n)),e.getChangeTabFn&&e.getChangeTabFn(n.changeType),n}return(0,f.default)(a,[{key:"renderItem",value:function(e){var t=this.props,a=t.isDetail,n=t.user,r=t.currentProject,o=t.code,i=t.onPublishChildComment,l=t.onDeleteComment,c=t.domID,s=t.flashAnchor,u=t.toggleExpandControlled,d=t.isInited,f=t.scrollRef,p=t.handleViewRecord,m=t.projectPath,v=t.editCommentCallback,h=t.itemType,E=t.handleEditComment,b=t.stopLink;if("COMMENT"===e.type)return y.default.createElement(S.default,{domID:c,flashAnchor:s,toggleExpandControlled:u,isInited:d,scrollRef:f,itemType:h,key:e.id,isDetail:a,item:e,user:n,project:r,code:o,onPublishChildComment:i,onDeleteComment:l,editCommentCallback:v,handleEditComment:E});if("LOG"===e.type)switch(e.issueLog.target){case ae.LOG_TYPE.SELF:return y.default.createElement(T.default,{key:e.id,item:e,itemType:this.translateType(e.issueTypeName),projectPath:m});case ae.LOG_TYPE.NAME:return y.default.createElement(w.default,{key:e.id,item:e,itemType:this.translateType(e.issueTypeName)});case ae.LOG_TYPE.DESCRIPTION:return y.default.createElement(C.default,{key:e.id,item:e,handleViewRecord:p,itemType:this.translateType(e.issueTypeName)});case ae.LOG_TYPE.DEFECT_TYPE:return y.default.createElement(L.default,{key:e.id,item:e,itemType:this.translateType(e.issueTypeName)});case ae.LOG_TYPE.PRIORITY:return y.default.createElement(O.default,{key:e.id,item:e,itemType:this.translateType(e.issueTypeName)});case ae.LOG_TYPE.DUE_DATE:case ae.LOG_TYPE.START_DATE:return y.default.createElement(N.default,{key:e.id,item:e,itemType:this.translateType(e.issueTypeName),logType:e.issueLog.target});case ae.LOG_TYPE.MODULE:return y.default.createElement(x.default,{key:e.id,item:e});case ae.LOG_TYPE.LABEL:return y.default.createElement(P.default,{key:e.id,item:e});case ae.LOG_TYPE.WATCHER:return y.default.createElement(j.default,{key:e.id,item:e});case ae.LOG_TYPE.STATUS:return y.default.createElement(D.default,{key:e.id,item:e});case ae.LOG_TYPE.ASSIGNEE:return y.default.createElement(k.default,{key:e.id,item:e,itemType:this.translateType(e.issueTypeName)});case ae.LOG_TYPE.THIRD_LINK:return y.default.createElement(M.default,{key:e.id,item:e});case ae.LOG_TYPE.ATTACHMENT:return y.default.createElement(R.default,{key:e.id,item:e});case ae.LOG_TYPE.RESOURCE:return y.default.createElement(A.default,{key:e.id,item:e});case ae.LOG_TYPE.WORKING_HOURS:return y.default.createElement(_.default,{key:e.id,item:e});case ae.LOG_TYPE.DEFECT_SOURCE:case ae.LOG_TYPE.DEFECT_PHASE:case ae.LOG_TYPE.CUSTOM_FIELD:return y.default.createElement(F.default,{key:e.id,item:e});case ae.LOG_TYPE.ITERATION:return y.default.createElement(W.default,{key:e.id,item:e,projectPath:"/p/".concat(r.name),projectId:null===r||void 0===r?void 0:r.id});case ae.LOG_TYPE.RELEASE:return y.default.createElement(re.default,{key:e.id,item:e,projectPath:"/p/".concat(r.name),projectId:null===r||void 0===r?void 0:r.id});case ae.LOG_TYPE.ISSUE_RELATION:return y.default.createElement(B.default,{key:e.id,item:e,projectPath:"/p/".concat(r.name),projectId:null===r||void 0===r?void 0:r.id});case ae.LOG_TYPE.REQUIREMENT_TYPE:return y.default.createElement(H.default,{key:e.id,item:e,itemType:this.translateType(e.issueTypeName)});case ae.LOG_TYPE.CHILD_ISSUE:return y.default.createElement(U.default,{key:e.id,item:e,projectPath:m,currentProject:r});case ae.LOG_TYPE.PARENT_ISSUE:return y.default.createElement(Y.default,{key:e.id,item:e,projectPath:m});case ae.LOG_TYPE.EPIC_ISSUE:return y.default.createElement(q.default,{key:e.id,item:e,projectPath:m,projectId:null===r||void 0===r?void 0:r.id});case ae.LOG_TYPE.ISSUE_EPIC_CHANGED:return y.default.createElement(G.default,{key:e.id,item:e,projectPath:m,projectId:null===r||void 0===r?void 0:r.id});case ae.LOG_TYPE.STORY_POINT:return y.default.createElement(z.default,{key:e.id,item:e,projectPath:m});case ae.LOG_TYPE.RELATE_DEFECT:return y.default.createElement(Z.default,{key:e.id,item:e,projectPath:m,projectId:null===r||void 0===r?void 0:r.id});case ae.LOG_TYPE.PROGRESS:return y.default.createElement(Q.default,{key:e.id,item:e,projectPath:m});case ae.LOG_TYPE.RELATE_REQUIREMENT:return y.default.createElement(K.default,{key:e.id,item:e,projectPath:m,projectId:null===r||void 0===r?void 0:r.id});case ae.LOG_TYPE.STORY_RELATE_REQUIREMENT:return y.default.createElement(J.default,{key:e.id,item:e});case ae.LOG_TYPE.ISSUE_PROGRAM_RELATION:return y.default.createElement($.default,{key:e.id,item:e,projectPath:m});case ae.LOG_TYPE.ISSUE_REVIEW:return y.default.createElement(ee.default,{key:e.id,item:e});case ae.LOG_TYPE.COPY:return y.default.createElement(te.default,{key:e.id,item:e,projectId:null===r||void 0===r?void 0:r.id});case ae.LOG_TYPE.EDITION:return y.default.createElement(ie.default,{key:e.id,item:e});case ae.LOG_TYPE.GROUP_TEAM:case ae.LOG_TYPE.SYSTEM:return y.default.createElement(le.default,{key:e.id,item:e});case ae.LOG_TYPE.PARTICIPANT:return y.default.createElement(ce.default,{key:e.id,item:e});case ae.LOG_TYPE.MILESTONE:return y.default.createElement(se.default,{key:e.id,item:e});case ae.LOG_TYPE.ROBOT:case ae.LOG_TYPE.RISK:return y.default.createElement(ue.AllPowerFulLogItem,{key:e.id,item:e});case ae.LOG_TYPE.DEFECT_KIND:return y.default.createElement(de.default,{key:e.id,item:e,itemType:this.translateType(e.issueTypeName)});case ae.LOG_TYPE.CUT_DEFECT:return y.default.createElement(pe.default,{key:e.id,item:e,itemType:this.translateType(e.issueTypeName),projectPath:m,stopLink:b});case ae.LOG_TYPE.ISSUE_PROGRAM:return y.default.createElement(me.default,{key:e.id,item:e});case ae.LOG_TYPE.DIVIDE:return y.default.createElement(ve.default,{key:e.id,item:e});case ae.LOG_TYPE.GENERATE:case ae.LOG_TYPE.GENERATED:return y.default.createElement(he.default,{key:e.id,item:e});case ae.LOG_TYPE.CONVOLUTION_PROCESS:return y.default.createElement(ge.default,{key:e.id,item:e});case ae.LOG_TYPE.CONVOLUTION_PARENT:return y.default.createElement(Ee.default,{key:e.id,item:e});case ae.LOG_TYPE.CONVOLUTION_CHILD:return y.default.createElement(ye.default,{key:e.id,item:e});case ae.LOG_TYPE.CONVOLUTION_LIMIT:return y.default.createElement(be.default,{key:e.id,item:e});case ae.LOG_TYPE.AUTO_FLOW:case ae.LOG_TYPE.EDITION_AUTO_UPDATE:return y.default.createElement(Ie.default,{key:e.id,item:e});case ae.LOG_TYPE.RULE_EXECUTE:return y.default.createElement(Se.default,{key:e.id,item:e});case ae.LOG_TYPE.SOFTWARE_UNIT:return y.default.createElement(Te.default,{key:e.id,item:e});default:window.console.warn((0,g.t)("\u672a\u77e5\u7c7b\u578b"))}return"MEETING"===e.type?y.default.createElement(X.default,{item:e}):y.default.createElement(I.default,{item:e,key:e.id,itemType:this.translateType(e.issueTypeName)})}},{key:"render",value:function(){var e=this.state,t=e.type,a=e.items,n=e.fetchingFavorite,r=this.props,o=r.isInited,i=r.sectionExpanded,l=r.isCommentSticky,c=r.hideTitle,s=this.getFilteredActivity();return o?n?y.default.createElement(y.default.Fragment,null):y.default.createElement("div",{className:"".concat(b.container," ").concat(!l&&b.commentBelow," ").concat(t[0]===je.WITHOUT_COMMENT&&b.noComment," ").concat(c&&b.containerHideTitle)},!c&&y.default.createElement("div",{className:b.header},y.default.createElement("div",{className:b.title},(0,g.t)("\u6d3b\u52a8\u65e5\u5fd7"))),y.default.createElement(V.default,{className:b.activityTab,tabs:a,activeTab:t[0],tabClick:this.onSelect}),y.default.createElement("div",{style:{display:i?"block":"none"},className:b.list},!!s.length&&y.default.createElement(y.default.Fragment,null,s.map(this.renderItem)))):null}},{key:"setCreatorNameNoValueFn",value:function(e){return(0,fe.default)(e,(function(e){return e.creator&&!e.creator.name&&(e.creator.name="\u7cfb\u7edf"),e}))}},{key:"getFilteredActivity",value:function(){switch(this.state.type[0]){case je.WITHOUT_COMMENT:return this.props.activities.filter((function(e){return e.type!==je.COMMENT})).map(this.setCreatorNameNoValueFn);case je.COMMENT:return this.props.activities.filter((function(e){return e.type===je.COMMENT})).map(this.setCreatorNameNoValueFn);default:return this.props.activities.map(this.setCreatorNameNoValueFn)}}},{key:"onSelect",value:function(e){var t,a,n,r,o,i,l;this.setState({type:[e.value]}),this.props.changeTab(e.value),null!==(t=this.state)&&void 0!==t&&null!==(a=t.type)&&void 0!==a&&a.length&&0!==(null===(n=this.state)||void 0===n||null===(r=n.type)||void 0===r?void 0:r.length)&&(null===e||void 0===e?void 0:e.value)!==(null===(o=this.state)||void 0===o?void 0:o.type[0])&&(0,oe.updateIssueListSetting)(null===(i=this.props)||void 0===i||null===(l=i.currentProject)||void 0===l?void 0:l.name,"ISSUE_ACTIVITIES_FAVORITE",e.value)}},{key:"translateType",value:function(e){switch(this.props.itemType){case"SUB_TASK":return(0,g.t)("\u5b50\u5de5\u4f5c\u9879");case"EPIC":return(0,g.t)("\u53f2\u8bd7");case"ASSIGNMENT":return e||(0,g.t)("\u4efb\u52a1");case"REQUIREMENT":return e||(0,g.t)("\u9700\u6c42");case"DEFECT":return(0,g.t)("\u7f3a\u9677");case"RISK":return(0,g.t)("\u98ce\u9669");case"WORK_ITEM":return(0,g.t)("\u5de5\u4f5c\u9879");default:return(0,g.t)("\u672a\u77e5")}}},{key:"componentDidUpdate",value:function(e){this.props.domID&&this.props.domID!==e.domID&&this.state.type[0]===je.WITHOUT_COMMENT&&this.onSelect({value:je.ALL})}},{key:"componentDidMount",value:function(){this.getIssueActivitiesFavorite()}},{key:"getIssueActivitiesFavorite",value:function(){var e=(0,u.default)(o.default.mark((function e(){var t,a,n,r,i,l,c;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setState({fetchingFavorite:!0}),e.next=4,(0,oe.fetchIssueListSetting)(null===(t=this.props)||void 0===t||null===(a=t.currentProject)||void 0===a?void 0:a.name,{codes:["ISSUE_ACTIVITIES_FAVORITE"]});case 4:i=e.sent,l=null!==(n=null===i||void 0===i?void 0:i.data)&&void 0!==n?n:[],(c=null===l||void 0===l||null===(r=l.find((function(e){return"ISSUE_ACTIVITIES_FAVORITE"===e.code})))||void 0===r?void 0:r.value)&&Object.values(je).includes(c)&&this.onSelect({value:c}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),this.onSelect({value:je.ALL});case 13:return e.prev=13,this.setState({fetchingFavorite:!1}),e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[0,10,13,16]])})));return function(){return e.apply(this,arguments)}}()}]),a}(y.Component),l.propTypes=Ne(Ne({isDetail:E.default.bool,user:E.default.object,currentProject:E.default.object,itemType:E.default.string,projectPath:E.default.string,code:E.default.number,activities:E.default.array,onPublishChildComment:E.default.func,onDeleteComment:E.default.func,domID:E.default.string,flashAnchor:E.default.func,isInited:E.default.bool,scrollRef:E.default.any},ne.ToggleSectionWrapperProps),{},{handleViewRecord:E.default.func,activeTab:E.default.array,changeTab:E.default.func,isCommentSticky:E.default.bool,hideTitle:E.default.bool,editCommentCallback:E.default.func,handleEditComment:E.default.func,stopLink:E.default.bool}),l.defaultProps={activities:[]},i=c))||i;t.default=De},"AW+C":function(e,t,a){e.exports={"meeting-modal":"meeting-modal-10U83sJBMz",meetingModal:"meeting-modal-10U83sJBMz","modal-body":"modal-body-3sqrEx-kEN",modalBody:"modal-body-3sqrEx-kEN",placehoder:"placehoder-3I0cbg4VIs",title:"title-3A68ZtRymm",footer:"footer-3vcFL55d8D",confirm:"confirm-2ArXutgug4",close:"close-Yq0cYHdRij","row-border":"row-border-1AcUu1OiZe",rowBorder:"row-border-1AcUu1OiZe",row:"row-28DthPs6RN","tall-content":"tall-content-7S7AWR-ify",tallContent:"tall-content-7S7AWR-ify",content:"content-Um4JDJXVrw",checkbox:"checkbox-1hfg6yBphp",text:"text-Z_Wzhib9Mn","tags-content":"tags-content-JQyLNjSoSG",tagsContent:"tags-content-JQyLNjSoSG",label:"label-1RCi7UzDd3",point:"point-2QNcpHxvEz","tags-wrapper":"tags-wrapper-D7z5QULzxo",tagsWrapper:"tags-wrapper-D7z5QULzxo",picker:"picker-2ijWJUHBoZ",time:"time-13FYSCpVCM",gap:"gap-qQtw_BY82s",normal:"normal-2JL3DDgiIv","align-tags":"align-tags-2hKZdGFh6S",alignTags:"align-tags-2hKZdGFh6S","more-top":"more-top-2nP6-DK0FW",moreTop:"more-top-2nP6-DK0FW"}},AoGB:function(e,t,a){"use strict";a.r(t),a.d(t,"WithIssueEditingDecorator",(function(){return f})),a.d(t,"WithIssueEditingCtxDecorator",(function(){return p})),a.d(t,"IssueEditingCtx",(function(){return d}));var n=a("cDcd"),r=a.n(n),o=a("dtw8"),i=a("34zm"),l=a.n(i),c=a("AMAM"),s=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),u=function(){return(u=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},d=r.a.createContext({editInfoRef:{current:{isEditing:!1,type:""}},updateEditing:function(){}}),f=function(e){return Object(o.withRouter)(l()((function(t){var a=Object(n.useRef)({isEditing:!1,type:""}),o=Object(n.useRef)(!1),i=Object(n.useCallback)((function(e){a.current=e}),[]),l=Object(n.useCallback)((function(){var e;return(null===(e=null===a||void 0===a?void 0:a.current)||void 0===e?void 0:e.isEditing)&&(o.current=!0),!0}),[]);return Object(n.useEffect)((function(){return t.router.setRouteLeaveHook(t.route,l),function(){var e,n,r,i="";switch(t.issueTypeDetail.issueType){case"DEFECT":case"EPIC":i="ISSUE";break;case"MISSION":i="ASSIGNMENT";break;case"RISK":i="RISK";break;case"WORK_ITEM":i="WORK_ITEM";break;case"REQUIREMENT":i="REQUIREMENT";break;case"SUB_TASK":i="SUBTASK"}var l="".concat(t.params.project||t.projectPath.replace("/p/",""),"_").concat(i,"_DETAIL_DESCRIPTION-").concat(t.issueCode);l&&"DESCRIPTION"===(null===(e=null===a||void 0===a?void 0:a.current)||void 0===e?void 0:e.type)&&(null===(n=null===a||void 0===a?void 0:a.current)||void 0===n?void 0:n.isEditing)&&(o.current?o.current=!1:void 0!==(null===(r=null===a||void 0===a?void 0:a.current)||void 0===r?void 0:r.isEmpty)&&a.current.isEmpty&&Object(c.setIssueDescriptionDraft)(l)),t.router.setRouteLeaveHook(t.route,null)}}),[]),r.a.createElement(d.Provider,{value:{editInfoRef:a,updateEditing:i}},r.a.createElement(e,u({},t)))})))},p=function(e){return function(t){function a(){return null!==t&&t.apply(this,arguments)||this}return s(a,t),a.prototype.render=function(){var t=this;return r.a.createElement(d.Consumer,null,(function(a){var n=a.editInfoRef,o=a.updateEditing;return r.a.createElement(e,u({},t.props,{editInfoRef:n,updateEditing:o}))}))},a}(r.a.Component)};t.default=f},B3Qv:function(e,t,a){e.exports=a.p+"7f06d34241796d0682a03f2f04a6b972.svg"},B6oZ:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n,r,o=a("cDcd"),i=a.n(o),l=a("MH4q"),c=a.n(l),s=a("K2gz"),u=a.n(s),d=a("ISZN"),f=a.n(d),p=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}();!function(e){e.PROCESSING="PROCESSING",e.PASSED="PASSED",e.REFUSED="REFUSED",e.WITHDRAW="WITHDRAW"}(r||(r={}));var m=((n={})[r.PROCESSING]={color:"#ddebff",name:"\u5ba1\u6279\u4e2d"},n[r.PASSED]={color:"#c3f3cb",name:"\u5df2\u540c\u610f"},n[r.REFUSED]={color:"#ffe9cf",name:"\u5df2\u62d2\u7edd"},n[r.WITHDRAW]={color:"#dfe5f2",name:"\u5df2\u64a4\u9500"},n),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return p(t,e),t.prototype.render=function(){var e=this.props.type,t=m[e]||r.PROCESSING;return i.a.createElement(c.a,{size:"small",bgColor:t.color,className:u()(f.a[e.toLowerCase()],f.a.weight)},t.name)},t}(i.a.Component);t.b=v},BEfl:function(e,t,a){e.exports={"setting-viewer":"setting-viewer-2TBEc74lMy",settingViewer:"setting-viewer-2TBEc74lMy",header:"header-17WItZbZ2p","container-header":"container-header-je-JP5ukFq",containerHeader:"container-header-je-JP5ukFq","adjust-container":"adjust-container-AVJ_wdsVPn",adjustContainer:"adjust-container-AVJ_wdsVPn","working-hour-container":"working-hour-container-1kd3M9Krl-",workingHourContainer:"working-hour-container-1kd3M9Krl-","working-hour-box":"working-hour-box-sLQmQE79aN",workingHourBox:"working-hour-box-sLQmQE79aN","input-after":"input-after-2ZgJAAffyc",inputAfter:"input-after-2ZgJAAffyc","working-hour-header":"working-hour-header-snOcEMnbeZ",workingHourHeader:"working-hour-header-snOcEMnbeZ",point:"point-cyvpSsbzlG",input:"input-1pXuiaeWUv",picker:"picker-23xo6VL16m","text-area":"text-area-1P7GjaXUYX",textArea:"text-area-1P7GjaXUYX",time:"time-bZm5ENOEB9","btn-area":"btn-area-2FA7If59lZ",btnArea:"btn-area-2FA7If59lZ"}},BGrg:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=v(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=a("1qdz");function v(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(v=function(e){return e?a:t})(e)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var g={CREATE:(0,u.t)("\u521b\u5efa\u4e86"),DELETE:(0,u.t)("\u5220\u9664")},E=function(e){(0,l.default)(a,e);var t=h(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item;return f.default.createElement("div",{className:m.listItem,key:e.id},f.default.createElement("div",{className:m.dot}),f.default.createElement("div",{className:m.content},f.default.createElement("span",{className:"mr-10 ".concat(m.icon," ").concat(m.issueReviewIcon)}),f.default.createElement("span",{className:m.user},e.creator.name),f.default.createElement("span",null,g[e.issueLog.action],"\xa0"),f.default.createElement("span",{className:m.moreDot},e.issueLog.content.issueReviewTypeName,"\uff1a",e.issueLog.content.issueReviewSubject),f.default.createElement("span",{className:m.time},(0,p.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=E,E.propTypes={item:d.default.object,projectPath:d.default.string}},"BW+D":function(e,t,a){e.exports=a.p+"66d8e4de7b009a1ec501391597e309c0.svg"},BkA0:function(e,t,a){e.exports=a.p+"e34b1290a4de00c751af0fb95867c778.svg"},"CF/V":function(e,t,a){"use strict";a.r(t);var n=a("cDcd"),r=a.n(n),o=a("K2gz"),i=a.n(o),l=a("tlM8"),c=a.n(l);t.default=function(e){var t=e.tabs,a=e.activeTab,n=e.className,o=e.onChange;return r.a.createElement("div",{className:i()(c.a.tabWrapper,n)},t&&!!t.length&&t.map((function(e){return r.a.createElement("div",{className:i()(c.a.tab,a===e.value?c.a.active:""),key:e.value,onClick:function(){return o(e)}},e.text)})))}},CL2D:function(e,t,a){"use strict";a.r(t);var n=a("mVeg"),r=a("cDcd"),o=a.n(r),i=a("sftu"),l=a.n(i),c=a("zmh9"),s=a.n(c),u=a("sT2k"),d=a.n(u),f=a("JTQj"),p=a("W7UB"),m=a.n(p),v=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),h=function(e){function t(t){var a=e.call(this,t)||this;return a.onResourceUrlChange=function(e){a.setState({link:e.target.value},(function(){a.validModaoInput()}))},a.onTitleChange=function(e){a.setState({title:e.target.value})},a.validModaoInput=function(){var e=a.state.link,t=/\s*<iframe src="([^"]*)"/.test(e);if(t)a.setState({madaoLinkErrorMsg:null});else{var r=void 0;r=e&&""!==e.trim()?Object(n.t)("\u975e\u6cd5\u7684\u5d4c\u5165\u4ee3\u7801"):Object(n.t)("\u5d4c\u5165\u4ee3\u7801\u4e0d\u80fd\u4e3a\u7a7a"),a.setState({madaoLinkErrorMsg:r})}return t},a.onModaoConfirm=function(){if(a.validModaoInput()){var e=a.state,t=e.link,r=e.title;(0,a.props.onHandleAttachments)([{isModao:!0,fileId:Date.now(),timestamp:Date.now(),modao:{thirdType:"MODAO",title:r||Object(n.t)("\u58a8\u5200\u539f\u578b"),link:t.trim()}}])}},a.reset=function(){a.setState({title:"",link:"",madaoLinkErrorMsg:null})},a.onHide=function(){a.props.onHide(),a.reset()},a.state={link:"",madaoLinkErrorMsg:"",title:"",isLoading:!1},a}return v(t,e),t.prototype.render=function(){var e=this.props.isShowPicker,t=this.state,a=t.link,r=t.title,i=t.madaoLinkErrorMsg,c=t.isLoading;return o.a.createElement(l.a,{show:e,onHide:this.onHide,style:{width:618}},o.a.createElement("div",{className:m.a.modao},o.a.createElement("h2",{className:m.a.modaoTitle},Object(n.t)("\u5f15\u5165\u58a8\u5200\u539f\u578b")),o.a.createElement("p",{className:m.a.modaoDes},Object(n.t)("\u901a\u8fc7\u7c98\u8d34\u58a8\u5200\u7684\u5d4c\u5165\u4ee3\u7801\uff0c\u53ef\u5c06\u539f\u578b\u5f15\u5165\u8fdb\u6765\uff0c\u65b9\u4fbf\u5728 CODING \u4e2d\u76f4\u63a5\u67e5\u770b"),o.a.createElement("a",{href:Object(f.getHelp)("/docs/collaboration/customize/references.html#modao"),target:"_blank",className:m.a.modaoHelpLink},Object(n.t)("\u67e5\u770b\u5e2e\u52a9"))),o.a.createElement("div",{className:m.a.modaoInputGroup},o.a.createElement("h3",{className:m.a.modaoInputTitle},Object(n.t)("\u58a8\u5200\u539f\u578b\u5730\u5740"),o.a.createElement("span",{className:m.a.modaoInputRequired},"*")),o.a.createElement(d.a,{size:"medium",value:a,onChange:this.onResourceUrlChange,placeholder:Object(n.t)('\u7c98\u8d34\u58a8\u5200\u5206\u4eab\u4e2d\u7684\u5d4c\u5165\u4ee3\u7801\uff0c\u5982 <iframe src=..."'),errorMessage:i})),o.a.createElement("div",{className:m.a.modaoInputGroup},o.a.createElement("h3",{className:m.a.modaoInputTitle},Object(n.t)("\u540d\u79f0")),o.a.createElement(d.a,{size:"medium",value:r,onChange:this.onTitleChange,placeholder:Object(n.t)("\u8bf7\u8f93\u5165\u9644\u4ef6\u540d\u79f0\uff0c\u9ed8\u8ba4\u4e3a\u58a8\u5200\u539f\u578b"),maxLength:"64"})),o.a.createElement("div",{className:m.a.buttonGroup},o.a.createElement(s.a,{loading:c,onClick:this.onModaoConfirm},Object(n.t)("\u786e\u5b9a")),o.a.createElement(s.a,{empty:!0,onClick:this.onHide},Object(n.t)("\u53d6\u6d88")))))},t}(o.a.Component);t.default=h},"CQ/0":function(e,t,a){e.exports={wrapper:"wrapper-1vYczspMj_",trigger:"trigger-oOKnRRb8XG","trigger-expanded":"trigger-expanded-taYgPLtyIN",triggerExpanded:"trigger-expanded-taYgPLtyIN","trigger-icon":"trigger-icon-3h3dPviez1",triggerIcon:"trigger-icon-3h3dPviez1","is-watched":"is-watched-29hkjDy75n",isWatched:"is-watched-29hkjDy75n","trigger-icon-blue":"trigger-icon-blue-2MMPZqvLbD",triggerIconBlue:"trigger-icon-blue-2MMPZqvLbD","trigger-numbers":"trigger-numbers-2940ZVHlnm",triggerNumbers:"trigger-numbers-2940ZVHlnm",expanded:"expanded-BUmcfpdwWm","cart-down":"cart-down-342Sf1tsjg",cartDown:"cart-down-342Sf1tsjg",box:"box-2YUCoBhq-1","has-no-top-padding":"has-no-top-padding-2vvGPqVhp6",hasNoTopPadding:"has-no-top-padding-2vvGPqVhp6","box-top":"box-top-C_yuUdLlX4",boxTop:"box-top-C_yuUdLlX4","box-line":"box-line-r8dqGhmQfP",boxLine:"box-line-r8dqGhmQfP","watch-icon":"watch-icon-II_D8TapQI",watchIcon:"watch-icon-II_D8TapQI","unwatch-icon":"unwatch-icon-5FUEQPWoEq",unwatchIcon:"unwatch-icon-5FUEQPWoEq","add-icon":"add-icon-8w1fXi9bSO",addIcon:"add-icon-8w1fXi9bSO","direction-icon":"direction-icon-1_e5MPJQZf",directionIcon:"direction-icon-1_e5MPJQZf","box-line-text":"box-line-text-aSWxRkYUT6",boxLineText:"box-line-text-aSWxRkYUT6","box-empty":"box-empty-2lVBk5qbx1",boxEmpty:"box-empty-2lVBk5qbx1",icon:"icon-2THcTgWltR","watchers-number":"watchers-number-2N2mNoDOhb",watchersNumber:"watchers-number-2N2mNoDOhb",watchers:"watchers-4vG6GUR0_N",members:"members-1RnJX0I7RF",divider:"divider-14_eIdQ825","section-title":"section-title-2wReNYIBw1",sectionTitle:"section-title-2wReNYIBw1",watcher:"watcher-26zNLxsEHH",empty:"empty-2dy90LbeVH","watcher-remove":"watcher-remove-3J7VG-Wosh",watcherRemove:"watcher-remove-3J7VG-Wosh",avatar:"avatar-am9QSYE8W8","watcher-name":"watcher-name-2k0DGjgYuA",watcherName:"watcher-name-2k0DGjgYuA","select-line":"select-line-2ynLmuWhGp",selectLine:"select-line-2ynLmuWhGp","arrow-icon":"arrow-icon-3stsKHJczb",arrowIcon:"arrow-icon-3stsKHJczb","select-line-text":"select-line-text-2wIBnEWs_5",selectLineText:"select-line-text-2wIBnEWs_5","input-box":"input-box-38I_4q-ldw",inputBox:"input-box-38I_4q-ldw","search-input":"search-input-1hbaBBTdOg",searchInput:"search-input-1hbaBBTdOg","search-icon":"search-icon-ieru_nb9Yd",searchIcon:"search-icon-ieru_nb9Yd","search-clear":"search-clear-3TJ1TNKpnq",searchClear:"search-clear-3TJ1TNKpnq","member-selected":"member-selected-2LQcaXPgFu",memberSelected:"member-selected-2LQcaXPgFu"}},Chqb:function(e,t,a){e.exports={content:"content-1mrspijTEc",title:"title-2AtYigE4XS","issue-item":"issue-item-1ARn2peicK",issueItem:"issue-item-1ARn2peicK",icon:"icon-NIW2_cpMZL",checked:"checked-2ymhOj8iQ_",focus:"focus-XURVykMw6f"}},Cjhb:function(e,t,a){e.exports={root:"root-tEGUAszvHB",title:"title-2kDobjzAFh","divide-line":"divide-line-3AYTbhjFqS",divideLine:"divide-line-3AYTbhjFqS","edit-button":"edit-button-1_3e8Yti1e",editButton:"edit-button-1_3e8Yti1e",list:"list-rqH-1kb1SU","attachment-list-container":"attachment-list-container-3joipyz_M_",attachmentListContainer:"attachment-list-container-3joipyz_M_","import-out-resource-wrap":"import-out-resource-wrap-1sjijGJwu5",importOutResourceWrap:"import-out-resource-wrap-1sjijGJwu5","right-border":"right-border-iEPXzfKwxZ",rightBorder:"right-border-iEPXzfKwxZ","left-border":"left-border-17xBUN9FD_",leftBorder:"left-border-17xBUN9FD_","attachment-list":"attachment-list-3-hau7OeKV",attachmentList:"attachment-list-3-hau7OeKV","attachment-item":"attachment-item-3a7gSGVAhU",attachmentItem:"attachment-item-3a7gSGVAhU",next:"next-2lMaorE-BX",pre:"pre-3Z2IhFx0di","empty-slogan":"empty-slogan-1OJjrPLQp2",emptySlogan:"empty-slogan-1OJjrPLQp2"}},CqsM:function(e,t,a){e.exports={item:"item-30LfTYzVXG","item-wait":"item-wait-2GcN778bOr",itemWait:"item-wait-2GcN778bOr",list:"list-2bly54jIcU","avatar-copy":"avatar-copy-3UtbrxVIC4",avatarCopy:"avatar-copy-3UtbrxVIC4",bar:"bar-2aiXw0Z3mO",avatar:"avatar-3bST0Vrf0I","avatar-approval":"avatar-approval-1nLr-TJozo",avatarApproval:"avatar-approval-1nLr-TJozo",status:"status-3D7XVlFVuu",name:"name-23ACNJkNbG",desc:"desc-nqfsqKs323",red:"red-2mPDZ58fwE",time:"time-3iupZRr3Ij",comment:"comment-3n5PiMitdj",operate:"operate-3Z69XCBlXO",textarea:"textarea-20o-CzzlKU","list-user":"list-user-2Rf4px8vn3",listUser:"list-user-2Rf4px8vn3"}},CzLb:function(e,t,a){e.exports={container:"container-rqKRf32s6l",more:"more-X3YOrFVN7_",expanded:"expanded-RwaeS-UDab",panel:"panel-s_ya9Wh2c6",menu:"menu-17u-n4RMr-",danger:"danger-2HXJ-HtQ8r"}},D7ic:function(e,t,a){e.exports={"upload-file-wrapper":"upload-file-wrapper-tyYMT3euLH",uploadFileWrapper:"upload-file-wrapper-tyYMT3euLH",disabled:"disabled-3SPh6q5pAr",txt:"txt-2eJ1e1eF1N","upload-file-icon":"upload-file-icon-2dyt91cKj9",uploadFileIcon:"upload-file-icon-2dyt91cKj9","upload-file-input":"upload-file-input-8iCDrBzQSU",uploadFileInput:"upload-file-input-8iCDrBzQSU"}},DDpV:function(e,t,a){"use strict";a.r(t);var n=a("mVeg"),r=a("cDcd"),o=a.n(r),i=a("faye"),l=a.n(i),c=a("NRVB"),s=a.n(c),u=a("i+Ig"),d=a.n(u),f=a("K2gz"),p=a.n(f),m=a("h+87"),v=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},h="APPROVED",g="REFUSED",E="COMMENT",y="EDIT",b="RECALL",I="DELETE",S="RESUBMIT",T=function(e){var t=e.onClick,a=e.canApprove,r=e.canRefuse,i=e.canComment,l=e.canEdit,c=e.canWithdraw,s=e.canResubmit,u=e.canDelete,f=v(Object(m.a)(),1)[0],T=f.visible,w=f.toggle,C=function(){return a||r||i?[{id:y,name:Object(n.t)("\u4fee\u6539"),show:l},{id:b,name:Object(n.t)("\u64a4\u9500"),show:c},{id:S,name:Object(n.t)("\u518d\u6b21\u63d0\u4ea4"),show:s},{id:"divider",show:u},{id:I,name:Object(n.t)("\u5220\u9664"),show:u}]:[]};return o.a.createElement("div",{className:d.a.operates},(a||r||i?[{id:h,name:Object(n.t)("\u540c\u610f"),show:a},{id:g,name:Object(n.t)("\u62d2\u7edd"),show:r},{id:E,name:Object(n.t)("\u53d1\u8868\u8bc4\u8bba"),show:i}]:[{id:S,name:Object(n.t)("\u518d\u6b21\u63d0\u4ea4"),show:s},{id:I,name:Object(n.t)("\u5220\u9664"),show:u},{id:y,name:Object(n.t)("\u4fee\u6539"),show:l},{id:b,name:Object(n.t)("\u64a4\u9500"),show:c}]).map((function(e){return e.show?o.a.createElement("div",{key:e.id,className:p()(d.a.operate,d.a["operate-".concat(e.id.toLowerCase())]),onClick:function(){t(e.id)}},o.a.createElement("div",{className:d.a.operateIcon}),e.name):null})),(l||c||s||u)&&!!C().length&&o.a.createElement("div",{className:p()(d.a.operate,d.a.operateMore),onClick:function(e){e.stopPropagation(),w()}},o.a.createElement("div",{className:d.a.operateIcon}),Object(n.t)("\u66f4\u591a"),T&&o.a.createElement("div",{className:d.a.panel},C().map((function(e){if(e.show)return"divider"===e.id?o.a.createElement("div",{className:d.a.itemDivider,key:e.id}):o.a.createElement("div",{key:e.id,className:p()(d.a.item,d.a["item-".concat(e.id.toLowerCase())],e.id===I&&d.a.itemDanger),onClick:function(a){a.stopPropagation(),w(),t(e.id)}},o.a.createElement("div",{className:d.a.itemIcon}),e.name)})))))},w=a("CqsM"),C=a.n(w),O=a("wMIR"),N=a("kCWS"),P=a("LjP9"),j=a.n(P),D=a("246l"),k=a.n(D),R=a("cW10"),M=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},A=function(e){var t=e.type,a=e.onCancel,i=e.onAction,l=M(Object(r.useState)(""),2),c=l[0],s=l[1],u=function(){(t!==E||c.trim())&&i({type:t,comment:c})};return o.a.createElement("div",{className:j.a.wrapper},o.a.createElement(R.a,{key:t,className:j.a.textarea,value:c,onChange:function(e){var t=e.target.value;s(t)},placeholder:t===E?Object(n.t)("\u8bf7\u8f93\u5165\u8bc4\u8bba\uff08\u9009\u586b\uff09"):Object(n.t)("\u8bf7\u8f93\u5165\u5ba1\u6279\u539f\u56e0\uff08\u9009\u586b\uff09"),minHeight:80,autoFocus:!0}),o.a.createElement("div",{className:j.a.footer},t===h&&o.a.createElement("div",{className:p()(j.a.confirmButton,k.a.newButton,k.a.primary,k.a.h28),onClick:u},o.a.createElement("div",{className:p()(j.a.icon,j.a.iconResolve)}),Object(n.t)("\u786e\u8ba4\u901a\u8fc7")),t===g&&o.a.createElement("div",{className:p()(j.a.confirmButton,k.a.newButton,k.a.primary,k.a.h28),onClick:u},o.a.createElement("div",{className:p()(j.a.icon,j.a.iconReject)}),Object(n.t)("\u786e\u8ba4\u62d2\u7edd")),t===E&&o.a.createElement("div",{className:p()(j.a.button,k.a.newButton,k.a.primary,k.a.h28,!c.trim()&&k.a.disabled),onClick:u},Object(n.t)("\u53d1\u8868\u8bc4\u8bba")),o.a.createElement("div",{className:p()(j.a.button,k.a.newButton,k.a.default,k.a.h28),onClick:a},Object(n.t)("\u53d6\u6d88"))))},L=a("B6oZ"),x=a("PnyR"),_=a.n(x),F=a("f0Wu"),W=a.n(F),B="CREATED",H="STATUS",U="REFUSED",Y="NONE",q="APPROVED",G="WITHDRAW",z=function(e){var t=e.creatorId,a=e.status,i=e.user,l=e.logs,c=e.reviewers,s=e.cviewers,u=e.onAction,d=e.operateType,f=e.onOperateTypeChange,m=e.getContainer,v=e.afterLogs,h=e.issueReviewType,g=Object(r.useRef)(null),E=function(e){if(e.logType===B)return Object(n.t)("\u53d1\u8d77\u4e86\u5ba1\u6279");if(e.logType===G)return Object(n.t)("\u64a4\u9500\u4e86\u5ba1\u6279");if(e.logType===H&&e.logContent){if(e.logContent.approvalStatus===U)return e.logContent.comment?o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:C.a.red},Object(n.t)("\u5df2\u62d2\u7edd")),"\uff0c",Object(n.t)("\u5e76\u53d1\u8868\u4e86\u8bc4\u8bba")):o.a.createElement("span",{className:C.a.red},Object(n.t)("\u5df2\u62d2\u7edd"));if(e.logContent.approvalStatus===q)return e.logContent.comment?Object(n.t)("\u5df2\u540c\u610f\uff0c\u5e76\u53d1\u8868\u4e86\u8bc4\u8bba"):Object(n.t)("\u5df2\u540c\u610f");if(e.logContent.approvalStatus===Y)return Object(n.t)("\u53d1\u8868\u4e86\u8bc4\u8bba")}return""},y=Date.now(),b=function(e){var t=e.createdAt,a=Math.ceil((y-t)/1e3);if(a<60)return Object(n.t)("{{t}} \u79d2\u524d",{t:a});if(a<3600)return Object(n.t)("{{t}} \u5206\u949f\u524d",{t:Math.floor(a/60)});if(a<86400)return Object(n.t)("{{t}} \u5c0f\u65f6\u524d",{t:Math.floor(a/3600)});var r=W()(t).month()+1,o=W()(t).date(),i=W()(t).hour(),l=W()(t).minute();return Object(n.t)("{{month}}\u6708{{date}}\u65e5 {{hour}}:{{minute}}",{month:r,date:o,hour:i,minute:l<10?"0".concat(l):l})},I=function(e){return e.logType===G?"undo":e.logType===H&&e.logContent?e.logContent.approvalStatus===Y?"comment":e.logContent.approvalStatus.toLowerCase():e.logType.toLowerCase()},S=function(e){return e===Y?"wait-gray":e.toLowerCase()},w=function(){return a===L.a.PASSED},P=function(){return!h.deleted&&(a!==L.a.WITHDRAW&&a!==L.a.PASSED&&a!==L.a.REFUSED&&!!c.find((function(e){return e.id===i.id&&"NONE"===e.approvalStatus})))},j=function(){return!h.deleted&&(a!==L.a.WITHDRAW&&!(!s.find((function(e){return e.id===i.id}))&&!c.find((function(e){return e.id===i.id}))&&t!==i.id))};Object(r.useEffect)((function(){m&&m(g)}),[]);var D=l.map((function(e,t){return o.a.createElement("div",{className:C.a.item,key:t},o.a.createElement("div",{className:C.a.bar},o.a.createElement("div",{className:C.a.avatar},o.a.createElement("img",{src:e.currentUser.avatar||_.a}),o.a.createElement(O.a,{className:C.a.status,type:I(e)})),o.a.createElement("div",{className:C.a.name},e.currentUser.name,e.currentUser.id===i.id&&Object(n.t)("\uff08\u6211\uff09")),o.a.createElement("div",{className:C.a.desc},E(e)),o.a.createElement("div",{className:C.a.time},b(e))),e.logContent&&e.logContent.comment&&o.a.createElement("div",{className:C.a.comment},e.logContent.comment.split("\n").map((function(e,t){return o.a.createElement("div",{key:t},e)}))))})),k=o.a.createElement("div",{className:C.a.item},o.a.createElement("div",{className:C.a.bar},o.a.createElement("div",{className:p()(C.a.avatar,C.a.avatarApproval)}),o.a.createElement("div",{className:C.a.name},a===L.a.PASSED||a===L.a.REFUSED||a===L.a.WITHDRAW?Object(n.t)("\u5ba1\u6279\u4eba"):Object(n.t)("\u5ba1\u6279\u4eba\uff08{{num}} \u4eba\u6b63\u5728\u5ba1\u6279\uff09",{num:c.length}))),o.a.createElement("div",{className:C.a.list},c.map((function(e){return o.a.createElement("div",{className:C.a.listUser,key:e.key},o.a.createElement(N.a,{data:e,status:S(e.approvalStatus)}))})))),R=P()||j()?o.a.createElement("div",{className:C.a.item},o.a.createElement("div",{className:C.a.bar},o.a.createElement("div",{className:C.a.avatar},o.a.createElement("img",{src:i.avatar}),o.a.createElement(O.a,{className:C.a.status,type:"wait"})),o.a.createElement("div",{className:C.a.name},P()?Object(n.t)("\u6211\uff08\u5f85\u6211\u5ba1\u6279\uff09"):Object(n.t)("\u6211")),o.a.createElement("div",{className:C.a.desc}),o.a.createElement("div",{className:C.a.time},Object(n.t)("\u73b0\u5728"))),!d&&o.a.createElement("div",{className:C.a.operate},o.a.createElement(T,{onClick:f,canApprove:P(),canRefuse:P(),canComment:j(),canEdit:!1,canWithdraw:!1,canResubmit:!1,canDelete:!1})),d&&o.a.createElement("div",{className:C.a.textarea,ref:g},o.a.createElement(A,{onAction:function(e){u(e)},type:d,onCancel:function(){return f("")}}))):null,M=s.length?o.a.createElement("div",{className:p()(C.a.item,!w()&&C.a.itemWait)},o.a.createElement("div",{className:C.a.bar},o.a.createElement("div",{className:p()(C.a.avatar,C.a.avatarCopy)}),w()?o.a.createElement("div",{className:C.a.name},Object(n.t)("\u6284\u9001\u4eba\uff08\u5df2\u6284\u9001\uff09")):o.a.createElement("div",{className:C.a.name},Object(n.t)("\u6284\u9001\u4eba"))),o.a.createElement("div",{className:C.a.list},s.map((function(e){return o.a.createElement("div",{className:C.a.listUser,key:e.key},o.a.createElement(N.a,{data:e,from:"creview",wait:!w()}))})))):null,x=v?v.map((function(e,t){return o.a.createElement("div",{className:C.a.item,key:t},o.a.createElement("div",{className:C.a.bar},o.a.createElement("div",{className:C.a.avatar},o.a.createElement("img",{src:e.currentUser.avatar||_.a}),o.a.createElement(O.a,{className:C.a.status,type:I(e)})),o.a.createElement("div",{className:C.a.name},e.currentUser.name,e.currentUser.id===i.id&&Object(n.t)("\uff08\u6211\uff09")),o.a.createElement("div",{className:C.a.desc},E(e)),o.a.createElement("div",{className:C.a.time},b(e))),e.logContent&&e.logContent.comment&&o.a.createElement("div",{className:C.a.comment},e.logContent.comment.split("\n").map((function(e,t){return o.a.createElement("div",{key:t},e)}))))})):null;return v&&v.length||a===L.a.PASSED||a===L.a.REFUSED?o.a.createElement("div",{className:C.a.wrapper},D,k,M,x,R):o.a.createElement("div",{className:C.a.wrapper},D,k,R,M)},V=a("5hex"),Z=a("lGCG"),K=a("h74D"),J=a("yg2+"),Q=a("cHah"),X=a("Se5f"),$=a("7FZc"),ee=a("15vB"),te=a.n(ee),ae=a("KUqB"),ne=a("ZTlW"),re=a("+dhI"),oe=a("mFAe"),ie=Object(r.memo)((function(e){var t=e.data,a=t.issueStatus&&t.issueStatus.type&&"COMPLETED"===t.issueStatus.type;return o.a.createElement("div",{className:te.a.item},o.a.createElement(ae.default,{type:t.issueTypeDetail.iconType}),o.a.createElement("div",{className:te.a.itemCode},"#",t.code),o.a.createElement("div",{className:te.a.itemName},t.name),t.dueDate&&o.a.createElement("div",{className:te.a.itemDate},o.a.createElement(ne.a,{date:t.dueDate,isCompleted:a})),o.a.createElement("div",{className:te.a.itemPriority},o.a.createElement(re.default,{priority:t.priority})),o.a.createElement("div",{className:te.a.itemStatus},o.a.createElement(oe.default,{status:t.issueStatus})),o.a.createElement($.TooltipTrigger,{title:t.assignee&&t.assignee.name||Object(n.t)("\u672a\u5206\u914d\u5904\u7406\u4eba")},o.a.createElement("img",{className:te.a.itemAvatar,src:t.assignee&&t.assignee.avatar||_.a})))})),le=a("+E08"),ce=a.n(le),se=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},ue=o.a.memo((function(e){var t=e.preview,a=e.onHide,i=Object(r.useRef)(null),c=se(Object(r.useState)({}),2),s=c[0],u=c[1],d=function(e){"Escape"===e.key&&a()};return Object(r.useEffect)((function(){if(t){var e=document.createElement("img");e.setAttribute("src",t),e.addEventListener("load",(function(){!function(e,t){if(i&&i.current){var a,n,r=i.current.getBoundingClientRect(),o=r.width,l=r.height,c=e/o,s=t/l;c>=1&&s>=1?c>s?(n=o,a=parseFloat((n/e*t).toFixed(2))):(a=l,n=parseFloat((a/t*e).toFixed(2))):c<1&&s<1?u({width:e,height:t}):c>=1&&s<1?(n=o,a=parseFloat((n/e*t).toFixed(2))):(a=l,n=parseFloat((a/t*e).toFixed(2))),a&&n&&u({width:n,height:a})}}(e.width,e.height)}))}}),[t]),Object(r.useEffect)((function(){return window.addEventListener("keydown",d,!1),function(){window.removeEventListener("keydown",d,!1)}}),[]),l.a.createPortal(o.a.createElement("div",{className:ce.a.preview,onClick:a},o.a.createElement("div",{className:ce.a.wrapper,ref:i},o.a.createElement("div",{className:ce.a.close,onClick:function(e){e.stopPropagation(),a()}},Object(n.t)("\u5173\u95ed")),o.a.createElement("div",{className:ce.a.imgWrapper},o.a.createElement("img",{src:t,style:{width:"".concat(s.width,"px"),height:"".concat(s.height,"px")}})))),document.querySelector('div[data-frontend-module-container="coding-project-management-frontend"]'))})),de=a("P5Jw"),fe=a.n(de),pe=a("DTVk"),me=a("DKcV"),ve=a("Z4vw"),he=a("xgZS"),ge=function(){return(ge=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Ee=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},ye=function(e){var t=e.mode,a=e.user,i=e.detailCode,l=e.onDetailCodeChange,c=e.onDelete,u=e.getCommentRef,d=e.handleScroll,f=e.allowUpdate,p=Ee(Object(r.useState)(null),2),m=p[0],v=p[1],w=Ee(Object(r.useState)([]),2),C=w[0],O=w[1],N=Ee(Object(r.useState)(""),2),P=N[0],j=N[1],D=Ee(Object(r.useState)(!1),2),k=D[0],R=D[1],M=Ee(Object(r.useState)(""),2),A=M[0],x=M[1],F=Ee(Object(r.useState)(!1),2),W=F[0],B=F[1],H=Ee(Object(r.useState)(""),2),U=H[0],Y=H[1],q=Ee(Object(r.useState)(Object(n.t)("\u590d\u5236\u94fe\u63a5")),2),G=q[0],K=q[1],ee=Ee(Object(r.useState)(f),2),te=ee[0],ae=ee[1],ne=function(e,t){Object(Z.getIssueReviewDetail)(e).then((function(e){var t=e.data;v(t),void 0===f&&Object(Z.getPermissions)(t.fromIssue.project.id).then((function(e){var t=!!e.data.permissions.find((function(e){return e.function===me.ProjectPermissionFunction.PROJECT_ISSUE&&e.action===me.ProjectPermissionAction.UPDATE}));ae(t)}))}),(function(e){var t=e.code;24001!==t&&8002!==t||c()})),Object(Z.getIssueReviewAttachments)(e).then((function(a){var n=a.data;t?Object(Z.copyIssueReview)(e).then((function(e){var t=e.data;O(C.map((function(e,a){return ge(ge({},e),{attachmentId:t.attachments[a].attachmentId})})))})):O(n)}))},re=function(e){Object(Z.withdrawIssueReview)(i,!0).then((function(){Object(he.success)(Object(n.t)("\u64a4\u9500\u6210\u529f")),e&&e(),ne(i,!0)}),(function(e){var t=e.code,a=e.msg;24024===t||24013===t||24009===t||24102===t||24103===t?(Object(he.warning)(Object(ve.getErrorMessage)(a)),R(!1),ne(i),x("")):Object(he.danger)(Object(ve.getErrorMessage)(a))}))};if(Object(r.useEffect)((function(){ne(i)}),[i]),!m)return null;var oe=function(){var e=m.status,t=m.reviewers;return!m.issueReviewType.deleted&&(e!==L.a.WITHDRAW&&e!==L.a.PASSED&&e!==L.a.REFUSED&&!!t.find((function(e){return e.id===a.id&&"NONE"===e.approvalStatus})))},le=function(){var e=m.status,t=m.cc,n=m.reviewers,r=m.creator;return!m.issueReviewType.deleted&&(e!==L.a.WITHDRAW&&!(!t.find((function(e){return e.id===a.id}))&&!n.find((function(e){return e.id===a.id}))&&r!==a.id))},ce=function(){var e=m.creator,t=m.status;return e===a.id&&t===L.a.PROCESSING},se=function(){var e=m.status;return m.creator===a.id&&e===L.a.PROCESSING},de=function(){return m.status!==L.a.PROCESSING&&te},ye=function(){var e=m.status;return te&&e===L.a.WITHDRAW},be=m.reviewers.slice(0,3);return o.a.createElement("div",{className:s.a.content},o.a.createElement("div",{className:s.a.top},o.a.createElement("div",{className:s.a.topLeft},o.a.createElement("div",{className:s.a.topIcon}),o.a.createElement("div",{className:s.a.topType},m.issueReviewType.name),o.a.createElement("div",{className:s.a.topPoint},"\xb7"),o.a.createElement("div",{className:s.a.topCode},m.code,o.a.createElement($.TooltipTrigger,{title:G,onVisibleChange:function(){K(Object(n.t)("\u590d\u5236\u94fe\u63a5"))}},o.a.createElement(fe.a,{text:"".concat(window.location.origin,"/issue-review-detail/").concat(i)},o.a.createElement("div",{className:s.a.topCopy,onClick:function(){K(Object(n.t)("\u5df2\u590d\u5236"))}}))))),o.a.createElement("div",{className:s.a.topRight},"modal"===t&&o.a.createElement(o.a.Fragment,null,o.a.createElement($.TooltipTrigger,{title:Object(n.t)("\u5728\u65b0\u6807\u7b7e\u9875\u6253\u5f00")},o.a.createElement("div",{className:s.a.topLink,onClick:function(){window.open("/issue-review-detail/".concat(m.code),"_blank")}})),o.a.createElement("div",{className:s.a.topDivider})),o.a.createElement("div",{className:s.a.topApprove},Object(n.t)("{{num}} \u5ba1\u6279\u8005",{num:m.reviewers.length})),o.a.createElement("div",{className:s.a.topAvatars},be.map((function(e,t){return o.a.createElement($.TooltipTrigger,{title:e.name,key:t},o.a.createElement("img",{key:t,src:e.avatar||_.a,className:s.a.topAvatarsItem,style:{zIndex:4-t}}))})),m.reviewers.length>3&&o.a.createElement("div",{className:s.a.topAvatarsItem},m.reviewers.length)),o.a.createElement("div",{className:s.a.topStatus},o.a.createElement(L.b,{type:m.status})))),o.a.createElement("div",{className:s.a.title},m.subject),(oe()||le()||ce()||se()||de()||ye())&&o.a.createElement("div",{className:s.a.operate},o.a.createElement(T,{onClick:function(e){if(e!==y){if(e===S)return R(!0),void ne(i,!0);e!==h&&e!==g&&e!==E||(d(),x(e)),j(e)}else j(e)},canApprove:oe(),canRefuse:oe(),canComment:le(),canEdit:ce(),canWithdraw:se(),canResubmit:de(),canDelete:ye()})),o.a.createElement("div",{className:s.a.divider}),!!C.length&&o.a.createElement("div",{className:s.a.attachment},o.a.createElement(V.a,{disabled:!0,allowPreview:!0,attachments:C.map((function(e){return{id:e.storageKey,attachmentId:e.attachmentId,name:e.fileName,size:e.fileSize,fileType:Object(J.b)(e.fileName).toLowerCase(),previewUrl:e.previewUrl}})),onPreview:function(e){var t=e.attachmentId,a=e.fileType;Object(J.c)(a)?Object(Z.getAttachmentPreview)(i,t).then((function(e){var t=e.data;B(!0),Y(t.previewUrl)})):Object(Z.getAttachmentDownload)(i,t).then((function(e){var t=e.data;window.open(t.downLoadUrl,"_blank")}))}})),o.a.createElement("div",{className:s.a.issue},o.a.createElement("div",{className:s.a.issueTitle},Object(n.t)("\u6765\u6e90\u4e8b\u9879")),o.a.createElement("div",{className:s.a.issueList,onClick:function(){return window.open(function(){var e=m.fromIssue,t=e.type,a=e.code,n=e.project;switch(t){case pe.IssueType.requirement:return"/p/".concat(n.name,"/requirements/issues/").concat(a,"/detail");case pe.IssueType.assignment:return"/p/".concat(n.name,"/assignments/issues/").concat(a,"/detail");case pe.IssueType.bug:return"/p/".concat(n.name,"/bug-tracking/issues/").concat(a,"/detail");case pe.IssueType.epic:return"/p/".concat(n.name,"/epics/issues/").concat(a,"/detail");case pe.IssueType.task:return"/p/".concat(n.name,"/subtasks/issues/").concat(a,"/detail");case pe.IssueType.workItem:return"/p/".concat(n.name,"/program/plan/work-items/").concat(a,"/detail");case pe.IssueType.risk:return"/p/".concat(n.name,"/program/risks/").concat(a,"/detail");default:return""}}(),"_blank")}},o.a.createElement(ie,{data:m.fromIssue}))),o.a.createElement("div",{className:s.a.procedure},o.a.createElement("div",{className:s.a.procedureTitle},Object(n.t)("\u6d41\u7a0b")),o.a.createElement(z,{getContainer:u,status:m.status,onAction:function(e){var t=e.type,a=e.comment;if(t===E){var n=a.trim();if(!n)return;Object(Z.commentIssueReview)(m.code,{comment:n},!0).then((function(){ne(i),x("")}),(function(e){var t=e.code,a=e.msg;24024===t||24013===t||24009===t||24102===t||24103===t?(Object(he.warning)(Object(ve.getErrorMessage)(a)),ne(i),x("")):Object(he.danger)(Object(ve.getErrorMessage)(a))}))}else Object(Z.processIssueReview)(m.code,{comment:a,status:t},!0).then((function(){ne(i),x("")}),(function(e){var t=e.code,a=e.msg;24024===t||24013===t||24009===t||24102===t||24103===t?(Object(he.warning)(Object(ve.getErrorMessage)(a)),ne(i),x("")):Object(he.danger)(Object(ve.getErrorMessage)(a))}))},creatorId:m.creator,user:a,logs:m.logs,afterLogs:m.afterLogs,reviewers:m.reviewers.map((function(e){return ge(ge({},e),{key:e.id||e.email})})),cviewers:m.cc.map((function(e){return ge(ge({},e),{key:e.id||e.email})})),operateType:A,onOperateTypeChange:function(e){return x(e)},issueReviewType:m.issueReviewType})),o.a.createElement(X.default,{show:P===y,title:Object(n.t)("\u786e\u5b9a\u4fee\u6539\u5ba1\u6279\u5355\u5417\uff1f"),desc:Object(n.t)("\u4fee\u6539\u5c06\u4f1a\u64a4\u9500\u5f53\u524d\u5ba1\u6279\uff0c\u518d\u6b21\u53d1\u8d77\u5ba1\u6279"),confirmText:Object(n.t)("\u786e\u5b9a\u4fee\u6539"),callback:function(){re((function(){R(!0)})),j("")},onHide:function(){j("")}}),o.a.createElement(X.default,{show:P===b,title:Object(n.t)("\u64a4\u9500"),desc:Object(n.t)("\u64a4\u9500\u540e\u6d41\u7a0b\u5c06\u7ed3\u675f\uff0c\u786e\u8ba4\u64a4\u9500\u5417\uff1f"),confirmText:Object(n.t)("\u786e\u5b9a"),callback:function(){re(),j("")},onHide:function(){j("")}}),o.a.createElement(X.default,{show:P===I,title:Object(n.t)("\u5220\u9664"),desc:Object(n.t)("\u5220\u9664\u5c06\u65e0\u6cd5\u6062\u590d\uff0c\u786e\u5b9a\u5220\u9664\u5417\uff1f"),confirmText:Object(n.t)("\u786e\u5b9a\u5220\u9664"),callback:function(){Object(Z.deleteIssueReview)(i).then((function(){Object(he.success)(Object(n.t)("\u5220\u9664\u6210\u529f")),c()})),j("")},onHide:function(){j("")}}),k&&o.a.createElement(Q.default,{data:ge(ge({},m),{attachments:C.map((function(e){return{id:e.storageKey,attachmentId:e.attachmentId,name:e.fileName,size:e.fileSize,fileType:Object(J.b)(e.fileName).toLowerCase(),previewUrl:e.previewUrl}}))}),onItemChange:function(e){var t=e.code;l(t)},fromIssueId:m.fromIssue.id,onCancel:function(){return R(!1)}}),W&&o.a.createElement(ue,{preview:U,onHide:function(){B(!1),Y("")}}))};t.default=Object(K.connect)((function(e){var t;return{user:null===(t=null===e||void 0===e?void 0:e.APP)||void 0===t?void 0:t.user}}))((function(e){var t=e.mode,a=void 0===t?"modal":t,n=e.onCancel,l=e.user,c=e.detailCode,u=e.onDetailCodeChange,d=e.allowUpdate,f=Object(r.useRef)(null),p=Object(r.useRef)(null),m=function(e){p.current=e},v=function(){setTimeout((function(){f.current&&p.current&&p.current.current&&(f.current.scrollTop=f.current.scrollHeight)}))};return"modal"===a&&n?Object(i.createPortal)(o.a.createElement("div",{className:s.a.outer},o.a.createElement("div",{className:s.a.modal},o.a.createElement("div",{className:s.a.cancel,onClick:n}),o.a.createElement("div",{className:s.a.container,ref:f},o.a.createElement(ye,{getCommentRef:m,mode:a,user:l,detailCode:c,onDetailCodeChange:u,onDelete:function(){return n()},handleScroll:v,allowUpdate:d})))),document.querySelector('div[data-frontend-module-container="coding-project-management-frontend"]')):o.a.createElement("div",{className:s.a.page,ref:f},o.a.createElement(ye,{getCommentRef:m,mode:a,user:l||{},detailCode:c,onDetailCodeChange:u,onDelete:function(){return location.replace("/")},handleScroll:v,allowUpdate:d}))}))},Dw6M:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+ZmlsZS1pY29ucy8yNHB4L3ZpZGVvPC90aXRsZT4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGQ9Ik01LjI1LDIgTDE1LDIgTDE1LDIgTDIxLDggTDIxLDE5Ljc1IEMyMSwyMC45OTI2NDA3IDE5Ljk5MjY0MDcsMjIgMTguNzUsMjIgTDUuMjUsMjIgQzQuMDA3MzU5MzEsMjIgMywyMC45OTI2NDA3IDMsMTkuNzUgTDMsNC4yNSBDMywzLjAwNzM1OTMxIDQuMDA3MzU5MzEsMiA1LjI1LDIgWiIgaWQ9InBhdGgtMSI+PC9wYXRoPgogICAgICAgIDxmaWx0ZXIgeD0iLTguMyUiIHk9Ii03LjUlIiB3aWR0aD0iMTE2LjclIiBoZWlnaHQ9IjExNS4wJSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTIiPgogICAgICAgICAgICA8ZmVPZmZzZXQgZHg9IjAiIGR5PSIwIiBpbj0iU291cmNlQWxwaGEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0T3V0ZXIxIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIwLjUiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUdhdXNzaWFuQmx1cj4KICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAgICAwIDAgMCAwIDAgICAwIDAgMCAwIDAgIDAgMCAwIDAuMDUgMCIgdHlwZT0ibWF0cml4IiBpbj0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgPC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Ikljb25zL0ZpbGUvMjRweC9WaWRlbyI+CiAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtQ29weSI+CiAgICAgICAgICAgICAgICA8dXNlIGZpbGw9ImJsYWNrIiBmaWxsLW9wYWNpdHk9IjEiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjNkM1MEU2IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNC42NzA1MDIxLDE0LjkyNDk2NzggTDExLjE1NTg1NzcsMTcuNDU2MDk3IEMxMC42Mjg2NjExLDE3Ljg3Nzk1MTkgOS43NSwxNy40NTYwOTcgOS43NSwxNi43ODExMjkyIEw5Ljc1LDExLjcxODg3MDggQzkuNzUsMTEuMDQzOTAzIDEwLjU0MDc5NSwxMC42MjIwNDgxIDExLjE1NTg1NzcsMTEuMDQzOTAzIEwxNC42NzA1MDIxLDEzLjU3NTAzMjIgQzE1LjEwOTgzMjYsMTMuOTEyNTE2MSAxNS4xMDk4MzI2LDE0LjU4NzQ4MzkgMTQuNjcwNTAyMSwxNC45MjQ5Njc4IFoiIGlkPSJTaGFwZSIgZmlsbD0iI0ZGRkZGRiIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIwLjkwMDAwMDAzNiI+PC9wYXRoPgogICAgICAgICAgICA8cGF0aCBkPSJNMTUsMiBMMjEsOCBMMTcuMjUsOCBDMTYuMDA3MzU5Myw4IDE1LDYuOTkyNjQwNjkgMTUsNS43NSBMMTUsMiBMMTUsMiBaIiBpZD0iUmVjdGFuZ2xlLUNvcHktMyIgZmlsbD0iI0ZGRkZGRiIgb3BhY2l0eT0iMC40MDAwMDAwMDYiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},EOid:function(e,t,a){"use strict";a.r(t),a.d(t,"RiskModel",(function(){return P}));var n=a("cDcd"),r=a.n(n),o=a("sftu"),i=a.n(o),l=a("5rEg"),c=a("Vl3Y"),s=a("BMrR"),u=a("kPKH"),d=a("2fM7"),f=a("zmh9"),p=a.n(f),m=a("mVeg"),v=a("4FS9"),h=a.n(v),g=a("Z4vw"),E=function(e,t){return Object(g.postJSON)("/external/collaboration/api/project/".concat(e,"/issues/listRiskReason"),t)},y=function(e,t){return Object(g.postJSON)("/external/collaboration/api/project/".concat(e,"/issues/updateIsRisk"),t)},b=function(e,t){return Object(g.get)("/external/collaboration/api/project/".concat(e,"/issues/getRiskInfo?").concat(Object(g.buildParams)(t)))},I=a("xgZS"),S=function(){return(S=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},T=function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function i(e){try{c(n.next(e))}catch(t){o(t)}}function l(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}c((n=n.apply(e,t||[])).next())}))},w=function(e,t){var a,n,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(a=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){i.label=l[1];break}if(6===l[0]&&i.label<r[1]){i.label=r[1],r=l;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(l);break}r[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(c){l=[6,c],n=0}finally{a=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},C=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},O=l.a.TextArea,N=[{label:"\u4f4e",value:1},{label:"\u4e2d",value:2},{label:"\u9ad8",value:3}],P=function(e){var t=C(c.a.useForm(),1)[0],a=e.onSubmit,o=e.title,l=e.onCancel,f=e.show,v=e.disabled,g=e.projectId,P=e.id,j=C(Object(n.useState)([]),2),D=j[0],k=j[1],R=C(Object(n.useState)([]),2),M=R[0],A=R[1],L=Object(n.useCallback)((function(e){F(e)}),[]),x=Object(n.useCallback)((function(){return T(void 0,void 0,void 0,(function(){var e,n;return w(this,(function(r){switch(r.label){case 0:return[4,t.validateFields()];case 1:return(e=r.sent()).riskReason&&!e.riskClass?(Object(I.danger)("\u9700\u586b\u98ce\u9669\u5206\u7c7b"),[2]):(n=S({issueId:P,isRisk:v?0:1},e),[4,y(g,n)]);case 2:return 0===r.sent().code?a(e):Object(I.danger)("\u66f4\u65b0\u5931\u8d25"),a(e),[2]}}))}))}),[]),_=Object(n.useCallback)((function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}),[]),F=Object(n.useCallback)((function(e){return T(void 0,void 0,void 0,(function(){var a,n,r;return w(this,(function(o){switch(o.label){case 0:return a={parentClass:e||""},t.setFieldsValue({riskReason:void 0}),[4,E(g,a)];case 1:return n=o.sent().data,r=Array.isArray(n)?n:[],e?A(r):k(r),[2]}}))}))}),[]),W=Object(n.useCallback)((function(){return T(void 0,void 0,void 0,(function(){var e;return w(this,(function(a){switch(a.label){case 0:return[4,b(g,{issueId:P})];case 1:return e=a.sent().data,t.setFieldsValue(S({},e)),[2]}}))}))}),[]);return Object(n.useEffect)((function(){W(),F()}),[]),r.a.createElement(i.a,{show:f,closeButton:f,onHide:function(){return l()},outsideClickCloseable:!1,style:{width:560},onClick:_},r.a.createElement(i.a.Header,null,r.a.createElement("div",{className:h.a.anomalyHeader},o)),r.a.createElement(i.a.Body,null,r.a.createElement(c.a,{form:t,layout:"vertical",initialValues:{riskGrade:2}},r.a.createElement(s.a,{gutter:24},r.a.createElement(u.a,{span:12},r.a.createElement(c.a.Item,{label:"\u98ce\u9669\u539f\u56e0\u5206\u7c7b",name:"riskClass"},r.a.createElement(d.a,{allowClear:!0,placeholder:"\u8bf7\u9009\u62e9",disabled:!!v,onChange:L,options:D.map((function(e){return{value:e,label:e}}))}))),r.a.createElement(u.a,{span:12},r.a.createElement(c.a.Item,{label:"\u98ce\u9669\u539f\u56e0",name:"riskReason"},r.a.createElement(d.a,{allowClear:!0,placeholder:"\u8bf7\u9009\u62e9",disabled:!!v,options:M.map((function(e){return{value:e,label:e}}))})))),r.a.createElement(c.a.Item,{label:"\u98ce\u9669\u7b49\u7ea7",rules:[{required:!0}],name:"riskGrade",wrapperCol:{span:12}},r.a.createElement(d.a,{allowClear:!0,placeholder:"\u8bf7\u9009\u62e9",disabled:!!v,options:N})),r.a.createElement(c.a.Item,{label:"\u5907\u6ce8",name:"riskRemark",rules:[{max:300}]},r.a.createElement(O,{disabled:!!v,placeholder:"\u8bf7\u8f93\u5165",showCount:!0,rows:4,maxLength:255})))),r.a.createElement(i.a.Footer,null,r.a.createElement("div",{className:h.a.riskModalFooter},r.a.createElement(p.a,{type:"default",className:h.a.footerBtn,onClick:function(){return l()}},Object(m.t)("\u53d6\u6d88")),r.a.createElement(p.a,{type:"default",className:h.a.footerBtn,onClick:function(){return x()}},v?"\u786e\u8ba4\u89e3\u9664":"\u4fdd\u5b58"))))}},ERou:function(e,t,a){e.exports={project:"project-mlNNmzRfdE",link:"link-r29wfGaIuh","project-name":"project-name-lY_Nn0CFuU",projectName:"project-name-lY_Nn0CFuU","project-icon":"project-icon-1h2UUF6T1N",projectIcon:"project-icon-1h2UUF6T1N"}},EuaE:function(e,t,a){e.exports={"menu-item":"menu-item-2Mb6W1F3rp",menuItem:"menu-item-2Mb6W1F3rp","project-avatar":"project-avatar-2kLuJ-U7bl",projectAvatar:"project-avatar-2kLuJ-U7bl",name:"name-2po8GPRweK",checked:"checked-3iaxrWWDma","project-trigger":"project-trigger-3iR7GBv56o",projectTrigger:"project-trigger-3iR7GBv56o",content:"content-3vWo6EFipt",placeholder:"placeholder-29-kki_ait",avatar:"avatar-1VaVI232I2",caret:"caret-d1kass1nV4",disabled:"disabled-3MsgnGixz8"}},Ewd1:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("cDcd")),o=a("gdfu"),i=n(a("FWkN")),l=function(e){var t={Defect:"\u7f3a\u9677",Flow:"\u5de5\u4f5c\u6d41",ExternalLink:"\u5916\u90e8\u94fe\u63a5",Iteration:"\u8fed\u4ee3",MergeRequestBean:"\u5408\u5e76\u8bf7\u6c42",Milestone:"\u91cc\u7a0b\u7891",Mission:"\u4efb\u52a1",ProjectFile:"\u6587\u4ef6",Release:"\u4ee3\u7801\u7248\u672c ",Requirement:"\u7528\u6237\u6545\u4e8b",SubTask:"\u5b50\u4efb\u52a1",TestingCase:"\u6d4b\u8bd5\u7528\u4f8b",TestingRun:"\u6d4b\u8bd5\u8ba1\u5212",Testing:"\u6d4b\u8bd5",TestingReport:"\u6d4b\u8bd5\u62a5\u544a",Wiki:"WIKI",Epic:"\u53f2\u8bd7",WorkItem:"\u5de5\u4f5c\u9879",PrdIssue:"\u751f\u4ea7\u95ee\u9898",OperationalRequirement:"\u8fd0\u8425\u9700\u6c42",Intention:"\u4e1a\u52a1\u610f\u5411",PrdRequirement:"\u4ea7\u54c1\u9700\u6c42"},a=e.associateDatas;return r.default.createElement("div",{className:i.default.container},r.default.createElement(o.List,{size:"large",split:!0,header:r.default.createElement("div",null,"\u5df2\u5173\u8054\u4e8b\u9879"),bordered:!0,dataSource:a,renderItem:function(e){return r.default.createElement(o.List.Item,null,r.default.createElement("div",{className:i.default.item,style:{display:"flex",alignItems:"center"}},r.default.createElement("span",null,t[e.type]),"\xa0|\xa0",r.default.createElement(o.Tooltip,{title:"#".concat(e.id).concat(e.title)},r.default.createElement("span",{style:{marginLeft:"5px",maxWidth:"350px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},"#",e.id,"\xa0",e.title))))}}))};t.default=l},FLqE:function(e,t,a){e.exports={placeholder:"placeholder-144deXTUYs","placeholder-read-only":"placeholder-read-only-3WfMV_ZqW-",placeholderReadOnly:"placeholder-read-only-3WfMV_ZqW-",root:"root-127qZzkd7w",anchor:"anchor-245rzPJYYf","fold-style":"fold-style-12Q1f08H69",foldStyle:"fold-style-12Q1f08H69",title:"title-yHK7E79xHU","divide-line":"divide-line-28689I4zrS",divideLine:"divide-line-28689I4zrS","edit-button":"edit-button-WNXyTulvab",editButton:"edit-button-WNXyTulvab",history:"history-3EGyGzqFJH",icon:"icon-2lXpfM0xCI","empty-content":"empty-content-3rvKkw2LAK",emptyContent:"empty-content-3rvKkw2LAK","content-wrapper":"content-wrapper-3ZIWCxuZtV",contentWrapper:"content-wrapper-3ZIWCxuZtV","mark-editor":"mark-editor-2iTm97kJ_B",markEditor:"mark-editor-2iTm97kJ_B","description-wrapper":"description-wrapper-2nTw2XT8yY",descriptionWrapper:"description-wrapper-2nTw2XT8yY",expanded:"expanded-RybqB1TfUN",mask:"mask-3kqlBp2uxy","toggle-btn":"toggle-btn-2NBDWyaTZ1",toggleBtn:"toggle-btn-2NBDWyaTZ1","toggle-btn-expanded":"toggle-btn-expanded-eAVfoeiaDd",toggleBtnExpanded:"toggle-btn-expanded-eAVfoeiaDd","transform-panel":"transform-panel-19FYUwMmJR",transformPanel:"transform-panel-19FYUwMmJR","transform-loading":"transform-loading-mTRW2KgMTa",transformLoading:"transform-loading-mTRW2KgMTa",flash:"flash-G7Z8nR5y-A",flashToggle:"flashToggle-3mA96jP7_x","custom-btn-mr":"custom-btn-mr-1gZEoxhmn5",customBtnMr:"custom-btn-mr-1gZEoxhmn5","editor-container":"editor-container-1Y644hiuOo",editorContainer:"editor-container-1Y644hiuOo","editor-height":"editor-height-pdHhsE-6GY",editorHeight:"editor-height-pdHhsE-6GY"}},FWkN:function(e,t,a){e.exports={container:"container-KC9oY_B_b9",item:"item-1buyq03K3u"}},FsZr:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=n(a("JdeO")),v=a("1qdz");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.itemType;return f.default.createElement("div",{className:v.listItem,key:t.id},f.default.createElement("div",{className:v.dot}),f.default.createElement("div",{className:v.content},f.default.createElement(m.default,{className:"mr-10 ".concat(v.icon)}),f.default.createElement("span",{className:v.user},t.creator.name),t.issueLog&&1===t.issueLog.old?"\u3010\u6e90\u3011":"",f.default.createElement("span",null,(0,u.t)("\u66f4\u65b0\u4e86{{name}}\u7684\u7f3a\u9677\u7c7b\u578b\u4e3a",{name:a})),f.default.createElement("span",{className:"ml-10 ".concat(v.moreDot)},t.issueLog.content.name),f.default.createElement("span",{className:v.time},(0,p.timeFormat)(t.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=E,E.propTypes={item:d.default.object,itemType:d.default.string}},G0so:function(e,t,a){e.exports={root:"root-bSq15_GAVd","subtask-root":"subtask-root-2JErpk9_tp",subtaskRoot:"subtask-root-2JErpk9_tp","full-screen":"full-screen-1x9BlUU3RG",fullScreen:"full-screen-1x9BlUU3RG","full-screen-slip":"full-screen-slip-3O3Wu9suSQ",fullScreenSlip:"full-screen-slip-3O3Wu9suSQ","full-screen-mask":"full-screen-mask-16WGmP8Rxv",fullScreenMask:"full-screen-mask-16WGmP8Rxv","detail-root":"detail-root-2VK7H3HXBu",detailRoot:"detail-root-2VK7H3HXBu","expanded-size":"expanded-size-1Hy363xNCE",expandedSize:"expanded-size-1Hy363xNCE","close-button":"close-button-3LPXEsuQEj",closeButton:"close-button-3LPXEsuQEj","close-button-full-screen":"close-button-full-screen-IkXz6-goR3",closeButtonFullScreen:"close-button-full-screen-IkXz6-goR3"}},G6Sb:function(e,t,a){e.exports={box:"box-7bsRi7w2rx",disabled:"disabled-Gn6UBNMT35",wrapper:"wrapper-3ixv_dwTh5","is-editing":"is-editing-39F5dhFU0C",isEditing:"is-editing-39F5dhFU0C","circle-wrapper":"circle-wrapper-mvwNWQ4Vh_",circleWrapper:"circle-wrapper-mvwNWQ4Vh_",number:"number-1qnOxTRQCn","input-wrapper":"input-wrapper-3z0EIOESSc",inputWrapper:"input-wrapper-3z0EIOESSc",input:"input-3EXsA9qJhV",percent:"percent-me4StellH0","circular-chart":"circular-chart-3hQLD0O1xg",circularChart:"circular-chart-3hQLD0O1xg",circle:"circle-3cqqGBdgXM",progress:"progress-vrCIQZuglo","circle-rim":"circle-rim-33G7rT_RC9",circleRim:"circle-rim-33G7rT_RC9"}},GEKH:function(e,t,a){e.exports={wrap:"wrap-1HqzOwhAvK",search:"search-8CW6BD8E48","search-icon":"search-icon-1X4j2SFwoP",searchIcon:"search-icon-1X4j2SFwoP","search-input":"search-input-2NoBs2UhWa",searchInput:"search-input-2NoBs2UhWa","remove-icon":"remove-icon-2POge-utz5",removeIcon:"remove-icon-2POge-utz5","clearable-text":"clearable-text-3GPcUciEWK",clearableText:"clearable-text-3GPcUciEWK","list-container":"list-container-1tDcoUUN_9",listContainer:"list-container-1tDcoUUN_9",list:"list-2QtrJ-n53R",item:"item-3XmfWe1O_E","item-select":"item-select-1k3poLS8tU",itemSelect:"item-select-1k3poLS8tU","item-selected":"item-selected-a_5_lhNBbY",itemSelected:"item-selected-a_5_lhNBbY","no-data":"no-data-11Ioq04p4y",noData:"no-data-11Ioq04p4y"}},GMsc:function(e,t,a){e.exports={"confirm-wrapper":"confirm-wrapper-zIXmWdXm2i",confirmWrapper:"confirm-wrapper-zIXmWdXm2i",loading:"loading-3vkYeYkQ90",spin:"spin-2Htem7y7DJ","project-selector":"project-selector-3qzos8QwpD",projectSelector:"project-selector-3qzos8QwpD"}},GSeP:function(e,t,a){e.exports=a.p+"43f376ebff885d8b9eff866ff0231948.svg"},GrEx:function(e,t,a){e.exports={titleInputWrap:"titleInputWrap-3Sg1U5QNCw",inputEdit:"inputEdit-1QWagPVOUS",titleView:"titleView-2y66MAXF5D",oneLine:"oneLine-3u9h2C36kg",input:"input-AXFgLeK9tq"}},Gtz0:function(e,t,a){"use strict";a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("pVnL")),i=n(a("J4zp")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=s(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),c=a("dLZG");function s(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(s=function(e){return e?a:t})(e)}var u=function(e){return function(t){var a=(0,l.useState)({tencentMeeting:!1,codesign:!1,txc:!1,modao:!1}),n=(0,i.default)(a,2),r=n[0],s=n[1];return(0,l.useEffect)((function(){window.$$$_PM_MODEL_CONFIG?s(window.$$$_PM_MODEL_CONFIG):(0,c.fetchModuleConfig)().then((function(e){var t=e.data;s(t),window.$$$_PM_MODEL_CONFIG=t}))}),[]),l.default.createElement(e,(0,o.default)({moduleConfig:r},t))}};t.default=u},Gup7:function(e,t,a){"use strict";a("I5cv"),a("RW0V"),a("ioFf"),a("mYba"),a("jm62"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("dRSK"),a("KKXr"),a("f3/d"),a("0l/t"),a("bWfx"),a("Z2Ku");var o,i,l,c=n(a("lSNA")),s=n(a("lwsE")),u=n(a("W8MJ")),d=n(a("PJYZ")),f=n(a("7W2i")),p=n(a("a1gu")),m=n(a("Nsbk")),v=a("mVeg"),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=x(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),g=n(a("17x9")),E=a("nuIr"),y=n(a("HR7+")),b=a("DKcV"),I=n(a("s/lc")),S=n(a("mMyY")),T=n(a("ibw4")),w=n(a("hz4c")),C=n(a("8LfU")),O=a("oG/b"),N=a("xgZS"),P=a("Z4vw"),j=n(a("WN9O")),D=n(a("KUqB")),k=n(a("K2gz")),R=a("uelK"),M=a("dBa0"),A=a("9+7+"),L=a("DgMC");function x(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(x=function(e){return e?a:t})(e)}function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function W(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,m.default)(e);if(t){var r=(0,m.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,p.default)(this,a)}}var B={ALL:(0,v.t)("\u4e8b\u9879"),EPIC:(0,v.t)("\u53f2\u8bd7"),REQUIREMENT:(0,v.t)("\u6545\u4e8b"),MISSION:(0,v.t)("\u4efb\u52a1"),DEFECT:(0,v.t)("\u7f3a\u9677")},H="LIST",U=(0,b.WithProjectPermission)((l=i=function(e){(0,f.default)(a,e);var t=W(a);function a(e){var n;(0,s.default)(this,a),(n=t.call(this,e)).checkExportIssueStatus=function(){var e=n.props.currentProject,t=n.state.currentExportId;n.timer&&clearTimeout(n.timer),(0,O.exportIssueDetail)(e.id,t).then((function(a){var r=a.data;"PROCESSING"===r.status?n.timer=setTimeout((function(){return n.checkExportIssueStatus()}),1e3):n.setState({errorMsg:r.error_message,count:r.succeed_rows,status:r.succeed?"success":"error",file:{name:r.file_name,url:"/api/project/".concat(e.id,"/issues/export/").concat(t,"/download")},currentExportId:void 0})}))},n.exportIssuesWithFilter=function(e){var t=n.props,a=t.currentProject,r=t.activeFilterContent,o=t.originFilterContent,i=t.type,l=t.epicType,c=n.state,s=c.currentExportId,u=c.selections,d="EPIC"===i&&"1"===l?{key:"ISSUE_ROADMAP_SORT",value:"ASC"}:e?o.sort:r.sort;return n.setState({exportModalShow:!0,status:"pending"}),void 0===s?(0,O.exportIssues)(a.id,i,{content:F(F({},e?o:r),{},{sort:d}),fields:u}).then((function(e){var t=e.data;n.setState({currentExportId:t.id},n.checkExportIssueStatus)})).catch((function(e){var t=e.msg;n.setState({currentExportId:void 0,origin:!1,status:"error",errorMsg:(0,P.getErrorMessage)(t)})})):((0,N.warning)((0,v.t)("\u5f53\u524d\u6709\u6b63\u5728\u8fdb\u884c\u7684\u5bfc\u51fa\u4efb\u52a1")),null)},n.importIssuesWithoutFilters=function(e){var t=n.props,a=t.type,r=t.currentProjectCooperateSettings.ISSUE_TYPES;if("REQUIREMENT"===a||"MISSION"===a){var o=n.getIssueTypeOptions();return 1===o.length?void n.handleImportIssueType(o[0]):void e.nativeEvent.stopImmediatePropagation()}n.setState({uploaderModalShow:!0,status:"pending",willImportIssueType:r.find((function(e){return e.issueType===a}))})},n.onOASyncRequirement=function(){n.setState({oaSyncModalShow:!0})},n.handleImportIssueType=function(e){n.setState({willImportIssueType:e,uploaderModalShow:!0,status:"pending"})},n.checkImportIssueStatus=function(){var e=n.props,t=e.currentProject,a=e.callback,r=n.state.currentImportId;n.timer&&clearTimeout(n.timer),(0,O.importIssueDetail)(t.id,r).then((function(e){var o=e.data;if("PROCESSING"===o.status)n.timer=setTimeout((function(){return n.checkImportIssueStatus()}),1e3);else{var i=o.error_message;if(i&&-1!==i.indexOf("issue_count_limit_by_charge"))try{i=i.split("msg: ")[1]}catch(l){console.error(l),console.error("\u4e8b\u9879\u8d85\u8fc7\u6700\u5927\u503c\uff0c\u9519\u8bef\u65e5\u5fd7\u4e0d\u7b26\u5408\u89c4\u8303")}n.setState({errorMsg:i,count:o.succeed?o.succeed_rows:o.fail_rows,status:o.succeed?"success":"error",file:{name:o.file_name,url:"/api/project/".concat(t.id,"/issues/import/").concat(r,"/error-download")},currentExportId:void 0,origin:!1}),o.succeed&&a()}}))},n.startImportIssues=function(e){var t=n.props,a=t.enterpriseGlobalKey,r=t.currentProject,o=r.name,i=r.id,l=t.userId,c=t.dir,s=n.state.willImportIssueType;n.setState({uploaderModalShow:!1,importModalShow:!0,status:"pending"});var u={file:e,"x:projectId":i,"x:width":n.props.width,"x:height":n.props.height,"x:folderType":1,"x:userId":l,folderType:1};(0,P.uploadFile)("/api/user/".concat(a,"/project/").concat(o,"/files/upload"),u,{dir:c},(function(e,t){var a=t.loaded,r=t.total,o=parseFloat((100*a/r).toFixed(2));n.setState({progress:o===1/0?100:+o})})).then((function(e){var t=e.data;(0,O.importIssues)(i,s.id,t.storage_key).then((function(e){0===e.code&&n.setState({currentImportId:e.data.id},(function(){n.checkImportIssueStatus()}))}))})).catch((function(e){var t=e.msg,a=e.code;(0,L.configPlanNotToastMsg)(a)||((0,N.danger)("".concat((0,v.t)("\u5bfc\u5165\u68c0\u6d4b\u5230\u4e86\u95ee\u9898 ")).concat((0,P.getErrorMessage)(t))),n.setState({currentImportId:void 0,importModalShow:!1,status:"pending",origin:!1}))}))},n.handleMouseEnter=function(){var e=n.props.type;if("REQUIREMENT"===e||"MISSION"===e){if(1===n.getIssueTypeOptions().length)return;n.setState({issueTypesShow:!0})}},n.handleMouseLeave=function(){var e=n.props.type;"REQUIREMENT"!==e&&"MISSION"!==e||n.setState({issueTypesShow:!1})},n.issueTypeDropdownRef=(0,h.createRef)(),n.getIssueTypeOptions=function(){var e=n.props,t=e.currentProjectCooperateSettings,a=e.type,r=t.ISSUE_TYPES;return"REQUIREMENT"===a?r.filter((function(e){return"REQUIREMENT"===e.issueType})):"MISSION"===a?r.filter((function(e){return"MISSION"===e.issueType})):[]};var r=e.currentProjectCooperateSettings,o=e.type,i=r.ISSUE_TYPES,l={};return"EPIC"!==o&&"DEFECT"!==o||(l=i.find((function(e){return e.issueType===o}))),n.state={expanded:!1,origin:!1,importModalShow:!1,oaSyncModalShow:!1,currentImportId:void 0,exportModalShow:!1,currentExportId:void 0,uploaderModalShow:!1,exportSelectionsModalShow:!1,status:void 0,selections:[],count:0,errorMsg:(0,v.t)("\u7f51\u7edc\u9519\u8bef\uff0c\u540e\u7aef\u5927\u7206\u70b8"),file:{name:"",url:"https://coding.net"},issueTypesShow:!1,willImportIssueType:l,slotConfiguration:{}},n.toggleExpand=n.toggleExpand.bind((0,d.default)(n)),n.openPanel=n.openPanel.bind((0,d.default)(n)),n.closePanel=n.closePanel.bind((0,d.default)(n)),n}return(0,u.default)(a,[{key:"componentDidMount",value:function(){this.getSlotInfo()}},{key:"getSlotInfo",value:function(){var e=this;(0,R.getSlotConfiguration)({slot:M.SLOTS.COLLABORATION_TAB_DROPDOWN_MENU_ONE,type:"CURRENT"}).then((function(t){var a=t.data;e.setState({slotConfiguration:a||{}})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.isPermissible,n=t.currentProject,r=t.type,o=t.tableViewType,i=t.slotCallback,l=t.allowImport,c=this.state,s=c.expanded,u=c.importModalShow,d=c.uploaderModalShow,f=c.oaSyncModalShow,p=c.exportModalShow,m=c.exportSelectionsModalShow,g=c.status,O=c.count,N=c.errorMsg,P=c.file,R=c.origin,M=c.issueTypesShow,L=c.willImportIssueType,x=c.slotConfiguration,_=a([{function:b.ProjectPermissionFunction.PROJECT_ISSUE,action:b.ProjectPermissionAction.CREATE}]),F=this.getIssueTypeOptions();return h.default.createElement("div",{className:"".concat(y.default.root," ").concat(s?y.default.expandedStyle:"")},h.default.createElement("div",{className:y.default.trigger,onClick:this.toggleExpand}),s&&h.default.createElement("ul",{className:y.default.dropdown},_&&"ALL"!==r&&l&&h.default.createElement("li",{style:{display:!E.KA_DEFECT_EDIT_ENTRY_DISABLE||r!==E.ISSUE_TYPE.REQUIREMENT&&r!==E.ISSUE_TYPE.ASSIGNMENT?"flex":"none"},className:(0,k.default)(("REQUIREMENT"===r||"MISSION"===r)&&y.default.itemDropdown,("REQUIREMENT"===r||"MISSION"===r)&&1===F.length&&y.default.itemDropdownSingle,M&&y.default.itemDropdownHover),ref:this.issueTypeDropdownRef,onClick:this.importIssuesWithoutFilters,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},(0,v.t)("\u5bfc\u5165"),1===F.length?F[0].name:B[r],M&&h.default.createElement(j.default,{portalWrapStyle:{zIndex:100},relatedElem:this.issueTypeDropdownRef.current,offsetX:-116,offsetY:-36},h.default.createElement("div",{className:y.default.itemPopup},F.map((function(t){return h.default.createElement("div",{key:t.key,className:y.default.itemPopupOption,title:t.name,onClick:function(){return e.handleImportIssueType(t)}},h.default.createElement(D.default,{className:y.default.itemPopupOptionIcon,type:t.iconType}),h.default.createElement("div",{className:y.default.itemPopupOptionName},t.name))}))))),A.KA_OA_SYNC_ENABLED&&_&&"ALL"!==r&&l&&h.default.createElement(h.default.Fragment,null,h.default.createElement("li",{className:y.default.divideLine}),h.default.createElement("li",{onClick:this.onOASyncRequirement},(0,v.t)("\u540c\u6b65OA\u9700\u6c42"))),x.id&&h.default.createElement("li",{className:y.default.item,onClick:function(){var e;return i(null===(e=x.slot)||void 0===e?void 0:e.identity)}},x.triggerText),_&&h.default.createElement("li",{className:y.default.divideLine}),o===H&&h.default.createElement(h.default.Fragment,null,h.default.createElement("li",{className:y.default.item,onClick:function(){e.setState({exportSelectionsModalShow:!0,origin:!1})},"data-container":!0,"data-title":"".concat((0,v.t)("\u5bfc\u51fa\u5f53\u524d\u7b5b\u9009")).concat(B[r])},(0,v.t)("\u5bfc\u51fa\u5f53\u524d\u7b5b\u9009"),B[r])),o!==H&&h.default.createElement("li",{className:(0,k.default)([y.default.item,y.default.tableViewTypeTree])},h.default.createElement("div",{className:y.default.title,"data-container":!0,"data-title":"".concat((0,v.t)("\u5bfc\u51fa")).concat(B[r])},(0,v.t)("\u5bfc\u51fa"),B[r]),h.default.createElement("div",{className:y.default.tip,"data-container":!0,"data-title":(0,v.t)("\u8bf7\u5207\u6362\u81f3\u5e73\u94fa\u89c6\u56fe\u4e0b\u5bfc\u51fa")},(0,v.t)("\u8bf7\u5207\u6362\u81f3\u5e73\u94fa\u89c6\u56fe\u4e0b\u5bfc\u51fa"))),["DEFECT","MISSION","REQUIREMENT"].includes(r)&&h.default.createElement("li",{className:y.default.item,onClick:function(){e.setState({exportSelectionsModalShow:!0,origin:!0})},"data-container":!0,"data-title":"".concat((0,v.t)("\u5bfc\u51fa\u6240\u6709")).concat(B[r])},(0,v.t)("\u5bfc\u51fa\u6240\u6709"),B[r])),h.default.createElement(I.default,{currentProject:n,status:g,type:r,count:O,errorMsg:N,file:P,show:p,onHide:function(){e.setState({exportModalShow:!1,status:void 0,origin:!1})}}),h.default.createElement(T.default,{status:g,type:r,count:O,errorMsg:N,file:P,show:u,onHide:function(){e.setState({importModalShow:!1,status:void 0})},onRetry:function(){e.setState({importModalShow:!1,status:void 0,uploaderModalShow:!0})}}),h.default.createElement(C.default,{currentProject:n,show:f,onHide:function(){e.setState({oaSyncModalShow:!1})}}),h.default.createElement(w.default,{issueTypeDetail:L,currentProject:n,show:d,onHide:function(){e.setState({uploaderModalShow:!1,status:void 0})},onSubmit:this.startImportIssues}),h.default.createElement(S.default,{show:m,currentProject:n,type:r,onHide:function(){e.setState({exportSelectionsModalShow:!1,status:void 0,origin:!1})},onSelect:function(t){e.setState({exportSelectionsModalShow:!1,exportModalShow:!0,selections:t},(function(){e.exportIssuesWithFilter(R)}))}}))}},{key:"toggleExpand",value:function(e){var t=this.state.expanded;e.stopPropagation(),t?this.closePanel():this.openPanel()}},{key:"openPanel",value:function(){this.setState({expanded:!0}),document.addEventListener("click",this.closePanel)}},{key:"closePanel",value:function(){this.setState({expanded:!1}),document.removeEventListener("click",this.closePanel)}}]),a}(h.Component),i.propTypes=F(F({type:g.default.string,originFilterContent:g.default.object,activeFilterContent:g.default.object,currentProject:g.default.object,currentProjectCooperateSettings:g.default.object,callback:g.default.func,tableViewType:g.default.string,epicType:g.default.string,userId:g.default.number,dir:g.default.number,slotCallback:g.default.func},b.WithProjectPermissionProps),{},{allowImport:g.default.bool}),i.defaultProps={originFilterContent:{sort:{key:"CREATED_AT",value:"DESC"},conditions:[]},tableViewType:H,allowImport:!0},o=l))||o;t.default=U},HGG5:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d"),a("bWfx");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=n(a("kBmI")),v=a("1qdz");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E={ADD:(0,u.t)("\u6dfb\u52a0"),REMOVE:(0,u.t)("\u79fb\u9664")},y=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item,t=e.issueLog.content.participants;return f.default.createElement("div",{className:v.listItem,key:e.id},f.default.createElement("div",{className:v.dot}),f.default.createElement("div",{className:v.content},f.default.createElement(m.default,{className:"mr-10 ".concat(v.icon)}),f.default.createElement("span",{className:v.user},e.creator.name),e.issueLog&&1===e.issueLog.old?"\u3010\u6e90\u3011":"",f.default.createElement("span",null,E[e.issueLog.action],(0,u.t)("\u53c2\u4e0e\u4eba")),f.default.createElement("span",{className:"ml-10 ".concat(v.customAction)},t.map((function(e){return e.name})).join(", ")),f.default.createElement("span",{className:v.time},(0,p.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=y,y.propTypes={item:d.default.object}},HHHH:function(e,t,a){e.exports=a.p+"c6c0dc1df136d610e8d05f3254f5bb65.svg"},"HR7+":function(e,t,a){e.exports={root:"root-39tOQT54d7","expanded-style":"expanded-style-RrJyWWNlZa",expandedStyle:"expanded-style-RrJyWWNlZa",trigger:"trigger-1sZ2aFFIRt",item:"item-tuzAvKDuwU",dropdown:"dropdown-ScgSJck_90","delete-style":"delete-style-3U4XwC9hgW",deleteStyle:"delete-style-3U4XwC9hgW",red:"red-1WF3730jO6","is-vertical":"is-vertical-20e9f0rKTU",isVertical:"is-vertical-20e9f0rKTU","is-disabled":"is-disabled-3SASgSSZFG",isDisabled:"is-disabled-3SASgSSZFG","option-description":"option-description-ZQAXryUgkU",optionDescription:"option-description-ZQAXryUgkU","divide-line":"divide-line-2MgSNDXvBT",divideLine:"divide-line-2MgSNDXvBT","table-view-type-tree":"table-view-type-tree-1hMyvWyKU0",tableViewTypeTree:"table-view-type-tree-1hMyvWyKU0",title:"title-3La0cb9dqh",tip:"tip-2VPxV2FEsk","item-dropdown":"item-dropdown-1tIzF2c2FC",itemDropdown:"item-dropdown-1tIzF2c2FC","item-dropdown-single":"item-dropdown-single-2EFiDlB_Mi",itemDropdownSingle:"item-dropdown-single-2EFiDlB_Mi","item-dropdown-hover":"item-dropdown-hover-1RHxkh1j3y",itemDropdownHover:"item-dropdown-hover-1RHxkh1j3y","item-popup":"item-popup-CNOfe5KqfW",itemPopup:"item-popup-CNOfe5KqfW","item-popup-option":"item-popup-option-7GQLq7MoiO",itemPopupOption:"item-popup-option-7GQLq7MoiO","item-popup-option-icon":"item-popup-option-icon-1qiIkVkPLs",itemPopupOptionIcon:"item-popup-option-icon-1qiIkVkPLs","item-popup-option-name":"item-popup-option-name-2o5ax9HOrn",itemPopupOptionName:"item-popup-option-name-2o5ax9HOrn"}},Hmmi:function(e,t,a){"use strict";a("RW0V"),a("ioFf"),a("0l/t"),a("mYba"),a("jm62"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(t){var a,n=(0,l.useState)(null),r=(0,i.default)(n,2),c=r[0],u=r[1],f=function(){var e,a=t.currentProject.id;a||(a=null===(e=t.targetData)||void 0===e?void 0:e.projectId);a&&(0,s.fetchHiddenFolderDirs)(a).then((function(e){var t=e.data;if(t&&t.list&&t.list.length){var a=t.list.reduce((function(e,t){return e[t.name]=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t),e}),{});u(a)}}))},m=t.currentProject.id;m||(m=null===(a=t.targetData)||void 0===a?void 0:a.projectId);return(0,l.useEffect)((function(){f()}),[m]),l.default.createElement(p,{value:{hiddenFolderDirs:c,getHiddenFloderDirs:f}},l.default.createElement(e,t))};return t.propTypes={currentProject:c.default.object,targetData:c.default.object},t},t.ThemeConsumer=t.ThemeProvider=t.ThemeContext=void 0,a("f3/d");var o=n(a("lSNA")),i=n(a("J4zp")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),c=n(a("17x9")),s=a("w3Wo");function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var f=l.default.createContext();t.ThemeContext=f;var p=f.Provider;t.ThemeProvider=p;var m=f.Consumer;t.ThemeConsumer=m},HwxY:function(e,t,a){"use strict";a.r(t);var n=a("cDcd"),r=a.n(n).a.createContext({});t.default=r},IP2A:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=n(a("17x9")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),f=a("FaIw"),p=n(a("74sH")),m=a("1qdz"),v=a("7FZc");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,l.default)(a,e);var t=g(a);function a(){var e;(0,o.default)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).getContent=function(){var t,a,n,r,o,i="",l=e.props.item.issueLog;switch((null===l||void 0===l||null===(t=l.content)||void 0===t?void 0:t.flowType)||(null===l||void 0===l?void 0:l.action)){case"ACTION_CROSS_PROJECT_PARENT":i='\u7cfb\u7edf\u6267\u884c\u8de8\u7a7a\u95f4\u7236\u5b50\u6d41\u7a0b\uff08\u7236\uff09\u89c4\u5219\u6210\u529f\uff0c\u72b6\u6001\u53d8\u4e3a"'.concat(null===(a=l.content)||void 0===a?void 0:a.targetStatus,'"');break;case"ACTION_CROSS_PROJECT_SUB":i='\u7cfb\u7edf\u6267\u884c\u8de8\u7a7a\u95f4\u7236\u5b50\u6d41\u7a0b\uff08\u5b50\uff09\u89c4\u5219\u6210\u529f\uff0c\u72b6\u6001\u53d8\u4e3a"'.concat(null===(n=l.content)||void 0===n?void 0:n.targetStatus,'"');break;case"ACTION_OPERATIONAL_REQ_UPDATE":i="\u7cfb\u7edf\u66f4\u65b0\u4e86\u72b6\u6001\u4e3a ".concat(null===(r=l.content)||void 0===r?void 0:r.targetStatus);break;case"ACTION_STATUS_UPDATED":i='\u7cfb\u7edf\u8bc6\u522b\u5173\u8054\u7684\u7528\u6237\u6545\u4e8b\u5168\u90e8\u53d1\u5e03\uff0c\u72b6\u6001\u53d8\u4e3a"'.concat(null===(o=l.content)||void 0===o?void 0:o.name,'"')}return d.default.createElement(v.TooltipTrigger,{title:i},d.default.createElement("span",null,i))},e}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item;return d.default.createElement("div",{className:m.listItem,key:e.id},d.default.createElement("div",{className:m.dot}),d.default.createElement("div",{className:m.content},d.default.createElement(p.default,{className:"mr-10 ".concat(m.icon)}),d.default.createElement("span",{className:m.msg,title:e.issueLog.content.val},this.getContent()),d.default.createElement("span",{className:m.time},(0,f.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(d.Component);t.default=E,E.propTypes={item:u.default.object}},ISZN:function(e,t,a){e.exports={processing:"processing-h7b-R8RHrp",passed:"passed-1uOqhkpszj",refused:"refused-22sZTeDt1d",withdraw:"withdraw-1azv-VP36x",weight:"weight-2xl2V7U47a",medium:"medium-1r_dTo959c"}},IdN8:function(e,t,a){"use strict";a.r(t);var n=a("mVeg"),r=a("cDcd"),o=a.n(r),i=a("sftu"),l=a.n(i),c=a("KXU4"),s=a.n(c),u=a("zmh9"),d=a.n(u),f=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i};t.default=function(e){var t=e.show,a=e.onDelete,i=e.onHide,c=f(Object(r.useState)(!1),1)[0];return o.a.createElement(l.a,{show:t,className:s.a.deleteViewer},o.a.createElement("div",{className:s.a.header},Object(n.t)("\u786e\u5b9a\u5220\u9664\u6b64\u6761\u5de5\u65f6\u8bb0\u5f55\uff1f")),o.a.createElement("div",{className:s.a.tip},Object(n.t)("\u8bb0\u5f55\u5220\u9664\u540e\u4e0d\u53ef\u6062\u590d")),o.a.createElement("div",{className:s.a.btnArea},o.a.createElement(d.a,{type:"danger",onClick:function(){return a(c)}},Object(n.t)("\u786e\u5b9a\u5220\u9664")),o.a.createElement(d.a,{type:"default",empty:!0,onClick:i},Object(n.t)("\u53d6\u6d88"))))}},IgEJ:function(e,t,a){"use strict";a("RW0V"),a("ioFf"),a("0l/t"),a("mYba"),a("jm62");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.STORY_WARN_MSG=t.MODE=t.BASE_STATUS_TYPE=t.BASE_ISSUE_TYPES=t.LOG_TYPE=t.SUBITEM_ACTIONS=t.FIELD_TYPE=t.ACTION=void 0;var r=n(a("lSNA")),o=a("mVeg"),i=a("nuIr");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.ACTION={UPDATE_REQUIREMENT_SCHEME:"REQUIREMENTS.GET.REQUIREMENT_SCHEME",UPDATE_HIDDEN_FILE_DIRS:"REQUIREMENTS.GET.HIDDEN_FILE_DIRS",UPDATE_REQUIREMENT_STATUS:"REQUIREMENTS.GET.REQUIREMENT_STATUS",UPDATE_PRD_REQUIREMENT_STATUS:"REQUIREMENTS.GET.PRD_REQUIREMENT_STATUS",UPDATE_MORE_FILTER_FIELDS:"REQUIREMENTS.GET.MORE_FILTER_FIELDS",UPDATE_REQUIREMENTS_PRODUCT_PAGER:"UPDATE_REQUIREMENTS_PRODUCT_PAGER"};var s=c({},i.BASE_FIELD_TYPE);t.FIELD_TYPE=s;t.SUBITEM_ACTIONS={REMOVEASSOCIATE:"REMOVEASSOCIATE",DELETE:"DELETE",UPGRADE:"UPGRADE",MODIFYPARNET:"MODIFYPARNET"};var u=c({},i.LOG_TYPE);t.LOG_TYPE=u;var d=c({},i.ISSUE_TYPE);t.BASE_ISSUE_TYPES=d;var f=c({},i.STATUS_TYPE);t.BASE_STATUS_TYPE=f;t.MODE={CLASSIC:"CLASSIC",SCRUM:"SCRUM"};var p={A00:(0,o.t)("\u7528\u6237\u6545\u4e8b\u5173\u8054\u7684\u4ea7\u54c1\u9700\u6c42\u9700\u6c42\u8bc4\u5ba1\u672a\u8bc4\u5ba1\uff0cIT\u9700\u6c42\u7533\u8bf7\u672a\u53d1\u8d77\uff0c\u4e0d\u5141\u8bb8\u4fee\u6539\u72b6\u6001\u3002"),A02:(0,o.t)("\u7528\u6237\u6545\u4e8b\u5173\u8054\u7684\u4ea7\u54c1\u9700\u6c42\u9700\u6c42\u8bc4\u5ba1\u672a\u8bc4\u5ba1\uff0cIT\u9700\u6c42\u7533\u8bf7\u672a\u5230\u9700\u6c42\u5b9e\u65bd\u73af\u8282\uff0c\u4e0d\u5141\u8bb8\u4fee\u6539\u72b6\u6001\u3002"),A20:(0,o.t)("\u7528\u6237\u6545\u4e8b\u5173\u8054\u7684\u4ea7\u54c1\u9700\u6c42\u9700\u6c42\u8bc4\u5ba1\u4e0d\u901a\u8fc7\uff0cIT\u9700\u6c42\u7533\u8bf7\u672a\u53d1\u8d77\uff0c\u4e0d\u5141\u8bb8\u4fee\u6539\u72b6\u6001\u3002"),A22:(0,o.t)("\u7528\u6237\u6545\u4e8b\u5173\u8054\u7684\u4ea7\u54c1\u9700\u6c42\u9700\u6c42\u8bc4\u5ba1\u4e0d\u901a\u8fc7\uff0cIT\u9700\u6c42\u7533\u8bf7\u672a\u5230\u9700\u6c42\u5b9e\u65bd\u73af\u8282\uff0c\u4e0d\u5141\u8bb8\u4fee\u6539\u72b6\u6001\u3002"),A30:(0,o.t)("\u7528\u6237\u6545\u4e8b\u5173\u8054\u7684\u4ea7\u54c1\u9700\u6c42\u9700\u6c42\u8bc4\u5ba1\u5df2\u53d1\u8d77\uff0cIT\u9700\u6c42\u7533\u8bf7\u672a\u53d1\u8d77\uff0c\u4e0d\u5141\u8bb8\u4fee\u6539\u72b6\u6001\u3002"),A32:(0,o.t)("\u7528\u6237\u6545\u4e8b\u5173\u8054\u7684\u4ea7\u54c1\u9700\u6c42\u9700\u6c42\u8bc4\u5ba1\u5df2\u53d1\u8d77\uff0cIT\u9700\u6c42\u7533\u8bf7\u672a\u5230\u9700\u6c42\u5b9e\u65bd\u73af\u8282\uff0c\u4e0d\u5141\u8bb8\u4fee\u6539\u72b6\u6001\u3002"),W0:(0,o.t)("\u7528\u6237\u6545\u4e8b\u5173\u8054\u7684\u4ea7\u54c1\u9700\u6c42/\u4ea7\u54c1\u9700\u6c42\u96c6IT\u9700\u6c42\u7533\u8bf7\u672a\u53d1\u8d77\uff0c\u4e0d\u5141\u8bb8\u4fee\u6539\u72b6\u6001\u3002"),W2:(0,o.t)("\u7528\u6237\u6545\u4e8b\u5173\u8054\u7684\u4ea7\u54c1\u9700\u6c42/\u4ea7\u54c1\u9700\u6c42\u96c6IT\u9700\u6c42\u7533\u8bf7\u672a\u5230\u9700\u6c42\u5b9e\u65bd\u73af\u8282\uff0c\u4e0d\u5141\u8bb8\u4fee\u6539\u72b6\u6001\u3002"),R0:(0,o.t)("\u7528\u6237\u6545\u4e8b\u5173\u8054\u7684\u4ea7\u54c1\u9700\u6c42\u9700\u6c42\u8bc4\u5ba1\u672a\u8bc4\u5ba1\uff0c\u4e0d\u5141\u8bb8\u4fee\u6539\u72b6\u6001\u3002"),R2:(0,o.t)("\u7528\u6237\u6545\u4e8b\u5173\u8054\u7684\u4ea7\u54c1\u9700\u6c42\u9700\u6c42\u8bc4\u5ba1\u4e0d\u901a\u8fc7\uff0c\u4e0d\u5141\u8bb8\u4fee\u6539\u72b6\u6001\u3002"),R3:(0,o.t)("\u7528\u6237\u6545\u4e8b\u5173\u8054\u7684\u4ea7\u54c1\u9700\u6c42\u9700\u6c42\u8bc4\u5ba1\u5df2\u53d1\u8d77\uff0c\u8fd8\u672a\u8bc4\u5ba1\uff0c\u4e0d\u5141\u8bb8\u4fee\u6539\u72b6\u6001\u3002")};t.STORY_WARN_MSG=p},JBq3:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+ZmlsZS1pY29ucy8yNHB4L3NrZXRjaDwvdGl0bGU+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNNS4yNSwyIEwxNSwyIEwxNSwyIEwyMSw4IEwyMSwxOS43NSBDMjEsMjAuOTkyNjQwNyAxOS45OTI2NDA3LDIyIDE4Ljc1LDIyIEw1LjI1LDIyIEM0LjAwNzM1OTMxLDIyIDMsMjAuOTkyNjQwNyAzLDE5Ljc1IEwzLDQuMjUgQzMsMy4wMDczNTkzMSA0LjAwNzM1OTMxLDIgNS4yNSwyIFoiIGlkPSJwYXRoLTEiPjwvcGF0aD4KICAgICAgICA8ZmlsdGVyIHg9Ii04LjMlIiB5PSItNy41JSIgd2lkdGg9IjExNi43JSIgaGVpZ2h0PSIxMTUuMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0yIj4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMCIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMC41IiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwICAgMCAwIDAgMCAwICAgMCAwIDAgMCAwICAwIDAgMCAwLjA1IDAiIHR5cGU9Im1hdHJpeCIgaW49InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVDb2xvck1hdHJpeD4KICAgICAgICA8L2ZpbHRlcj4KICAgIDwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJJY29ucy9GaWxlLzI0cHgvU2tldGNoIj4KICAgICAgICAgICAgPGcgaWQ9IlJlY3RhbmdsZS1Db3B5Ij4KICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMSIgZmlsdGVyPSJ1cmwoI2ZpbHRlci0yKSIgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgICAgICA8dXNlIGZpbGw9IiNGRkI5MzYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlJlY3RhbmdsZSIgZmlsbD0iI0YyRjRGNiIgcG9pbnRzPSI5LjY1NjI1IDExLjc4Mjg5NDcgMTIgMTEuMjUgMTQuNDMxNjQwNiAxMS43ODI4OTQ3IDE1Ljc1IDEzLjk0NDA3ODkgMTIgMTggOC4yNSAxMy45NDQwNzg5Ij48L3BvbHlnb24+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNSwyIEwyMSw4IEwxNy4yNSw4IEMxNi4wMDczNTkzLDggMTUsNi45OTI2NDA2OSAxNSw1Ljc1IEwxNSwyIEwxNSwyIFoiIGlkPSJSZWN0YW5nbGUtQ29weS0zIiBmaWxsPSIjRkZGRkZGIiBvcGFjaXR5PSIwLjQwMDAwMDAwNiI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},JEgV:function(e,t,a){e.exports=a.p+"f15787cffd8bee091b5e951d82b4c6d0.svg"},KIkv:function(e,t,a){"use strict";a.r(t);var n=a("mVeg"),r=a("cDcd"),o=a.n(r),i=a("ERou"),l=a.n(i),c=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),s=function(e){function t(t){return e.call(this,t)||this}return c(t,e),t.prototype.render=function(){var e=this.props,t=e.name,a=e.icon,r=e.jumpUrl;return o.a.createElement("a",{className:l.a.project,target:"_blank",href:r},o.a.createElement("img",{src:a,alt:Object(n.t)("\u7814\u53d1\u7a7a\u95f4\u56fe\u6807"),className:l.a.projectIcon}),o.a.createElement("div",{className:l.a.projectName},t),o.a.createElement("div",{className:l.a.link}))},t}(o.a.Component);t.default=s},KXU4:function(e,t,a){e.exports={"delete-viewer":"delete-viewer-3R-4mT29Z0",deleteViewer:"delete-viewer-3R-4mT29Z0",header:"header-3WFIwOJDJ1",tip:"tip-2Yz3I-FG1B","checkbox-area":"checkbox-area-naIJHwm50D",checkboxArea:"checkbox-area-naIJHwm50D","checkbox-tip":"checkbox-tip-TuLzucokci",checkboxTip:"checkbox-tip-TuLzucokci","adjust-container":"adjust-container-3E_wDKA8Ui",adjustContainer:"adjust-container-3E_wDKA8Ui","adjust-header":"adjust-header-305IcLRRhx",adjustHeader:"adjust-header-305IcLRRhx","adjust-tip":"adjust-tip-1pDAFHrioX",adjustTip:"adjust-tip-1pDAFHrioX","arrow-right":"arrow-right-3h2gWE9i-f",arrowRight:"arrow-right-3h2gWE9i-f","btn-area":"btn-area-1kTIgGN_MZ",btnArea:"btn-area-1kTIgGN_MZ"}},KY0D:function(e,t,a){e.exports=a.p+"132c5c9cb9515501605e0b4ab82bd033.svg"},KY5o:function(e,t,a){"use strict";var n=a("mVeg"),r=a("cDcd"),o=a.n(r),i=a("K2gz"),l=a.n(i),c=a("nPYk"),s=a.n(c),u=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i};function d(e){var t=u(Object(r.useState)(!1),2),a=t[0],i=t[1],c=Object(r.useRef)(null),d=e.recordHours,f=e.remainingHours,p=e.segmentMargin,m=e.className,v=e.onClick,h=d+f,g=0!==h?d/h*100:h;Object(r.useEffect)((function(){if(c.current){var e=c.current.offsetWidth;i(e<100)}}));return o.a.createElement("div",{className:l()([s.a.container,m]),onClick:v},o.a.createElement("div",{className:s.a.header,ref:c,style:{marginBottom:"".concat(p,"px")}},d||f?!d&&f>0?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:s.a.emptyRecordTip},Object(n.t)("\u672a\u8bb0\u5f55\u5de5\u65f6")),!a&&o.a.createElement("div",{className:s.a.leftText},Object(n.t)("\u5269 {{remain}} \u5c0f\u65f6",{remain:f}))):d>0&&!f?o.a.createElement("div",null,Object(n.t)("\u5df2\u8bb0\u5f55 {{recordHours}} \u5c0f\u65f6",{recordHours:d})):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:s.a.recordText},Object(n.t)("\u5df2\u8bb0\u5f55 {{recordHours}} \u5c0f\u65f6",{recordHours:d})),!a&&o.a.createElement("div",{className:s.a.leftText},Object(n.t)("\u5269 {{remainingHours}} \u5c0f\u65f6",{remainingHours:f}))):o.a.createElement("div",{className:s.a.emptyRecordTip},Object(n.t)("\u672a\u8bb0\u5f55\u5de5\u65f6"))),o.a.createElement("div",{className:s.a.progress},o.a.createElement("div",{className:s.a.noted,style:{width:"".concat(g,"%")}})))}d.defaultProps={segmentMargin:3},t.a=d},L2Ee:function(e,t,a){e.exports=a.p+"be67a3315ae3cf2d4a5e8bb6df0ceee9.svg"},L2LP:function(e,t,a){e.exports={"editor-wrapper":"editor-wrapper-jGxSJp8z40",editorWrapper:"editor-wrapper-jGxSJp8z40"}},LAmh:function(e,t,a){"use strict";a("RW0V"),a("ioFf"),a("0l/t"),a("mYba"),a("jm62");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("lSNA"));a("INYr");var o=n(a("cDcd")),i=a("l8Oe"),l=n(a("afBQ")),c=n(a("17x9")),s=n(a("QtVt"));function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,height:"100%"};function p(e,t){if(!e||!t)return{display:"none"};var a=t.x,n=t.y,r="translate(".concat(a,"px, ").concat(n,"px)");return{width:"100%",transform:r,WebkitTransform:r}}var m=function(e){var t,a=e.items,n=e.allowDelete,r=e.width,c=(0,i.useDragLayer)((function(e){return{item:e.getItem(),itemType:e.getItemType(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset(),isDragging:e.isDragging()}})),u=c.itemType,m=c.isDragging,v=c.item,h=c.initialOffset,g=c.currentOffset;return v&&v.id&&(t=a.findIndex((function(e){return v&&e.code===v.id}))),m?o.default.createElement("div",{style:d(d({},f),{},{width:"".concat(r,"px")})},o.default.createElement("div",{style:p(h,g)},function(){switch(u){case"subtask-drag-drop":return t>-1&&o.default.createElement("div",{className:s.default.list},o.default.createElement(l.default,{item:a[t],allowDelete:n}));default:return null}}())):null};m.propTypes={items:c.default.array,allowDelete:c.default.bool,width:c.default.number};var v=m;t.default=v},LFMZ:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("o0o1"));a("f3/d");var i=n(a("yXPU")),l=n(a("lwsE")),c=n(a("W8MJ")),s=n(a("7W2i")),u=n(a("a1gu")),d=n(a("Nsbk")),f=a("mVeg"),p=n(a("17x9")),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=S(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),v=a("FaIw"),h=n(a("zIEN")),g=n(a("/Ypu")),E=a("/HD1"),y=a("w3Wo"),b=a("dtw8"),I=a("1qdz");function S(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(S=function(e){return e?a:t})(e)}function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var w={ADD:(0,f.t)("\u5173\u8054"),REMOVE:(0,f.t)("\u89e3\u9664"),CREATE:(0,f.t)("\u521b\u5efa\u5e76\u5173\u8054\u4e86"),DELETE:(0,f.t)("\u5220\u9664"),SORT:(0,f.t)("\u66f4\u6539\u4e86\u6392\u5e8f")},C={UP:(0,f.t)("\u5347\u9ad8"),up:(0,f.t)("\u5347\u9ad8"),DOWN:(0,f.t)("\u964d\u4f4e"),down:(0,f.t)("\u964d\u4f4e")},O=function(e){(0,s.default)(a,e);var t=T(a);function a(){var e;(0,l.default)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(){var t=(0,i.default)(o.default.mark((function t(a,n){var r,i,l,c,s,u,d,f,p,m,v;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,i=r.currentProject,l=r.item,t.prev=1,a.preventDefault(),"WORK_ITEM"!==(null===l||void 0===l||null===(c=l.issueLog)||void 0===c||null===(s=c.content)||void 0===s?void 0:s.type)){t.next=9;break}return t.next=6,(0,E.fetchWorkItemDetail)(null===i||void 0===i?void 0:i.name,null===l||void 0===l||null===(u=l.issueLog)||void 0===u||null===(d=u.content)||void 0===d?void 0:d.code);case 6:t.t0=t.sent,t.next=12;break;case 9:return t.next=11,(0,y.fetchIssueDetailByCode)(null===i||void 0===i?void 0:i.id,null===l||void 0===l||null===(f=l.issueLog)||void 0===f||null===(p=f.content)||void 0===p?void 0:p.code);case 11:t.t0=t.sent;case 12:null!==(v=t.t0)&&void 0!==v&&null!==(m=v.data)&&void 0!==m&&m.code&&window.open(n),t.next=18;break;case 16:t.prev=16,t.t1=t.catch(1);case 18:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e,a){return t.apply(this,arguments)}}(),e}return(0,c.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.item,n=t.projectPath,r="";return r="REQUIREMENT"===a.issueLog.content.type?"".concat(n,"/requirements/issues/").concat(a.issueLog.content.code,"/detail"):"WORK_ITEM"===a.issueLog.content.type?"".concat(n,"/program/plan/work-items/").concat(a.issueLog.content.code,"/detail"):"".concat(n,"/subtasks/issues/").concat(a.issueLog.content.code,"/detail"),m.default.createElement("div",{className:I.listItem,key:a.id},m.default.createElement("div",{className:I.dot}),m.default.createElement("div",{className:I.content},"DELETE"===a.issueLog.action&&m.default.createElement(g.default,{className:"mr-10 ".concat(I.icon)}),"DELETE"!==a.issueLog.action&&m.default.createElement(h.default,{className:"mr-10 ".concat(I.icon)}),m.default.createElement("span",{className:I.user},a.creator.name),a.issueLog&&1===a.issueLog.old?"\u3010\u6e90\u3011":"",m.default.createElement("span",null,w[a.issueLog.action],a.issueLog.content.issueTypeName),"DELETE"!==a.issueLog.action?m.default.createElement("span",{className:"ml-10 ".concat(I.moreDot)},m.default.createElement(b.Link,{target:"_blank",onClick:function(t){e.handleClick(t,r)}},"#",a.issueLog.content.code,"-",a.issueLog.content.name),"  ",C[a.issueLog.content.location]):m.default.createElement("span",{className:"ml-10 ".concat(I.moreDot)},"#",a.issueLog.content.code,"-",a.issueLog.content.name),"REMOVE"===a.issueLog.action&&m.default.createElement("span",{className:"ml-10"},(0,f.t)("\u7684\u5173\u8054")),m.default.createElement("span",{className:I.time},(0,v.timeFormat)(a.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(m.Component);t.default=O,O.propTypes={item:p.default.object,projectPath:p.default.string,currentProject:p.default.object}},LSgY:function(e,t,a){e.exports={item:"item-2TqqQMI6zi","item-first":"item-first-p9j5MnzB0b",itemFirst:"item-first-p9j5MnzB0b","item-last":"item-last-1kzaup-Xx_",itemLast:"item-last-1kzaup-Xx_","item-active":"item-active-1AXdnCNt3F",itemActive:"item-active-1AXdnCNt3F",icon:"icon-G3S3o4XZB7",type:"type-3OAWATvKGH",divider:"divider-2qB87459kp",status:"status-3BInBKrIkV",avatar:"avatar-1StV8_azZx",more:"more-2curZuahGy",main:"main-1MejSAFmh3",title:"title-13yJc885sj","delete-text":"delete-text-3T870Fe3i-",deleteText:"delete-text-3T870Fe3i-"}},LjP9:function(e,t,a){e.exports={wrapper:"wrapper-nTQnaD9SOk",textarea:"textarea-3FphZN2nf4",footer:"footer-3KFGVE02AH",button:"button-mLAIQg9aH7","confirm-button":"confirm-button-3EgNAkMep-",confirmButton:"confirm-button-3EgNAkMep-",icon:"icon-1Y-BxzSAZm","icon-resolve":"icon-resolve-1FA2VBHCuL",iconResolve:"icon-resolve-1FA2VBHCuL","icon-reject":"icon-reject-1RXZBdhbuu",iconReject:"icon-reject-1RXZBdhbuu"}},MOjz:function(e,t,a){e.exports={item:"item-2-D2LfAPTa","min-width-hide":"min-width-hide-3JWAzq6Vdb",minWidthHide:"min-width-hide-3JWAzq6Vdb",root:"root-2O8BvrEVdM",dropdown:"dropdown-2q-6b30kjl","item-dropdown":"item-dropdown-13iwLXGUn1",itemDropdown:"item-dropdown-13iwLXGUn1","item-dropdown-single":"item-dropdown-single-2MNkc6QDV_",itemDropdownSingle:"item-dropdown-single-2MNkc6QDV_","item-dropdown-hover":"item-dropdown-hover-kCnUS3UPwK",itemDropdownHover:"item-dropdown-hover-kCnUS3UPwK","item-popup":"item-popup-20o5RUqAnV",itemPopup:"item-popup-20o5RUqAnV","item-popup-option":"item-popup-option-2qckOCVykb",itemPopupOption:"item-popup-option-2qckOCVykb","item-popup-option-icon":"item-popup-option-icon-mhDD9_mIw1",itemPopupOptionIcon:"item-popup-option-icon-mhDD9_mIw1","item-popup-option-name":"item-popup-option-name-5whFJTtSey",itemPopupOptionName:"item-popup-option-name-5whFJTtSey"}},MROg:function(e,t,a){e.exports=a.p+"e0f3e55ee672d456b1621ad428e97293.svg"},"MV+9":function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=n(a("SuBj")),v=a("1qdz");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item;return f.default.createElement("div",{className:v.listItem,key:e.id},f.default.createElement("div",{className:v.dot}),f.default.createElement("div",{className:v.content},f.default.createElement(m.default,{className:"mr-10 ".concat(v.icon)}),f.default.createElement("span",{className:v.user},e.creator.name),e.issueLog&&1===e.issueLog.old?"\u3010\u6e90\u3011":"",f.default.createElement("span",null,(0,u.t)("\u66f4\u65b0\u4e86\u6a21\u5757\u4e3a")),f.default.createElement("span",{className:"ml-10"},e.issueLog.content.val),f.default.createElement("span",{className:v.time},(0,p.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=E,E.propTypes={item:d.default.object}},Mj5j:function(e,t,a){e.exports={"subitem-wrapper":"subitem-wrapper-383o7va5N0",subitemWrapper:"subitem-wrapper-383o7va5N0","subitem-header":"subitem-header-2egG36F3cy",subitemHeader:"subitem-header-2egG36F3cy",title:"title-3Z8sS7gRnm",operation:"operation-1VUEBEr8lX",progress:"progress-2tR0Vo7YL0",migration:"migration-1ovcSc71QG","create-button":"create-button-fg_nGFe27X",createButton:"create-button-fg_nGFe27X",disabled:"disabled-2VtFAxaUyP","find-button":"find-button-I5-yXQ5JYa",findButton:"find-button-I5-yXQ5JYa","link-button":"link-button-3GTj7bqNHZ",linkButton:"link-button-3GTj7bqNHZ","subitem-detail":"subitem-detail-1cSDDmOXgx",subitemDetail:"subitem-detail-1cSDDmOXgx","subitem-layer":"subitem-layer-2_qWdXTbsc",subitemLayer:"subitem-layer-2_qWdXTbsc",items:"items-2M4FvOMYH2",active:"active-2FuEDguYrS","items-moving":"items-moving-1JTg36U1Od",itemsMoving:"items-moving-1JTg36U1Od","items-is-dragging":"items-is-dragging-2RABmuVpRz",itemsIsDragging:"items-is-dragging-2RABmuVpRz","select-wrap":"select-wrap-38i33THuVq",selectWrap:"select-wrap-38i33THuVq","item-icon":"item-icon-2n-kZaL6Kt",itemIcon:"item-icon-2n-kZaL6Kt","item-code":"item-code-2POVCNZuru",itemCode:"item-code-2POVCNZuru","due-date":"due-date-1Gh8DrIuLz",dueDate:"due-date-1Gh8DrIuLz","item-detail":"item-detail-WFIuA9lQ8L",itemDetail:"item-detail-WFIuA9lQ8L","item-priority":"item-priority-3vrrTZyZ6b",itemPriority:"item-priority-3vrrTZyZ6b","item-status":"item-status-1x33q6Ibzf",itemStatus:"item-status-1x33q6Ibzf","member-right":"member-right-2Mk29banXv",memberRight:"member-right-2Mk29banXv","label-wrapper":"label-wrapper-OWNZFB9YkN",labelWrapper:"label-wrapper-OWNZFB9YkN","menu-dropdown":"menu-dropdown-3pxJx_0kCW",menuDropdown:"menu-dropdown-3pxJx_0kCW","rest-dropdown":"rest-dropdown-1jy6h3__WM",restDropdown:"rest-dropdown-1jy6h3__WM","item-left":"item-left-3PO4XdBRD_",itemLeft:"item-left-3PO4XdBRD_","item-right":"item-right-qpScTry9Je",itemRight:"item-right-qpScTry9Je","status-tag":"status-tag-2Lm9ZpaA_j",statusTag:"status-tag-2Lm9ZpaA_j","item-spec":"item-spec-2ZJYncDm2v",itemSpec:"item-spec-2ZJYncDm2v","item-title":"item-title-2mgHnF9hpI",itemTitle:"item-title-2mgHnF9hpI","item-assignee":"item-assignee-3Wf8jJHaB6",itemAssignee:"item-assignee-3Wf8jJHaB6",avatar:"avatar-3q7E6J_WkF","empty-tip":"empty-tip-1DieKrv0Sa",emptyTip:"empty-tip-1DieKrv0Sa",tag:"tag-3EUuv6ujZB",orange:"orange-1G_0st6tGb",red:"red-20-inVZUjb",gray:"gray-3KNJ0oJsfG","to-right":"to-right-3Hpj6tOQQy",toRight:"to-right-3Hpj6tOQQy","caret-down":"caret-down-TY2H8nInS3",caretDown:"caret-down-TY2H8nInS3"}},Mmqr:function(e,t,a){e.exports=a.p+"19b8eda65c1915f957cdaaae4b186c95.svg"},MsSz:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=n(a("yoN1")),m=a("FaIw"),v=a("1qdz");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item;return f.default.createElement("div",{className:v.listItem,key:e.id},f.default.createElement("div",{className:v.dot}),f.default.createElement("div",{className:v.content},f.default.createElement(p.default,{className:"mr-10"}),f.default.createElement("span",{className:v.user},e.creator.name)," ",e.issueLog&&1===e.issueLog.old?"\u3010\u6e90\u3011":"",f.default.createElement("span",null,(0,u.t)("\u66f4\u65b0\u4e86{{name}}\u4e3a",{name:e.issueLog.target_name})),f.default.createElement("span",{className:"ml-10"},e.issueLog.content.val),f.default.createElement("span",{className:v.time},(0,m.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=E,E.propTypes={item:d.default.object}},MwrM:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var r=n(a("o0o1")),o=n(a("yXPU")),i=a("mVeg"),l=n(a("17x9")),c=n(a("cDcd")),s=a("FaIw"),u=a("dtw8"),d=n(a("zIEN")),f=a("w3Wo"),p=a("1qdz"),m={CHANGED:(0,i.t)("\u66f4\u6539\u4e86\u6240\u5c5e\u53f2\u8bd7"),DELETED:(0,i.t)("\u79fb\u9664\u4e86\u6240\u5c5e\u53f2\u8bd7 ")},v=function(e){var t=e.item,a=e.projectPath,n=e.projectId,i=function(){var e=(0,o.default)(r.default.mark((function e(a,o){var i,l,c;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.preventDefault(),e.next=4,(0,f.fetchIssueDetailByCode)(n,null===t||void 0===t||null===(i=t.issueLog)||void 0===i||null===(l=i.content)||void 0===l?void 0:l.epic_code);case 4:c=e.sent,c.data.code&&window.open(o),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}();return c.default.createElement("div",{className:p.listItem,key:t.id},c.default.createElement("div",{className:p.dot}),c.default.createElement("div",{className:p.content},c.default.createElement(d.default,{className:"mr-10 ".concat(p.icon)}),c.default.createElement("span",{className:p.user},t.creator.name),c.default.createElement("span",null,m[t.issueLog.content.type]),"DELETED"===t.issueLog.content.type?c.default.createElement("span",null):c.default.createElement(u.Link,{className:"ml-10 ".concat(p.moreDot),target:"_blank",onClick:function(e){i(e,"".concat(a,"/epics/issues/").concat(t.issueLog.content.epic_code,"/detail"))}},"#",t.issueLog.content.epic_code,"-",t.issueLog.content.epic_name),c.default.createElement("span",{className:p.time},(0,s.timeFormat)(t.createdAt,"YYYY-MM-DD HH:mm"))))};v.propTypes={item:l.default.object,projectPath:l.default.string,projectId:l.default.number};var h=v;t.default=h},MxQt:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("bWfx"),a("I78e");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("2K9c")),f=n(a("EyEP")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=E(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),m=n(a("17x9")),v=n(a("OajT")),h=n(a("W7H9")),g=a("dtw8");function E(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(E=function(e){return e?a:t})(e)}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var b=function(e){(0,l.default)(a,e);var t=y(a);function a(e){return(0,o.default)(this,a),t.call(this,e)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props,t=e.sectionExpanded,a=e.SectionToggletrigger,n=e.branchsInfo,r=e.headerTitle,o=e.projectPath;return p.default.createElement("div",{className:d.default.wrapper},p.default.createElement("div",{className:f.default.header},p.default.createElement(a,null),p.default.createElement("div",{className:f.default.text},(0,u.t)(r))),t&&p.default.createElement("div",{className:d.default.body},p.default.createElement("div",{className:d.default.prev},p.default.createElement("div",{className:d.default.list},n.map((function(e){return p.default.createElement("div",{key:null===e||void 0===e?void 0:e.id,className:d.default.listItem},p.default.createElement("div",{className:d.default.code,title:e.depotName},p.default.createElement(g.Link,{className:d.default.linkWrapper,target:"_blank",to:"".concat(o,"/d/").concat(e.depotName,"/git/tree")},p.default.createElement("span",{className:d.default.vcsIcon}),p.default.createElement("p",null,e.depotName))),p.default.createElement("div",{className:d.default.branch,title:e.branchName},p.default.createElement(g.Link,{className:d.default.linkWrapper,target:"_blank",to:"".concat(o,"/d/").concat(e.depotName,"/git/tree/").concat(encodeURIComponent(e.branchName))},p.default.createElement(h.default,{className:d.default.branchIcon}),p.default.createElement("p",null,e.branchName))),p.default.createElement("div",{className:d.default.commit,title:e.commitId},p.default.createElement(g.Link,{className:d.default.linkWrapper,target:"_blank",to:"".concat(o,"/d/").concat(e.depotName,"/git/commit/").concat(e.commitId)},e.commitId&&e.commitId.slice(0,7))))}))))))}}]),a}(p.Component);b.propTypes={branchsInfo:m.default.array,headerTitle:m.default.string,projectPath:m.default.string};var I=(0,v.default)(b);t.default=I},MzAb:function(e,t,a){e.exports={"custom-modal":"custom-modal-1ZA0xKTyZC",customModal:"custom-modal-1ZA0xKTyZC",loading:"loading-E4ikpQbF7V",title:"title-QTBlf0JbMm",tip:"tip-2MzTDNl1s8","items-wrapper":"items-wrapper-3fU3BbhL1h",itemsWrapper:"items-wrapper-3fU3BbhL1h",item:"item-kY812c0TnS","item-avatar":"item-avatar-2P4QPx0y_-",itemAvatar:"item-avatar-2P4QPx0y_-","item-detail":"item-detail-1KWwAhOzXv",itemDetail:"item-detail-1KWwAhOzXv",desc:"desc-2hsegRcLSh","btn-area":"btn-area-3AhErej-bk",btnArea:"btn-area-3AhErej-bk","custom-btn":"custom-btn-2bdWrSC5m8",customBtn:"custom-btn-2bdWrSC5m8",disabled:"disabled-2UtwDeE62X",warning:"warning-1IoD_hek23"}},NI22:function(e,t,a){"use strict";a.r(t),a.d(t,"isBlockType",(function(){return m}));var n=a("cDcd"),r=a.n(n),o=a("mVeg"),i=a("qniV");a.d(t,"createPageDraft",(function(){return i.createPageDraft})),a.d(t,"delPageDraft",(function(){return i.delPageDraft})),a.d(t,"EditorType",(function(){return i.EditorType})),a.d(t,"ChangedParams",(function(){return i.ChangedParams}));var l=a("K2gz"),c=a.n(l),s=a("AMAM");a.d(t,"setIssueDescriptionDraft",(function(){return s.setIssueDescriptionDraft})),a.d(t,"getIssueDescriptionDraft",(function(){return s.getIssueDescriptionDraft}));var u=a("82Y3"),d=a("L2LP"),f=a.n(d),p=r.a.forwardRef((function(e,t){var a=e.type,l=void 0===a?i.EditorType.BLOCK:a,s=e.className,d=e.currentProject,p=e.defaultValue,m=void 0===p?"":p,v=e.readOnly,h=e.hasBorder,g=void 0===h||h,E=e.richClientSaveUuid,y=void 0===E?"":E,b=e.initEditorData,I=e.isEditing,S=e.toolbarPortalId,T=e.autofocus,w=e.canChangeType,C=void 0!==w&&w,O=e.onEditorChange,N=e.container,P=e.onLoad,j=e.mode,D=e.isDisabled,k=e.onRichEditorChange,R=e.onFullScreenCallback,M=e.onEditorTypeChangeCallback,A=e.onContentChanged,L=Object(n.useRef)(null),x=Object(u.needLockEditorType)(),_=function(){var e;(null===(e=null===L||void 0===L?void 0:L.current)||void 0===e?void 0:e.refreshPage)&&L.current.refreshPage()},F=function(){var e;return!(null===(e=null===L||void 0===L?void 0:L.current)||void 0===e?void 0:e.onDetect)||L.current.onDetect()},W=function(e){var t;return void 0===e&&(e="markdown"),(null===(t=null===L||void 0===L?void 0:L.current)||void 0===t?void 0:t.getEditorValue)?L.current.getEditorValue(e):""},B=function(){var e;return(null===(e=null===L||void 0===L?void 0:L.current)||void 0===e?void 0:e.getEditorType)?L.current.getEditorType():i.EditorType.BLOCK},H=function(){var e;if(null===(e=null===L||void 0===L?void 0:L.current)||void 0===e?void 0:e.removeRichDraft)return L.current.removeRichDraft()},U=function(e){var t;if(null===(t=null===L||void 0===L?void 0:L.current)||void 0===t?void 0:t.setRichValue)return L.current.setRichValue(e)},Y=function(){var e;(null===(e=null===L||void 0===L?void 0:L.current)||void 0===e?void 0:e.emptyTransaction)&&L.current.emptyTransaction()},q=function(){var e;return!(null===(e=null===L||void 0===L?void 0:L.current)||void 0===e?void 0:e.isTransactionEmpty)||L.current.isTransactionEmpty()};Object(n.useImperativeHandle)(t,(function(){return{refresh:_,requestFinished:F,getRichContent:W,getEditorType:B,removeDraft:H,setEditorValue:U,emptyTransaction:Y,isTransactionEmpty:q}}));var G=Object(n.useMemo)((function(){return{time:Date.now(),ext1:"PM"}}),[]),z={pageInfo:b?{pageId:b.pageId,pageDraftId:b.pageDraftId,historyId:b.historyId,module:"collaboration",function:"description",scopeType:"project",scopeId:d.id}:void 0,currentProject:d,richClientSaveUuid:y,defaultValue:m},V={initTime:G,readOnly:v,hasBorder:g,placeholder:Object(o.t)("\u70b9\u6b64\u7f16\u8f91\u63cf\u8ff0\uff0c\u6d89\u53ca\u6570\u5b57\u8fd0\u7b97\u3001\u7279\u6b8a\u7b26\u53f7\u7b49\u63a8\u8350\u4f7f\u7528\u884c\u5185\u4ee3\u7801\u529f\u80fd"),isEditing:I,toolbarPortalId:S,autofocus:T,container:N,mode:j,className:s,isDisabled:!!D,lockEditorType:x,canChangeType:C&&!v&&!D,onRichEditorChange:k,onBlockEditorChange:O,onEditorChange:O,onLoaded:P,onFullScreenCallback:R,onEditorTypeChangeCallback:M,onContentChanged:A};return r.a.createElement("div",{className:c()(f.a.editorWrapper)},r.a.createElement(i.CoreEditor,{ref:L,type:x?i.EditorType.BLOCK:l,dataSource:z,config:V}))})),m=function(e){return e===i.EditorType.BLOCK};t.default=r.a.memo(p)},NRVB:function(e,t,a){e.exports={outer:"outer-22R5ltf8lz",modal:"modal-2LqnqOth5X",container:"container-3gz2q-g1Nv",cancel:"cancel-3PEeHOlONd",page:"page-36ep4_ZUYy",top:"top-1owbj-goD-","top-left":"top-left-9gWq0tbsEr",topLeft:"top-left-9gWq0tbsEr","top-icon":"top-icon-aeP2kbRpet",topIcon:"top-icon-aeP2kbRpet","top-type":"top-type-3Y8MSJW1ys",topType:"top-type-3Y8MSJW1ys","top-point":"top-point-2lcOujJC4P",topPoint:"top-point-2lcOujJC4P","top-code":"top-code-2ljD3xKbTa",topCode:"top-code-2ljD3xKbTa","top-copy":"top-copy-TuNfwK1PRr",topCopy:"top-copy-TuNfwK1PRr","top-right":"top-right-B7fZ_X4Dzv",topRight:"top-right-B7fZ_X4Dzv","top-link":"top-link-_u4Y7lwg5B",topLink:"top-link-_u4Y7lwg5B","top-divider":"top-divider-2bzHPxY53q",topDivider:"top-divider-2bzHPxY53q","top-approve":"top-approve-3B9dD61KSp",topApprove:"top-approve-3B9dD61KSp","top-avatars":"top-avatars-3SR3XCg47M",topAvatars:"top-avatars-3SR3XCg47M","top-avatars-item":"top-avatars-item-stvQVg5ssw",topAvatarsItem:"top-avatars-item-stvQVg5ssw","top-status":"top-status-11XV85LDU_",topStatus:"top-status-11XV85LDU_",title:"title-3WtkuG9k0z",operate:"operate-32J4NimwoJ",divider:"divider-2mI3uOOz42",attachment:"attachment-1M1ILbs7pP",issue:"issue-37UKFOjGQ8","issue-title":"issue-title-1asZCyEh6h",issueTitle:"issue-title-1asZCyEh6h",procedure:"procedure-1TNP6OlFH9","procedure-title":"procedure-title-3TGrYa7f_q",procedureTitle:"procedure-title-3TGrYa7f_q"}},NTS2:function(e,t,a){"use strict";a.r(t);var n=a("mVeg"),r=a("cDcd"),o=a.n(r),i=a("yTHi"),l=a("yZ+p"),c=a.n(l),s=a("K2gz"),u=a.n(s),d=a("xgZS"),f=a("wMO9"),p=a.n(f),m=a("vyFa"),v=a.n(m),h=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),g=["#C6C8CC","#5A606B","#5FD9C6","#7AD94E","#D98657","#FFCE40","#FF8C40","#FF5757","#FE6FD4","#AB6BFF","#4DBAFD","#3E70F8"],E=function(e){function t(t){var a=e.call(this,t)||this;return a.selectColor=function(e){a.setState({sColor:e})},a.detectKey=function(e){var t=a.props.onCreate,r=a.state,o=r.input,i=r.sColor;13===e.keyCode&&(""!==o?t({color:i,input:o}):Object(d.warning)(Object(n.t)("\u8bf7\u8f93\u5165\u6807\u7b7e\u6807\u9898")))},a.state={sColor:g[0],input:t.input},a}return h(t,e),t.prototype.render=function(){var e=this,t=this.props,a=t.goBack,r=t.onCreate,i=this.state,l=i.input,s=i.sColor;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:p.a.title},o.a.createElement("span",{className:p.a.icon,onClick:a}),o.a.createElement("span",{className:p.a.text},Object(n.t)("\u521b\u5efa\u6807\u7b7e"))),o.a.createElement("div",{className:p.a.tagName},o.a.createElement("div",{className:p.a.sText},Object(n.t)("\u6807\u7b7e\u540d\u79f0")),o.a.createElement("div",{className:p.a.input},o.a.createElement(c.a,{autoFocus:!0,size:"medium",placeholder:Object(n.t)("\u8bf7\u8f93\u5165\u6807\u7b7e\u540d\u79f0"),value:l,onChange:function(t){e.setState({input:t.target.value})}}))),o.a.createElement("div",{className:p.a.tagColor},o.a.createElement("div",{className:p.a.sText},Object(n.t)("\u6807\u7b7e\u989c\u8272")),o.a.createElement("div",{className:p.a.colors},g.map((function(t){return o.a.createElement("div",{className:p.a.colorWrapper,key:t,onClick:function(){e.selectColor(t)}},o.a.createElement("div",{className:u()(p.a.colorCake),style:{background:t}},s===t?o.a.createElement("div",{className:p.a.selected}):null))})))),o.a.createElement("div",{className:p.a.opts},o.a.createElement("div",{className:u()(v.a.button,v.a.primary,p.a.bs),onClick:function(){""!==l?r({color:s,input:l}):Object(d.warning)(Object(n.t)("\u8bf7\u8f93\u5165\u6807\u7b7e\u6807\u9898"))}},Object(n.t)("\u5b8c\u6210\u521b\u5efa"),o.a.createElement("span",{className:p.a.return}))))},t.prototype.componentDidMount=function(){document.addEventListener("keydown",this.detectKey)},t.prototype.componentWillUnmount=function(){document.removeEventListener("keydown",this.detectKey)},t}(o.a.Component),y=a("NIJN"),b=a.n(y),I=a("Y+p1"),S=a.n(I),T=a("MJIl"),w=a.n(T),C=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),O=function(e,t){return e.filter((function(e){return e.id===t.id})).length>0},N=function(e){function t(t){var a=e.call(this,t)||this;return a.tagsList=function(){var e=a.props,t=e.tags,n=e.disabled,r=a.state.show;return o.a.createElement("div",{className:p.a.tagList},t.map((function(e){var t=e.id,r=e.name,l=e.color;return o.a.createElement(i.a,{key:t,item:e,id:t,color:l,name:r,canClose:!n,onRemove:a.remove})})),n?o.a.createElement("div",null):o.a.createElement("div",{ref:function(e){return a.addRef=e},className:r?u()(p.a.add,p.a.active):p.a.add,onClick:a.toggle},o.a.createElement("div",{className:p.a.plus})))},a.detectKey=function(e){var t=a.state,n=t.searched,r=t.input;13!==e.keyCode||0!==n.length||""===r||a.setState({next:!0})},a.inputHandler=function(e){var t=a.props.candidates;if(""!==e.target.value){var n=t.filter((function(t){return t.name.includes(e.target.value)}));a.setState({input:e.target.value,searched:n}),document.addEventListener("keydown",a.detectKey)}else a.setState({input:""})},a.onKeyDown=function(e){var t=e.key,n=a.state,r=n.searched,o=n.focusIndex;"Enter"===t?0===r.length?a.toggle():a.select(r[o]):"ArrowUp"===t?a.onArrow("up"):"ArrowDown"===t&&a.onArrow("down")},a.onArrow=function(e){var t=a.state,n=t.searched,r=t.focusIndex;if(0!==n.length){var o="down"===e?r+1:r-1;o<n.length&&o>=0&&a.setState({focusIndex:o})}},a.remove=function(e){var t=e,n=a.props,r=n.tags;return(0,n.onRemove)(r.filter((function(e){return!S()(e,t)})))},a.select=function(e){var t=e,n=a.props,r=n.tags,o=n.onSelect;return r.filter((function(e){return S()(e,t)})).length>0?a.remove(t):o(b()(r,t))},a.create=function(e){var t=e,n=a.props,r=n.tags,o=n.onCreate;return a.setState({show:!1,input:"",next:!1}),r.filter((function(e){return S()(e,t)})).length>0?a.remove(t):o(t,r)},a.toggle=function(){var e=a.state.show;a.setState({show:!e},(function(){var t;e||(null===(t=a.inputRef)||void 0===t||t.focus(),document.addEventListener("click",a.close))}))},a.goToNext=function(){a.setState({next:!0})},a.close=function(e){var t=w()(e.composedPath(),a.containerRef),n=w()(e.composedPath(),a.addRef);t||n||a.setState({show:!1,input:"",next:!1},(function(){a.state.show||document.removeEventListener("click",a.close)}))},a.state={input:"",show:!1,searched:a.props.candidates,next:!1,focusIndex:0},a}return C(t,e),t.getDerivedStateFromProps=function(e,t){var a=e.candidates;return t.input?null:{searched:a}},t.prototype.render=function(){var e=this,t=this.props,a=t.tags,r=t.isDetail,i=t.isCreate,l=this.state,c=l.show,s=l.searched,d=l.input,f=l.next,m=o.a.createElement("div",{className:u()(p.a.main,r&&p.a.isDetail),ref:function(t){return e.containerRef=t}},o.a.createElement("div",{className:p.a.search},o.a.createElement("span",{className:p.a.icon}),o.a.createElement("span",null,o.a.createElement("input",{ref:function(t){return e.inputRef=t},className:p.a.input,type:"text",placeholder:Object(n.t)("\u641c\u7d22\u6807\u7b7e"),onInput:this.inputHandler,onKeyDown:this.onKeyDown}))),o.a.createElement("div",{className:p.a.menus,onScroll:function(e){e.stopPropagation()}},s.map((function(t,n){return o.a.createElement("div",{className:u()(p.a.item,n===e.state.focusIndex&&p.a.itemSelect),key:"candidate-".concat(t.id),onClick:function(a){a.stopPropagation(),e.select(t)},onMouseOver:function(){e.itemEnter(n)},onMouseLeave:function(){document.removeEventListener("keydown",e.detectKey)}},o.a.createElement("span",{className:p.a.color,style:{background:"".concat(t.color)}}),o.a.createElement("span",{className:p.a.text,title:t.name},t.name),o.a.createElement("span",{className:O(a,t)?p.a.check:p.a.return}))}))),o.a.createElement("div",{className:p.a.opts},o.a.createElement("div",{className:p.a.hasHover,onClick:this.goToNext},o.a.createElement("div",{className:p.a.add}),""!==d&&0===s.length?o.a.createElement("div",{className:p.a.text},o.a.createElement("span",null,Object(n.t)("\u521b\u5efa\u201c")),o.a.createElement("span",{className:p.a.textEli},d),o.a.createElement("span",null,"\u201d")):o.a.createElement("div",{className:p.a.text},Object(n.t)("\u521b\u5efa\u6807\u7b7e")),o.a.createElement("div",{className:p.a.return})))),v=o.a.createElement("div",{className:p.a.second,ref:function(t){return e.containerRef=t}},o.a.createElement(E,{input:this.state.input,goBack:function(){e.setState({next:!1,input:""})},onCreate:this.create}));return o.a.createElement("div",{className:p.a.tagPanel},this.tagsList(),c&&o.a.createElement("div",{className:u()(p.a.expandPanel,i&&p.a.isCreate)},f?v:m))},t.prototype.componentDidMount=function(){},t.prototype.componentWillUnmount=function(){document.removeEventListener("click",this.close),document.removeEventListener("keydown",this.detectKey)},t.prototype.itemEnter=function(e){this.setState({focusIndex:e}),document.addEventListener("keydown",this.detectKey)},t.defaultProps={port:"container"},t}(o.a.Component);t.default=N},NUcW:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a("mVeg"),o=n(a("cDcd")),i=n(a("17x9")),l=n(a("OhAd"));function c(e){var t=e.completed,a=e.total,n={width:0===a?0:"".concat(t/a*100,"%")};return o.default.createElement("div",{className:l.default.wrapper},o.default.createElement("div",{className:l.default.progress},o.default.createElement("div",{className:l.default.progressItem,style:n})),o.default.createElement("div",{className:l.default.text},"".concat(t,"/").concat(a)," ",(0,r.t)("\u5df2\u5b8c\u6210")))}c.propTypes={total:i.default.number.isRequired,completed:i.default.number.isRequired};var s=c;t.default=s},"Nbs+":function(e,t,a){e.exports={title:"title-2deKgKV7bg","folded-title":"folded-title-1Mjs-LTGQ_",foldedTitle:"folded-title-1Mjs-LTGQ_","issue-property":"issue-property-ZUv99Jfl8U",issueProperty:"issue-property-ZUv99Jfl8U","is-detail":"is-detail-1OMxt-L78W",isDetail:"is-detail-1OMxt-L78W","issue-property-label":"issue-property-label-1RqibHdRGt",issuePropertyLabel:"issue-property-label-1RqibHdRGt","label-detail":"label-detail-33eOSAZrxR",labelDetail:"label-detail-33eOSAZrxR","issue-property-man-hours":"issue-property-man-hours-3Cqi6VaOp7",issuePropertyManHours:"issue-property-man-hours-3Cqi6VaOp7","property-control":"property-control--9nbeFr3U5",propertyControl:"property-control--9nbeFr3U5","member-selector":"member-selector-2Y8J8qC7g0",memberSelector:"member-selector-2Y8J8qC7g0","watcher-selector":"watcher-selector-1qll1Nellj",watcherSelector:"watcher-selector-1qll1Nellj","label-selector":"label-selector-3IqfHvWuaK",labelSelector:"label-selector-3IqfHvWuaK","text-field":"text-field-3kxXtVYbCU",textField:"text-field-3kxXtVYbCU",highlight:"highlight-IkMphfwsIp","inline-flex":"inline-flex-1DtpKPoN6E",inlineFlex:"inline-flex-1DtpKPoN6E","date-select":"date-select-H9atnejuek",dateSelect:"date-select-H9atnejuek","date-select-detail-page":"date-select-detail-page-28GZZOVH6R",dateSelectDetailPage:"date-select-detail-page-28GZZOVH6R","help-icon":"help-icon-1dcB0uzLNu",helpIcon:"help-icon-1dcB0uzLNu","meeting-wrapper":"meeting-wrapper-2i_viN4eiw",meetingWrapper:"meeting-wrapper-2i_viN4eiw","meeting-info":"meeting-info-3DYX3yiwYC",meetingInfo:"meeting-info-3DYX3yiwYC","meeting-time":"meeting-time-12e0RejLo9",meetingTime:"meeting-time-12e0RejLo9",time:"time-39npnvNYNA","meeting-status":"meeting-status-3WCoFQ1zug",meetingStatus:"meeting-status-3WCoFQ1zug","status-tag":"status-tag-3lV6otdtha",statusTag:"status-tag-3lV6otdtha",waiting:"waiting-32TTInCV9J",processing:"processing-3Ap-JiTv4M",tip:"tip-2Cc8vfkehp","booking-bar":"booking-bar--2JNP8tVLE",bookingBar:"booking-bar--2JNP8tVLE","booking-btn":"booking-btn-19cMlNzoC0",bookingBtn:"booking-btn-19cMlNzoC0",icon:"icon-3AiX9Z7bjY",meeting:"meeting-VGDAnXK5Xc",booking:"booking-2w2U35U4wc",hover:"hover-2sc6wSsWeS","fast-meeting":"fast-meeting-1J1gLXFvw_",fastMeeting:"fast-meeting-1J1gLXFvw_",invite:"invite-jrwsSHa_yE","enter-meeting":"enter-meeting-3tQMCH7mKh",enterMeeting:"enter-meeting-3tQMCH7mKh",btn:"btn-3yZay9GmHM","date-time-class":"date-time-class-3B1LZWrN9A",dateTimeClass:"date-time-class-3B1LZWrN9A","workhours-modal-title":"workhours-modal-title-3WaX3opNUf",workhoursModalTitle:"workhours-modal-title-3WaX3opNUf","workhours-modal-icon":"workhours-modal-icon-2R4K4nJDx2",workhoursModalIcon:"workhours-modal-icon-2R4K4nJDx2","workhours-modal-footer":"workhours-modal-footer-32TJI4zWNh",workhoursModalFooter:"workhours-modal-footer-32TJI4zWNh"}},O0Gi:function(e,t,a){e.exports={body:"body-131ALrDzK7",title:"title-38ypTg8K8_",list:"list-3_kOpiibiY","feed-back":"feed-back-2Oi4ndZpmc",feedBack:"feed-back-2Oi4ndZpmc",word:"word-17VSKR8yPB",time:"time-2sg_Yw1srS",icon:"icon-3dZT5WC--U"}},OajT:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ToggleSectionWrapperProps=void 0;var o=n(a("pVnL")),i=n(a("lwsE")),l=n(a("W8MJ")),c=n(a("7W2i")),s=n(a("a1gu")),u=n(a("Nsbk")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=v(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),f=n(a("17x9")),p=n(a("5YzM")),m=n(a("K2gz"));function v(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(v=function(e){return e?a:t})(e)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var g={sectionExpanded:f.default.bool,SectionToggletrigger:f.default.func,toggleExpandControlled:f.default.func};t.ToggleSectionWrapperProps=g;var E=function(e){return function(t){(0,c.default)(n,t);var a=h(n);function n(){var e;(0,i.default)(this,n);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={sectionExpanded:!0,hovered:!1},e.SectionToggletrigger=function(){var t=e.state,a=t.sectionExpanded,n=t.hovered;return d.default.createElement("a",{className:(0,m.default)([p.default.trigger,!a&&p.default.triggerClosed,n||!a?p.default.hovered:""]),onClick:e.toggleSectionExpand})},e.toggleSectionExpand=function(){var t=e.state.sectionExpanded;e.setState({sectionExpanded:!t})},e.toggleExpandControlled=function(t,a){e.setState({sectionExpanded:t},(function(){a&&a()}))},e}return(0,l.default)(n,[{key:"render",value:function(){var t=this,a=this.state,n=a.sectionExpanded,r=a.hovered;return d.default.createElement("div",{onMouseOver:function(){r||t.setState({hovered:!0})},onMouseOut:function(e){var a=e.currentTarget,n=e.relatedTarget;a===n||a.contains(n)||t.setState({hovered:!1})}},d.default.createElement(e,(0,o.default)({sectionExpanded:n,SectionToggletrigger:this.SectionToggletrigger,toggleExpandControlled:this.toggleExpandControlled},this.props)))}}]),n}(d.Component)};t.default=E},OhAd:function(e,t,a){e.exports={wrapper:"wrapper-1D4G26rz0a",progress:"progress-HbS1noYeAH","progress-item":"progress-item-10dl6YGnuD",progressItem:"progress-item-10dl6YGnuD",text:"text-3o-gx-2_85"}},OyuZ:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=n(a("ExpI")),v=a("1qdz");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.itemType;return f.default.createElement("div",{className:v.listItem,key:t.id},f.default.createElement("div",{className:v.dot}),f.default.createElement("div",{className:v.content},f.default.createElement(m.default,{className:"mr-10 ".concat(v.icon)}),f.default.createElement("span",{className:v.user},t.creator.name),t.issueLog&&1===t.issueLog.old?"\u3010\u6e90\u3011":"",f.default.createElement("span",null,(0,u.t)("\u66f4\u65b0\u4e86{{type}}\u6807\u9898",{type:a})),f.default.createElement("span",{className:v.time},(0,p.timeFormat)(t.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=E,E.propTypes={item:d.default.object,itemType:d.default.string}},P0O0:function(e,t,a){"use strict";var n;a.r(t),a.d(t,"RelationRequirementPermissionAction",(function(){return n})),function(e){e.CREATE="storyRequirement:Create",e.UPDATE="relationRequirement:Update"}(n||(n={}))},"PbN/":function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("o0o1")),i=n(a("yXPU")),l=n(a("lwsE")),c=n(a("W8MJ")),s=n(a("7W2i")),u=n(a("a1gu")),d=n(a("Nsbk")),f=a("mVeg"),p=n(a("17x9")),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=I(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),v=a("FaIw"),h=a("dtw8"),g=n(a("Rvrz")),E=a("/HD1"),y=a("w3Wo"),b=a("1qdz");function I(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(I=function(e){return e?a:t})(e)}function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var T={ADD:(0,f.t)("\u5173\u8054\u4e86"),REMOVE:(0,f.t)("\u53d6\u6d88\u5173\u8054\u4e86")},w={DEFECT:"bug-tracking",REQUIREMENT:"requirements",MISSION:"assignments",EPIC:"epics",WORK_ITEM:"work-items"},C=function(e){(0,s.default)(a,e);var t=S(a);function a(){var e;(0,l.default)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(){var t=(0,i.default)(o.default.mark((function t(a,n){var r,i,l,c,s,u,d,f,p,m,v,h,g;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.item,t.prev=1,a.preventDefault(),"WORK_ITEM"!==(null===r||void 0===r||null===(i=r.issueLog)||void 0===i||null===(l=i.content)||void 0===l?void 0:l.relatedIssueType)){t.next=9;break}return t.next=6,(0,E.fetchWorkItemDetail)(null===r||void 0===r||null===(c=r.issueLog)||void 0===c||null===(s=c.content)||void 0===s?void 0:s.relatedIssueProjectName,null===r||void 0===r||null===(u=r.issueLog)||void 0===u||null===(d=u.content)||void 0===d?void 0:d.relatedIssueCode);case 6:t.t0=t.sent,t.next=12;break;case 9:return t.next=11,(0,y.fetchIssueDetailByCode)(null===r||void 0===r||null===(f=r.issueLog)||void 0===f||null===(p=f.content)||void 0===p?void 0:p.relatedIssueProjectId,null===r||void 0===r||null===(m=r.issueLog)||void 0===m||null===(v=m.content)||void 0===v?void 0:v.relatedIssueCode);case 11:t.t0=t.sent;case 12:null!==(g=t.t0)&&void 0!==g&&null!==(h=g.data)&&void 0!==h&&h.code&&window.open(n),t.next=18;break;case 16:t.prev=16,t.t1=t.catch(1);case 18:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e,a){return t.apply(this,arguments)}}(),e}return(0,c.default)(a,[{key:"render",value:function(){var e=this,t=this.props.item,a="";return a="WORK_ITEM"===t.issueLog.content.relatedIssueType?"/p/".concat(t.issueLog.content.relatedIssueProjectName,"/program/plan/").concat(w[t.issueLog.content.relatedIssueType],"/").concat(t.issueLog.content.relatedIssueCode,"/detail"):"/p/".concat(t.issueLog.content.relatedIssueProjectName,"/").concat(w[t.issueLog.content.relatedIssueType],"/issues/").concat(t.issueLog.content.relatedIssueCode,"/detail"),m.default.createElement("div",{className:b.listItem,key:t.id},m.default.createElement("div",{className:b.dot}),m.default.createElement("div",{className:b.content},m.default.createElement(g.default,{className:"mr-10 ".concat(b.moreDot)}),m.default.createElement("span",{className:b.user},t.creator.name),t.issueLog&&1===t.issueLog.old?"\u3010\u6e90\u3011":"",m.default.createElement("span",null,T[t.issueLog.action],t.issueLog.content.relatedIssueTypeName),m.default.createElement(h.Link,{className:"ml-10 ".concat(b.moreDot),target:"_blank",onClick:function(t){e.handleClick(t,a)}},"#",t.issueLog.content.relatedIssueCode,"-",t.issueLog.content.relatedIssueName),m.default.createElement("span",{className:b.time},(0,v.timeFormat)(t.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(m.Component);t.default=C,C.propTypes={item:p.default.object,projectPath:p.default.string}},Phlg:function(e,t,a){e.exports={logListItem:"logListItem-1zlEFD57Yf",contentItem:"contentItem-1Ojpub4Xh3",dot:"dot-2URE0px8O_","avatar-dot":"avatar-dot-C1wMuo5par",avatarDot:"avatar-dot-C1wMuo5par"}},PnyR:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjUgKDY3NDY5KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5kZWZhdWx0LWF2YXRhcjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSLnvLrpmbcv6K+m5oOFIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0i57y66Zm36K+m5oOF5bGe5oCn54q25oCBIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTkzLjAwMDAwMCwgLTE1MS4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9ImRldGFpbHMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk4LjAwMDAwMCwgMTUxLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPGcgaWQ9ImFzc2lnbmVlIj4KICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iZGVmYXVsdC1hdmF0YXIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk1LjAwMDAwMCwgMC4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGNpcmNsZSBpZD0iT3ZhbC00IiBmaWxsPSIjRTFFM0U2IiBjeD0iMTIiIGN5PSIxMiIgcj0iMTIiPjwvY2lyY2xlPgogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOCwxMCBDOCw3Ljc5MSA5Ljg0NCw2IDEyLDYgQzE0LjE1Niw2IDE2LDcuNzkxIDE2LDEwIEwxNiwxMSBDMTYsMTMuMjA5IDE0LjE1NiwxNSAxMiwxNSBDOS44NDQsMTUgOCwxMy4yMDkgOCwxMSBMOCwxMCBaIiBpZD0iUGF0aCIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIsMjIgQzkuNzE5NDE4ODQsMjIgNy42MjcyNDU3NCwyMS4xMjQgNiwxOS42NzQgQzYuNzg2NDM5NjIsMTguMDkxIDguMzI4Mzg2MTksMTcgMTAuMTI1MjkyOSwxNyBMMTMuODc0NzA3MSwxNyBDMTUuNjcxNjEzOCwxNyAxNy4yMTM1NjA0LDE4LjA5MSAxOCwxOS42NzQgQzE2LjM3Mjc1NDMsMjEuMTI0IDE0LjI4MDU4MTIsMjIgMTIsMjIgWiIgaWQ9IlBhdGgiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},"Q/6I":function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=n(a("74sH")),v=a("1qdz");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item;return f.default.createElement("div",{className:v.listItem,key:e.id},f.default.createElement("div",{className:v.dot}),f.default.createElement("div",{className:v.content},f.default.createElement(m.default,{className:"mr-10 ".concat(v.icon)}),f.default.createElement("span",{className:v.user},e.creator.name),e.issueLog&&1===e.issueLog.old?"\u3010\u6e90\u3011":"",f.default.createElement("span",{className:v.msg,title:e.issueLog.content.val},"SCHEDULE"===e.issueLog.action?(0,u.t)("\u6392\u671f\u4e86{{name}}{{value}}",{name:e.issueLog.content.issueFieldName||e.issueLog.targetName,value:e.issueLog.content.val||e.issueLog.content.name}):(0,u.t)("\u66f4\u65b0\u4e86{{name}}\u4e3a {{value}}",{name:e.issueLog.content.issueFieldName||e.issueLog.targetName,value:e.issueLog.content.val||e.issueLog.content.name||"\u65e0"})),f.default.createElement("span",{className:v.time},(0,p.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=E,E.propTypes={item:d.default.object}},Q5T0:function(e,t,a){e.exports=a.p+"99960f25feb65dcd7aed877bcfb8c2a9.svg"},Q63V:function(e,t,a){e.exports=a.p+"7d436d2613c040ae8bcf68aad6bd3c14.svg"},QDR0:function(e,t,a){"use strict";a("I5cv"),a("RW0V"),a("ioFf"),a("0l/t"),a("mYba"),a("jm62"),a("EK0E"),a("XfO3"),a("yt8O"),a("rGqo");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("CX2u"),a("Btvt"),a("VRzm");var o=n(a("lSNA")),i=n(a("lwsE")),l=n(a("W8MJ")),c=n(a("PJYZ")),s=n(a("7W2i")),u=n(a("a1gu")),d=n(a("Nsbk")),f=a("mVeg"),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=D(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),m=n(a("17x9")),v=n(a("K2gz")),h=n(a("9+e/")),g=n(a("mtLS")),E=a("7FZc"),y=n(a("Qkhu")),b=a("nuIr"),I=a("DKcV"),S=a("nuIr"),T=n(a("P5Jw")),w=a("xgZS"),C=n(a("T8xO")),O=a("JTQj"),N=a("uelK"),P=a("dBa0"),j=a("9+7+");function D(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(D=function(e){return e?a:t})(e)}function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function M(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var A=function(e){(0,s.default)(a,e);var t=M(a);function a(e){var n;return(0,i.default)(this,a),(n=t.call(this,e)).fullScreenRef=p.default.createRef(),n.openSensitiveModal=function(e){n.setState({sensitiveShow:!0,sensitiveModalTitle:e})},n.openConfirmModal=function(){n.setState({showModal:!0}),n.props.fetchCustomTip&&(n.setState({isLoading:!0}),n.props.fetchCustomTip().then((function(e){n.setState({customDelInfo:{associateDatas:window.location.href.indexOf("requiremanage")<0?e.associateDatas:null,message:e.msg,canDelete:e.canDelete}})})).finally((function(){n.setState({isLoading:!1})})))},n.state={expanded:!1,showModal:!1,sensitiveShow:!1,sensitiveModalTitle:"",isLoading:!1,customDelInfo:{associateDatas:[],message:"",canDelete:!0}},n.toggleExpand=n.toggleExpand.bind((0,c.default)(n)),n.openPanel=n.openPanel.bind((0,c.default)(n)),n.closePanel=n.closePanel.bind((0,c.default)(n)),n.updateRequirement=n.updateRequirement.bind((0,c.default)(n)),n.onCopy=n.onCopy.bind((0,c.default)(n)),n}return(0,l.default)(a,[{key:"componentDidMount",value:function(){this.getSlotInfo()}},{key:"getSlotInfo",value:function(){var e=this;(0,N.getSlotConfiguration)({slot:P.SLOTS.COLLABORATION_DETAIL_DROPDOWN_MENU_ONE,type:"CURRENT"}).then((function(t){var a=t.data;e.setState({slotConfiguration:a||{}})}))}},{key:"componentDidUpdate",value:function(e){this.props.controlHideMore&&e.controlHideMore!==this.props.controlHideMore&&this.closePanel()}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.expanded,r=a.showModal,o=a.slotConfiguration,i=a.customDelInfo,l=a.isLoading,c=this.props,s=c.deleteFunction,u=c.isPermissible,d=c.onChangeEpic,m=c.hasEpic,w=c.handleRemoveEpic,N=c.hasParent,D=c.currentProjectCooperateSettings,k=c.onIsFullWidthChange,R=c.isFullWidth,M=c.isShowFullWidthOption,A=c.isSensitiveAdmin,L=c.isSensitive,x=c.sensitiveCtrlFunction,_=c.premiumVersion,F=c.viewDescriptionVersion,W=c.copyLink,B=c.copyTitle,H=c.type,U=c.customTip,Y=c.issueTypeDetail,q=c.showSearchParent,G=c.slotCallback,z=c.copyCommit,V=c.copyFunction,Z=c.copyIssues,K=u([{function:I.ProjectPermissionFunction.PROJECT_ISSUE,action:I.ProjectPermissionAction.UPDATE}]),J=u([{function:I.ProjectPermissionFunction.PROJECT_ISSUE,action:I.ProjectPermissionAction.DELETE}]),Q=D&&D.EPIC===S.MODULE_SWITCH.OPENED,X=i.message||U;return p.default.createElement("div",{className:"".concat(g.default.root," ").concat(n?g.default.expandedStyle:"")},p.default.createElement(E.TooltipTrigger,{title:(0,f.t)("\u66f4\u591a")},p.default.createElement("div",{className:g.default.trigger,onClick:this.toggleExpand})),p.default.createElement(y.default,{show:r,text:(0,f.t)("\u5220\u9664\u4e8b\u9879"),type:H,issueTypeDetail:Y,hasType:!X,customTip:X,onConfirm:s,onClose:function(){t.setState({showModal:!1})},isLoading:l,allowDelete:i.canDelete,associateDatas:i.associateDatas}),n&&p.default.createElement("ul",{className:(0,v.default)([g.default.dropdown,h.default.dropdownWider])},Z&&p.default.createElement("li",{className:h.default.item,onClick:Z},(0,f.t)("\u590d\u5236\u4e8b\u9879")),p.default.createElement(T.default,{text:W},p.default.createElement("li",{className:h.default.item,onClick:this.onCopy},(0,f.t)("\u590d\u5236\u94fe\u63a5"))),p.default.createElement("li",{className:g.default.divideLine}),p.default.createElement(T.default,{text:"".concat(B,"\r\n").concat(W)},p.default.createElement("li",{className:h.default.item,onClick:this.onCopy},(0,f.t)("\u590d\u5236\u6807\u9898\u548c\u94fe\u63a5"))),j.KA_TASK_COPY_SWITCH&&"MISSION"===H&&p.default.createElement("li",{onClick:V,className:h.default.item},(0,f.t)("\u590d\u5236\u4efb\u52a1")),j.KA_ISSUE_COPY_COMMITID_SWITCH&&z&&p.default.createElement(T.default,{text:z},p.default.createElement("li",{onClick:this.onCopy,className:h.default.item},(0,f.t)("\u590d\u5236 commit \u4fe1\u606f"))),!N&&Q&&K&&p.default.createElement(p.default.Fragment,null,p.default.createElement("li",{className:g.default.divideLine}),p.default.createElement("li",{onClick:d,className:h.default.item},(0,f.t)("\u66f4\u6539\u53f2\u8bd7"))),Q&&m&&K&&p.default.createElement("li",{onClick:w,className:h.default.item},(0,f.t)("\u53d6\u6d88\u5173\u8054\u53f2\u8bd7")),"WORK_ITEM"===H&&K&&p.default.createElement(p.default.Fragment,null,p.default.createElement("li",{className:g.default.divideLine}),p.default.createElement("li",{className:h.default.item,onClick:q},(0,f.t)("\u66f4\u6539\u7236\u5de5\u4f5c\u9879"))),p.default.createElement("li",{className:g.default.divideLine}),p.default.createElement("li",{className:h.default.item,onClick:F},(0,f.t)("\u5386\u53f2\u7248\u672c")),M&&p.default.createElement(p.default.Fragment,null,p.default.createElement("li",{className:(0,v.default)(g.default.divideLine,h.default.minWidthHide)}),p.default.createElement("li",{className:(0,v.default)(h.default.item,h.default.minWidthHide),onClick:function(e){e.stopPropagation()},ref:this.fullScreenRef},(0,f.t)("\u5168\u5bbd\u663e\u793a"),p.default.createElement(E.TooltipTrigger,{title:(0,f.t)("\u63cf\u8ff0\u533a\u57df\u4e0d\u9650\u5236\u6700\u5927\u5bbd\u5ea6\u663e\u793a")},p.default.createElement("span",{className:(0,v.default)(h.default.helpIcon,g.default.fullScreenHelpIcon)})),p.default.createElement(C.default,{checked:R,onChange:function(e){k&&k(e),t.closePanel()}}))),_&&A&&p.default.createElement("li",{className:g.default.divideLine}),_&&A&&L&&p.default.createElement("li",{className:h.default.item,onClick:x},(0,f.t)("\u53d6\u6d88\u6807\u8bb0\u654f\u611f\u5185\u5bb9")),_&&A&&!L&&p.default.createElement("li",{className:(0,v.default)(h.default.item,g.default.addSensitive),onClick:x},(0,f.t)("\u6807\u8bb0\u4e3a\u654f\u611f\u5185\u5bb9"),p.default.createElement(E.TooltipTrigger,{placement:"top",title:(0,f.t)("\u67e5\u770b\u5e2e\u52a9\u6587\u6863")},p.default.createElement("div",{onClick:function(e){e.stopPropagation(),window.open((0,O.getHelp)("/docs/pro/access-audit.html"),"_blank")},className:h.default.helpIcon}))),(null===o||void 0===o||null===(e=o.slot)||void 0===e?void 0:e.identity)&&p.default.createElement(p.default.Fragment,null,p.default.createElement("li",{className:g.default.divideLine}),p.default.createElement("li",{className:h.default.item,onClick:function(){G(P.SLOTS.COLLABORATION_DETAIL_DROPDOWN_MENU_ONE)}},null===o||void 0===o?void 0:o.triggerText)),J&&p.default.createElement("li",{className:g.default.divideLine}),!b.KA_DEFECT_EDIT_ENTRY_DISABLE&&J&&p.default.createElement("li",{className:g.default.deleteStyle,onClick:this.openConfirmModal},(0,f.t)("\u5220\u9664"))))}},{key:"toggleExpand",value:function(e){var t=this.state.expanded,a=this.props.onClickTrigger;e.stopPropagation(),a&&a(),t?this.closePanel():this.openPanel()}},{key:"openPanel",value:function(){this.setState({expanded:!0}),document.addEventListener("click",this.closePanel)}},{key:"closePanel",value:function(e){e&&e.target&&this.fullScreenRef&&this.fullScreenRef.current&&(this.fullScreenRef.current.isSameNode(e.target)||e.target.parentNode.isSameNode(this.fullScreenRef.current))||(this.setState({expanded:!1}),document.removeEventListener("click",this.closePanel))}},{key:"updateRequirement",value:function(){var e=this.props.cancelRelatedFunction;window.confirm((0,f.t)("\u786e\u8ba4\u5347\u7ea7\u6210\u7236\u9700\u6c42\u4e48\uff1f"))&&e()}},{key:"onCopy",value:function(e){e.stopPropagation(),(0,w.success)((0,f.t)("\u5df2\u590d\u5236"))}}]),a}(p.Component);A.propTypes=R(R({copyFunction:m.default.func,hasParent:m.default.bool,cancelRelatedFunction:m.default.func,deleteFunction:m.default.func,onChangeEpic:m.default.func,hasEpic:m.default.bool,handleRemoveEpic:m.default.func},I.WithProjectPermissionProps),{},{currentProject:m.default.object,currentProjectCooperateSettings:m.default.object,onIsFullWidthChange:m.default.func,isFullWidth:m.default.bool,isShowFullWidthOption:m.default.bool,isSensitiveAdmin:m.default.bool,isSensitive:m.default.bool,sensitiveCtrlFunction:m.default.func,premiumVersion:m.default.bool,viewDescriptionVersion:m.default.func,copyLink:m.default.string,copyTitle:m.default.string,isPermissible:m.default.func,type:m.default.string,customTip:m.default.string,issueTypeDetail:m.default.object,showSearchParent:m.default.func,onClickTrigger:m.default.func,controlHideMore:m.default.number,slotCallback:m.default.func,copyCommit:m.default.string,copyIssues:m.default.func,fetchCustomTip:m.default.func});var L=A;t.default=L},QGiz:function(e,t,a){e.exports=a.p+"7cb3c25466c23eac9d74254b71d1194b.svg"},QLRT:function(e,t,a){e.exports=a.p+"2f03f262fd03f29b1b19eb70c06582fe.svg"},QPj7:function(e,t,a){"use strict";a("RW0V"),a("ioFf"),a("0l/t"),a("mYba"),a("jm62");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("lSNA")),o=n(a("RIqP"));function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}a("dRSK"),a("bWfx");var c=function(e,t){var a=(0,o.default)(e),n=[];return a.forEach((function(t,a){if(t.isModao||t.isCodesign){var r;if(0===a)r=function(e,t){var a,n=t.find((function(t,n){return!t.isModao&&!t.isCodesign&&n>e&&(a=n,!0)}));return n?n.createdAt-(a-e):null}(a,e);else{var o=e[a-1];r=o.createdAt?o.createdAt+1:null}n.push(r),t.createdAt=r}})),t.map((function(e,t){return l(l({},e),{},{createdAt:n[t]})}))};t.default=c},Qkhu:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=b(a("cDcd")),f=n(a("K2gz")),p=b(a("17x9")),m=n(a("sftu")),v=n(a("MzAb")),h=n(a("zmh9")),g=n(a("wVLe")),E=n(a("Ewd1"));function y(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(y=function(e){return e?a:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=y(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var S={REQUIREMENT:(0,u.t)("\u9700\u6c42"),EPIC:(0,u.t)("\u53f2\u8bd7"),MISSION:(0,u.t)("\u4efb\u52a1"),DEFECT:(0,u.t)("\u7f3a\u9677"),SUB_TASK:(0,u.t)("\u5b50\u5de5\u4f5c\u9879"),WORK_ITEM:(0,u.t)("\u5de5\u4f5c\u9879"),ATTACHMENT:(0,u.t)("\u9644\u4ef6"),COMMENT:(0,u.t)("\u8bc4\u8bba")},T=function(e){(0,l.default)(a,e);var t=I(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props,t=e.show,a=e.onClose,n=e.onConfirm,r=e.text,o=e.type,i=e.hasType,l=e.customTip,c=e.issueTypeDetail,s=e.className,p=e.allowDelete,y=e.isLoading,b=e.associateDatas;return d.default.createElement(m.default,{closeButton:!0,outsideClickCloseable:!1,show:t,onHide:a,className:(0,f.default)(v.default.customModal,s)},d.default.createElement("div",{className:v.default.title},r),y?d.default.createElement("div",{className:v.default.loading},d.default.createElement(g.default,{show:!0})):d.default.createElement("div",{className:v.default.tip},b&&b.length?d.default.createElement(E.default,{associateDatas:b}):null,d.default.createElement("div",null,i?(0,u.t)("\u5220\u9664{{type}}\u5c06\u65e0\u6cd5\u6062\u590d\uff0c\u786e\u5b9a\u5220\u9664\u5417\uff1f",{type:c?c.name:S[o]}):l)),d.default.createElement("div",{className:v.default.btnArea},d.default.createElement(h.default,{className:v.default.customBtn,onClick:function(){p?n():a()},type:"danger","data-container":!0,"data-title":p?"\u5220\u9664\u4e8b\u9879-\u786e\u5b9a":"\u6211\u77e5\u9053\u4e86"},p?(0,u.t)("\u786e\u5b9a"):(0,u.t)("\u6211\u77e5\u9053\u4e86")),d.default.createElement(h.default,{empty:!0,onClick:a},(0,u.t)("\u53d6\u6d88"))))}}]),a}(d.Component);T.propTypes={type:p.default.string,customText:p.default.string,show:p.default.bool,onConfirm:p.default.func,onClose:p.default.func,hasType:p.default.bool,text:p.default.string,customTip:p.default.string,issueTypeDetail:p.default.object,className:p.default.string,associateDatas:p.any,allowDelete:p.default.bool,isLoading:p.default.bool},T.defaultProps={hasType:!0,customTip:"",allowDelete:!0};var w=T;t.default=w},QtVt:function(e,t,a){e.exports={list:"list-3FXUeijFtX"}},"Rya+":function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=n(a("17x9")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=v(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),f=a("FaIw"),p=n(a("zIEN")),m=a("1qdz");function v(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(v=function(e){return e?a:t})(e)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,l.default)(a,e);var t=h(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item,t=e.issueLog.content,a=t.name,n=t.sourceDisplayName;return d.default.createElement("div",{className:m.listItem,key:e.id},d.default.createElement("div",{className:m.dot}),d.default.createElement("div",{className:m.content2},d.default.createElement(p.default,{className:"mr-10 ".concat(m.moreDot)}),d.default.createElement("span",{className:m.user},e.creator.name),d.default.createElement("span",null,e.issueLog&&1===e.issueLog.old?"\u3010\u6e90\u3011":"","\u3010".concat(a,"\u3011 \u7531 \u3010").concat(n,"\u3011 \u7814\u53d1\u7a7a\u95f4\u6d41\u8f6c\u800c\u6765")),d.default.createElement("span",{className:m.time},(0,f.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(d.Component);t.default=g,g.propTypes={item:u.default.object}},S02u:function(e,t,a){e.exports={wrapper:"wrapper-K92AuIrQoO",div:"div-1n2HucapxD",line:"line-30ZKuggHdV",textarea:"textarea-28HsvXRdIv"}},S0Yh:function(e,t,a){"use strict";a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.circle=void 0,a("I78e");var o=n(a("J4zp")),i=a("mVeg"),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),c=n(a("17x9")),s=n(a("G6Sb")),u=n(a("K2gz"));function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}var f=function(e){return l.default.createElement("svg",{viewBox:"0 0 40 40",className:s.default.circularChart},l.default.createElement("path",{className:s.default.circleRim,strokeDasharray:"100, 100",d:"M19 3.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),0!==e&&l.default.createElement("path",{className:s.default.circle,strokeDasharray:"".concat(e,", 100"),d:"M19 3.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}))};function p(e){var t=e.progress,a=e.onConfirm,n=e.disabled,r=(0,l.useState)(!1),c=(0,o.default)(r,2),d=c[0],p=c[1],m=(0,l.useState)(t),v=(0,o.default)(m,2),h=v[0],g=v[1];return l.default.createElement("div",{className:n?(0,u.default)(s.default.box,s.default.disabled):s.default.box},l.default.createElement("div",{className:d?(0,u.default)(s.default.wrapper,s.default.isEditing):s.default.wrapper,onClick:function(){p(!n)}},l.default.createElement("div",{className:s.default.circleWrapper},f(t)),d?l.default.createElement("div",{className:s.default.inputWrapper},l.default.createElement("input",{value:h,placeholder:(0,i.t)("\u8bf7\u8f93\u5165\u8fdb\u5ea6"),onChange:function(e){var t=e.target.value;"0"===t.charAt(0)&&t.length>1&&(t=Math.floor(t.slice(1))),g(t<0?0:t>100?100:t)},className:s.default.input,autoFocus:!0,type:"number",min:0,max:100,step:1,onBlur:function(){p(!1);var e=Math.floor(h);isNaN(e)?(g(0),a(0)):(g(e),a(e))}}),l.default.createElement("span",{className:s.default.percent},"%")):l.default.createElement("span",{className:s.default.number},t,"%")))}t.circle=f,p.propTypes={progress:c.default.number,onConfirm:c.default.func,disabled:c.default.bool};var m=p;t.default=m},SLo4:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("ioFf"),a("HEwt"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("bWfx"),a("f3/d"),a("pIFo");var o=n(a("RIqP")),i=n(a("lwsE")),l=n(a("W8MJ")),c=n(a("PJYZ")),s=n(a("7W2i")),u=n(a("a1gu")),d=n(a("Nsbk")),f=a("mVeg"),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),m=n(a("17x9")),v=n(a("D7ic")),h=n(a("KDaH")),g=n(a("K2gz")),E=a("xgZS"),y=n(a("f0Wu"));function b(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(b=function(e){return e?a:t})(e)}function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var S=function(e){(0,s.default)(a,e);var t=I(a);function a(e){var n;return(0,i.default)(this,a),(n=t.call(this,e)).handleAttachmentLimit=function(){var e=n.props,t=e.attachmentLimit,a=e.maxAttachmentNum;t&&(0,E.warning)((0,f.t)("\u6700\u591a\u53ea\u53ef\u4e0a\u4f20".concat(a,"\u4e2a\u9644\u4ef6")))},n.onFileDrop=n.onFileDrop.bind((0,c.default)(n)),n.timestamp=(new Date).getTime(),n}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props,t=e.classNames,a=e.labelText,n=e.disabled,r=e.children,o=e.attachmentLimit;return p.default.createElement("label",{onClick:this.handleAttachmentLimit,className:(0,g.default)(v.default.uploadFileWrapper,t,n?v.default.disabled:""),htmlFor:"upload".concat(this.timestamp)},r||p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{className:v.default.uploadFileIcon},p.default.createElement(h.default,null)),p.default.createElement("span",{className:v.default.txt},a)),!o&&p.default.createElement("input",{type:"file",id:"upload".concat(this.timestamp),className:v.default.uploadFileInput,multiple:!0,name:"files[]",onChange:this.onFileDrop,disabled:n}))}},{key:"onFileDrop",value:function(e){var t=this,a=this.props,n=a.maxAttachmentNum,r=a.currentAttachmentNum,i=a.onHandleAttachments,l=e.target.files||e.dataTransfer.files,c=(0,o.default)(Array.from(l));if(0!==c.length)if(r>=n)(0,E.warning)((0,f.t)("\u6700\u591a\u53ea\u53ef\u4e0a\u4f20{{num}}\u4e2a\u9644\u4ef6\uff01",{num:n}));else if(c.length>n-r)(0,E.warning)((0,f.t)("\u6700\u591a\u53ea\u53ef\u4e0a\u4f20{{num}}\u4e2a\u9644\u4ef6\uff01",{num:n}));else{var s=(new Date).getTime(),u=[];u.splice.apply(u,[u.length,0].concat((0,o.default)(c.map((function(e,a){return{size:e.size,name:t.getFilename(e.name),type:e.type,timestamp:s+10*a,file:new File([e],t.getFilename(e.name),{type:e.type}),fileId:-(s+10*a)}}))))),i(u),e.target.value=""}}},{key:"getFilename",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=/[.]/.exec(e)?/[^.]+$/.exec(e)[0]:void 0,n=e.replace(/\.\w+$/,""),r=t?(0,y.default)().format("YYYYMMDDHHmmss"):(new Date).getTime();return"".concat(n,"-").concat(r,".").concat(a)}}]),a}(p.Component);S.propTypes={classNames:m.default.string,onHandleAttachments:m.default.func,labelText:m.default.string,maxAttachmentNum:m.default.number,currentAttachmentNum:m.default.number,disabled:m.default.bool,children:m.default.element,attachmentLimit:m.default.bool},S.defaultProps={labelText:(0,f.t)("\u4e0a\u4f20\u9644\u4ef6"),maxAttachmentNum:20,currentAttachmentNum:0};var T=S;t.default=T},SPzU:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=n(a("17x9")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),f=a("FaIw"),p=n(a("74sH")),m=a("1qdz"),v=a("7FZc");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,l.default)(a,e);var t=g(a);function a(){var e;(0,o.default)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).getContent=function(){var t=e.props.item.issueLog;if("success"===t.content.result){var a='\u7cfb\u7edf\u6267\u884c\u5173\u7cfb\u578b\u9650\u5236\u6210\u529f\uff0c\u4e8b\u9879\u5173\u7cfb\u53d8\u4e3a"'.concat(t.content.relation,'",\u76ee\u6807\u72b6\u6001\u53d8\u4e3a"').concat(t.content.targetStatusName,'"');return d.default.createElement(v.TooltipTrigger,{title:a},d.default.createElement("span",null,a))}if("failed"===t.content.result)return"\u7cfb\u7edf\u6267\u884c\u5173\u7cfb\u578b\u9650\u5236\u5931\u8d25\uff0c\u6761\u4ef6\u4e0d\u6ee1\u8db3"},e}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item;return d.default.createElement("div",{className:m.listItem,key:e.id},d.default.createElement("div",{className:m.dot}),d.default.createElement("div",{className:m.content},d.default.createElement(p.default,{className:"mr-10 ".concat(m.icon)}),d.default.createElement("span",{className:m.msg,title:e.issueLog.content.val},this.getContent()),d.default.createElement("span",{className:m.time},(0,f.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(d.Component);t.default=E,E.propTypes={item:u.default.object}},SUhN:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=n(a("W7UB")),m=n(a("K2gz")),v=n(a("FzvD")),h=n(a("CL2D")),g=n(a("WxKA")),E=a("xgZS"),y=n(a("Gtz0"));function b(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(b=function(e){return e?a:t})(e)}function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var S=function(e){(0,l.default)(a,e);var t=I(a);function a(){var e;return(0,o.default)(this,a),(e=t.call(this)).open=function(){e.props.attachmentLimit?(0,E.warning)((0,u.t)("\u6700\u591a\u53ea\u53ef\u4e0a\u4f2020\u4e2a\u9644\u4ef6")):(e.setState({expanded:!0}),document.addEventListener("click",e.close))},e.close=function(){e.setState({expanded:!1}),document.removeEventListener("click",e.close)},e.closeModaoModal=function(){e.props.onHide()},e.handleCoDesignVisible=function(t){e.setState({coDesignVisible:t})},e.state={expanded:!1,isLoading:!1,coDesignVisible:!1},e}return(0,i.default)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.expanded,n=t.coDesignVisible,r=this.props,o=r.isShowPicker,i=r.noThirdLink,l=r.onHandleAttachments,c=r.moduleConfig;return f.default.createElement("div",{className:p.default.outResource},c.codesign&&f.default.createElement("div",{className:p.default.coDesignLink},f.default.createElement("a",{className:(0,m.default)(p.default.pickerOptionItem,p.default.pickerOptionItemCodesign),onClick:function(){return e.handleCoDesignVisible(!0)}},(0,u.t)("\u5173\u8054 CoDesign"))),f.default.createElement("div",{className:p.default.picker},!i&&(c.modao||c.codesign)&&f.default.createElement("a",{className:(0,m.default)(p.default.pickerBtn,a&&p.default.isExpanded),onClick:this.open,style:{alignItems:"center"}},(0,u.t)("\u5176\u4ed6\u65b9\u5f0f"),f.default.createElement("div",{className:p.default.selectArrowWrapper},f.default.createElement(v.default,null))),a&&f.default.createElement("ul",{className:p.default.pickerOption},c.modao&&f.default.createElement("li",{className:p.default.aaaa},f.default.createElement("a",{className:(0,m.default)(p.default.pickerOptionItem,p.default.pickerOptionItemModao),onClick:this.props.onShow},(0,u.t)("\u58a8\u5200\u539f\u578b")))),f.default.createElement(h.default,{isShowPicker:o,onHide:this.closeModaoModal,onHandleAttachments:l}),n&&f.default.createElement(g.default,{onCancel:function(){return e.handleCoDesignVisible(!1)},onHandleAttachments:l})))}}]),a}(f.Component);S.propTypes={onHandleAttachments:d.default.func,isShowPicker:d.default.bool,onShow:d.default.func,onHide:d.default.func,noThirdLink:d.default.bool,moduleConfig:d.default.object};var T=(0,y.default)(S);t.default=T},Sejy:function(e,t,a){e.exports=a.p+"e41cf1e1bdab18711fc77291a42a5d04.svg"},TMk5:function(e,t,a){"use strict";a.r(t);var n=a("cDcd"),r=a.n(n),o=a("K2gz"),i=a.n(o),l=a("5JFE"),c=a("mVeg"),s=a("/HJl"),u=a.n(s),d=a("AjCu"),f=a("n09Y"),p=a.n(f),m=a("PoYe"),v=a("sWxF"),h=function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function i(e){try{c(n.next(e))}catch(t){o(t)}}function l(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}c((n=n.apply(e,t||[])).next())}))},g=function(e,t){var a,n,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(a=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){i.label=l[1];break}if(6===l[0]&&i.label<r[1]){i.label=r[1],r=l;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(l);break}r[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(c){l=[6,c],n=0}finally{a=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},E=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},y=Object(n.memo)((function(e){var t,a=e.projectId,o=e.showModal,i=void 0!==o&&o,s=e.setShowModal,u=e.selectedCodes,d=e.onDeleteComplete,f=E(Object(n.useState)(!1),2),p=f[0],y=f[1];return r.a.createElement(l.Modal,{title:Object(c.t)("\u6279\u91cf\u5220\u9664"),visible:i,onOk:function(){h(void 0,void 0,void 0,(function(){var e;return g(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,3,4]),y(!0),[4,Object(v.batchDeleteIssues)(a,{issueCodes:u})];case 1:return 0===t.sent().code&&Object(m.a)({type:"success",message:Object(c.t)("\u6279\u91cf\u5220\u9664\u6210\u529f"),description:Object(c.t)("\u5df2\u6210\u529f\u5220\u9664 {{num}} \u4e2a\u4e8b\u9879\uff0c\u4ee5\u53ca\u5176\u5b50\u4e8b\u9879\u3002",{num:null!==(e=null===u||void 0===u?void 0:u.length)&&void 0!==e?e:0}),banner:!0,timeOut:3e3}),[3,4];case 2:return t.sent(),[3,4];case 3:return d&&d(),y(!1),s(!1),[7];case 4:return[2]}}))}))},onCancel:function(){s&&s(!1)},confirmLoading:p,cancelText:Object(c.t)("\u53d6\u6d88"),okText:p?Object(c.t)("\u5220\u9664\u4e2d"):Object(c.t)("\u786e\u8ba4\u5220\u9664"),okButtonProps:{danger:!0},cancelButtonProps:{style:p?{display:"none"}:{}},maskClosable:!p,closable:!p,width:400,bodyStyle:{paddingTop:"10px"},getContainer:"[data-frontend-module-container=coding-project-management-frontend]"},r.a.createElement("span",null,Object(c.t)("\u60a8\u6b63\u5728\u5220\u9664\u9009\u4e2d\u7684 {{num}} \u4e2a\u4e8b\u9879",{num:null!==(t=null===u||void 0===u?void 0:u.length)&&void 0!==t?t:""})),r.a.createElement("span",null,Object(c.t)("\u4e5f\u4f1a\u88ab\u4e00\u5e76\u5220\u9664\uff0c\u786e\u8ba4\u5220\u9664\u5417\uff1f")))})),b=a("V/h/"),I=a("A2mN"),S=a("uTi8"),T=a("Bps3"),w=a("YV+u"),C=a("6Mal"),O=a("iTKN"),N=a("QLvm"),P=a.n(N),j=a("pRW9"),D=a("L8Eh"),k=a("BWEl"),R=a("d063"),M=a("OTim"),A=a("ixak"),L=a("K2MB"),x=a("ocdZ"),_=a("WEK+"),F=a("kits"),W=a("aHEs"),B=a("JEjI"),H=a("YstK"),U=a("ayzq"),Y=a.n(U),q=a("LvDl"),G=a("7bn+"),z=function(){return(z=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},V=function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function i(e){try{c(n.next(e))}catch(t){o(t)}}function l(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}c((n=n.apply(e,t||[])).next())}))},Z=function(e,t){var a,n,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(a=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){i.label=l[1];break}if(6===l[0]&&i.label<r[1]){i.label=r[1],r=l;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(l);break}r[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(c){l=[6,c],n=0}finally{a=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},K=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},J=function(e,t,a){if(a||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))},Q=Object(n.memo)((function(e){var t=e.globalKey,a=e.projectName,o=e.projectId,i=e.showModal,s=void 0!==i&&i,u=e.setShowModal,d=e.setFailedDetail,f=e.setShowFailedDetailModal,p=e.selectedCodes,h=e.selectedRequirements,g=e.selectedIssueTypeIds,E=e.onModifyComplete,y=e.inProgram,N=void 0!==y&&y,U=e.issueType,Q={MoveOut:{title:"\u786e\u8ba4\u79fb\u51fa\u8fed\u4ee3",desc:"\u4e8b\u9879\u79fb\u51fa\u8fed\u4ee3\uff0c\u4f1a\u9020\u6210\u8fed\u4ee3\u5b8c\u6210\u7387\u4e0b\u964d\uff0c\u662f\u5426\u786e\u8ba4\u79fb\u51fa\u5f53\u524d\u8fed\u4ee3?"},MoveIn:{title:"\u786e\u8ba4\u79fb\u5165\u8fed\u4ee3",desc:"\u4e8b\u9879\u79fb\u5165\u8fed\u4ee3\u540e\uff0c\u4f1a\u6c38\u4e45\u7b97\u4f5c\u8fed\u4ee3\u4e8b\u9879\u57fa\u6570\uff0c\u4f1a\u5f71\u54cd\u8fed\u4ee3\u5b8c\u6210\u7387\u7684\u8ba1\u7b97\uff0c\u662f\u5426\u786e\u8ba4\u79fb\u5165\u5f53\u524d\u8fed\u4ee3?"},ToTarget:{title:"\u786e\u8ba4\u79fb\u51fa\u8fed\u4ee3",desc:"\u4e8b\u9879\u79fb\u51fa\u5f53\u524d\u8fed\u4ee3\uff0c\u4f1a\u9020\u6210\u5f53\u524d\u8fed\u4ee3\u5b8c\u6210\u7387\u4e0b\u964d\u3002\u540c\u65f6\uff0c\u4e8b\u9879\u4f1a\u79fb\u5165\u65b0\u7684\u8fed\u4ee3\u540e\uff0c\u4f1a\u6c38\u4e45\u7b97\u4f5c\u65b0\u8fed\u4ee3\u4e8b\u9879\u57fa\u6570\uff0c\u4f1a\u5f71\u54cd\u65b0\u8fed\u4ee3\u5b8c\u6210\u7387\u7684\u8ba1\u7b97\uff0c\u662f\u5426\u786e\u8ba4\u6b64\u64cd\u4f5c?"}},X=K(Object(n.useState)(!1),2),$=X[0],ee=X[1],te=K(Object(n.useState)([]),2),ae=te[0],ne=te[1],re=K(Object(n.useState)(null),2),oe=re[0],ie=re[1],le=K(Object(n.useState)(!1),2),ce=le[0],se=le[1],ue=K(Object(n.useState)(!1),2),de=ue[0],fe=ue[1],pe=K(Object(n.useState)([]),2),me=pe[0],ve=pe[1],he=K(Object(n.useState)([]),2),ge=he[0],Ee=he[1],ye=K(Object(n.useState)([]),2),be=ye[0],Ie=(ye[1],K(Object(n.useState)({fieldName:"",fieldValue:null}),2)),Se=Ie[0],Te=Ie[1],we=K(Object(n.useState)(!1),2),Ce=we[0],Oe=we[1],Ne=K(Object(n.useState)(!1),2),Pe=Ne[0],je=Ne[1],De=K(Object(n.useState)(!0),2),ke=De[0],Re=De[1],Me=K(Object(n.useState)(!1),2),Ae=Me[0],Le=Me[1],xe=K(Object(n.useState)(null),2),_e=xe[0],Fe=xe[1];Object(n.useEffect)((function(){o&&Ke()}),[o]),Object(n.useEffect)((function(){o&&!N&&We(o)}),[o,N]),Object(n.useEffect)((function(){o&&t&&Be(o)}),[a,t,o]);var We=function(e){return V(void 0,void 0,void 0,(function(){var t,a,n,r;return Z(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,Object(v.fetchIssueModules)(e)];case 1:return t=o.sent(),a=t.code,n=t.data,0===a&&(r=n.map((function(e){return{id:null===e||void 0===e?void 0:e.id,value:null===e||void 0===e?void 0:e.id,text:null===e||void 0===e?void 0:e.name}})),Ee(r)),[3,3];case 2:return o.sent(),[3,3];case 3:return[2]}}))}))},Be=function(e){return V(void 0,void 0,void 0,(function(){var t,a,n;return Z(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Object(F.d)(e)];case 1:return t=r.sent(),a=t.code,n=t.data,0===a&&ve(n),[3,3];case 2:return r.sent(),[3,3];case 3:return[2]}}))}))},He=K(Object(n.useState)([]),2),Ue=He[0],Ye=He[1],qe=function(){return Object(W.getGroupTeam)(o).then((function(e){var t,a=J(J([],K((null===(t=e.data.system)||void 0===t?void 0:t.map((function(e){return z(z({},e),{isCorrelation:!0})})))||[]),!1),K(e.data.other||[]),!1);Ye(a)}))},Ge=K(Object(n.useState)([]),2),ze=Ge[0],Ve=Ge[1],Ze=function(){Object(W.fetchSystemsByProjectId)(o,"").then((function(e){Ve(e.data)}))},Ke=function(){return V(void 0,void 0,void 0,(function(){var e,t,a;return Z(this,(function(n){switch(n.label){case 0:se(!0),fe(!1),d(null),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,Object(v.getAvailableFields)(o,{issueTypeIds:g})];case 2:return e=n.sent(),t=e.code,a=e.data,0===t&&(ne(a.map((function(e){var t,a;return z(z({},e),{id:null!==(t=null===e||void 0===e?void 0:e.id)&&void 0!==t?t:null===e||void 0===e?void 0:e.type,value:null!==(a=null===e||void 0===e?void 0:e.id)&&void 0!==a?a:null===e||void 0===e?void 0:e.type,text:null===e||void 0===e?void 0:e.name})}))),fe(!0)),[3,5];case 3:return n.sent(),[3,5];case 4:return se(!1),[7];case 5:return[2]}}))}))},Je=function(){return V(void 0,void 0,void 0,(function(){var e,t,a,n,i,s,h,g,y,b,I,S,T,w,C;return Z(this,(function(O){switch(O.label){case 0:if(!ke)return[2];O.label=1;case 1:return O.trys.push([1,3,4,5]),ee(!0),d(null),e=void 0,e=(null===Se||void 0===Se?void 0:Se.fieldName)===H.BASE_FIELD_TYPE_ENUM.WATCH?{issueCodes:p,selfWatch:!0,fieldName:H.BASE_FIELD_TYPE_ENUM.WATCH,ignoreAdditionField:!0}:z({issueCodes:p,fieldName:null===Se||void 0===Se?void 0:Se.fieldName,ignoreAdditionField:!0},null===Se||void 0===Se?void 0:Se.fieldValue),[4,Object(v.batchUpdateIssues)(o,e)];case 2:return t=O.sent(),a=t.code,n=t.data,i=n.success,s=n.failed,0!==a?[2]:(null!==(y=null===s||void 0===s?void 0:s.length)&&void 0!==y?y:0)>0?(h={fieldName:null!==(S=null===oe||void 0===oe?void 0:oe.text)&&void 0!==S?S:"",failed:s},d(h),g=Object(m.a)({showIcon:!0,type:"error",message:Object(c.t)("\u6279\u91cf\u4fee\u6539\u5931\u8d25"),description:Object(c.t)("\u5df2\u6210\u529f\u4fee\u6539 {{successCount}} \u4e2a\u4e8b\u9879\u7684\u300c{{name}}\u300d\u5c5e\u6027\uff0c\u5269\u4f59 {{failedCount}} \u4e2a\u4e8b\u9879\u4fee\u6539\u5931\u8d25\u3002",{successCount:null!==(T=null===i||void 0===i?void 0:i.length)&&void 0!==T?T:0,name:null!==(w=null===oe||void 0===oe?void 0:oe.text)&&void 0!==w?w:"",failedCount:null!==(C=null===s||void 0===s?void 0:s.length)&&void 0!==C?C:0}),timeOut:0,banner:!0,action:r.a.createElement(l.Button,{size:"small",danger:!0,onClick:function(){f(!0),g()}},Object(c.t)("\u67e5\u770b\u5931\u8d25\u8be6\u60c5"))}),[3,5]):(Object(m.a)({type:"success",message:Object(c.t)("\u6279\u91cf\u4fee\u6539\u6210\u529f"),description:Object(c.t)("\u5df2\u6210\u529f\u4fee\u6539 {{num}} \u4e2a\u4e8b\u9879\u7684\u300c{{name}}\u300d\u5c5e\u6027\u3002",{num:null!==(b=null===p||void 0===p?void 0:p.length)&&void 0!==b?b:0,name:null!==(I=null===oe||void 0===oe?void 0:oe.text)&&void 0!==I?I:""}),banner:!0,timeOut:3e3}),[2]);case 3:return O.sent(),[3,5];case 4:return E&&E(),ee(!1),u(!1),[7];case 5:return[2]}}))}))},Qe=function(){var e,t;switch(oe.type){case H.BASE_FIELD_TYPE_ENUM.STATUS:return!!(a=null===(e=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===e?void 0:e.statusId)||0===a;case H.BASE_FIELD_TYPE_ENUM.PRIORITY:var a;return!!(a=null===(t=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===t?void 0:t.priority)||0===a}return!0},Xe=function(){u&&u(!1)},$e=function(e,t){var a=Object(b.default)(Se,(function(a){a.fieldName=e,a.fieldValue=t}));Te(a)},et=function(e,t){var a,n,r,o,i,l,c,s,u,d=e.type,f=e.componentType,p=e.id,m=void 0===p?0:p;switch(d){case H.BASE_FIELD_TYPE_ENUM.STATUS:return{statusId:null!==(a=null===t||void 0===t?void 0:t.id)&&void 0!==a?a:null};case H.BASE_FIELD_TYPE_ENUM.WORKING_HOURS:return{workingHours:null!==(n=null===t||void 0===t?void 0:t.content)&&void 0!==n?n:0};case H.BASE_FIELD_TYPE_ENUM.HOUR_RECORD:return{recordHour:null!==t&&void 0!==t?t:null};case H.BASE_FIELD_TYPE_ENUM.PRIORITY:return{priority:null!==(r=null===t||void 0===t?void 0:t.value)&&void 0!==r?r:null};case H.BASE_FIELD_TYPE_ENUM.PROGRESS:return{progress:null!==t&&void 0!==t?t:0};case H.BASE_FIELD_TYPE_ENUM.LABEL:return{labelIds:null!==t&&void 0!==t?t:[]};case H.BASE_FIELD_TYPE_ENUM.WATCHER:return at("watchers",t);case H.BASE_FIELD_TYPE_ENUM.ASSIGNEE:return tt("assignee",t,0);case H.BASE_FIELD_TYPE_ENUM.START_DATE:return{startDate:null!==t&&void 0!==t?t:""};case H.BASE_FIELD_TYPE_ENUM.DUE_DATE:return{dueDate:null!==t&&void 0!==t?t:""};case H.BASE_FIELD_TYPE_ENUM.MODULE:return{projectModuleId:null!==(o=null===t||void 0===t?void 0:t.id)&&void 0!==o?o:0};case H.BASE_FIELD_TYPE_ENUM.DEFECT_TYPE:return{defectTypeId:null!==(i=null===t||void 0===t?void 0:t.id)&&void 0!==i?i:0};case H.BASE_FIELD_TYPE_ENUM.STORY_POINT:return{storyPoint:null!==t&&void 0!==t?t:-1};case H.BASE_FIELD_TYPE_ENUM.ITERATION:return Fe(t),{iterationId:null!==(l=null===t||void 0===t?void 0:t.id)&&void 0!==l?l:0};case H.BASE_FIELD_TYPE_ENUM.RELEASE:return at("releaseIds",t);case H.BASE_FIELD_TYPE_ENUM.SYSTEM:return{systemsId:null!==(c=null===t||void 0===t?void 0:t.id)&&void 0!==c?c:0};case H.BASE_FIELD_TYPE_ENUM.GROUP_TEAM:return{groupTeamId:null!==(s=null===t||void 0===t?void 0:t.id)&&void 0!==s?s:0};case H.BASE_FIELD_TYPE_ENUM.PROGRAM:return{programId:null!==(u=null===t||void 0===t?void 0:t.id)&&void 0!==u?u:0};case H.BASE_FIELD_TYPE_ENUM.PARTICIPANT:return at("addParticipants",t);case H.BASE_FIELD_TYPE_ENUM.CUSTOM:return{customFieldValueMap:nt(f,m,t)};default:return null}},tt=function(e,t,a){var n,r,o;void 0===a&&(a=null);var i=null!==(o=null===t||void 0===t?void 0:t.id)&&void 0!==o?o:t;return t?((r={})[e]=i,r.item=t,r):((n={})[e]=a,n.item=null,n)},at=function(e,t){var a,n,r,o,i=null!==(o=null===t||void 0===t?void 0:t.id)&&void 0!==o?o:t;if(!t)return(a={})[e]=[],a.items=[],a;var l=null===Se||void 0===Se?void 0:Se.fieldValue;if(!l||!l[e])return(n={})[e]=[i],n.items=[t],n;var c=J([],K(l[e]),!1),s=c.indexOf(i);s>-1?c.splice(s,1):c.push(i);var u=J([],K(null===l||void 0===l?void 0:l.items),!1),d=u.findIndex((function(e){return e.id===i}));return d>-1?u.splice(d,1):u.push(t),(r={})[e]=c,r.items=u,r},nt=function(e,t,a){switch(e){case H.PROPERTY_TYPE_CONSTANTS_ENUM.SELECT_SINGLE:case H.PROPERTY_TYPE_CONSTANTS_ENUM.SELECT_ITERATION_SINGLE:case H.PROPERTY_TYPE_CONSTANTS_ENUM.SELECT_MEMBER_SINGLE:return function(e,t){return t?[{id:e,content:null===t||void 0===t?void 0:t.value}]:[{id:e,content:null}]}(t,a);case H.PROPERTY_TYPE_CONSTANTS_ENUM.SELECT_MULTI:case H.PROPERTY_TYPE_CONSTANTS_ENUM.SELECT_ITERATION_MULTI:case H.PROPERTY_TYPE_CONSTANTS_ENUM.SELECT_MEMBER_MULTI:return function(e,t){var a,n,r,o=(null===(a=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===a?void 0:a.customFieldValueMap)||[];if(!t)return[{id:e,content:[],items:[]}];var i=(null===(n=o.find((function(t){return(null===t||void 0===t?void 0:t.id)===e})))||void 0===n?void 0:n.content)||[],l=(null===(r=o.find((function(t){return(null===t||void 0===t?void 0:t.id)===e})))||void 0===r?void 0:r.items)||[],c=i.indexOf(null===t||void 0===t?void 0:t.value);c>-1?i.splice(c,1):i.push(null===t||void 0===t?void 0:t.value);var s=l.findIndex((function(e){return(null===e||void 0===e?void 0:e.value)===(null===t||void 0===t?void 0:t.value)}));return c>-1?l.splice(s,1):l.push(t),[{id:e,content:i,items:l}]}(t,a);case H.PROPERTY_TYPE_CONSTANTS_ENUM.TEXT_SINGLE_LINE:case H.PROPERTY_TYPE_CONSTANTS_ENUM.TEXT_MULTI_LINE:case H.PROPERTY_TYPE_CONSTANTS_ENUM.TEXT_DATE:case H.PROPERTY_TYPE_CONSTANTS_ENUM.TEXT_DATETIME:case H.PROPERTY_TYPE_CONSTANTS_ENUM.TEXT_INTEGER:case H.PROPERTY_TYPE_CONSTANTS_ENUM.TEXT_DECIMAL:return[{id:t,content:(n=a,void 0===q.values||null===n||""===n?null:a)}];default:return null}var n},rt=function(e){var t;je(!1),$e(null!==(t=null===oe||void 0===oe?void 0:oe.type)&&void 0!==t?t:"",et(oe,e))},ot=function(e,t){var a,n,r,o=null===Se||void 0===Se?void 0:Se.fieldValue;if(o){var i=J([],K(null!==(n=o[e])&&void 0!==n?n:[]),!1),l=i.indexOf(t);l>-1&&i.splice(l,1);var c=J([],K(null!==(r=null===o||void 0===o?void 0:o.items)&&void 0!==r?r:[]),!1),s=c.findIndex((function(e){return e.id===t}));s>-1&&c.splice(s,1);var u=((a={})[e]=i,a.items=c,a),d=oe.type;$e(d,u)}},it=function(e){var t,a,n,r=oe.id,o=oe.type,i=(null===(t=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===t?void 0:t.customFieldValueMap)||[],l=(null===(a=i.find((function(e){return(null===e||void 0===e?void 0:e.id)===r})))||void 0===a?void 0:a.content)||[],c=(null===(n=i.find((function(e){return(null===e||void 0===e?void 0:e.id)===r})))||void 0===n?void 0:n.items)||[],s=l.indexOf(e);s>-1&&l.splice(s,1);var u=c.findIndex((function(t){return(null===t||void 0===t?void 0:t.value)===e}));u>-1&&c.splice(u,1),$e(o,{customFieldValueMap:[{id:r,content:l,items:c}]})},lt=function(e){var t="";return(null===_e||void 0===_e?void 0:_e.status)===G.ITERATION_STATUS.PROCESSING&&(null===h||void 0===h?void 0:h.some((function(e){var t;return(null===(t=null===e||void 0===e?void 0:e.iteration)||void 0===t?void 0:t.status)===G.ITERATION_STATUS.PROCESSING})))&&(t=Q.ToTarget[e]),(null===_e||void 0===_e?void 0:_e.status)!==G.ITERATION_STATUS.PROCESSING&&(null===h||void 0===h?void 0:h.some((function(e){var t;return(null===(t=null===e||void 0===e?void 0:e.iteration)||void 0===t?void 0:t.status)===G.ITERATION_STATUS.PROCESSING})))&&(t=Q.MoveOut[e]),(null===_e||void 0===_e?void 0:_e.status)===G.ITERATION_STATUS.PROCESSING&&(null===h||void 0===h?void 0:h.some((function(e){var t;return(null===(t=null===e||void 0===e?void 0:e.iteration)||void 0===t?void 0:t.status)!==G.ITERATION_STATUS.PROCESSING})))&&(t=Q.MoveIn[e]),t};return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.Modal,{title:Object(c.t)("\u6279\u91cf\u4fee\u6539\u5c5e\u6027"),visible:s,maskClosable:!$,closable:!$,onCancel:Xe,width:400,bodyStyle:{paddingTop:"4px",paddingBottom:"20px"},footer:r.a.createElement(r.a.Fragment,null,r.a.createElement(l.Button,{style:$?{display:"none"}:{},onClick:Xe},Object(c.t)("\u53d6\u6d88")),r.a.createElement(l.Button,{type:"primary",loading:$,disabled:!(oe&&oe.value),onClick:function(){Qe()?(null===Se||void 0===Se?void 0:Se.fieldName)!==H.BASE_FIELD_TYPE_ENUM.ITERATION||(null===_e||void 0===_e?void 0:_e.status)!==G.ITERATION_STATUS.PROCESSING&&!(null===h||void 0===h?void 0:h.some((function(e){var t;return(null===(t=null===e||void 0===e?void 0:e.iteration)||void 0===t?void 0:t.status)===G.ITERATION_STATUS.PROCESSING})))?Je():Le(!0):je(!0)},"data-container":!0,"data-title":"\u6279\u91cf\u64cd\u4f5c-\u6267\u884c\u64cd\u4f5c-\u786e\u5b9a"},$?Object(c.t)("\u4fee\u6539\u4e2d"):Object(c.t)("\u786e\u8ba4\u4fee\u6539"))),wrapClassName:Y.a.batchModifyModal,getContainer:"[data-frontend-module-container=coding-project-management-frontend]"},r.a.createElement("div",{className:Y.a.titleTip},r.a.createElement("span",null,Object(c.t)("\u5305\u542b\u4e0d\u540c\u7c7b\u578b\u7684\u4e8b\u9879\u65f6\uff0c\u4ec5\u80fd\u4fee\u6539\u76f8\u540c\u7684\u5c5e\u6027")),((null===oe||void 0===oe?void 0:oe.componentType)===H.PROPERTY_TYPE_CONSTANTS_ENUM.SELECT_MULTI||(null===oe||void 0===oe?void 0:oe.componentType)===H.PROPERTY_TYPE_CONSTANTS_ENUM.SELECT_ITERATION_MULTI||(null===oe||void 0===oe?void 0:oe.componentType)===H.PROPERTY_TYPE_CONSTANTS_ENUM.SELECT_MEMBER_MULTI)&&r.a.createElement("span",null,Object(c.t)("\uff08\u6240\u6709\u9009\u4e2d\u4e8b\u9879\u7684{{field}}\u4f1a\u5b8c\u5168\u88ab\u65b0\u503c\u8986\u76d6\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\uff09",{field:null===oe||void 0===oe?void 0:oe.text})),"\u3002"),r.a.createElement("div",{className:Y.a.modifyBody},r.a.createElement("div",{className:Y.a.formItem},r.a.createElement("div",{className:Y.a.label},r.a.createElement("span",null,Object(c.t)("\u5c5e\u6027")),r.a.createElement("span",{className:Y.a.highLight},"*")),r.a.createElement(I.a,{largeSize:!0,dataFetching:ce,value:null===oe||void 0===oe?void 0:oe.id,items:ae,onSelect:function(e){var t;Oe("STATUS"===(null===e||void 0===e?void 0:e.type)||"PRIORITY"===(null===e||void 0===e?void 0:e.type)),je(!1),$e(null!==(t=null===e||void 0===e?void 0:e.type)&&void 0!==t?t:"",et(e,null)),ie(e)},onClear:function(){$e("",null),ie(null)},dataInited:de,isLocalSearch:!0,isMultiple:!1})),oe&&oe.type!==H.BASE_FIELD_TYPE_ENUM.WATCH&&r.a.createElement("div",{className:Y.a.formItem},r.a.createElement("div",{className:Y.a.label},r.a.createElement("span",null,Object(c.t)("\u4fee\u6539\u4e3a")),r.a.createElement("div",{className:Y.a.labelTip},Ce?Object(c.t)("\u672c\u5c5e\u6027\u4e0d\u5141\u8bb8\u4fee\u6539\u4e3a\u7a7a\u3002"):Object(c.t)("\u4e0d\u586b\u503c\u5219\u4f1a\u6279\u91cf\u4fee\u6539\u4e3a\u7a7a\u3002"))),function(){var e,t,a,n,i,l,s,u,d,f,p,m,v,h,E,y,b,I,N,F,W,Y,q,G,V,Z,K,J,Q,X,$,ee,te,ae,ne,re,ie,le,ce,se,ue,de,fe,pe=null===oe||void 0===oe?void 0:oe.type,ve=null===oe||void 0===oe?void 0:oe.id;switch(pe){case H.BASE_FIELD_TYPE_ENUM.STATUS:var he=null!==(t=null===(e=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===e?void 0:e.statusId)&&void 0!==t?t:0;return r.a.createElement(S.a,{key:ve,value:he,projectId:o,issueTypeIds:g,largeSize:!0,onSelect:rt,clearable:!1,isLocalSearch:!0,isMultiple:!1});case H.BASE_FIELD_TYPE_ENUM.WORKING_HOURS:he=(null===(a=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===a?void 0:a.workingHours)?null===(n=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===n?void 0:n.workingHours:"";return r.a.createElement(w.a,{value:he,onModify:rt,key:ve,setValid:function(e){Re(e)}});case H.BASE_FIELD_TYPE_ENUM.HOUR_RECORD:he=null!==(s=null===(l=null===(i=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===i?void 0:i.recordHour)||void 0===l?void 0:l.spendHour)&&void 0!==s?s:0;return r.a.createElement(T.a,{onSetting:rt,hour:he,key:ve});case H.BASE_FIELD_TYPE_ENUM.PRIORITY:he=null!==(d=null===(u=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===u?void 0:u.priority)&&void 0!==d?d:null;return r.a.createElement(C.default,{key:ve,componentType:O.ComponentType.FORM,value:he,onSelect:rt,placeholder:Object(c.t)("\u8bf7\u9009\u62e9")});case H.BASE_FIELD_TYPE_ENUM.PROGRESS:he=null!==(p=null===(f=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===f?void 0:f.progress)&&void 0!==p?p:0;return r.a.createElement(P.a,{key:ve,value:he,onChange:rt,placeholder:Object(c.t)("\u8bf7\u8f93\u5165 0 \u81f3 100 \u6570\u5b57")});case H.BASE_FIELD_TYPE_ENUM.LABEL:he=null!==(v=null===(m=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===m?void 0:m.labelIds)&&void 0!==v?v:[];return r.a.createElement(j.a,{key:ve,projectID:o,isTag:!0,multiple:!0,value:he,options:me,onChange:rt,updateLabels:function(){Be(o)}});case H.BASE_FIELD_TYPE_ENUM.WATCHER:var Ee=null!==(E=null===(h=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===h?void 0:h.watchers)&&void 0!==E?E:[],ye=null!==(b=null===(y=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===y?void 0:y.items)&&void 0!==b?b:[];return r.a.createElement(D.default,{key:ve,componentType:O.ComponentType.FORM,isMultiple:!0,inProject:!0,projectID:o,value:Ee,x:!0,onSelect:rt,onClear:rt,triggerExtraProps:{onRemove:function(e){ot("watchers",e)},initialSelectedItem:ye}});case H.BASE_FIELD_TYPE_ENUM.REQUIREMENT_TYPE:return null;case H.BASE_FIELD_TYPE_ENUM.DEFECT_TYPE:he=null!==(N=null===(I=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===I?void 0:I.defectTypeId)&&void 0!==N?N:0;return r.a.createElement(R.a,{key:ve,value:he,items:be,onSelect:rt,onClear:rt,placeholder:Object(c.t)("\u8bf7\u9009\u62e9")});case H.BASE_FIELD_TYPE_ENUM.MODULE:he=null!==(W=null===(F=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===F?void 0:F.projectModuleId)&&void 0!==W?W:0;return r.a.createElement(R.a,{key:ve,value:he,items:ge,onSelect:rt,onClear:rt,placeholder:Object(c.t)("\u8bf7\u9009\u62e9")});case H.BASE_FIELD_TYPE_ENUM.ASSIGNEE:he=null!==(q=null===(Y=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===Y?void 0:Y.assignee)&&void 0!==q?q:null;var Ie=null!==(V=null===(G=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===G?void 0:G.item)&&void 0!==V?V:null;return r.a.createElement(D.default,{key:ve,componentType:O.ComponentType.FORM,inProject:!0,projectID:o,value:he,onSelect:rt,onClear:rt,triggerExtraProps:{initialSelectedItem:Ie}});case H.BASE_FIELD_TYPE_ENUM.START_DATE:he=null!==(K=null===(Z=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===Z?void 0:Z.startDate)&&void 0!==K?K:null;return r.a.createElement(k.a,{key:ve,value:he,onChange:function(e){return rt(e.isValid()?e.format("YYYY-MM-DD"):"")}});case H.BASE_FIELD_TYPE_ENUM.DUE_DATE:he=null!==(Q=null===(J=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===J?void 0:J.dueDate)&&void 0!==Q?Q:null;return r.a.createElement(k.a,{key:ve,value:he,onChange:function(e){return rt(e.isValid()?e.format("YYYY-MM-DD"):"")}});case H.BASE_FIELD_TYPE_ENUM.STORY_POINT:return-1===(he=null===(X=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===X?void 0:X.storyPoint)&&(he=void 0),r.a.createElement(M.default,{componentType:O.ComponentType.TABLE_CELL,key:ve,tableCell:!0,value:he,onSelect:rt,onClear:function(){rt(-1)}});case H.BASE_FIELD_TYPE_ENUM.ITERATION:he=null!==(ee=null===($=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===$?void 0:$.iterationId)&&void 0!==ee?ee:null;return r.a.createElement(A.default,{key:ve,componentType:O.ComponentType.FORM,placeholder:Object(c.t)("\u8bf7\u9009\u62e9"),projectID:o,value:he,onSelect:rt,onClear:rt});case H.BASE_FIELD_TYPE_ENUM.RELEASE:var Te=null!==(ae=null===(te=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===te?void 0:te.releaseIds)&&void 0!==ae?ae:[],we=null!==(re=null===(ne=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===ne?void 0:ne.items)&&void 0!==re?re:[];return r.a.createElement(L.a,{key:ve,isMultiple:!0,componentType:O.ComponentType.FORM,placeholder:Object(c.t)("\u8bf7\u9009\u62e9"),projectID:o,value:Te,onSelect:rt,onClear:rt,triggerExtraProps:{onRemove:function(e){ot("releaseIds",null===e||void 0===e?void 0:e.id)},initialSelectedItem:we}});case H.BASE_FIELD_TYPE_ENUM.SYSTEM:he=null===(ie=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===ie?void 0:ie.systemsId;return r.a.createElement(R.a,{key:ve,value:he,items:ze.map((function(e){var t=e.systemId;return{id:t,value:t,text:e.systemName}})),onSelect:rt,onClear:rt,placeholder:Object(c.t)("\u8bf7\u9009\u62e9"),onExpandOpen:Ze});case H.BASE_FIELD_TYPE_ENUM.GROUP_TEAM:he=null===(le=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===le?void 0:le.groupTeamId;return r.a.createElement(R.a,{key:ve,value:he,items:null===Ue||void 0===Ue?void 0:Ue.map((function(e){return z(z({},e),{text:e.groupTeamName,id:e.id})})),onSelect:rt,onClear:rt,placeholder:Object(c.t)("\u8bf7\u9009\u62e9"),onExpandOpen:qe,CustomPanel:B.default});case H.BASE_FIELD_TYPE_ENUM.PROGRAM:he=null===(ce=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===ce?void 0:ce.programId;return r.a.createElement(_.default,{show:!1,issueType:U,value:he,onSelect:rt,onClear:rt,isBatchOperation:!0,placeholder:Object(c.t)("\u9009\u62e9\u6240\u5c5e\u9879\u76ee"),triggerExtraProps:{label:Object(c.t)("\u6240\u5c5e\u9879\u76ee"),removable:!0,onRemove:rt},unCompleted:!0});case H.BASE_FIELD_TYPE_ENUM.PARTICIPANT:var Ce=null!==(ue=null===(se=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===se?void 0:se.addParticipants)&&void 0!==ue?ue:[];ye=null!==(fe=null===(de=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===de?void 0:de.items)&&void 0!==fe?fe:[];return r.a.createElement(D.default,{key:ve,componentType:O.ComponentType.FORM,isMultiple:!0,inProject:!0,projectID:o,value:Ce,x:!0,onSelect:rt,onClear:rt,triggerExtraProps:{onRemove:function(e){ot("addParticipants",e)},initialSelectedItem:ye}});case H.BASE_FIELD_TYPE_ENUM.CUSTOM:return function(){var e,t,a,n,i,l,s,u,d,f,p,m,v,h,g,E,y,b,I,S,T,w,C,N,P,j,M=oe.id,L=oe.componentType,_=oe.options,F=oe.unit,W=(_||[]).map((function(e){var t;return z(z({},e),{id:null===e||void 0===e?void 0:e.id,value:null===(t=null===e||void 0===e?void 0:e.id)||void 0===t?void 0:t.toString(),text:null===e||void 0===e?void 0:e.name})}));switch(L){case H.PROPERTY_TYPE_CONSTANTS_ENUM.SELECT_SINGLE:var B=(null===(t=((null===(e=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===e?void 0:e.customFieldValueMap)||[]).find((function(e){return(null===e||void 0===e?void 0:e.id)===M})))||void 0===t?void 0:t.content)||null,U=null!==(a=Number(B))&&void 0!==a?a:0;return r.a.createElement(R.a,{key:M,value:U,items:W,onSelect:rt,onClear:rt,placeholder:Object(c.t)("\u8bf7\u9009\u62e9"),isLocalSearch:!0});case H.PROPERTY_TYPE_CONSTANTS_ENUM.SELECT_MULTI:U=null===(B=(null===(i=((null===(n=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===n?void 0:n.customFieldValueMap)||[]).find((function(e){return(null===e||void 0===e?void 0:e.id)===M})))||void 0===i?void 0:i.content)||[])||void 0===B?void 0:B.map((function(e){var t;return null!==(t=Number(e))&&void 0!==t?t:0}));return r.a.createElement(R.a,{key:M,isMultiple:!0,value:U,items:W,onSelect:rt,onClear:rt,placeholder:Object(c.t)("\u8bf7\u9009\u62e9")});case H.PROPERTY_TYPE_CONSTANTS_ENUM.TEXT_SINGLE_LINE:B=(null===(s=((null===(l=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===l?void 0:l.customFieldValueMap)||[]).find((function(e){return(null===e||void 0===e?void 0:e.id)===M})))||void 0===s?void 0:s.content)||null;return r.a.createElement(x.a,{key:M,placeholder:Object(c.t)("\u8bf7\u8f93\u5165\u5185\u5bb9"),onChange:rt,value:B});case H.PROPERTY_TYPE_CONSTANTS_ENUM.TEXT_MULTI_LINE:B=(null===(d=((null===(u=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===u?void 0:u.customFieldValueMap)||[]).find((function(e){return(null===e||void 0===e?void 0:e.id)===M})))||void 0===d?void 0:d.content)||null;return r.a.createElement(x.a,{key:M,multiple:!0,placeholder:Object(c.t)("\u8bf7\u8f93\u5165\u5185\u5bb9"),onChange:rt,value:B});case H.PROPERTY_TYPE_CONSTANTS_ENUM.SELECT_MEMBER_SINGLE:B=(null===(q=((null===(f=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===f?void 0:f.customFieldValueMap)||[]).find((function(e){return(null===e||void 0===e?void 0:e.id)===M})))||void 0===q?void 0:q.content)||null;var Y=(null===q||void 0===q?void 0:q.item)||null;return r.a.createElement(D.default,{key:M,componentType:O.ComponentType.FORM,inProject:!0,projectID:o,value:B,onSelect:rt,onClear:rt,triggerExtraProps:{initialSelectedItem:Y}});case H.PROPERTY_TYPE_CONSTANTS_ENUM.SELECT_MEMBER_MULTI:B=(null===(q=((null===(p=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===p?void 0:p.customFieldValueMap)||[]).find((function(e){return(null===e||void 0===e?void 0:e.id)===M})))||void 0===q?void 0:q.content)||[],Y=(null===q||void 0===q?void 0:q.items)||[];return r.a.createElement(D.default,{key:M,componentType:O.ComponentType.FORM,isMultiple:!0,inProject:!0,projectID:o,value:B,onSelect:rt,onClear:rt,triggerExtraProps:{onRemove:function(e){it(e)},initialSelectedItem:Y}});case H.PROPERTY_TYPE_CONSTANTS_ENUM.TEXT_DATE:B=null===(v=((null===(m=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===m?void 0:m.customFieldValueMap)||[]).find((function(e){return(null===e||void 0===e?void 0:e.id)===M})))||void 0===v?void 0:v.content;return r.a.createElement(k.a,{key:M,value:B,onChange:function(e){return rt(e.isValid()?e.format("YYYY-MM-DD"):"")}});case H.PROPERTY_TYPE_CONSTANTS_ENUM.TEXT_DATETIME:B=null===(E=(null!==(g=null===(h=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===h?void 0:h.customFieldValueMap)&&void 0!==g?g:[]).find((function(e){return(null===e||void 0===e?void 0:e.id)===M})))||void 0===E?void 0:E.content;return r.a.createElement(k.a,{key:M,value:B,isTimePicker:!0,onChange:function(e){return rt(e.isValid()?e.format("YYYY-MM-DD HH:mm:ss"):"")}});case H.PROPERTY_TYPE_CONSTANTS_ENUM.TEXT_INTEGER:B=null===(I=(null!==(b=null===(y=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===y?void 0:y.customFieldValueMap)&&void 0!==b?b:[]).find((function(e){return(null===e||void 0===e?void 0:e.id)===M})))||void 0===I?void 0:I.content;return r.a.createElement(x.a,{key:M,isNumber:!0,onChange:rt,value:B,unit:F,placeholder:Object(c.t)("\u8bf7\u8f93\u5165"),maxLength:9});case H.PROPERTY_TYPE_CONSTANTS_ENUM.TEXT_DECIMAL:B=null===(w=(null!==(T=null===(S=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===S?void 0:S.customFieldValueMap)&&void 0!==T?T:[]).find((function(e){return(null===e||void 0===e?void 0:e.id)===M})))||void 0===w?void 0:w.content;return r.a.createElement(x.a,{key:M,isNumber:!0,isDecimals:!0,onChange:rt,value:B,unit:F,placeholder:Object(c.t)("\u8bf7\u8f93\u5165"),maxLength:9});case H.PROPERTY_TYPE_CONSTANTS_ENUM.SELECT_ITERATION_SINGLE:B=null===(P=(null!==(N=null===(C=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===C?void 0:C.customFieldValueMap)&&void 0!==N?N:[]).find((function(e){return(null===e||void 0===e?void 0:e.id)===M})))||void 0===P?void 0:P.content;return r.a.createElement(A.default,{key:M,componentType:O.ComponentType.FORM,placeholder:Object(c.t)("\u8bf7\u9009\u62e9"),projectID:o,value:B,onSelect:rt,onClear:rt});case H.PROPERTY_TYPE_CONSTANTS_ENUM.SELECT_ITERATION_MULTI:var q;B=(null===(q=((null===(j=null===Se||void 0===Se?void 0:Se.fieldValue)||void 0===j?void 0:j.customFieldValueMap)||[]).find((function(e){return(null===e||void 0===e?void 0:e.id)===M})))||void 0===q?void 0:q.content)||[],Y=(null===q||void 0===q?void 0:q.items)||[];return r.a.createElement(A.default,{key:M,isMultiple:!0,componentType:O.ComponentType.FORM,placeholder:Object(c.t)("\u8bf7\u9009\u62e9"),projectID:o,value:B,onSelect:rt,onClear:rt,triggerExtraProps:{initialSelectedItem:Y,onRemove:function(e){it(null===e||void 0===e?void 0:e.id)}}})}return null}()}return null}()),Pe&&oe.type!==H.BASE_FIELD_TYPE_ENUM.WATCH&&r.a.createElement("div",{className:Y.a.formItem},r.a.createElement("div",{className:Y.a.warning},Object(c.t)("\u8bf7\u586b\u5199\u8981\u4fee\u6539\u4e3a\u7684\u503c\u3002"))))),Ae&&r.a.createElement(l.Modal,{title:lt("title"),visible:Ae,maskClosable:!1,onCancel:function(){Le(!1)},width:400,bodyStyle:{paddingTop:"4px",paddingBottom:"20px"},footer:r.a.createElement(r.a.Fragment,null,r.a.createElement(l.Button,{onClick:function(){Le(!1)}},Object(c.t)("\u53d6\u6d88")),r.a.createElement(l.Button,{type:"danger",onClick:function(){Le(!1),Je()},style:{color:"#fff"}},Object(c.t)("\u786e\u8ba4"))),wrapClassName:Y.a.batchModifyModal,getContainer:"[data-frontend-module-container=coding-project-management-frontend]"},r.a.createElement("p",null,lt("desc"))))})),X=a("vhVw"),$=a.n(X),ee=Object(n.memo)((function(e){var t,a=e.showModal,n=void 0!==a&&a,o=e.setShowModal,i=e.failedDetail,s=i.fieldName,u=i.failed;return r.a.createElement(l.Modal,{width:700,title:Object(c.t)("\u5931\u8d25\u8be6\u60c5"),visible:n,onOk:function(){o&&o(!1)},onCancel:function(){o&&o(!1)},okText:Object(c.t)("\u77e5\u9053\u4e86"),cancelButtonProps:{style:{display:"none"}},bodyStyle:{paddingTop:8},getContainer:"[data-frontend-module-container=coding-project-management-frontend]"},r.a.createElement("div",{className:$.a.failedContainer},(null!==(t=null===u||void 0===u?void 0:u.length)&&void 0!==t?t:0)>0&&u.map((function(e){var t,a,n,o;return r.a.createElement(l.Tooltip,{key:null===e||void 0===e?void 0:e.id,title:null!==(t=null===e||void 0===e?void 0:e.error)&&void 0!==t?t:""},r.a.createElement("div",{className:$.a.failedItem},Object(c.t)("{{issueType}} #{{code}} \u4fee\u6539 \u300c{{field}}\u300d \u5931\u8d25\uff0c\u5931\u8d25\u539f\u56e0\uff1a{{reason}}",{issueType:null!==(a=null===e||void 0===e?void 0:e.issueType)&&void 0!==a?a:"",code:null!==(n=null===e||void 0===e?void 0:e.id)&&void 0!==n?n:"0",field:null!==s&&void 0!==s?s:"",reason:null!==(o=null===e||void 0===e?void 0:e.error)&&void 0!==o?o:""})))}))))})),te=a("rkME"),ae=a("DgMC"),ne=a("bl1S"),re=a.n(ne),oe=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i};t.default=Object(n.memo)(u()((function(e){var t,a,n,r;return{currentProject:e.APP.currentProject,currentProjectCooperateSettings:e.APP.currentProjectCooperateSettings,defectId:null===(r=null===(n=null===(a=null===(t=e.APP.currentProjectCooperateSettings)||void 0===t?void 0:t.ISSUE_TYPES)||void 0===a?void 0:a.filter((function(e){return"DEFECT"===(null===e||void 0===e?void 0:e.issueType)})))||void 0===n?void 0:n[0])||void 0===r?void 0:r.id,globalKey:e.APP.enterprise.globalKey}}),{})((function(e){var t,a,o,s,u=e.globalKey,f=void 0===u?"":u,m=e.currentProject,v=void 0===m?null:m,h=e.className,g=void 0===h?"":h,E=e.pageSize,b=e.totalPage,I=e.currentPage,S=e.totalRow,T=e.isLoading,w=e.handleSelectAll,C=void 0===w?function(){}:w,O=e.handleUpdateData,N=void 0===O?function(){}:O,P=(e.disabled,e.changePage),j=e.handleCancelBulk,D=void 0===j?function(){}:j,k=e.isChecked,R=e.isBulkVisible,M=void 0!==R&&R,A=e.isIndeterminate,L=e.issueList,x=void 0===L?[]:L,_=e.selectedCodes,F=void 0===_?[]:_,W=e.selectedRequirements,B=void 0===W?[]:W,H=e.isBulkable,U=void 0===H||H,Y=e.inProgram,q=void 0!==Y&&Y,G=e.issueType,z=e.defectId,V=oe(Object(n.useState)(!1),2),Z=V[0],K=V[1],J=oe(Object(n.useState)(!1),2),X=J[0],$=J[1],ne=oe(Object(n.useState)(null),2),ie=ne[0],le=ne[1],ce=oe(Object(n.useState)(!1),2),se=ce[0],ue=ce[1],de=oe(Object(n.useState)(!1),2),fe=de[0],pe=de[1],me=oe(Object(n.useState)(!1),2),ve=me[0],he=me[1],ge=oe(Object(n.useState)(!1),2)[1];Object(n.useEffect)((function(){var e=[Object(te.isPermissible)("project",null===v||void 0===v?void 0:v.id,"collaboration:updateProjectIssue"),Object(te.isPermissible)("project",null===v||void 0===v?void 0:v.id,"collaboration:deleteProjectIssue")];Promise.all(e).then((function(e){var t=oe(e,2),a=t[0],n=t[1];he(a),ge(n)}))}),[null===v||void 0===v?void 0:v.id]);var Ee=Object(n.useMemo)((function(){if(!x||!x.length)return[];if(!F||!F.length)return[];var e=[];return"DEFECT"===G?e=[z]:Object(ae.deepFirstTraversalIssues)(x,(function(t){var a,n=null===(a=null===t||void 0===t?void 0:t.issueTypeDetail)||void 0===a?void 0:a.id;(n||0===n)&&F.find((function(e){return(null===t||void 0===t?void 0:t.code)===e}))&&!e.includes(n)&&e.push(t.issueTypeDetail.id)})),e}),[x,F]),ye=function(){D({isCheckboxVisible:!M})};return r.a.createElement("div",{className:i()([re.a.issuePagination,g])},r.a.createElement("div",{className:re.a.leftWrapper},M&&r.a.createElement(d.a,{onChange:function(){return C(!k)},checked:k,indeterminate:!k&&A}),M&&r.a.createElement("div",{className:re.a.batchTip},Object(c.t)("\u6279\u91cf\u5904\u7406\u672c\u9875 {{num}} \u4e2a\u4e8b\u9879",{num:F.length})),!M&&function(){var e;return r.a.createElement(r.a.Fragment,null,function(){var e,t;return r.a.createElement("div",{className:re.a.pageActionWrapper},r.a.createElement("div",{className:i()(re.a.pageAction,re.a.pageActionLeft,(e={},e[re.a.disabled]=1===I,e)),onClick:function(){return 1!==I&&P({page:I-1})}}),r.a.createElement("div",{className:i()(re.a.pageAction,re.a.pageActionRight,(t={},t[re.a.disabled]=!(E>1&&I!==b),t)),onClick:function(){return E>1&&I!==b&&P({page:I+1})}}))}(),r.a.createElement(p.a,{totalPage:b,currentPage:I,pageSize:E,changePageCallback:P,isLoading:T}),r.a.createElement("div",{className:re.a.divideLine}),r.a.createElement("div",{className:re.a.issueListInfo},Object(c.t)("\u5171 {{total}} \u4e2a\u4e8b\u9879",{total:S})),r.a.createElement("div",{className:i()(re.a.refreshIcon,(e={},e[re.a.rotating]=T,e)),onClick:function(){N()}}))}()),U&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:re.a.rightWrapper},!M&&"PRD_REQUIREMENT"!==G&&r.a.createElement("div",{className:i()(re.a.bultAction,M&&re.a.cancel),onClick:ye},r.a.createElement("div",{className:re.a.icon}),Object(c.t)("\u6279\u91cf\u64cd\u4f5c")),M&&r.a.createElement(r.a.Fragment,null,(null!==(t=null===F||void 0===F?void 0:F.length)&&void 0!==t?t:0)>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(l.Tooltip,{title:Object(c.t)("\u60a8\u6ca1\u6709 \u300c\u7f16\u8f91\u4e8b\u9879\u300d \u7684\u6743\u9650\uff0c\u65e0\u6cd5\u8fdb\u884c\u64cd\u4f5c\u3002"),visible:fe},r.a.createElement("div",{className:i()(re.a.batchBtn,re.a.batchModify,!ve&&re.a.disableModify),onClick:function(){ve&&$(!0)},onMouseEnter:function(){pe(!ve)},onMouseLeave:function(){pe(!1)}},r.a.createElement("div",{className:re.a.iconModify}),Object(c.t)("\u4fee\u6539")))),r.a.createElement("div",{className:i()([re.a.batchBtn,re.a.batchCancel]),onClick:ye},Object(c.t)("\u53d6\u6d88")))),Z&&r.a.createElement(y,{projectId:null!==(a=null===v||void 0===v?void 0:v.id)&&void 0!==a?a:0,showModal:Z,setShowModal:K,selectedCodes:F,onDeleteComplete:N}),X&&r.a.createElement(Q,{globalKey:f,projectName:null!==(o=null===v||void 0===v?void 0:v.name)&&void 0!==o?o:"",projectId:null!==(s=null===v||void 0===v?void 0:v.id)&&void 0!==s?s:0,showModal:X,setShowModal:$,selectedCodes:F,selectedRequirements:B,selectedIssueTypeIds:Ee,onModifyComplete:function(){ye(),N()},setFailedDetail:le,setShowFailedDetailModal:ue,inProgram:q,issueType:G}),se&&ie&&r.a.createElement(ee,{showModal:se,setShowModal:ue,failedDetail:ie})))})))},Th6D:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("bWfx"),a("f3/d"),a("CX2u"),a("Btvt"),a("VRzm"),a("0l/t");var o=n(a("RIqP")),i=n(a("lwsE")),l=n(a("W8MJ")),c=n(a("7W2i")),s=n(a("a1gu")),u=n(a("Nsbk")),d=a("mVeg"),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=T(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=n(a("17x9")),m=n(a("yZ+p")),v=n(a("gp0q")),h=a("7FZc"),g=n(a("O9Lt")),E=n(a("qPyV")),y=n(a("sEfC")),b=a("V0lW"),I=n(a("K2gz")),S=n(a("CQ/0"));function T(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(T=function(e){return e?a:t})(e)}function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var C={EPIC:(0,d.t)("\u53f2\u8bd7"),REQUIREMENT:(0,d.t)("\u9700\u6c42"),DEFECT:(0,d.t)("\u7f3a\u9677"),MISSION:(0,d.t)("\u4efb\u52a1"),SUBTASK:(0,d.t)("\u5b50\u5de5\u4f5c\u9879"),RISK:(0,d.t)("\u98ce\u9669"),WORK_ITEM:(0,d.t)("\u5de5\u4f5c\u9879")},O=function(e){(0,c.default)(a,e);var t=w(a);function a(){var e;(0,i.default)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={expanded:!1,selecting:!1,dataInited:!1,dataFetching:!1,members:[],page:1,hasNext:!0,searchText:"",searchResult:[],searchResultPage:1,searchResultHasNext:!0},e.listRef=f.default.createRef(),e.toggleExpand=function(){e.state.expanded?e.closePanel():e.openPanel()},e.openPanel=function(){e.setState({expanded:!0}),document.addEventListener("click",e.closePanel)},e.closePanel=function(){e.setState({expanded:!1,selecting:!1}),document.removeEventListener("click",e.closePanel)},e.handleToggleSelect=function(t){e.setState({selecting:t})},e.stopPropagation=function(e){e.nativeEvent.stopImmediatePropagation()},e.handleChange=function(t){var a=e.props,n=a.onChange,r=a.action;if("function"===typeof n){var i=e.props.watchers,l=(0,o.default)(i),c=i.map((function(e){return e.id})),s=c.indexOf(t.id);if("create"===r)return s>-1?(l.splice(s,1),void n(l)):void n([].concat((0,o.default)(l),[t]));if(s>-1)return c.splice(s,1),void n(c);n([t.id])}},e.scrollHandler=function(){if(e.listRef&&e.listRef.current){var t=e.listRef.current.scrollTop;e.listRef.current.scrollHeight-t-e.listRef.current.clientHeight<=4&&e.loadMore()}},e.loadMore=function(){e.state.searchText?e.searchData():e.loadData()},e.handleSearchTextChange=function(t){e.setState({searchText:t.target.value},(function(){e.state.searchText&&e.searchData(!0)}))},e.formatDropdownItem=function(e){return e.map((function(e){return{id:e.user_id,value:e.user_id,text:e.name,name:e.name,media:e.avatar,avatar:e.avatar,pinyin:e.name_pinyin,isProjectMember:!0}}))},e.formatSearchresult=function(e,t){return e.map((function(e){return{id:e.id,value:e.id,text:e.name,name:e.name,media:e.avatar,avatar:e.avatar,pinyin:e.namePinyin,isProjectMember:!!e.isProjectMember||t}}))},e.loadData=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=e.state,n=a.hasNext,r=a.dataFetching,o=a.page,i=a.members,l=e.props.projectID;!t&&!n||r||(e.setState({dataFetching:!0}),(0,b.getProjectMembers)(l,o,20).then((function(a){var n=a.data,r=n.list,l=n.totalPage,c=e.formatDropdownItem(r);e.setState({dataInited:!0}),e.setState({members:t?c:(0,E.default)(i.concat(c),"id")}),o<l?e.setState({page:o+1}):e.setState({hasNext:!1})})).finally((function(){e.setState({dataFetching:!1})})))},e.searchData=(0,y.default)((function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=e.state,n=a.searchResultHasNext,r=a.dataFetching,o=a.searchResultPage,i=a.searchResult,l=a.searchText,c=e.props.projectID;!t&&!n||r||(e.setState({dataFetching:!0}),(0,b.fetchTeamMembers)(c,t?1:o,20,l,!0,!1).then((function(a){var n=a.data,r=n.list,l=n.totalPage,c=e.formatSearchresult(r);t?(e.setState({searchResult:(0,E.default)([].concat(c),"id")}),1<l?(e.setState({searchResultPage:2}),e.setState({searchResultHasNext:!0})):e.setState({searchResultHasNext:!1})):(e.setState({searchResult:(0,E.default)(i.concat(c),"id")}),o<l?e.setState({searchResultPage:o+1}):e.setState({searchResultHasNext:!1}))})).finally((function(){e.setState({dataFetching:!1})})))}),300),e}return(0,l.default)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.expanded,n=t.selecting,r=this.props,o=r.watchers,i=r.user,l=r.suffixText,c=r.showTooltip,s=r.type,u=o.some((function(e){return e.id===i.id}));return f.default.createElement("div",{className:S.default.wrapper},c?f.default.createElement("div",{className:(0,I.default)(S.default.trigger,a?S.default.triggerExpanded:"")},f.default.createElement(h.TooltipTrigger,{title:u?"".concat((0,d.t)("\u53d6\u6d88\u5173\u6ce8")):"".concat((0,d.t)("\u5173\u6ce8\u8be5")).concat(C[s])},f.default.createElement("div",{className:(0,I.default)(S.default.triggerIcon,u?S.default.triggerIconBlue:""),onClick:function(){e.handleChange(i)}})),f.default.createElement("div",{className:(0,I.default)(S.default.triggerNumbers,a?S.default.expanded:""),onClick:this.toggleExpand},o.length," ",l||(0,d.t)("\u4eba\u5173\u6ce8"),f.default.createElement("div",{className:S.default.cartDown}))):f.default.createElement("div",{className:(0,I.default)(S.default.trigger,a?S.default.triggerExpanded:"")},f.default.createElement("div",{className:(0,I.default)(S.default.triggerIcon,u?S.default.triggerIconBlue:""),onClick:function(){e.handleChange(i)}}),f.default.createElement("div",{className:(0,I.default)(S.default.triggerNumbers,a?S.default.expanded:""),onClick:this.toggleExpand},o.length," ",l||(0,d.t)("\u4eba\u5173\u6ce8"),f.default.createElement("div",{className:S.default.cartDown}))),a&&f.default.createElement("div",{className:(0,I.default)(S.default.box,n?S.default.hasNoTopPadding:""),onClick:this.stopPropagation},n?this.renderSelectLists():this.renderWatcherLists()))}},{key:"renderSelectLists",value:function(){var e=this,t=this.state,a=t.searchText,n=t.members,r=t.searchResult,o=t.dataFetching,i=this.props.watchers,l=a?r:n,c=l.filter((function(e){return e.isProjectMember})),s=l.filter((function(e){return!1===e.isProjectMember}));return f.default.createElement("div",null,f.default.createElement("div",{className:S.default.selectLine,onClick:function(){return e.handleToggleSelect(!1)}},f.default.createElement("div",{className:S.default.arrowIcon}),f.default.createElement("div",{className:S.default.selectLineText},(0,d.t)("\u6dfb\u52a0\u5173\u6ce8\u4eba"))),f.default.createElement("div",{className:S.default.inputBox},f.default.createElement(m.default,{value:a,className:S.default.searchInput,onChange:this.handleSearchTextChange,suffix:a?f.default.createElement("div",{className:S.default.searchClear,onClick:function(){return e.setState({searchText:""})}}):null,prefix:f.default.createElement("div",{className:S.default.searchIcon}),placeholder:(0,d.t)("\u641c\u7d22\u5e76\u6dfb\u52a0\u5173\u6ce8\u4eba"),autoFocus:!0})),f.default.createElement("div",{className:S.default.members,ref:this.listRef,onScroll:this.scrollHandler},!o&&c.length<1&&s.length>0&&f.default.createElement("div",{className:(0,I.default)(S.default.watcher,S.default.empty)},(0,d.t)("\u65e0\u5339\u914d\u7684\u7814\u53d1\u7a7a\u95f4\u6210\u5458")),c.map((function(t){return f.default.createElement("div",{className:S.default.watcher,key:t.id,onClick:function(){return e.handleChange(t)}},f.default.createElement(v.default,{size:"tiny",src:t.media,className:S.default.avatar}),f.default.createElement("div",{className:S.default.watcherName,title:t.name},t.name),i.some((function(e){return e.id===t.id}))&&f.default.createElement("div",{className:S.default.memberSelected}))})),s.length>0&&f.default.createElement("div",{className:S.default.divider}),s.length>0&&f.default.createElement("div",{className:S.default.sectionTitle},(0,d.t)("\u7814\u53d1\u7a7a\u95f4\u5916\u6210\u5458")),s.map((function(t){return f.default.createElement("div",{className:S.default.watcher,key:t.id,onClick:function(){return e.handleChange(t)}},f.default.createElement(v.default,{size:"tiny",src:t.media,className:S.default.avatar}),f.default.createElement("div",{className:S.default.watcherName,title:t.name},t.name),i.some((function(e){return e.id===t.id}))&&f.default.createElement("div",{className:S.default.memberSelected}))})),o&&f.default.createElement(g.default,{show:!0})))}},{key:"renderWatcherLists",value:function(){var e=this,t=this.props,a=t.watchers,n=t.user,r=t.type,o=t.readOnly,i=a.some((function(e){return e.id===n.id}));return f.default.createElement("div",null,i?f.default.createElement("div",{className:S.default.boxLine,onClick:function(){e.handleChange(n)}},f.default.createElement("div",{className:S.default.unwatchIcon}),f.default.createElement("div",{className:S.default.boxLineText},(0,d.t)("\u53d6\u6d88\u5173\u6ce8"))):f.default.createElement("div",{className:S.default.boxLine,onClick:function(){e.handleChange(n)}},f.default.createElement("div",{className:S.default.watchIcon}),f.default.createElement("div",{className:S.default.boxLineText},(0,d.t)("\u5173\u6ce8\u8be5"),C[r])),!o&&f.default.createElement("div",{className:S.default.boxLine,onClick:function(){return e.handleToggleSelect(!0)}},f.default.createElement("div",{className:S.default.addIcon}),f.default.createElement("div",{className:S.default.boxLineText},(0,d.t)("\u6dfb\u52a0\u5173\u6ce8\u4eba")),f.default.createElement("div",{className:S.default.directionIcon})),!!a.length&&f.default.createElement("div",{className:S.default.watchersNumber},a.length," ",(0,d.t)("\u4f4d\u6210\u5458\u6b63\u5728\u5173\u6ce8")),a.length?f.default.createElement("ul",{className:S.default.watchers},a.map((function(t){return f.default.createElement("li",{className:S.default.watcher,key:t.id},f.default.createElement(v.default,{size:"tiny",src:t.media,className:S.default.avatar}),f.default.createElement("div",{className:S.default.watcherName,title:t.name},t.name),!o&&f.default.createElement("div",{className:S.default.watcherRemove,onClick:function(){return e.handleChange(t)}}))}))):f.default.createElement("div",{className:S.default.boxEmpty},f.default.createElement("div",{className:S.default.icon}),(0,d.t)("\u8fd8\u6ca1\u5173\u6ce8\u8be5"),C[r]))}},{key:"componentDidUpdate",value:function(e,t){t.selecting||!this.state.selecting||this.state.dataInited||this.loadData(),e.projectID!==this.props.projectID&&this.loadData(!0),t.selecting&&!this.state.selecting&&this.setState({searchResult:[],searchText:"",searchResultPage:1,searchResultHasNext:!0})}}]),a}(f.Component);O.propTypes={type:p.default.string,projectID:p.default.number,watchers:p.default.array,onChange:p.default.func,user:p.default.object,action:p.default.string,suffixText:p.default.string,showTooltip:p.default.bool,readOnly:p.default.bool,handleSelfChange:p.default.func},O.defaultProps={type:C.REQUIREMENT};var N=O;t.default=N},Tjbd:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=n(a("fQkU")),v=a("1qdz");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E={ADD:(0,u.t)("\u4e0a\u4f20"),REMOVE:(0,u.t)("\u5220\u9664")},y=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item;return f.default.createElement("div",{className:v.listItem,key:e.id},f.default.createElement("div",{className:v.dot}),f.default.createElement("div",{className:v.content},f.default.createElement(m.default,{className:"mr-10 ".concat(v.icon)}),f.default.createElement("span",{className:v.user},e.creator.name),e.issueLog&&1===e.issueLog.old?"\u3010\u6e90\u3011":"",f.default.createElement("span",null,E[e.issueLog.action],(0,u.t)("\u4e86\u9644\u4ef6")),f.default.createElement("span",{className:"ml-10 ".concat(v.moreDot),title:e.issueLog.content.name},e.issueLog.content.name),f.default.createElement("span",{className:v.time},(0,p.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=y,y.propTypes={item:d.default.object}},"U+q1":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+ZmlsZS1pY29ucy8yNHB4L251bWJlcnM8L3RpdGxlPgogICAgPGRlZnM+CiAgICAgICAgPHBhdGggZD0iTTUuMjUsMiBMMTUsMiBMMTUsMiBMMjEsOCBMMjEsMTkuNzUgQzIxLDIwLjk5MjY0MDcgMTkuOTkyNjQwNywyMiAxOC43NSwyMiBMNS4yNSwyMiBDNC4wMDczNTkzMSwyMiAzLDIwLjk5MjY0MDcgMywxOS43NSBMMyw0LjI1IEMzLDMuMDA3MzU5MzEgNC4wMDczNTkzMSwyIDUuMjUsMiBaIiBpZD0icGF0aC0xIj48L3BhdGg+CiAgICAgICAgPGZpbHRlciB4PSItOC4zJSIgeT0iLTcuNSUiIHdpZHRoPSIxMTYuNyUiIGhlaWdodD0iMTE1LjAlIiBmaWx0ZXJVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIGlkPSJmaWx0ZXItMiI+CiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjAiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVPZmZzZXQ+CiAgICAgICAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjAuNSIgaW49InNoYWRvd09mZnNldE91dGVyMSIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlR2F1c3NpYW5CbHVyPgogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgMCAwIDAgMC4wNSAwIiB0eXBlPSJtYXRyaXgiIGluPSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlQ29sb3JNYXRyaXg+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iSWNvbnMvRmlsZS8yNHB4L051bWJlcnMiPgogICAgICAgICAgICA8ZyBpZD0iUmVjdGFuZ2xlLUNvcHkiPgogICAgICAgICAgICAgICAgPHVzZSBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIxIiBmaWx0ZXI9InVybCgjZmlsdGVyLTIpIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iIzAyQTY1MSIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8cGF0aCBkPSJNMTYuMTI1LDE4IEMxNi4zMzIxMDY4LDE4IDE2LjUsMTguMTY3ODkzMiAxNi41LDE4LjM3NSBDMTYuNSwxOC41ODIxMDY4IDE2LjMzMjEwNjgsMTguNzUgMTYuMTI1LDE4Ljc1IEw3LjEyNSwxOC43NSBDNi45MTc4OTMyMiwxOC43NSA2Ljc1LDE4LjU4MjEwNjggNi43NSwxOC4zNzUgQzYuNzUsMTguMTY3ODkzMiA2LjkxNzg5MzIyLDE4IDcuMTI1LDE4IEwxNi4xMjUsMTggWiBNOSwxNS43NSBMOSwxNy4yNSBMNy41LDE3LjI1IEw3LjUsMTUuNzUgTDksMTUuNzUgWiBNMTEuMjUsMTQuMjUgTDExLjI1LDE3LjI1IEw5Ljc1LDE3LjI1IEw5Ljc1LDE0LjI1IEwxMS4yNSwxNC4yNSBaIE0xMy41LDExLjI1IEwxMy41LDE3LjI1IEwxMiwxNy4yNSBMMTIsMTEuMjUgTDEzLjUsMTEuMjUgWiBNMTUuNzUsMTIuNzUgTDE1Ljc1LDE3LjI1IEwxNC4yNSwxNy4yNSBMMTQuMjUsMTIuNzUgTDE1Ljc1LDEyLjc1IFoiIGlkPSJDb21iaW5lZC1TaGFwZSIgZmlsbD0iI0YyRjRGNiIgb3BhY2l0eT0iMC45MDAwMDAwMzYiPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggZD0iTTE1LDIgTDIxLDggTDE3LjI1LDggQzE2LjAwNzM1OTMsOCAxNSw2Ljk5MjY0MDY5IDE1LDUuNzUgTDE1LDIgTDE1LDIgWiIgaWQ9IlJlY3RhbmdsZS1Db3B5LTMiIGZpbGw9IiNGRkZGRkYiIG9wYWNpdHk9IjAuNDAwMDAwMDA2Ij48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},U1hV:function(e,t,a){e.exports={placeHolder:"placeHolder-K70zOPPvph","btn-areas":"btn-areas-1HDRbaJhqE",btnAreas:"btn-areas-1HDRbaJhqE",btn:"btn-cRaQv4zMdD","btn-disabled":"btn-disabled-3dGUzuvfhm",btnDisabled:"btn-disabled-3dGUzuvfhm","icon-link-bug":"icon-link-bug-3BxcS4bRII",iconLinkBug:"icon-link-bug-3BxcS4bRII","icon-test-case":"icon-test-case-Ps7rUFHKdI",iconTestCase:"icon-test-case-Ps7rUFHKdI","icon-work-item":"icon-work-item-39Hh2udAQi",iconWorkItem:"icon-work-item-39Hh2udAQi","icon-subtask":"icon-subtask-2YW3OC57DX",iconSubtask:"icon-subtask-2YW3OC57DX","icon-decompose-requirement":"icon-decompose-requirement-1WijtKkVzi",iconDecomposeRequirement:"icon-decompose-requirement-1WijtKkVzi","icon-decompose-task":"icon-decompose-task-2FqAQ1HeQ0",iconDecomposeTask:"icon-decompose-task-2FqAQ1HeQ0","btn-wrap":"btn-wrap-38OnlmxWNg",btnWrap:"btn-wrap-38OnlmxWNg","icon-issue-review":"icon-issue-review-1LBfLNX_zt",iconIssueReview:"icon-issue-review-1LBfLNX_zt","icon-ecology-setting":"icon-ecology-setting-10OAyir8qe",iconEcologySetting:"icon-ecology-setting-10OAyir8qe",image:"image-17s6GsbkLt",icon:"icon-2DQ98hbJnT","icon-edit":"icon-edit-2tUwXBFqx9",iconEdit:"icon-edit-2tUwXBFqx9","icon-upload":"icon-upload-EH1p7967mJ",iconUpload:"icon-upload-EH1p7967mJ","icon-add-issues":"icon-add-issues-37cAGuVFOY",iconAddIssues:"icon-add-issues-37cAGuVFOY","icon-relation":"icon-relation-1oLYjoNVPd",iconRelation:"icon-relation-1oLYjoNVPd","icon-reference":"icon-reference-36yXJ0BMPD",iconReference:"icon-reference-36yXJ0BMPD","icon-code":"icon-code-2SHt_5Ibqu",iconCode:"icon-code-2SHt_5Ibqu","icon-more":"icon-more-2oHuMiYQCb",iconMore:"icon-more-2oHuMiYQCb","icon-redpack":"icon-redpack-1S9346m6HK",iconRedpack:"icon-redpack-1S9346m6HK","icon-relation-requirement":"icon-relation-requirement-3R5CHK3Cci",iconRelationRequirement:"icon-relation-requirement-3R5CHK3Cci","wait-icon":"wait-icon-2h71M9o1mv",waitIcon:"wait-icon-2h71M9o1mv","margin-right":"margin-right-3-M4K6qDj3",marginRight:"margin-right-3-M4K6qDj3","received-button":"received-button-3uBqDRQAR8",receivedButton:"received-button-3uBqDRQAR8",reward:"reward-CHuLtH_ohO",money:"money-184V1anqob",word:"word-3fO4e4bMcT",received:"received-1XuICsXrKs",disabled:"disabled-LH4FDfamQp","dropdown-wrapper":"dropdown-wrapper-9RtDFywNY-",dropdownWrapper:"dropdown-wrapper-9RtDFywNY-","more-wrap":"more-wrap-3lWYaedSSo",moreWrap:"more-wrap-3lWYaedSSo","more-item":"more-item-3jJ7-XGoFQ",moreItem:"more-item-3jJ7-XGoFQ","more-icon-link-bug":"more-icon-link-bug-3ck9VBBL5G",moreIconLinkBug:"more-icon-link-bug-3ck9VBBL5G","more-icon-test-case":"more-icon-test-case-3u6sIcERz8",moreIconTestCase:"more-icon-test-case-3u6sIcERz8","more-icon-issue-review":"more-icon-issue-review-PkY2AIOuV9",moreIconIssueReview:"more-icon-issue-review-PkY2AIOuV9","more-icon-work-item":"more-icon-work-item-YrPBBqF_6x",moreIconWorkItem:"more-icon-work-item-YrPBBqF_6x","more-icon":"more-icon-257amr5fmV",moreIcon:"more-icon-257amr5fmV","more-icon-code":"more-icon-code-mzZyEpnBNT",moreIconCode:"more-icon-code-mzZyEpnBNT","more-icon-relation":"more-icon-relation-DlmwjmtZgc",moreIconRelation:"more-icon-relation-DlmwjmtZgc","more-icon-reference":"more-icon-reference-3jIXVkxESO",moreIconReference:"more-icon-reference-3jIXVkxESO","more-icon-ecology-setting":"more-icon-ecology-setting-1MWjjuiDbo",moreIconEcologySetting:"more-icon-ecology-setting-1MWjjuiDbo","modal-title":"modal-title-1ewie_J3vh",modalTitle:"modal-title-1ewie_J3vh","word-6":"word-6-AKB4dOEnDi",word6:"word-6-AKB4dOEnDi"}},UVRA:function(e,t,a){"use strict";a.r(t);var n=a("mVeg"),r=a("cDcd"),o=a.n(r),i=a("sftu"),l=a.n(i),c=a("246l"),s=a.n(c),u=a("yZ+p"),d=a.n(u),f=a("df5+"),p=a.n(f),m=a("IZ34"),v=a("xgZS"),h=a("f0Wu"),g=a.n(h),E=a("K2gz"),y=a.n(E),b=a("AW+C"),I=a.n(b),S=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},T=function(e){var t=e.show,a=e.isEdit,i=e.onHide,c=e.meeting,u=e.onSubmit,f=S(Object(r.useState)(!1),2),h=f[0],E=f[1],b=S(Object(r.useState)(""),2),T=b[0],w=b[1],C=S(Object(r.useState)(""),2),O=C[0],N=C[1],P=S(Object(r.useState)(g()()),2),j=P[0],D=P[1],k=S(Object(r.useState)(g()().add(1,"h")),2),R=k[0],M=k[1];return Object(r.useEffect)((function(){a||(w(""),N(""),E(!1),D(g()()),M(g()().add(1,"h"))),a&&void 0!==c&&(w(c.subject),E(""!==c.password),N(c.password),D(g()(c.startTime)),M(g()(c.endTime)))}),[a]),o.a.createElement(l.a,{show:t,onHide:i,className:I.a.meetingModal},o.a.createElement("div",{className:I.a.modalBody},o.a.createElement("div",{className:I.a.title},a?Object(n.t)("\u4fee\u6539\u4f1a\u8bae"):Object(n.t)("\u9884\u8ba2\u4f1a\u8bae")),o.a.createElement("div",{className:I.a.row},o.a.createElement("div",{className:I.a.label},Object(n.t)("\u4f1a\u8bae\u4e3b\u9898"),o.a.createElement("span",{className:I.a.point},"*")),o.a.createElement("div",{className:I.a.content},o.a.createElement(d.a,{value:T,style:{width:"340px"},onChange:function(e){w(e.target.value)}}))),o.a.createElement("div",{className:y()(I.a.row)},o.a.createElement("div",{className:I.a.label},Object(n.t)("\u4f1a\u8bae\u65f6\u95f4"),o.a.createElement("span",{className:I.a.point},"*")),o.a.createElement("div",{className:I.a.content,onScroll:function(e){e.stopPropagation()}},o.a.createElement(p.a,{className:I.a.picker,clearable:!1,onChange:function(e){D(e)}},o.a.createElement("div",{className:I.a.time},j.format("MM/DD HH:mm"))),o.a.createElement("span",{className:I.a.gap},"-"),o.a.createElement(p.a,{className:I.a.picker,clearable:!1,onChange:function(e){M(e)}},o.a.createElement("div",{className:I.a.time},R.format("MM/DD HH:mm"))))),o.a.createElement("div",{className:y()(I.a.rowBorder)}),o.a.createElement("div",{className:y()(I.a.row,I.a.moreTop)},o.a.createElement("div",{className:I.a.label},Object(n.t)("\u5165\u4f1a\u5bc6\u7801")),o.a.createElement("div",{className:I.a.content},o.a.createElement(m.a,{className:I.a.checkbox,disabled:!1,checked:h,onChange:function(){N(""),E(!h)}}),o.a.createElement("span",{className:I.a.text},Object(n.t)("\u5f00\u542f\u4f1a\u8bae\u5bc6\u7801")),h&&o.a.createElement(d.a,{style:{width:"208px"},className:I.a.placeholder,value:O,placeholder:Object(n.t)("\u8f93\u5165 4-6 \u4f4d\u6570\u5b57\u5bc6\u7801"),onChange:function(e){N(e.target.value)}})))),o.a.createElement("div",{className:I.a.footer},o.a.createElement("div",{className:y()(s.a.newButton,s.a.primary,s.a.h32,I.a.confirm),onClick:function(){""!==T?h&&""===O?Object(v.warning)(Object(n.t)("\u8bf7\u8f93\u5165\u4f1a\u8bae\u5bc6\u7801")):!h||[4,5,6].includes(O.length)?u&&u({subject:T,startedAt:j.format("YYYY-MM-DD HH:mm:ss"),endedAt:R.format("YYYY-MM-DD HH:mm:ss"),password:O}).then((function(e){if(null===e)w(""),N(""),E(!1);else if(void 0!==e.password&&N(""),void 0!==e.subject&&w(""),void 0!==e.tencent_meeting_need_auth){var t="/collaboration/api/oauth/meetings/bind?redirectTo=".concat(window.location.href);window.location.href=t}})):Object(v.warning)(Object(n.t)("\u8bf7\u8f93\u51654-6\u4f4d\u5bc6\u7801")):Object(v.warning)(Object(n.t)("\u8bf7\u8f93\u5165\u4f1a\u8bae\u4e3b\u9898"))}},a?Object(n.t)("\u4fee\u6539\u4f1a\u8bae"):Object(n.t)("\u9884\u8ba2")),o.a.createElement("div",{onClick:i,className:y()(s.a.newButton,s.a.default,s.a.h32,I.a.close)},Object(n.t)("\u53d6\u6d88"))))},w=a("P5Jw"),C=a.n(w),O=a("sMiW"),N=a.n(O),P=a("FaIw"),j=function(e){var t=e.show,a=e.meeting,r=e.onHide,i=a&&""!==a.password?"".concat(Object(n.t)("\u4f1a\u8bae\u5bc6\u7801\uff1a")).concat(a.password):"",c=void 0!==a?"".concat(a.creator.name," ").concat(Object(n.t)("\u9080\u8bf7\u60a8\u53c2\u52a0\u817e\u8baf\u4f1a\u8bae"),"\n").concat(Object(n.t)("\u4f1a\u8bae\u4e3b\u9898\uff1a")).concat(a.subject,"\n").concat(Object(n.t)("\u4f1a\u8bae\u65f6\u95f4\uff1a")).concat(Object(P.timeFormat)(a.startTime,Object(n.t)("MM\u6708DD\u65e5"))," ").concat(Object(P.timeFormat)(a.startTime,"HH:mm")," - ").concat(Object(P.timeFormat)(a.endTime,"HH:mm"),"\n\n").concat(Object(n.t)("\u70b9\u51fb\u94fe\u63a5\u5165\u4f1a\uff0c\u6216\u6dfb\u52a0\u81f3\u4f1a\u8bae\u5217\u8868"),"\n").concat(a.joinUrl,"\n\n").concat(Object(n.t)("\u4f1a\u8bae ID\uff1a")).concat(a.meetingCode,"\n").concat(i):"";return o.a.createElement(l.a,{show:t,onHide:r,className:N.a.inviteModal,closeButton:!0},o.a.createElement("div",{className:N.a.modalBody},o.a.createElement("div",{className:N.a.title},Object(n.t)("\u4f1a\u8bae\u9080\u8bf7")),o.a.createElement("div",{className:N.a.row},o.a.createElement("pre",{className:N.a.content},c))),o.a.createElement("div",{className:N.a.footer},o.a.createElement(C.a,{text:c,onCopy:function(){window.console.log("copy")}},o.a.createElement("div",{className:y()(s.a.newButton,s.a.primary,s.a.h32,N.a.confirm),onClick:function(){Object(v.success)(Object(n.t)("\u590d\u5236\u6210\u529f"))}},Object(n.t)("\u590d\u5236"))),o.a.createElement("div",{className:y()(s.a.newButton,s.a.default,s.a.h32,N.a.close),onClick:r},Object(n.t)("\u5173\u95ed"))))},D=a("zmh9"),k=a.n(D),R=a("VoZT"),M=a.n(R),A=function(e){var t=e.show,a=e.onConfirm,r=e.onHide;return o.a.createElement(l.a,{show:t,onHide:r,className:M.a.endModal},o.a.createElement("div",{className:M.a.modalBody},o.a.createElement("div",{className:M.a.title},Object(n.t)("\u53d6\u6d88\u4f1a\u8bae")),o.a.createElement("div",{className:M.a.row},o.a.createElement("p",null,Object(n.t)("\u60a8\u662f\u4f1a\u8bae\u7684\u521b\u5efa\u4eba\uff0c\u53d6\u6d88\u540e\u5176\u4ed6\u6210\u5458\u5c06\u65e0\u6cd5\u5165\u4f1a")))),o.a.createElement("div",{className:M.a.footer},o.a.createElement(k.a,{type:"danger",onClick:a},Object(n.t)("\u786e\u8ba4\u53d6\u6d88")),o.a.createElement(k.a,{empty:!0,onClick:r,className:M.a.close},Object(n.t)("\u518d\u60f3\u60f3"))))},L=a("CzLb"),x=a.n(L),_=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},F="MEETING_STATE_INIT",W=function(e){var t=e.className,a=e.children,i=e.onSelect,l=e.status,c=_(Object(r.useState)(!1),2),s=c[0],u=c[1],d=_(Object(r.useState)([]),2),f=d[0],p=d[1];return Object(r.useEffect)((function(){var e=l===F?[{value:"MODIFY",txt:Object(n.t)("\u4fee\u6539\u4f1a\u8bae"),type:""},{value:"CANCEL",txt:Object(n.t)("\u53d6\u6d88\u4f1a\u8bae"),type:"danger"}]:[{value:"CANCEL",txt:Object(n.t)("\u53d6\u6d88\u4f1a\u8bae"),type:"danger"}];p(e)}),[]),Object(r.useEffect)((function(){return document.addEventListener("click",(function(){u(!1)})),function(){document.removeEventListener("click",(function(){u(!1)}))}}),[]),o.a.createElement("div",{className:y()(x.a.container,t)},a,o.a.createElement("div",{className:y()(x.a.more,s&&x.a.expanded),onClick:function(e){e.nativeEvent.stopImmediatePropagation(),u(!s)}}),s&&o.a.createElement("div",{className:x.a.panel},!!f.length&&f.map((function(e,t){return o.a.createElement("div",{key:t,className:y()(x.a.menu,x.a[e.type]),onClick:function(){i&&i(e.value),u(!1)}},e.txt)}))))},B=a("Nbs+"),H=a.n(B),U=a("sWxF"),Y=a("Z4vw"),q=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},G="MEETING_STATE_STARTED";t.default=function(e){var t=e.user,a=e.projectName,i=e.issueCode,l=e.isAddDetailClassName,c=e.meetingCallback,s=q(Object(r.useState)(!1),2),u=s[0],d=s[1],f=q(Object(r.useState)(!1),2),p=f[0],m=f[1],h=q(Object(r.useState)(!1),2),g=h[0],E=h[1],b=q(Object(r.useState)(void 0),2),I=b[0],S=b[1],w=q(Object(r.useState)(!1),2),C=w[0],O=w[1],N=function(e){var t=e.data;if(1===e.code)throw e;return S(t),O(!1),d(!1),c&&c(t),null},D=function(e){var t=e.code,a=e.msg;if(20001!==t)return Object(v.danger)(Object(Y.getErrorMessage)(a)),a;var n="/collaboration/api/oauth/meetings/bind?redirectTo=".concat(window.location.href);window.location.href=n},k=function(e){var t=e.msg;return O(!0),t};return Object(r.useEffect)((function(){Object(U.getTencentMeetingDetail)(a,i).then((function(e){S(e.data),c&&c(e.data)})).catch((function(){}))}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(T,{show:u,isEdit:C,meeting:I,onHide:function(){d(!1)},onSubmit:function(e){var t=e.subject,n=e.startedAt,r=e.endedAt,o=e.password;return C?Object(U.editTencentMeeting)(a,I.meetingId,i,t,n,r,o).then(N).catch(k):Object(U.createTencentMeeting)(a,i,t,n,r,o).then(N).catch(D)}}),o.a.createElement(j,{show:p,meeting:I,onHide:function(){m(!1)}}),o.a.createElement(A,{show:g,onConfirm:function(){Object(U.endTencentMeeting)(a,I.meetingId).then((function(){Object(v.success)(Object(n.t)("\u53d6\u6d88\u4f1a\u8bae\u6210\u529f")),O(!1),E(!1),S(void 0),c&&c(void 0)}))},onHide:function(){E(!1)}}),o.a.createElement("div",{className:y()(H.a.issueProperty,l&&H.a.isDetail,H.a.meetingWrapper)},o.a.createElement("label",{className:y()(H.a.issuePropertyLabel,l&&H.a.isDetail)},Object(n.t)("\u817e\u8baf\u4f1a\u8bae")),o.a.createElement("div",{className:H.a.meetingInfo},void 0!==I&&o.a.createElement("div",{className:H.a.meetingTime},Object(P.timeFormat)(I.startTime,"MM\u6708DD\u65e5"),o.a.createElement("span",{className:H.a.time},Object(P.timeFormat)(I.startTime,"HH:mm")," -"," ",Object(P.timeFormat)(I.endTime,"HH:mm"))),void 0!==I&&o.a.createElement("div",{className:H.a.meetingStatus},o.a.createElement("div",{className:y()(H.a.statusTag,I.status===G?H.a.processing:H.a.waiting)},I.status===G?Object(n.t)("\u8fdb\u884c\u4e2d"):Object(n.t)("\u5f85\u5f00\u59cb"))),o.a.createElement("div",{className:H.a.bookingBar},void 0===I?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:y()(H.a.bookingBtn,H.a.fastMeeting,H.a.hover),onClick:function(){Object(U.createSimpleTencentMeeting)(a,i).then((function(e){e.data.joinUrl&&window.open(e.data.joinUrl),N(e)})).catch(D)}},o.a.createElement("div",{className:y()(H.a.icon,H.a.meeting)}),Object(n.t)("\u5feb\u901f\u4f1a\u8bae")),o.a.createElement("div",{className:y()(H.a.bookingBtn,H.a.hover),onClick:function(){O(!1),d(!0)}},o.a.createElement("div",{className:y()(H.a.icon,H.a.booking)}),Object(n.t)("\u9884\u5b9a\u4f1a\u8bae"))):o.a.createElement(o.a.Fragment,null,I.creatorId===t.id?o.a.createElement(W,{className:y()(H.a.bookingBtn,H.a.enterMeeting),status:I.status,onSelect:function(e){"CANCEL"===e&&E(!0),"MODIFY"===e&&(d(!0),O(!0))}},o.a.createElement("div",{className:y()(H.a.btn,H.a.hover),onClick:function(){window.open(I.joinUrl,"_blank")}},o.a.createElement("div",{className:y()(H.a.icon,H.a.meeting)}),Object(n.t)("\u8fdb\u5165\u4f1a\u8bae"))):o.a.createElement("div",{className:y()(H.a.bookingBtn,H.a.fastMeeting,H.a.hover),onClick:function(){window.open(I.joinUrl,"_blank")}},o.a.createElement("div",{className:y()(H.a.icon,H.a.meeting)}),Object(n.t)("\u8fdb\u5165\u4f1a\u8bae")),o.a.createElement("div",{className:y()(H.a.bookingBtn,H.a.invite,H.a.hover),onClick:function(){m(!0)}},Object(n.t)("\u590d\u5236\u9080\u8bf7")))))))}},VI42:function(e,t,a){e.exports={"tab-wrapper":"tab-wrapper-193I-srxmt",tabWrapper:"tab-wrapper-193I-srxmt",tab:"tab-xCf-8V4a8y",active:"active-39PB1TNpqH"}},VVg6:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=n(a("m5Xe")),v=a("1qdz");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e,t,a,n,r=this.props.item;return f.default.createElement("div",{className:v.listItem,key:r.id},f.default.createElement("div",{className:v.dot}),f.default.createElement("div",{className:v.content},f.default.createElement(m.default,{className:"mr-10 ".concat(v.icon)}),null!==r&&void 0!==r&&null!==(e=r.issueLog)&&void 0!==e&&null!==(t=e.content)&&void 0!==t&&t.sys_auto_trans?f.default.createElement(f.default.Fragment,null,f.default.createElement("span",null,"\u56e0\u7a7a\u95f4\u6545\u4e8b\u4ef7\u503c\u6d41\u8c03\u6574\uff0c\u72b6\u6001\u88ab\u81ea\u52a8\u6620\u5c04\u4e3a",null===r||void 0===r||null===(a=r.issueLog)||void 0===a||null===(n=a.content)||void 0===n?void 0:n.sys_auto_trans)):f.default.createElement(f.default.Fragment,null,f.default.createElement("span",{className:v.user},r.creator.name),r.issueLog&&1===r.issueLog.old?"\u3010\u6e90\u3011":"",f.default.createElement("span",null,(0,u.t)("\u66f4\u65b0\u4e86\u5904\u7406\u72b6\u6001\u4e3a")),f.default.createElement("span",{className:"ml-10"},r.issueLog.content.name)),f.default.createElement("span",{className:v.time},(0,p.timeFormat)(r.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=E,E.propTypes={item:d.default.object}},VoZT:function(e,t,a){e.exports={"end-modal":"end-modal-1zZam42Uct",endModal:"end-modal-1zZam42Uct","modal-body":"modal-body-3O3Hbx-2Ix",modalBody:"modal-body-3O3Hbx-2Ix",row:"row-2WW2hZRzLi",content:"content-1RKpRVPJYu",title:"title-E6hD_kG13S",footer:"footer-LIVHjzTnRD",close:"close-2aWNikANaT"}},"W0/N":function(e,t,a){"use strict";a.r(t);var n=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},r=function(e,t,a){if(a||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))};t.default=function(e){var t=e.elemInOrder,a=e.onRenderItem,o=r([],n(t),!1),i=function(e){var t={};return e.forEach((function(a,n){t[a]=n>0?e[n-1]:null})),t}(t),l=function(e){var t={};return e.forEach((function(e){t[e]=!1})),t}(t),c={};function s(){if(!(0===o.length)){var e=!1;t.filter((function(e){return-1!==o.indexOf(e)})).forEach((function(t){if(!e){var n=i[t];if(c[t]&&(!n||n&&-1===o.indexOf(n))){var r=0===(o=o.filter((function(e){return e!==t}))).length;e=!0,l[t]=!0,a(t,r,s,l)}}}))}}return function(e){c[e]=!0,s()}}},W7UB:function(e,t,a){e.exports={"out-resource":"out-resource-Wlg_1o9egE",outResource:"out-resource-Wlg_1o9egE",picker:"picker-1_ZOzmq04A","picker-btn":"picker-btn-2brY3Xnbya",pickerBtn:"picker-btn-2brY3Xnbya","is-expanded":"is-expanded-2mqEPQCwlr",isExpanded:"is-expanded-2mqEPQCwlr","select-arrow-wrapper":"select-arrow-wrapper-22TtqrMiI9",selectArrowWrapper:"select-arrow-wrapper-22TtqrMiI9","picker-option":"picker-option--FedJkqn9Z",pickerOption:"picker-option--FedJkqn9Z","picker-option-item":"picker-option-item-2ljhzDKs0N",pickerOptionItem:"picker-option-item-2ljhzDKs0N","picker-option-item-modao":"picker-option-item-modao-16C4wiOykH",pickerOptionItemModao:"picker-option-item-modao-16C4wiOykH","picker-option-item-codesign":"picker-option-item-codesign-G-5DI6P-Y_",pickerOptionItemCodesign:"picker-option-item-codesign-G-5DI6P-Y_",modao:"modao-1vkM1xeF_N","modao-title":"modao-title-2Bd5-M9VD6",modaoTitle:"modao-title-2Bd5-M9VD6","modao-des":"modao-des-2paxLRzbe3",modaoDes:"modao-des-2paxLRzbe3","modao-help-link":"modao-help-link-20D3B8XFNR",modaoHelpLink:"modao-help-link-20D3B8XFNR","modao-input-group":"modao-input-group-21FlYrsJBs",modaoInputGroup:"modao-input-group-21FlYrsJBs","modao-input-title":"modao-input-title-3BPWvapfW7",modaoInputTitle:"modao-input-title-3BPWvapfW7","modao-input-required":"modao-input-required-FmRqPVS8Ty",modaoInputRequired:"modao-input-required-FmRqPVS8Ty","button-group":"button-group-2IdPY61Y75",buttonGroup:"button-group-2IdPY61Y75","co-design-link":"co-design-link-sChFpx-G2D",coDesignLink:"co-design-link-sChFpx-G2D","co-design-header":"co-design-header-3kr17v-uk3",coDesignHeader:"co-design-header-3kr17v-uk3","co-design-title":"co-design-title-mW3qxLHglz",coDesignTitle:"co-design-title-mW3qxLHglz","co-design-footer":"co-design-footer-VE5MXuz-mZ",coDesignFooter:"co-design-footer-VE5MXuz-mZ",button:"button-2AzsRmNFVJ","button-confirm":"button-confirm-1nQMCHC7Lc",buttonConfirm:"button-confirm-1nQMCHC7Lc"}},W8YX:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d"),a("bWfx");var o=n(a("o0o1")),i=n(a("yXPU")),l=n(a("lwsE")),c=n(a("W8MJ")),s=n(a("7W2i")),u=n(a("a1gu")),d=n(a("Nsbk")),f=a("mVeg"),p=n(a("17x9")),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),v=a("FaIw"),h=n(a("74sH")),g=a("dtw8"),E=a("UGd4"),y=a("1qdz");function b(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(b=function(e){return e?a:t})(e)}function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var S=function(e){(0,s.default)(a,e);var t=I(a);function a(){var e;(0,l.default)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(){var t=(0,i.default)(o.default.mark((function t(a,n,r){var i,l;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.props.projectId,t.prev=1,a.preventDefault(),t.next=5,(0,E.getReleaseDetailsByCode)(i,n);case 5:l=t.sent,l.data.code&&window.open(r),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(1);case 12:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,a,n){return t.apply(this,arguments)}}(),e}return(0,c.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.item,n=t.projectPath;return m.default.createElement("div",{className:y.listItem,key:a.id},m.default.createElement("div",{className:y.dot}),m.default.createElement("div",{className:y.content},m.default.createElement(h.default,{className:"mr-10 ".concat(y.icon)}),m.default.createElement("span",{className:y.user},a.creator.name),m.default.createElement("span",null,(0,f.t)("\u4fee\u6539\u7248\u672c\u4e3a")),a.issueLog.content.releaseCodes.length>0?a.issueLog.content.releaseCodes.map((function(t,r){return m.default.createElement(g.Link,{key:t,className:"ml-10 ".concat(y.customAction," ").concat(y.moreDot),target:"_blank",onClick:function(a){e.handleClick(a,t,"".concat(n,"/releases/").concat(t,"/issues"))}},"#",t,"-",a.issueLog.content.releaseNames[r])})):m.default.createElement("span",{className:"ml-10"},(0,f.t)("\u7a7a")),m.default.createElement("span",{className:y.time},(0,v.timeFormat)(a.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(m.Component);t.default=S,S.propTypes={item:p.default.object,projectPath:p.default.string,projectId:p.default.number}},"WE/Q":function(e,t,a){"use strict";a.r(t);var n=a("cDcd"),r=a.n(n),o=a("qMwZ"),i=a.n(o),l=a("mVeg"),c=a("EyEP"),s=a.n(c),u=a("OajT"),d=a.n(u),f=a("k1Lc"),p=function(){return(p=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};t.default=d()((function(e){var t=e.sectionExpanded,a=e.autoToggleComment,n=e.SectionToggletrigger,o=e.currentProject,c=e.code,u=e.flashAnchor,d=e.markdown,m=e.onRemoveReference,v=e.citedSources,h=e.citingSources;return r.a.createElement("div",{className:i.a.wrapper},r.a.createElement("div",{className:s.a.header},r.a.createElement(n,null),r.a.createElement("div",{className:s.a.text},Object(l.t)("\u5f15\u7528\u8d44\u6e90")),r.a.createElement("div",{className:s.a.divider}),r.a.createElement("div",{className:s.a.add,onClick:function(){return a(c,!0)}})),t&&r.a.createElement("div",{className:i.a.body},r.a.createElement("div",{className:i.a.prev},r.a.createElement(f.ReferenceResource,p({title:"\u5f15\u7528",type:"CITE",dataSource:h},{currentProject:o,flashAnchor:u,markdown:d,onRemoveReference:m}))),r.a.createElement("div",{className:i.a.next},r.a.createElement(f.ReferenceResource,p({title:"\u88ab\u5f15\u7528",type:"CITED",dataSource:v},{currentProject:o,flashAnchor:u,markdown:d,onRemoveReference:m})))))}))},WKBZ:function(e,t,a){"use strict";a.r(t);var n=a("mVeg"),r=a("cDcd"),o=a.n(r),i=a("f3hV"),l=a.n(i),c=a("LSgY"),s=a.n(c),u=a("K2gz"),d=a.n(u),f=a("f0Wu"),p=a.n(f),m=a("5kKY"),v=a("7FZc"),h=a("B6oZ"),g=a("Qkhu"),E=a.n(g),y=a("lGCG"),b=a("xgZS"),I=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},S=function(e){var t,a,i=e.isFirst,l=e.isLast,c=e.payload,u=e.onClick,f=e.onItemChange,g=e.allowUpdate,S=(e.isDetail,[{id:"detail",name:Object(n.t)("\u65b0\u9875\u9762\u6253\u5f00"),link:{path:"/issue-review-detail/".concat(c.code)}}]);g&&c.status===h.a.WITHDRAW&&S.push({id:"delete",name:Object(n.t)("\u5220\u9664"),type:"delete",className:s.a.deleteText});var T=I(Object(r.useState)(!1),2),w=T[0],C=T[1],O=Object(r.useCallback)((function(){C(!1)}),[]),N=Object(r.useCallback)((function(){Object(y.deleteIssueReview)(c.code).then((function(){Object(b.success)(Object(n.t)("\u5220\u9664\u6210\u529f")),f()}),(function(){O()}))}),[c]);return o.a.createElement("div",{className:d()(s.a.item,i&&s.a.itemFirst,l&&s.a.itemLast),onClick:function(){return!w&&u()}},o.a.createElement("div",{className:s.a.icon}),o.a.createElement("div",{className:s.a.main},o.a.createElement("div",{className:s.a.type},c.issueReviewType.name),o.a.createElement("div",{className:s.a.divider},"\xb7"),o.a.createElement("div",{className:s.a.title},c.subject)),o.a.createElement("div",{className:s.a.status},o.a.createElement(h.b,{type:c.status})),o.a.createElement(v.TooltipTrigger,{title:"".concat(null===(t=c.creatorDTO)||void 0===t?void 0:t.name," ").concat(Object(n.t)("\u53d1\u8d77\u4e8e")," ").concat(p()(c.createdAt).format("YYYY/MM/DD HH:mm"))},o.a.createElement("img",{className:s.a.avatar,src:null===(a=c.creatorDTO)||void 0===a?void 0:a.avatar})),o.a.createElement("div",{className:s.a.more},o.a.createElement(m.ItemDropdown,{options:S,onSelect:function(e){switch(e.id){case"delete":C(!0)}},popupStyle:{width:160},portalAlign:{top:24,left:-96},portalContainer:function(){return document.querySelector('div[data-frontend-module-container="coding-project-management-frontend"]')}})),w&&o.a.createElement(E.a,{show:w,onClose:O,hasType:!1,customTip:Object(n.t)("\u5220\u9664\u5ba1\u6279\u5c06\u65e0\u6cd5\u6062\u590d\uff0c\u786e\u5b9a\u5220\u9664\u5417\uff1f"),onConfirm:N}))};t.default=function(e){var t=e.list,a=e.onItemChange,r=e.onShowCreate,i=e.onShowDetail,c=e.allowUpdate,s=e.isDetail;return o.a.createElement("div",{className:l.a.wrapper},o.a.createElement("div",{className:l.a.list},t.map((function(e,n){return o.a.createElement(S,{key:e.code,isFirst:0===n,isLast:n===t.length-1,onClick:function(){i(e.code)},onItemChange:a,payload:e,allowUpdate:c,isDetail:s})}))),c&&o.a.createElement("div",{className:l.a.create,onClick:r},o.a.createElement("div",{className:l.a.createIcon}),o.a.createElement("div",{className:l.a.createText},Object(n.t)("\u53d1\u8d77\u5ba1\u6279"))))}},WSYo:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjUgKDY3NDY5KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5maWxlLXR5cGUvdHh0PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9Iue8uumZty/or6bmg4UiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSLpmYTku7YiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMzYuMDAwMDAwLCAtNjYwLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iZmlsZS10eXBlL3R4dCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzM2LjAwMDAwMCwgNjYwLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTIsMCBMMTgsMCBDMTkuMTA0NTY5NSwtMi4wMjkwNjEyNWUtMTYgMjAsMC44OTU0MzA1IDIwLDIgTDIwLDE4IEMyMCwxOS4xMDQ1Njk1IDE5LjEwNDU2OTUsMjAgMTgsMjAgTDIsMjAgQzAuODk1NDMwNSwyMCAtMy40MTc0NDI5M2UtMTUsMTkuMTA0NTY5NSAtMy41NTI3MTM2OGUtMTUsMTggTC0zLjU1MjcxMzY4ZS0xNSwyIEMtMy42ODc5ODQ0M2UtMTUsMC44OTU0MzA1IDAuODk1NDMwNSwyLjAyOTA2MTI1ZS0xNiAyLDAgWiIgaWQ9IlJlY3RhbmdsZS0zNyIgZmlsbD0iI0MxQ0FEQiI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuMjUzOTA2MjUsOC4wNTg1OTM3NSBMNS41NDY4NzUsOC4wNTg1OTM3NSBMNS41NDY4NzUsMTIuNjg3NSBMNC4xNzU3ODEyNSwxMi42ODc1IEw0LjE3NTc4MTI1LDguMDU4NTkzNzUgTDIuNSw4LjA1ODU5Mzc1IEwyLjUsNyBMNy4yNTM5MDYyNSw3IEw3LjI1MzkwNjI1LDguMDU4NTkzNzUgWiBNOS45NTMxMjUsOC44OTA2MjUgTDEwLjg4MjgxMjUsNyBMMTIuNDQ5MjE4OCw3IEwxMC44NTkzNzUsOS44MjAzMTI1IEwxMi40OTIxODc1LDEyLjY4NzUgTDEwLjkxMDE1NjIsMTIuNjg3NSBMOS45NTMxMjUsMTAuNzYxNzE4OCBMOC45OTYwOTM3NSwxMi42ODc1IEw3LjQxNzk2ODc1LDEyLjY4NzUgTDkuMDQ2ODc1LDkuODIwMzEyNSBMNy40NjA5Mzc1LDcgTDkuMDIzNDM3NSw3IEw5Ljk1MzEyNSw4Ljg5MDYyNSBaIE0xNy40MDIzNDM4LDguMDU4NTkzNzUgTDE1LjY5NTMxMjUsOC4wNTg1OTM3NSBMMTUuNjk1MzEyNSwxMi42ODc1IEwxNC4zMjQyMTg4LDEyLjY4NzUgTDE0LjMyNDIxODgsOC4wNTg1OTM3NSBMMTIuNjQ4NDM3NSw4LjA1ODU5Mzc1IEwxMi42NDg0Mzc1LDcgTDE3LjQwMjM0MzgsNyBMMTcuNDAyMzQzOCw4LjA1ODU5Mzc1IFoiIGlkPSJUWFQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},WpLf:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=n(a("2iML")),v=a("1qdz");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.itemType;return f.default.createElement("div",{className:v.listItem,key:t.id},f.default.createElement("div",{className:v.dot}),f.default.createElement("div",{className:v.content},f.default.createElement(m.default,{className:"mr-10 ".concat(v.icon)}),f.default.createElement("span",{className:v.user},t.creator.name),t.issueLog&&1===t.issueLog.old?"\u3010\u6e90\u3011":"",f.default.createElement("span",null,(0,u.t)("\u66f4\u65b0\u4e86{{type}}\u4f18\u5148\u7ea7\u4e3a",{type:a})),f.default.createElement("span",{className:"ml-10"},t.issueLog.content.name),f.default.createElement("span",{className:v.time},(0,p.timeFormat)(t.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=E,E.propTypes={item:d.default.object,itemType:d.default.string}},WxKA:function(e,t,a){"use strict";a.r(t);var n=a("mVeg"),r=a("cDcd"),o=a.n(r),i=a("sftu"),l=a.n(i),c=a("JTQj"),s=a("vyFa"),u=a.n(s),d=a("W7UB"),f=a.n(d),p=a("K2gz"),m=a.n(p),v=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i};t.default=function(e){var t=e.onCancel,a=e.onHandleAttachments,i=v(Object(r.useState)(!1),2),s=i[0],d=i[1],p=Object(r.useCallback)((function(e){var n,r;"pageReady"===e.data.event&&d(!0),"asyncAnswer"===e.data.event&&(a([{isCodesign:!0,fileId:Date.now(),timestamp:Date.now(),codesign:{thirdType:"CODESIGN",title:null===(n=e.data.params)||void 0===n?void 0:n.name,link:null===(r=e.data.params)||void 0===r?void 0:r.url}}]),t())}),[]);Object(r.useEffect)((function(){return window.addEventListener("message",p),function(){return window.removeEventListener("message",p)}}),[]);return o.a.createElement(l.a,{show:!0,style:{width:600,padding:"24px 0"}},o.a.createElement("div",{className:f.a.coDesignHeader},o.a.createElement("div",{className:f.a.coDesignTitle},Object(n.t)("\u5173\u8054 CoDesign \u8bbe\u8ba1\u7a3f")),o.a.createElement("a",{href:Object(c.getHelp)("/docs/collaboration/customize/references.html#codesign"),target:"_blank"},Object(n.t)("\u5e2e\u52a9\u6587\u6863"))),o.a.createElement("iframe",{style:{border:0},id:"co-design-related-modal",name:"co-design-related-modal",width:600,height:463,src:"https://codesign.qq.com/external/frame/select?from=coding_attachment"}),o.a.createElement("div",{className:f.a.coDesignFooter},s&&o.a.createElement("div",{className:m()(u.a.button,u.a.primary,u.a.h32,f.a.button,f.a.buttonConfirm),onClick:function(){window.frames["co-design-related-modal"].postMessage({event:"dialogYes"},"*")}},Object(n.t)("\u786e\u5b9a")),o.a.createElement("div",{className:m()(u.a.button,u.a.default,u.a.h32,f.a.button),onClick:function(){window.frames["co-design-related-modal"].postMessage({event:"dialogNo"},"*"),t()}},Object(n.t)("\u53d6\u6d88"))))}},X5YD:function(e,t,a){"use strict";a.r(t);var n=a("mVeg"),r=a("cDcd"),o=a.n(r),i=a("yZ+p"),l=a.n(i),c=a("OajT"),s=a.n(c),u=a("K2gz"),d=a.n(u),f=a("r9gF"),p=a.n(f),m=a("iR1w"),v=a("YF29"),h=a.n(v),g=a("dtw8"),E=a("5kKY"),y=a("Ykrp"),b=a.n(y),I=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),S=function(e){function t(t){var a=e.call(this,t)||this;return a.getPortalContainer=function(){return document.querySelector('div[data-frontend-module-container="coding-project-management-frontend"]')},a}return I(t,e),t.prototype.renderOp=function(){var e=this;return o.a.createElement(E.ItemDropdown,{popupStyle:{width:160},portalContainer:this.getPortalContainer,portalAlign:{top:24,right:0},options:[{name:Object(n.t)("\u53d6\u6d88\u5173\u8054"),id:"cancel-associate"}],onSelect:function(t){"cancel-associate"===t.id&&e.props.onCancelAssociate(e.props.id)}})},t.prototype.renderTdItem=function(e,t){var a=this.props,n=a.allowUpdate,r=a.devProcessing,i=a.editionProcessing,l=a.onCreateBranch,c=a.projectPath,s=a.name;return e?o.a.createElement("span",{className:b.a.branch,onClick:function(){return window.open("".concat(c,"/d/").concat(s,"/git/tree/").concat(e),"_blank")}},e):"dev"===t&&r||"edition"===t&&i?o.a.createElement("span",{className:b.a.processing},"\u6b63\u5728\u65b0\u5efa\uff0c\u8bf7\u7a0d\u5019..."):n?o.a.createElement("span",{className:b.a.add,onClick:function(){l&&l(t,[s])}},"dev"===t?"\u65b0\u5efa\u5f00\u53d1\u5206\u652f":"\u65b0\u5efa\u7248\u672c\u5206\u652f"):null},t.prototype.render=function(){var e=this,t=this.props,a=t.name,n=t.description,r=t.projectPath,i=t.vcsType,l=t.allowUpdate,c=t.style,s=t.isAssociateDetail,u=t.source,f=t.devBranch,p=void 0===f?"":f,m=t.editionBranch,v=void 0===m?"":m,h=t.issueStatusType;return o.a.createElement("div",{className:d()(b.a.item,s&&b.a.detail),style:c},o.a.createElement(g.Link,{to:"".concat(r,"/d/").concat(a,"/").concat(i.toLowerCase(),"/"),target:"_blank",className:b.a.link},o.a.createElement("div",{className:d()(b.a.icon,"git"!==i.toLowerCase()&&b.a.svn)}),o.a.createElement("div",{className:b.a.content},o.a.createElement("div",{className:b.a.name,title:a},a),n&&o.a.createElement("div",{className:b.a.description,title:n},"\xb7 ".concat(n)))),s?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:b.a.td},o.a.createElement("div",{className:b.a.tdItem},"COMPLETED"!==h||p?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:b.a.gitBranch}),this.renderTdItem(p,"dev")):null)),o.a.createElement("div",{className:b.a.td},o.a.createElement("div",{className:b.a.tdItem},"COMPLETED"!==h||v?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:b.a.exclamation}),this.renderTdItem(v,"edition")):null)),"software"===u?o.a.createElement("div",{className:b.a.operation}):o.a.createElement("div",{className:b.a.operation,onClick:function(){return e.props.onCancelAssociate(e.props.id)}},"\u53d6\u6d88\u5173\u8054")):o.a.createElement("div",{className:b.a.right},l&&this.renderOp()))},t}(o.a.Component),T=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),w=function(){return(w=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},C=function(e){function t(t){var a=e.call(this,t)||this;return a.getListHeight=function(){return Math.min(345,(a.props.isAssociateDetail?44:36)*a.props.list.length)},a.renderItem=function(e){var t=e.index,n=e.style,r=e.data,i=a.props,l=i.onCancelAssociate,c=i.isAssociateDetail,s=i.onCreateBranch,u=i.issueStatusType,d=r.list[t];return o.a.createElement(S,w({key:d.id,onCancelAssociate:l},d,{style:n,isDetail:a.props.isDetail,isAssociateDetail:c,onCreateBranch:s,issueStatusType:u}))},a}return T(t,e),t.prototype.render=function(){var e=this.props,t=e.list,a=e.isAssociateDetail;return o.a.createElement("div",{className:h.a.list},a&&o.a.createElement("div",{className:h.a.listHeader},o.a.createElement("div",{className:h.a.th},"\u4ee3\u7801\u4ed3\u5e93"),o.a.createElement("div",{className:h.a.th},"\u5f00\u53d1\u5206\u652f"),o.a.createElement("div",{className:h.a.th},"\u7248\u672c\u5206\u652f"),o.a.createElement("div",{className:h.a.operation},"\u64cd\u4f5c")),o.a.createElement(m.FixedSizeList,{itemCount:t.length,itemSize:a?44:36,width:"100%",height:this.getListHeight(),itemData:{list:t},overscanCount:20},this.renderItem))},t}(o.a.Component),O=a("diRs"),N=a("sWxF"),P=a("xgZS"),j=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),D=function(){return(D=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},k=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},R=function(e,t,a){if(a||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))},M=function(e){function t(t){var a=e.call(this,t)||this;return a.inputRef=o.a.createRef(),a.onCreateBranch=function(e,t){var r=a.props,o=r.enterpriseGlobalKey,i=r.currentProjectName,l=r.editionVersion,c=r.onUpdateCodeRepos,s=r.code,u=r.issueType;if("edition"!==e||l){var d=new FormData;"edition"===e?d.append("branch_name","release_".concat(l)):d.append("branch_name","REQUIREMENT"===u?"feature_".concat(s):"bugfix_".concat(s)),d.append("note","\u7531\u7cfb\u7edf\u81ea\u52a8\u521b\u5efa\u7528\u4e8e\u7248\u672c\u53d1\u5e03"),d.append("start_point","master"),c&&c(t.map((function(t){var a;return(a={name:t})["".concat(e,"Processing")]=!0,a})));var f=t.map((function(e){return Object(N.createBranch)(o,i,e,d)}));a.PromiseAllSettled(f).then((function(n){var r,o,i,l;c&&c(n.map((function(a,n){var r,o,i;return 0===(null===a||void 0===a?void 0:a.code)&&"fulfilled"===(null===a||void 0===a?void 0:a.status)?((r={name:t[n]})["".concat(e,"Branch")]=null===(i=null===a||void 0===a?void 0:a.data)||void 0===i?void 0:i.name,r["".concat(e,"Processing")]=!1,r):((o={name:t[n]})["".concat(e,"Processing")]=!1,o)})));var s=[];n.forEach((function(e,a){if("rejected"===e.status){var n=(null===e||void 0===e?void 0:e.msg)||{},r=Object.keys(n)[0];s.push({code:e.code,name:t[a],errorMsg:n[r]})}})),s.length>0&&(s.length<n.length?Object(P.danger)("\u90e8\u5206\u521b\u5efa\u5b8c\u6210\uff0c".concat(a.handleErrorMsg(s))):1===s.length?905===(null===(r=s[0])||void 0===r?void 0:r.code)?Object(P.danger)("\u521b\u5efa\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"):500106===(null===(o=s[0])||void 0===o?void 0:o.code)?Object(P.danger)("\u521b\u5efa\u5931\u8d25\uff0c\u60a8\u6ca1\u6709".concat(null===(i=s[0])||void 0===i?void 0:i.name,"\u4ee3\u7801\u4ed3\u5e93\u521b\u5efa\u5206\u652f\u7684\u6743\u9650")):Object(P.danger)(null===(l=s[0])||void 0===l?void 0:l.errorMsg):Object(P.danger)("\u521b\u5efa\u5931\u8d25\uff0c".concat(a.handleErrorMsg(s))))}))}else Object(P.warning)(Object(n.t)("\u8bf7\u5148\u9009\u62e9\u7248\u672c"))},a.handleErrorMsg=function(e){var t="",a={};return e.forEach((function(e){a[e.code]?a[e.code]=D(D({},a[e.code]),{name:R(R([],k(a[e.code].name),!1),[e.name],!1)}):a[e.code]={name:[e.name],errorMsg:e.errorMsg}})),Object.keys(a).forEach((function(e){var n=a[e],r=n.name.join("\u3001");500106===Number(e)?t+="\u60a8\u6ca1\u6709".concat(r,"\u4ee3\u7801\u4ed3\u5e93\u521b\u5efa\u5206\u652f\u7684\u6743\u9650\uff1b"):905===Number(e)?t+="".concat(r,"\u4ee3\u7801\u4ed3\u5e93\u521b\u5efa\u5206\u652f\u5931\u8d25\uff1b"):t+="".concat(r,"\u4ee3\u7801\u4ed3\u5e93").concat(n.errorMsg,"\uff1b")})),t.slice(0,t.length-1)},a.handleBatchCreate=function(e){var t=a.props.list.filter((function(t){return!t["".concat(e,"Branch")]}));t.length>0&&a.onCreateBranch(e,t.map((function(e){return e.name})))},a.onShowChoose=function(){a.setState({isShowChoose:!0},(function(){a.inputRef.current&&a.inputRef.current.focus()}))},a.onInputChange=function(e){var t=e.target.value;a.setState({keyword:t}),a.props.onSearch(t)},a.onAssociate=function(e){a.setState({keyword:""}),a.props.onAssociate(e)},a.state={isShowChoose:!1,keyword:""},a}return j(t,e),t.prototype.componentDidMount=function(){this.props.onSearch()},t.prototype.PromiseAllSettled=function(e){void 0===e&&(e=[]);var t=function(e){return D({status:"fulfilled"},e)},a=function(e){return D({status:"rejected"},e)};return Promise.all(e.map((function(e){return Promise.resolve(e).then(t,a)})))},t.prototype.renderHeader=function(){var e=this,t=this.props,a=t.SectionToggletrigger,r=t.allowUpdate,i=t.isAssociateDetail,l=t.issueStatusType;return o.a.createElement("div",{className:p.a.header},o.a.createElement("div",{className:p.a.headerLeft},o.a.createElement(a,null),o.a.createElement("div",{className:p.a.title},Object(n.t)("\u5173\u8054\u4ee3\u7801\u4ed3\u5e93")),r&&o.a.createElement("div",{className:p.a.divider}),r&&o.a.createElement("div",{className:p.a.addIcon,onClick:this.onShowChoose})),r&&i&&"COMPLETED"!==l&&o.a.createElement(O.a,{placement:"top",trigger:"hover",content:o.a.createElement("div",{className:p.a.popoverContent},o.a.createElement("div",{className:p.a.popoverItem,onClick:function(){return e.handleBatchCreate("dev")}},"\u6279\u91cf\u521b\u5efa\u5f00\u53d1\u5206\u652f"),o.a.createElement("div",{className:p.a.popoverItem,onClick:function(){return e.handleBatchCreate("edition")}},"\u6279\u91cf\u521b\u5efa\u7248\u672c\u5206\u652f")),getPopupContainer:function(e){return e.parentNode},overlayClassName:p.a.popover},o.a.createElement("div",{className:p.a.batchCreate},o.a.createElement("div",{className:p.a.addIcon}),"\u6279\u91cf\u521b\u5efa")))},t.prototype.renderChoose=function(){var e=this,t=this.state.keyword;return o.a.createElement("div",null,o.a.createElement(l.a,{value:t,className:p.a.customInput,ref:this.inputRef,onChange:this.onInputChange,prefix:o.a.createElement("div",{className:p.a.customSearchIcon}),suffix:o.a.createElement("div",{className:p.a.cancelBtn,onClick:function(){e.setState({isShowChoose:!1}),e.props.onCancel()}},Object(n.t)("\u53d6\u6d88")),size:"medium",placeholder:Object(n.t)("\u8f93\u5165\u4ed3\u5e93\u540d\u79f0\u5feb\u901f\u5173\u8054")}),this.renderResult())},t.prototype.renderResult=function(){var e=this,t=this.props.searchResList;return t.length>0?o.a.createElement("div",{className:p.a.list},o.a.createElement("div",{className:p.a.listWrapper},t.map((function(t){return o.a.createElement("div",{className:d()(p.a.item,p.a.itemSearch,p.a.customItem),key:t.id,onClick:function(){return e.onAssociate(t.id)}},o.a.createElement("div",{className:d()(p.a.icon,"git"!==t.vcsType&&p.a.svn)}),o.a.createElement("div",{className:p.a.content},o.a.createElement("div",{className:p.a.name,title:t.name},t.name),t.description&&o.a.createElement("div",{className:p.a.description,title:t.description},"\xb7 ".concat(t.description))))})))):o.a.createElement("div",{className:d()(p.a.list,p.a.noResult)},Object(n.t)("\u65e0\u641c\u7d22\u7ed3\u679c"))},t.prototype.componentDidUpdate=function(e){var t=this.props.isFocus;e.isFocus!==t&&t&&(this.onShowChoose(),this.props.onFocusChanged(!1))},t.prototype.render=function(){var e=this.state.isShowChoose,t=this.props,a=t.list,n=t.onCancelAssociate,r=t.projectPath,i=t.sectionExpanded,l=t.allowUpdate,c=t.isDetail,s=t.isAssociateDetail,u=t.issueStatusType,d=a.map((function(e){return D(D({},e),{projectPath:r,allowUpdate:l})}));return o.a.createElement("div",{className:p.a.wrap,id:"associated-code-repo"},this.renderHeader(),i&&d.length>0&&o.a.createElement(C,{list:d,onCancelAssociate:n,isDetail:c,isAssociateDetail:s,onCreateBranch:this.onCreateBranch,issueStatusType:u}),e&&this.renderChoose())},t}(o.a.Component);t.default=s()(M)},XIGD:function(e,t,a){e.exports=a.p+"ad9c9de6b4f48fb4a49d9acbab0b4fae.svg"},XLbL:function(e,t,a){"use strict";a("I5cv"),a("ioFf"),a("mYba"),a("jm62"),a("EK0E"),a("XfO3"),a("yt8O"),a("rGqo");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d"),a("Z2Ku"),a("dRSK"),a("hhXQ"),a("RW0V"),a("L9s1"),a("Btvt"),a("a1Th"),a("0l/t"),a("bWfx"),a("INYr"),a("VRzm");var o,i,l,c,s=n(a("RIqP")),u=n(a("lSNA")),d=n(a("lwsE")),f=n(a("W8MJ")),p=n(a("PJYZ")),m=n(a("7W2i")),v=n(a("a1gu")),h=n(a("Nsbk")),g=a("mVeg"),E=le(a("cDcd")),y=a("h74D"),b=n(a("17x9")),I=n(a("K2gz")),S=n(a("V/h/")),T=n(a("Z0cm")),w=n(a("Y+p1")),C=n(a("Nbs+")),O=a("nuIr"),N=n(a("6Mal")),P=a("iTKN"),j=n(a("BKNj")),D=n(a("NTS2")),k=n(a("MiOB")),R=n(a("he8+")),M=n(a("RUAE")),A=n(a("S0Yh")),L=n(a("/wWQ")),x=le(a("OajT")),_=a("7bn+"),F=a("xgZS"),W=a("cI3E"),B=a("DKcV"),H=n(a("Gtz0")),U=n(a("NIJN")),Y=n(a("oT/l")),q=n(a("GaYm")),G=n(a("UVRA")),z=n(a("ixak")),V=n(a("xIf5")),Z=a("es6E"),K=a("AwMv"),J=n(a("Mh+3")),Q=n(a("vtbA")),X=n(a("v6U7")),$=n(a("JEjI")),ee=a("aHEs"),te=(n(a("OBZ8")),a("XXMN")),ae=a("5JFE"),ne=n(a("zmh9")),re=a("sWxF"),oe=n(a("jaMa"));function ie(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(ie=function(e){return e?a:t})(e)}function le(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=ie(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}function ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function se(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ce(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ue(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,h.default)(e);if(t){var r=(0,h.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,v.default)(this,a)}}var de=["ASSIGNEE","PARTICIPANT","WATCHER"],fe={1:"\u90e8\u5206",2:"\u5168\u90e8"},pe=(o=(0,y.connect)((function(e){var t=e.APP;return{mode:t.currentProjectCooperateSettings.COOPERATE_MODE,enterpriseGlobalKey:t.enterprise.globalKey}}),(function(e){return{createLabel:function(t,a,n){return e((0,W.addLabel)(t,a,n))}}})),(0,x.default)(i=o(i=(0,H.default)((c=l=function(e){(0,m.default)(a,e);var t=ue(a);function a(e){var n,r,o,i,l;return(0,d.default)(this,a),(l=t.call(this,e)).spaceType=l.props.projectType?l.props.projectType:null!==(n=null===(r=reduxStore.getState())||void 0===r||null===(o=r.APP)||void 0===o||null===(i=o.currentProject)||void 0===i?void 0:i.projectType)&&void 0!==n?n:"",l.renderTencentMeeting=function(){var e=l.props,t=e.isDetailPage,a=e.detailInfo,n=e.currentProject,r=e.meetingCallback,o=n.name,i=a.code;return E.default.createElement(G.default,{user:l.props.user,projectName:o,issueCode:i,isAddDetailClassName:t,meetingCallback:r})},l.renderManHours=function(){var e,t,a=l.props,n=a.detailInfo,r=a.isFromDetailPage,o=a.isDetailPage,i=a.onManHourUpdate,c=a.onForwardLogs,s=a.isPermissible,u=a.schemeFieldArchives,d=a.user,f=a.customAttributes,p=s([{function:B.ProjectPermissionFunction.PROJECT_ISSUE,action:B.ProjectPermissionAction.UPDATE}]);return n?["REQUIREMENT","MISSION","DEFECT"].includes(null===n||void 0===n||null===(e=n.issueTypeDetail)||void 0===e?void 0:e.issueType)&&"prd_issue"!==(null===n||void 0===n||null===(t=n.issueTypeDetail)||void 0===t?void 0:t.type)?E.default.createElement(V.default,{schemeFields:u,isFromDetailPage:r||!o,detailInfo:n,allowUpdate:p,programId:null===f||void 0===f?void 0:f.programId,user:d,onForwardLogs:function(){return c()},onUpdate:function(){return i()}}):E.default.createElement(L.default,{isFromDetailPage:r||!o,detailInfo:n,allowUpdate:p,onForwardLogs:function(){return c()},onUpdate:function(){return i()}}):E.default.createElement("div",null)},l.getIsClearDefect=function(e){var t=l.state.customFields,a=l.props,n=a.fieldIds,r=a.schemeFieldArchives,o=null;n.forEach((function(e){r[e].issueField&&"\u7f3a\u9677\u4e25\u91cd\u7a0b\u5ea6"===r[e].issueField.name&&(o=r[e].issueField)}));if(o&&t){var i=o.options.find((function(e){return e.value===t[o.id]}));return!(i&&["\u81f4\u547d","\u4e25\u91cd"].includes(i.name))}return!e.required},l.selectToCheckWorkHours=function(e){var t,a,n,r=l.props.onChange;(0,re.queryAllWorkHoursAndAssignee)({issueId:null===(t=l.props.detailInfo)||void 0===t?void 0:t.id,issueType:null===(a=l.props.detailInfo)||void 0===a||null===(n=a.issueTypeDetail)||void 0===n?void 0:n.type}).then((function(t){var a=t.data,n=a.assigneeTotal,o=a.workHourTotal,i=a.programIdList;o&&((null===i||void 0===i?void 0:i.length)>1||e.id!==(null===i||void 0===i?void 0:i[0]))?l.setState({inProgramModalVisible:!0,programModal:{assigneeTotal:n,workHourTotal:o,programId:e}}):(r({type:"programId",value:e}),l.setState({milestoneList:[],developMode:-1}))})).catch((function(){r({type:"programId",value:e}),l.setState({milestoneList:[],developMode:-1})}))},l.clearToCheckWorkHours=function(){var e,t,a,n=l.props.onChange;(0,re.queryAllWorkHoursAndAssignee)({issueId:null===(e=l.props.detailInfo)||void 0===e?void 0:e.id,issueType:null===(t=l.props.detailInfo)||void 0===t||null===(a=t.issueTypeDetail)||void 0===a?void 0:a.type}).then((function(e){var t=e.data,a=t.assigneeTotal,r=t.workHourTotal;r?ae.Modal.confirm({getContainer:document.querySelector('[data-frontend-module-container="coding-project-management-frontend"]')||document.body,title:E.default.createElement("div",{className:C.default.workhoursModalTitle},(0,g.t)("\u5f53\u524d\u4e8b\u9879\u5df2\u586b\u62a5\u5de5\u65f6\uff0c\u6e05\u9664\u9879\u76ee\u4f1a\u5bfc\u81f4\u9879\u76ee\u5de5\u65f6\u88ab\u6e05\u7a7a\uff01")),icon:E.default.createElement("div",{className:C.default.workhoursModalIcon},l.renderIcon("warning")),content:E.default.createElement(E.default.Fragment,null,E.default.createElement("p",{style:{marginTop:"1em"}},"\u586b\u62a5\u8be6\u60c5\uff1a"),E.default.createElement(ae.Space,{size:24},E.default.createElement("div",null,"\u4e8b\u9879\u7d2f\u8ba1\u767b\u8bb0\u603b\u5de5\u65f6\uff1a",E.default.createElement("strong",{style:{fontSize:"24px"}},r,"\u5929")),E.default.createElement("div",null,"\u4e8b\u9879\u7d2f\u8ba1\u767b\u8bb0\u603b\u4eba\u6570\uff1a",E.default.createElement("strong",{style:{fontSize:"24px"}},a,"\u4eba")))),onOk:function(){n({type:"programId",operationType:"DELETE",value:0})},onCancel:function(){},okText:"\u6e05\u9664",cancelText:"\u53d6\u6d88",width:524,okButtonProps:{style:{backgroundColor:"#202d40",borderColor:"#202d40"}},zIndex:2005}):n({type:"programId",value:0})})).catch((function(){n({type:"programId",value:0})}))},l.setDisableDate=function(e,t){var a=l.props.timeValidDetct;return!(!a||"function"!==typeof a)&&a(e,t)},l.renderIcon=function(e){var t={style:{color:"warning"===e?"#faad14":"#ff4d4f",width:"22px",height:"22px"},translate:void 0,onAuxClick:void 0,onAuxClickCapture:void 0};return"warning"===e?E.default.createElement(te.ExclamationTriangle,t):E.default.createElement(te.InfoCircle,t)},l.onWorkhoursTransferInfo=function(e){(0,re.queryWorkHoursTransferInfo)(e).then((function(e){var t=e.data,a=t.id,n=t.failRows,r=t.name,o=t.type;0!==o&&l.setState({workhoursTransferModalVisible:!0,transferErrorsInfo:{id:a,failRows:n,name:r,type:o}})}))},l.onCloseModal=function(){l.setState({workhoursTransferModalVisible:!1,transferErrorsInfo:null})},l.state={customFields:void 0,customOptions:void 0,showMeeting:!1,showCopyMeeting:!1,meetingDetail:void 0,labelsNew:[],systemsList:[],milestoneList:[],developMode:-1,groupTeamList:[],inProgramModalVisible:!1,programModal:{assigneeTotal:0,workHourTotal:0},workhoursTransferModalVisible:!1,transferErrorsInfo:null},l.multipleSelect=l.multipleSelect.bind((0,p.default)(l)),l.customChange=l.customChange.bind((0,p.default)(l)),l.multipleClearWatchers=l.multipleClearWatchers.bind((0,p.default)(l)),l.getMilestoneList=l.getMilestoneList.bind((0,p.default)(l)),l}return(0,f.default)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.customAttributes,a=t.fields,n=t.selectedProgram,r=t.systemsId,o=e.fieldIds,i=e.schemeFieldArchives,l=this.props,c=l.customAttributes,s=c.fields,u=c.selectedProgram,d=c.systemsId,f=l.fieldIds,p=l.projectID,m=l.isCreate,v=l.onChange,h=l.schemeFieldArchives;if(!m&&h&&!(0,w.default)(h,i)){var E=Object.values(i),y=Object.keys(a)||[];E.forEach((function(e){var t,a;2===(null===e||void 0===e?void 0:e.extFieldSource)&&e.required&&!y.includes(String(null===e||void 0===e||null===(t=e.issueField)||void 0===t?void 0:t.id))&&(0,F.danger)((0,g.t)("\u4ea7\u54c1\u7ec4\u81ea\u5b9a\u4e49\u5fc5\u586b\u5b57\u6bb5".concat(null===e||void 0===e||null===(a=e.issueField)||void 0===a?void 0:a.name,"\u672a\u586b\u5199")))}))}!(0,w.default)(o,f)&&o&&f&&this.initState(o,i,a),!(0,w.default)(a,s)&&a&&s&&this.initCustomFields(a),(0,w.default)(null===n||void 0===n?void 0:n.name,null===u||void 0===u?void 0:u.name)||this.getMilestoneList(n),(0,w.default)(r,d)||this.getGroupTeamList(p,r,"").then((function(e){var t;m&&r&&(e.system&&1===(null===(t=e.system)||void 0===t?void 0:t.length)?v({type:"groupTeamId",value:e.system[0].id}):v({type:"groupTeamId",value:null}))}))}},{key:"componentDidMount",value:function(){var e=this.props,t=e.isCreate,a=e.customAttributes,n=a.fields,r=a.labels,o=a.selectedProgram,i=a.systemsId,l=a.groupTeamId,c=e.fieldIds,s=e.schemeFieldArchives,u=e.labels,d=e.currentProject,f=(e.customAttributes,e.sourceTypes),p=e.projectID,m=e.onChange,v=e.zipRes,h=void 0===v?{}:v,E=e.zipRes4,y=void 0===E?{}:E;e.issueType;(c&&c.length&&this.initState(c,s,n),r&&r.length>0&&u)&&(u.find((function(e){return e.id===r[0]}))||(0,Z.getStore)(Z.StoreName.LABELS).getCurrentProjectLabels(null===d||void 0===d?void 0:d.name,null===d||void 0===d?void 0:d.id));var b=Object.values(s);null===f||void 0===f||f.find((function(e){return"\u6d4b\u8bd5"===e.name}));t||!b.some((function(e){return"SYSTEM"===e.issueField.type&&e.required}))||i||(0,F.danger)((0,g.t)("\u8bf7\u9009\u62e9\u6240\u5c5e\u7cfb\u7edf")),t||!b.some((function(e){return"GROUP_TEAM"===e.issueField.type&&e.required}))||l||(0,F.danger)((0,g.t)("\u8bf7\u9009\u62e9\u8d1f\u8d23\u5c0f\u961f"));h.code,h.data;var I=y.code,S=y.data;p&&(0===I?this.getSystemsList("",S[J.default.getSystemsList]).then((function(e){t&&e&&1===e.length&&m({type:"systemsId",value:e[0].systemId})})):this.getSystemsList("").then((function(e){t&&e&&1===e.length&&m({type:"systemsId",value:e[0].systemId})})),i?this.getGroupTeamList(p,i,""):this.getGroupTeamList(p,null,"")),null!==o&&void 0!==o&&o.name&&this.getMilestoneList(o)}},{key:"initState",value:function(e,t,a){var n=e.reduce((function(e,n){return"CUSTOM"===t[n].issueField.type&&("number"===typeof a[n]?e[n]=a[n].toString():e[n]=a[n]||void 0),e}),{}),r=e.reduce((function(e,a){return"CUSTOM"===t[a].issueField.type&&(e[a]={options:t[a].issueField.options,componentType:t[a].issueField.componentType}),e}),{});this.setState({customFields:n,customOptions:r})}},{key:"initCustomFields",value:function(e){Object.keys(e).forEach((function(t){"number"===typeof e[t]&&(e[t]=e[t].toString())})),this.setState({customFields:se({},e)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,n=t.schemeFieldArchives,r=t.fieldIds,o=(t.isCreate,t.SectionToggletrigger,t.sectionExpanded),i=(t.expanded,t.isDetailPage),l=t.issueType,c=t.activities,s=t.detailInfo,u=t.mode,d=t.moduleConfig,f=t.onChange,p=this.state,m=p.developMode,v=p.inProgramModalVisible,h=p.programModal,y=p.workhoursTransferModalVisible,b=p.transferErrorsInfo,S=i;if(!n||!r)return null;"EPIC"!==l&&"DEFECT"!==l&&d.tencentMeeting;var T=c?c.filter((function(e){return e.issueLog&&"DUE_DATE"===e.issueLog.target})).pop():void 0,w=!(!T||!s||T.creator.id===s.creator.id),N="/external/work-hour-management/my-work-hour/".concat(null===b||void 0===b?void 0:b.id,"/error-download");return E.default.createElement(E.default.Fragment,null,!1,o&&E.default.createElement("div",{className:"".concat(a),id:"issue-attrs"},r.filter((function(e){var t,a=(null===(t=n[e])||void 0===t?void 0:t.issueField)||{};return a.type!==O.BASE_FIELD_TYPE.DEFECT_TYPE&&"\u8ba1\u5212\u4e0a\u7ebf\u65e5\u671f"!==a.name&&"\u7248\u672c"!==a.name&&"\u8fed\u4ee3"!==a.name})).map((function(t){if(void 0===n[t])return null;var a=n[t],r=a.issueField,o=a.type;return de.includes(r.type)||e.props.isCreate&&r.type===O.BASE_FIELD_TYPE.HOUR_RECORD||m<=0&&r.type===O.BASE_FIELD_TYPE.MILESTONE?null:E.default.createElement("div",{className:(0,I.default)(C.default.issueProperty,S&&C.default.isDetail),key:r.id},E.default.createElement("label",{className:(0,I.default)(C.default.issuePropertyLabel,S&&C.default.isDetail),title:r.name},E.default.createElement("div",{className:C.default.labelDetail},r.name),r.type===O.BASE_FIELD_TYPE.PROGRESS&&("CLASSIC"===u||"WORK_ITEM"===l)&&E.default.createElement(Y.default,{tooltip:E.default.createElement("div",null,E.default.createElement("span",{style:{display:"block"}},(0,g.t)("\u82e5\u542b\u6709\u5b50\u4e8b\u9879\uff0c\u5219\u5f53\u524d\u8fdb\u5ea6\u4e0d\u53ef\u4fee\u6539\u3002")),E.default.createElement("span",{style:{display:"block"}},(0,g.t)("\u7236\u4e8b\u9879\u8fdb\u5ea6= SUM(\u76f4\u63a5\u5b50\u4e8b\u9879\u8fdb\u5ea6) \xf7 SUM(\u76f4\u63a5\u5b50\u4e8b\u9879\u6570)"))),placement:"left"}),n[t].required&&E.default.createElement("span",{className:C.default.highlight},"*"),r.type===O.BASE_FIELD_TYPE.DUE_DATE&&w&&E.default.createElement(q.default,{tooltip:E.default.createElement("div",null,(0,g.t)("\u975e\u521b\u5efa\u4eba\u5df2\u4fee\u6539")),placement:"top",isWarn:!0})),E.default.createElement("div",{className:C.default.propertyControl},e.renderPropertyControl(r,o,e.props.detailInfo,n[t])))}))),E.default.createElement(ae.Modal,{width:524,visible:v,closable:!1,footer:null,zIndex:2005,getContainer:document.querySelector('[data-frontend-module-container="coding-project-management-frontend"]')||document.body},E.default.createElement("div",{className:C.default.workhoursModalIcon},this.renderIcon("warning")),E.default.createElement("div",{className:C.default.workhoursModalTitle},(0,g.t)("\u5f53\u524d\u4e8b\u9879\u5df2\u586b\u62a5\u5de5\u65f6\uff0c\u5207\u6362\u9879\u76ee\u8bf7\u9009\u62e9\u5de5\u65f6\u6e05\u96f6\u6216\u8005\u8f6c\u79fb\u81f3\u65b0\u9879\u76ee\u3002")),E.default.createElement("p",null,"\u586b\u62a5\u8be6\u60c5\uff1a"),E.default.createElement(ae.Space,{size:24},E.default.createElement("div",null,"\u4e8b\u9879\u7d2f\u8ba1\u767b\u8bb0\u603b\u5de5\u65f6\uff1a",E.default.createElement("strong",{style:{fontSize:"24px"}},h.workHourTotal,"\u5929")),E.default.createElement("div",null,"\u4e8b\u9879\u7d2f\u8ba1\u767b\u8bb0\u603b\u4eba\u6570\uff1a",E.default.createElement("strong",{style:{fontSize:"24px"}},h.assigneeTotal,"\u4eba"))),E.default.createElement(ae.Space,{size:24,className:C.default.workhoursModalFooter},E.default.createElement(ne.default,{onClick:function(){f({type:"programId",operationType:"DELETE",value:null===h||void 0===h?void 0:h.programId}),e.setState({inProgramModalVisible:!1,milestoneList:[],developMode:-1})}},"\u6e05\u9664"),E.default.createElement(ne.default,{onClick:function(){f({type:"programId",operationType:"TRANSFER",value:null===h||void 0===h?void 0:h.programId,specCallback:function(){var t,a;e.onWorkhoursTransferInfo({programId:null===h||void 0===h||null===(t=h.programId)||void 0===t?void 0:t.id,issueId:null===s||void 0===s?void 0:s.id,issueType:null===s||void 0===s||null===(a=s.issueTypeDetail)||void 0===a?void 0:a.type})}}),e.setState({inProgramModalVisible:!1,milestoneList:[],developMode:-1})}},"\u8f6c\u79fb"),E.default.createElement(ne.default,{empty:!0,onClick:function(){e.setState({inProgramModalVisible:!1})}},"\u53d6\u6d88"))),E.default.createElement(ae.Modal,{width:524,visible:y,closable:!1,footer:null,zIndex:1050,getContainer:document.querySelector('[data-frontend-module-container="coding-project-management-frontend"]')||document.body},E.default.createElement("div",{className:C.default.workhoursModalIcon},this.renderIcon("error")),E.default.createElement("div",{className:C.default.workhoursModalTitle,style:{fontSize:"16px"}},(0,g.t)("".concat(fe[null===b||void 0===b?void 0:b.type],"\u8f6c\u79fb\u5931\u8d25\uff0c\u8bf7\u4e0b\u8f7d\u5bfc\u51fa\u6587\u4ef6\u3002"))),E.default.createElement("p",null,null===b||void 0===b?void 0:b.failRows,"\u6761\u5de5\u65f6\u6570\u636e\u8f6c\u79fb\u5931\u8d25\u5bfc\u51fa\u5230",E.default.createElement("a",{href:N,download:!0,target:"_blank"},null===b||void 0===b?void 0:b.name)),E.default.createElement(ae.Space,{size:24,className:C.default.workhoursModalFooter},E.default.createElement("a",{href:N,download:!0,target:"_blank"},E.default.createElement(ne.default,null,"\u4e0b\u8f7d\u6587\u4ef6")),E.default.createElement(ne.default,{empty:!0,onClick:function(){e.onCloseModal()}},"\u5173\u95ed"))))}},{key:"renderPropertyControl",value:function(e,t,a,n){var r,o,i,l,c,s,u,d,f,p,m=this,v=this.props,h=v.customAttributes,y=v.onChange,b=v.sourceTypes,w=v.moduleSchemes,L=v.requirementTypes,x=v.labels,W=v.issueType,H=v.isCreate,Y=v.isPermissible,q=v.permissionFunction,G=v.isFromDetailPage,V=v.isDetailPage,Z=v.timeValidDetct,K=v.projectID,ee=v.addLabel,te=v.createLabel,ae=v.subRequirements,ne=v.classicSubTasks,re=v.portalProps,ie=v.portalContainer,le=v.parentRef,ce=v.currentProject,ue=v.productName,de=v.detailInfo,fe=v.issueTypeDetail,pe=v.zipRes,me=void 0===pe?{}:pe,ve=v.zipRes3,he=void 0===ve?{}:ve,ge=(v.systemsId,v.onExpandChange),Ee=v.onManHourUpdate,ye=v.schemeFieldArchives,be=this.state,Ie=be.customFields,Se=be.customOptions,Te=be.systemsList,we=be.milestoneList,Ce=be.groupTeamList,Oe=this.props.mode,Ne=!!q&&!Y([{function:q,action:B.ProjectPermissionAction.UPDATE}]),Pe=x.filter((function(e){return h.labels.includes(e.id)})),je=h.associateIteration?h.associateIteration.map((function(e){return se(se({},e),{},{value:e.id})})):[],De=h.associateIteration?h.associateIteration.map((function(e){return se(se({},e),{},{value:e.id})})):[],ke=e.options?e.options.map((function(e){return se(se({},e),{},{value:e.value,id:e.value,text:e.title||e.name})})):[],Re=h.defectPhaseId?ke.filter((function(e){return e.phaseId===+h.defectPhaseId})):ke;switch(e.type){case O.BASE_FIELD_TYPE.HOUR_RECORD:return this.renderManHours();case O.BASE_FIELD_TYPE.PRIORITY:return E.default.createElement(N.default,{componentType:P.ComponentType.INLINE,disabled:Ne,value:void 0!==h.priority?h.priority:void 0,onSelect:function(e){return y({type:"priority",value:e.id})}});case O.BASE_FIELD_TYPE.DEFECT_KIND:var Me=this.getIsClearDefect(e);return E.default.createElement(j.default,{value:h.defectKindIds&&(0,T.default)(h.defectKindIds)?h.defectKindIds:[],items:Re||[],isMultiple:!0,disabled:Ne,clearable:Me,placeholder:(0,g.t)("\u7f3a\u9677\u7c7b\u578b"),searchPlaceholder:(0,g.t)("\u641c\u7d22\u7f3a\u9677\u7c7b\u578b"),onSelect:function(e){return y({type:"defectKindIds",value:[e.id],customValue:e.phaseId+""})},onClear:function(){return y({type:"defectKindIds",value:[]})},dropdownStyle:C.default.dropdownStyle,triggerStyle:C.default.triggerStyle,panelCustomStyle:C.default.panelCustomStyle});case O.BASE_FIELD_TYPE.DEFECT_PHASE:var Ae=this.getIsClearDefect(e);return E.default.createElement(j.default,{value:h.defectPhaseId,items:ke,disabled:Ne,clearable:Ae,placeholder:(0,g.t)("\u5f15\u5165\u7f3a\u9677\u9636\u6bb5"),searchPlaceholder:(0,g.t)("\u641c\u7d22\u5f15\u5165\u7f3a\u9677\u9636\u6bb5"),onSelect:function(e){return y({type:"defectPhaseId",value:e.id})},onClear:function(){return y({type:"defectPhaseId"})},dropdownStyle:C.default.dropdownStyle,triggerStyle:C.default.triggerStyle,panelCustomStyle:C.default.panelCustomStyle});case O.BASE_FIELD_TYPE.DUE_DATE:return E.default.createElement(k.default,{isDisabled:Ne,className:(0,I.default)(C.default.dateSelect,V&&C.default.dateSelectDetailPage),value:h.dueDate,onChange:function(e){Z&&"function"===typeof Z&&"EPIC"===W&&Z(e,"end")?(0,F.warning)((0,g.t)("\u7ed3\u675f\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u65e5\u671f")):y({type:"dueDate",value:e.isValid()?e.format("YYYY-MM-DD"):""})},disableDate:function(e){return m.setDisableDate(e,"end")},isDetail:V,isCreate:H,coloredDateText:!0,isPortal:!0,portalProps:re});case O.BASE_FIELD_TYPE.RELEASE_DATE:return E.default.createElement(k.default,{isDisabled:Ne,className:(0,I.default)(C.default.dateSelect,V&&C.default.dateSelectDetailPage),value:h.releaseDate,onChange:function(e){y({type:"releaseDate",value:e.isValid()?e.format("YYYY-MM-DD"):""})},disableDate:function(e){return m.setDisableDate(e,"end")},isDetail:V,isCreate:H,coloredDateText:!0,isPortal:!0,portalProps:re});case O.BASE_FIELD_TYPE.ASSOCIATE_ITERATION:return E.default.createElement(z.default,{disabled:Ne,isMultiple:!0,projectID:K,value:je.map((function(e){return e.id})),onSelect:function(e){var t={};if(je){var a=je.findIndex((function(t){return t.id===e.id}));t=(0,S.default)(je,(function(t){a>-1?t.splice(a,1):t.push(e)}))}else t=[e.id];y({type:"associateIteration",value:t})},onClear:function(){return y({type:"associateIteration",value:[]})},triggerExtraProps:{initialSelectedItem:De}});case O.BASE_FIELD_TYPE.START_DATE:return E.default.createElement(k.default,{isDisabled:Ne,className:C.default.dateSelect,value:h.startDate,onChange:function(e){Z&&"function"===typeof Z&&Z(e,"start")?(0,F.warning)((0,g.t)("\u5f00\u59cb\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u65e5\u671f")):y({type:"startDate",value:e.isValid()?e.format("YYYY-MM-DD"):""})},disableDate:function(e){return m.setDisableDate(e,"start")},isDetail:V,isCreate:H,isPortal:!0,portalProps:re});case O.BASE_FIELD_TYPE.UPDATED_AT:return E.default.createElement(k.default,{className:C.default.dateSelect,isDisabled:Ne,value:h.updatedAt,onChange:function(e){y({type:"updatedAt",value:e.isValid()?e.format("YYYY-MM-DD"):""})},isDetail:V,isCreate:H,isPortal:!0,portalProps:re});case O.BASE_FIELD_TYPE.CREATED_AT:return E.default.createElement(k.default,{className:C.default.dateSelect,isDisabled:Ne,value:h.createdAt,onChange:function(e){y({type:"createdAt",value:e.isValid()?e.format("YYYY-MM-DD"):""})},isDetail:V,isCreate:H,isPortal:!0,portalProps:re});case O.BASE_FIELD_TYPE.MODULE:return E.default.createElement(j.default,{value:h.projectModule||null,items:w?w.map((function(e){return se(se({},e),{},{text:e.name})})):[],disabled:Ne,clearable:!e.required,placeholder:(0,g.t)("\u6a21\u5757"),searchPlaceholder:(0,g.t)("\u641c\u7d22\u6a21\u5757"),onSelect:function(e){return y({type:"projectModule",value:e.id})},onClear:function(){return y({type:"projectModule"})}});case O.BASE_FIELD_TYPE.WUKONG_RELOAD:return E.default.createElement(j.default,{value:h.wuKongReloadId||(null===(r=ke.filter((function(e){return"\u5426"===e.name}))[0])||void 0===r?void 0:r.id),items:ke,disabled:!0,clearable:!e.required,placeholder:(0,g.t)("\u8bf7\u9009\u62e9"),searchable:!1,onSelect:function(e){return y({type:"wuKongReloadId",value:e.id})},onClear:function(){return y({type:"wuKongReloadId"})},dropdownStyle:C.default.dropdownStyle,triggerStyle:C.default.triggerStyle,panelCustomStyle:C.default.panelCustomStyle});case O.BASE_FIELD_TYPE.LABEL:return E.default.createElement(D.default,{disabled:Ne,tags:Pe,candidates:x,onSelect:function(e){y({type:"labels",value:e.map((function(e){return e.id}))})},onRemove:function(e){y({type:"labels",value:e.map((function(e){return e.id}))})},onCreate:function(e,t){te(K,e.input,e.color).then((function(a){var n=a.data;ee(K,n,e.input,e.color);var r=(0,U.default)(t.map((function(e){return e.id})),n);y({type:"labels",value:r})}))},isDetail:V,isCreate:H});case O.BASE_FIELD_TYPE.REQUIREMENT_TYPE:return E.default.createElement(j.default,{value:h.requirementType,items:L?L.map((function(e){return se(se({},e),{},{text:e.name})})):[],disabled:Ne,clearable:!e.required,placeholder:(0,g.t)("\u9700\u6c42\u7c7b\u578b"),searchPlaceholder:(0,g.t)("\u641c\u7d22\u9700\u6c42\u7c7b\u578b"),onSelect:function(e){return y({type:"requirementType",value:e.id})},onClear:function(){return y({type:"requirementType"})},isToTop:H?function(e){return!!le.current&&e>le.current.getBoundingClientRect().bottom}:void 0});case O.BASE_FIELD_TYPE.WORKING_HOURS:return E.default.createElement(M.default,{disabled:Ne,data:de,readOnly:Ne,value:h.workingHours,params:h.estimatedWorkHour,onModify:function(e){y({type:"workingHours",value:e})},dropdownStyle:C.default.dropdownStyle,triggerStyle:C.default.triggerStyle,panelCustomStyle:C.default.panelCustomStyle,onUpdate:function(){return Ee()},issueType:W,issueTypeDetail:null===de||void 0===de?void 0:de.issueTypeDetail});case O.BASE_FIELD_TYPE.PROGRESS:return E.default.createElement(A.default,{disabled:Ne||"CLASSIC"===Oe&&ae&&ae.length>0||ne&&ne.length>0,progress:h.progress||0,onConfirm:function(e){y({type:"progress",value:e})}});case O.BASE_FIELD_TYPE.DEFECT_SOURCE:return E.default.createElement(j.default,{value:h.defectSourceId,items:b||[],disabled:!!ue||Ne,clearable:!e.required,placeholder:ue||(0,g.t)("\u8bf7\u9009\u62e9"),searchPlaceholder:(0,g.t)("\u8bf7\u8f93\u5165\u5173\u952e\u5b57"),onSelect:function(e){return y({type:"defectSourceId",value:e.id})},onClear:function(){return y({type:"defectSourceId"})},dropdownStyle:C.default.dropdownStyle,triggerStyle:C.default.triggerStyle,panelCustomStyle:C.default.panelCustomStyle});case O.BASE_FIELD_TYPE.SYSTEM:return E.default.createElement(j.default,{value:h.systemsId,items:Te?Te.map((function(e){return se(se({},e),{},{text:e.systemName,id:e.systemId})})):[],disabled:Ne,placeholder:"\u8bf7\u9009\u62e9",onSearch:function(e){return m.getSystemsList(e)},onSelect:function(e){return y({type:"systemsId",value:e.systemId})},onClear:function(){return y({type:"systemsId"})},clearable:!0,dataInited:!0,Trigger:X.default,triggerExtraProps:{initialSelectedItem:null!==(o=this.props.detailInfo)&&void 0!==o&&o.systemDTO?se(se({},null===(i=this.props.detailInfo)||void 0===i?void 0:i.systemDTO),{},{text:null===(l=this.props.detailInfo)||void 0===l?void 0:l.systemDTO.systemName,id:null===(c=this.props.detailInfo)||void 0===c?void 0:c.systemDTO.systemId}):{}},dropdownStyle:C.default.dropdownStyle,triggerStyle:C.default.triggerStyle,panelCustomStyle:C.default.panelCustomStyle});case O.BASE_FIELD_TYPE.GROUP_TEAM:return E.default.createElement(j.default,{value:h.groupTeamId,items:Ce&&Ce.length?Ce.map((function(e){return se(se({},e),{},{text:e.groupTeamName,id:e.id})})):[],placeholder:"\u8bf7\u9009\u62e9\u8d1f\u8d23\u5c0f\u961f",onSelect:function(e){y({type:"groupTeamId",value:e.id})},onClear:function(){return y({type:"groupTeamId",value:null})},CustomPanel:$.default,triggerExtraProps:{initialSelectedItem:null!==(s=this.props.detailInfo)&&void 0!==s&&s.groupTeam?se(se({},null===(u=this.props.detailInfo)||void 0===u?void 0:u.groupTeam),{},{text:null===(d=this.props.detailInfo)||void 0===d?void 0:d.groupTeam.groupTeamName,id:null===(f=this.props.detailInfo)||void 0===f?void 0:f.groupTeam.id}):{}},searchable:!0,clearable:!0,dataInited:!0,dropdownStyle:C.default.dropdownStyle,triggerStyle:C.default.triggerStyle,panelCustomStyle:C.default.panelCustomStyle});case O.BASE_FIELD_TYPE.INPROGRAM:return E.default.createElement(Q.default,{value:null===h||void 0===h?void 0:h.programId,selectedProgram:null===h||void 0===h?void 0:h.selectedProgram,onSelect:function(e){var t,a;"REQUIREMENT"===m.props.issueType&&m.props.detailInfo||["DEFECT","MISSION"].includes(null===(t=m.props.detailInfo)||void 0===t||null===(a=t.issueTypeDetail)||void 0===a?void 0:a.issueType)?m.selectToCheckWorkHours(e):(y({type:"programId",value:e}),m.setState({milestoneList:[],developMode:-1}))},projectID:ce.id,onClear:function(){var t,a;ye[e.id].required?(0,F.danger)((0,g.t)("\u6240\u5c5e\u9879\u76ee\u5fc5\u586b")):"REQUIREMENT"===m.props.issueType&&null!==h&&void 0!==h&&h.programId&&m.props.detailInfo||["DEFECT","MISSION"].includes(null===(t=m.props.detailInfo)||void 0===t||null===(a=t.issueTypeDetail)||void 0===a?void 0:a.issueType)&&null!==h&&void 0!==h&&h.programId?m.clearToCheckWorkHours():y({type:"programId",value:0})},issueType:W,dropdownStyle:C.default.dropdownStyle,triggerStyle:C.default.triggerStyle,panelCustomStyle:C.default.panelCustomStyle,dataFromZip:he.data&&he.data[J.default.fetchProjects],issueTypeDetail:fe,unCompleted:!0});case O.BASE_FIELD_TYPE.MILESTONE:return E.default.createElement(j.default,{value:null===h||void 0===h?void 0:h.milestone,items:we?we.map((function(e){return se(se({},e),{},{text:e.name})})):[],placeholder:"\u8bf7\u9009\u62e9",searchable:!0,clearable:!0,onClear:function(){y({type:"milestone",value:0})},onSelect:function(e){return y({type:"milestone",value:e.id})},dropdownStyle:C.default.dropdownStyle,triggerStyle:C.default.triggerStyle,panelCustomStyle:C.default.panelCustomStyle});case O.BASE_FIELD_TYPE.SOFTWARE_UNIT:return E.default.createElement(oe.default,{projectID:ce.id,value:(null===h||void 0===h||null===(p=h.softwareUnitDTO)||void 0===p?void 0:p.map((function(e){return(null===e||void 0===e?void 0:e.id)||e})))||[],isMultiple:!0,systemId:null===h||void 0===h?void 0:h.systemsId,onSelect:function(e){var t,a,n=[];null!==h&&void 0!==h&&null!==(t=h.softwareUnitDTO)&&void 0!==t&&t.find((function(t){return t.id===e.id}))?n=null===h||void 0===h||null===(a=h.softwareUnitDTO)||void 0===a?void 0:a.filter((function(t){return e.id!==t.id})):n=(0,U.default)((null===h||void 0===h?void 0:h.softwareUnitDTO)||[],e);y({type:"softwareUnitDTO",value:n})},onClear:function(){return y({type:"softwareUnitDTO",value:[]})},triggerExtraProps:{initialSelectedItem:(null===h||void 0===h?void 0:h.softwareUnitDTO)||[]}});case O.BASE_FIELD_TYPE.CUSTOM:if(Ie){var Le,xe,_e,Fe;Le=Se[e.id].componentType===_.PROPERTY_TYPE_CONSTANTS.SELECT_MULTI||Se[e.id].componentType===_.PROPERTY_TYPE_CONSTANTS.SELECT_MEMBER_MULTI||Se[e.id].componentType===_.PROPERTY_TYPE_CONSTANTS.SELECT_ITERATION_MULTI?[]:"";var We="";switch(Se[e.id].componentType){case _.PROPERTY_TYPE_CONSTANTS.TEXT_INTEGER:case _.PROPERTY_TYPE_CONSTANTS.TEXT_MULTI_LINE:case _.PROPERTY_TYPE_CONSTANTS.TEXT_DECIMAL:case _.PROPERTY_TYPE_CONSTANTS.TEXT_SINGLE_LINE:We=C.default.textField;break;case _.PROPERTY_TYPE_CONSTANTS.SELECT_MEMBER_MULTI:xe=Ie[e.id]&&!!Ie[e.id].length&&Ie[e.id].map((function(e){return se(se({},e),{},{value:e.id})})),_e=Ie[e.id]&&!!Ie[e.id].length&&Ie[e.id].map((function(e){return se(se({},e),{},{value:e.id})}));break;case _.PROPERTY_TYPE_CONSTANTS.SELECT_MEMBER_SINGLE:We=C.default.memberSelector,xe=Ie[e.id],_e=Ie[e.id];break;case _.PROPERTY_TYPE_CONSTANTS.SELECT_ITERATION_MULTI:xe=Ie[e.id]&&!!Ie[e.id].length&&Ie[e.id].map((function(e){return se(se({},e),{},{value:e.id})})),Fe=Ie[e.id]&&!!Ie[e.id].length&&Ie[e.id].map((function(e){return se(se({},e),{},{value:e.id})}));break;case _.PROPERTY_TYPE_CONSTANTS.SELECT_ITERATION_SINGLE:xe=Ie[e.id],Fe=Ie[e.id];break;default:We=""}return E.default.createElement(R.default,{className:We,disabled:Ne,value:Ie[e.id]?xe||Ie[e.id]:Le,componentType:Se[e.id].componentType,options:Se[e.id].options,onChange:function(t){return m.customChange(t,e)},unit:e.unit||"",outterClassName:H||G?"":C.default.inlineFlex,isCreate:H,initialSelectedMembers:_e,initialSelectedIterations:Fe,projectID:K,isDetail:V,portalProps:re,portalContainer:ie,required:null===n||void 0===n?void 0:n.required,dateTimeClass:C.default.dataTimeClass,dataFromZip:me.data?me.data[J.default.getAllDepartments]:{},onExpandChange:function(t){return ge&&ge(t,e,Ie)}})}return null;default:return window.console.warn("error unkown property")}}},{key:"multipleClearWatchers",value:function(){(0,this.props.onChange)({type:"watchers"})}},{key:"multipleSelect",value:function(e,t){var a=this.props,n=a.customAttributes,r=a.onChange,o={};if(n[e]&&(0,T.default)(n[e])){var i=n[e].findIndex((function(e){return e===t.value}));o=(0,S.default)(n[e],(function(e){i>-1?e.splice(i,1):e.push(t.value)}))}else o=[t.value];r({type:e,value:o})}},{key:"customChange",value:function(e,t){var a=t.id;(0,this.props.onChange)({isCustom:!0,issueFieldId:a,value:e})}},{key:"getGroupTeamList",value:function(e,t,a){var n=this,r=this.props,o=r.issueType;if(r.isRequireManage)return Promise.resolve({});return["MISSION","DEFECT","REQUIREMENT"].includes(o)?(0,ee.getGroupTeam)(e,se(se({},t?{systemsId:t}:{}),a?{teamName:a}:{})).then((function(e){var t;return n.setState({groupTeamList:[].concat((0,s.default)((null===(t=e.data.system)||void 0===t?void 0:t.map((function(e){return se(se({},e),{},{isCorrelation:!0})})))||[]),(0,s.default)(e.data.other||[]))}),e.data})):Promise.resolve({})}},{key:"getSystemsList",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=this.props.projectID;return a?new Promise((function(e){0===a.code&&(t.setState({systemsList:a.data}),e(a.data))})):(0,ee.fetchSystemsByProjectId)(n,e).then((function(e){var a=e.data;return t.setState({systemsList:a}),a}))}},{key:"getMilestoneList",value:function(e){var t=this;null!==e&&void 0!==e&&e.name?(0,K.fetchBaseInfos)(e).then((function(a){var n=a.data;t.setState({developMode:n.developMode}),n.developMode>0&&(0,K.fetchAllMileposts)(e).then((function(e){var a=e.data;t.setState({milestoneList:a})}))})):this.setState({milestoneList:[],developMode:-1})}}]),a}(E.Component),l.propTypes=se(se(se({mode:b.default.string,enterpriseGlobalKey:b.default.string,user:b.default.object,customAttributes:b.default.object,assignee:b.default.object,watchers:b.default.array,isCreate:b.default.bool,schemeFieldArchives:b.default.object,fieldIds:b.default.array,onChange:b.default.func,className:b.default.string,issueType:b.default.string,projectID:b.default.number,labels:b.default.array,requirementTypes:b.default.array,bugTypes:b.default.array,sourceTypes:b.default.array,moduleSchemes:b.default.array,expanded:b.default.bool,permissionFunction:b.default.string},B.WithProjectPermissionProps),{},{isFromDetailPage:b.default.bool,isDetailPage:b.default.bool},x.ToggleSectionWrapperProps),{},{timeValidDetct:b.default.func,addLabel:b.default.func,createLabel:b.default.func,detailInfo:b.default.object,onManHourUpdate:b.default.func,onForwardLogs:b.default.func,subRequirements:b.default.oneOfType(b.default.undefined,b.default.array),classicSubTasks:b.default.oneOfType(b.default.undefined,b.default.array),portalProps:b.default.object,meetingCallback:b.default.func,activities:b.default.array,portalContainer:b.default.string,moduleConfig:b.default.object,parentRef:b.default.object,systemsId:b.default.any,issueTypeDetail:b.default.string,projectType:b.default.string}),l.defaultProps={isFromDetailPage:!1,isDetailPage:!1},i=c))||i)||i)||i);t.default=pe},XiRy:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("0l/t"),a("bWfx"),a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("PJYZ")),c=n(a("7W2i")),s=n(a("a1gu")),u=n(a("Nsbk")),d=a("mVeg"),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=T(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=n(a("17x9")),m=n(a("sftu")),v=n(a("yZ+p")),h=n(a("pheU")),g=a("nuIr"),E=a("vi3I"),y=a("x+BT"),b=a("xgZS"),I=a("Z4vw"),S=n(a("KUqB"));function T(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(T=function(e){return e?a:t})(e)}function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var C=function(e){(0,c.default)(a,e);var t=w(a);function a(e){var n;return(0,o.default)(this,a),(n=t.call(this,e)).timer=null,n.localInputRef=(0,f.createRef)(),n.selectItem=function(e){var t=n.props,a=t.handleSelect;if(t.isModification)a&&a(e);else{var r=n.props,o=r.projectID,i=r.issueCode,l=r.closeHandle,c=r.onUpdate;(0,y.updateAffairsEpic)(o,i,{epicCode:e.code}).then((function(){(0,b.success)((0,d.t)("\u66f4\u6539\u53f2\u8bd7\u6210\u529f")),l(),c&&c()}),(function(e){var t=e.msg;(0,b.danger)((0,I.getErrorMessage)(t))}))}},n.searchResults=function(){var e=n.props,t=e.projectID,a=e.currentParentCode,r=e.isModification,o=e.issueCode,i=e.currentSubtaskCode,l=n.state.value;n.timer&&clearTimeout(n.timer),n.timer=setTimeout((function(){if(r){var e=i||o;(0,E.fetchAffairs)(t,e,l).then((function(e){var t=e.data;n.setState({results:t})}))}else(0,y.fetchAffairsEpic)(t,o,l).then((function(e){var t=e.data;n.setState({results:t.filter((function(e){return e.code!==a}))})}))}),500)},n.state={value:"",results:[]},n.handleChangeValue=n.handleChangeValue.bind((0,l.default)(n)),n.onShow=n.onShow.bind((0,l.default)(n)),n.onClear=n.onClear.bind((0,l.default)(n)),n}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props,t=e.show,a=e.isModification,n=e.closeHandle,r=e.inputRef,o=e.currentProjectCooperateSettings,i=this.state,l=i.value,c=i.results,s=o&&o.EPIC&&o.EPIC===g.MODULE_SWITCH.OPENED;return f.default.createElement(m.default,{closeButton:!0,outsideClickCloseable:!1,show:t,onShow:this.onShow,onHide:n,className:h.default.wrapper,keyboard:!1},f.default.createElement("div",{className:h.default.title},!a&&s?(0,d.t)("\u66f4\u6539\u53f2\u8bd7"):(0,d.t)("\u66f4\u6539\u7236\u4e8b\u9879")),f.default.createElement(v.default,{value:l,className:h.default.customInput,ref:r||this.localInputRef,onChange:this.handleChangeValue,prefix:f.default.createElement("div",{className:h.default.customSearchIcon}),suffix:f.default.createElement("div",{className:h.default.cancelBtn,onClick:this.onClear},(0,d.t)("\u53d6\u6d88")),size:"medium",placeholder:!a&&s?(0,d.t)("\u8f93\u5165\u53f2\u8bd7 ID \u6216\u6807\u9898"):(0,d.t)("\u8f93\u5165\u7236\u4e8b\u9879 ID \u6216\u6807\u9898")}),f.default.createElement("div",{className:h.default.customResult},f.default.createElement("div",{className:h.default.resultWrapper},!!c.length&&this.renderResult(),!c.length&&f.default.createElement("div",{className:h.default.resultEmpty},f.default.createElement("div",{className:"".concat(h.default.icon," ").concat(h.default.customSearchIcon)}),(0,d.t)("\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c")))))}},{key:"renderResult",value:function(){var e=this,t=this.state.results;return f.default.createElement("div",{className:h.default.resultItems,onScroll:function(e){e.stopPropagation()}},t.map((function(t){return f.default.createElement("div",{className:h.default.item,key:t.code,onClick:function(){return e.selectItem(t)}},f.default.createElement(S.default,{type:t.issueTypeDetail.iconType}),f.default.createElement("div",{className:h.default.itemCode},"#",t.code),f.default.createElement("div",{className:"".concat(h.default.itemDetail," ").concat(h.default.customDetail)},f.default.createElement("div",{className:h.default.itemDetailTitle},t.name)),t.iteration&&f.default.createElement("div",{className:h.default.belongIteration},t.iteration.name))})))}},{key:"componentDidMount",value:function(){this.searchResults()}},{key:"componentWillUnmount",value:function(){this.timer&&clearTimeout(this.timer)}},{key:"handleChangeValue",value:function(e){this.setState({value:e.target.value},this.searchResults)}},{key:"onShow",value:function(){var e=this.props.inputRef||this.localInputRef;e&&e.current&&e.current.focus()}},{key:"onClear",value:function(){this.setState({value:""},this.searchResults)}},{key:"parseIcon",value:function(e){return e===g.ISSUE_TYPE.REQUIREMENT?h.default.requirementIcon:e===g.ISSUE_TYPE.ASSIGNMENT?h.default.assignmentIcon:e===g.ISSUE_TYPE.DEFECT?h.default.issueIcon:e===g.ISSUE_TYPE.EPIC?h.default.epicIcon:h.default.requirementIcon}}]),a}(f.Component);C.propTypes={show:p.default.bool,isModification:p.default.bool,closeHandle:p.default.func,inputRef:p.default.oneOfType([p.default.func,p.default.shape({current:p.default.instanceOf(Element)})]),onUpdate:p.default.func,projectID:p.default.number,issueCode:p.default.number,currentParentCode:p.default.number,currentSubtaskCode:p.default.number,handleSelect:p.default.func,currentProject:p.default.object,currentProjectCooperateSettings:p.default.object};var O=C;t.default=O},XnCo:function(e,t,a){"use strict";a("RW0V"),a("ioFf"),a("0l/t"),a("mYba"),a("jm62");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.LOG_TYPE=void 0;var r=n(a("lSNA"));function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var l=i(i({SELF:"SELF",NAME:"NAME",DESCRIPTION:"DESCRIPTION",PRIORITY:"PRIORITY",DUE_DATE:"DUE_DATE",START_DATE:"START_DATE",LABEL:"LABEL",WATCHER:"WATCHER",STATUS:"STATUS",ASSIGNEE:"ASSIGNEE",ATTACHMENT:"ATTACHMENT",THIRD_LINK:"THIRD_LINK",RESOURCE:"RESOURCE",MODULE:"MODULE",DEFECT_TYPE:"DEFECT_TYPE",REQUIREMENT_TYPE:"REQUIREMENT_TYPE",WORKING_HOURS:"WORKING_HOURS",CUSTOM_FIELD:"CUSTOM_FIELD",CHILD_ISSUE:"CHILD_ISSUE",PARENT_ISSUE:"PARENT_ISSUE",EPIC_ISSUE:"EPIC_ISSUE",ITERATION:"ITERATION",ISSUE_RELATION:"ISSUE_RELATION",ISSUE_EPIC_CHANGED:"ISSUE_EPIC_CHANGED"},a("nuIr").LOG_TYPE),{},{STORY_POINT:"STORY_POINT",RELATE_DEFECT:"RELATE_DEFECT",RELATE_REQUIREMENT:"RELATE_REQUIREMENT",PROGRESS:"PROGRESS",ISSUE_PROGRAM_RELATION:"ISSUE_PROGRAM_RELATION",WORK_ITEM:"WORK_ITEM",ISSUE_REVIEW:"ISSUE_REVIEW",COPY:"COPY",STORY_RELATE_REQUIREMENT:"STORY_RELATE_REQUIREMENT",EDITION:"EDITION",GROUP_TEAM:"GROUP_TEAM",PARTICIPANT:"PARTICIPANT",CUT_DEFECT:"CUT_DEFECT",ISSUE_PROGRAM:"ISSUE_PROGRAM",DIVIDE:"DIVIDE",GENERATE:"GENERATE",GENERATED:"GENERATED",CONVOLUTION_PROCESS:"CONVOLUTION_PROCESS",CONVOLUTION_PARENT:"CONVOLUTION_PARENT",CONVOLUTION_CHILD:"CONVOLUTION_CHILD",CONVOLUTION_LIMIT:"CONVOLUTION_LIMIT",AUTO_FLOW:"AUTO_FLOW",EDITION_AUTO_UPDATE:"EDITION_AUTO_UPDATE",RULE_EXECUTE:"RULE_EXECUTE",SOFTWARE_UNIT:"SOFTWARE_UNIT"});t.LOG_TYPE=l},YF29:function(e,t,a){e.exports={list:"list-IkJDhWO2m4","list-header":"list-header-sS04rEVYoF",listHeader:"list-header-sS04rEVYoF",th:"th-rTxVKcI6vB",operation:"operation-2byKh8yHnl"}},Yaim:function(e,t,a){e.exports={"table-wrapper":"table-wrapper-3xuPcj4Mob",tableWrapper:"table-wrapper-3xuPcj4Mob",label:"label-16fbyloBHK","btn-label":"btn-label-7nPbvi16bz",btnLabel:"btn-label-7nPbvi16bz",link:"link-2TjvmWeTrf","col-wrapper":"col-wrapper-2qMQXD47C8",colWrapper:"col-wrapper-2qMQXD47C8",header:"header-1fGSDLNHRM","custom-filter-bar":"custom-filter-bar-3eZGO4yb1U",customFilterBar:"custom-filter-bar-3eZGO4yb1U","dropdwon-margin":"dropdwon-margin-3OJId3VOYX",dropdwonMargin:"dropdwon-margin-3OJId3VOYX","search-icon":"search-icon-IO5YPSGQUF",searchIcon:"search-icon-IO5YPSGQUF","clear-icon":"clear-icon-wTOjlkCgr9",clearIcon:"clear-icon-wTOjlkCgr9","btn-footer":"btn-footer-1RFCkOW7di",btnFooter:"btn-footer-1RFCkOW7di"}},Ykrp:function(e,t,a){e.exports={item:"item-11A8PTox8n","item-search":"item-search-1D5DfMBEd0",itemSearch:"item-search-1D5DfMBEd0",icon:"icon-1sJ7r305Px",content:"content-38BeoEnjQs",name:"name-78lhbtbDbV",description:"description-1RzPygex-g",svn:"svn-1967B9az46",link:"link-wELtVKBWxN",right:"right-241N2w6kF2","op-wrap":"op-wrap-3YRVgW3MBK",opWrap:"op-wrap-3YRVgW3MBK","op-btn":"op-btn-3kTGU5808x",opBtn:"op-btn-3kTGU5808x","op-list":"op-list-ezL0w6TxEy",opList:"op-list-ezL0w6TxEy","op-item":"op-item-3nGDDgeDMr",opItem:"op-item-3nGDDgeDMr",detail:"detail-1j-vfDL5pq",td:"td-D1ClbRf7Rh",operation:"operation-22b6lhek9O","td-item":"td-item-11at4acgex",tdItem:"td-item-11at4acgex",branch:"branch-1QTrAh0co7","git-branch":"git-branch-29m4DTvZHJ",gitBranch:"git-branch-29m4DTvZHJ",exclamation:"exclamation-akxKEl__y-",add:"add-LL8XCVNZL8",processing:"processing-3ENWBANoVY"}},Yrbo:function(e,t,a){e.exports={root:"root-1CzntbxGLR",multiple:"multiple-CF9-yG6PWb","custom-input":"custom-input-389OU3Z_uw",customInput:"custom-input-389OU3Z_uw",operation:"operation-NDTwcbeGl0","cancel-btn":"cancel-btn-2CjKPi3CbB",cancelBtn:"cancel-btn-2CjKPi3CbB",associate:"associate-2YS3lTG_Gn"}},Yzhn:function(e,t,a){"use strict";a("I5cv"),a("RW0V"),a("ioFf"),a("0l/t"),a("mYba"),a("jm62"),a("EK0E"),a("XfO3"),a("yt8O"),a("rGqo");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("CX2u"),a("Btvt"),a("VRzm"),a("f3/d");var o,i,l,c,s=n(a("lSNA")),u=n(a("lwsE")),d=n(a("W8MJ")),f=n(a("PJYZ")),p=n(a("7W2i")),m=n(a("a1gu")),v=n(a("Nsbk")),h=a("mVeg"),g=n(a("17x9")),E=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=D(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),y=a("lIIp"),b=n(a("gp0q")),I=a("xgZS"),S=n(a("Zsd2")),T=n(a("E+oP")),w=n(a("246l")),C=n(a("K2gz")),O=n(a("nwSi")),N=n(a("9H5V")),P=a("O0Gn"),j=a("AoGB");function D(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(D=function(e){return e?a:t})(e)}function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,v.default)(e);if(t){var r=(0,v.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,m.default)(this,a)}}var M=(o=(0,y.withAsyncMarkEditor)(),(0,j.WithIssueEditingCtxDecorator)(i=o((c=l=function(e){(0,p.default)(a,e);var t=R(a);function a(e){var n;return(0,u.default)(this,a),(n=t.call(this,e)).showEdit=function(){n.props.onShowEdit?n.props.onShowEdit((function(){n.toggleEditingFlag(!1)})):n.toggleEditingFlag(!1)},n.onDragEnterEditor=function(e){n.props.onDragEnterEditor&&n.props.onDragEnterEditor(e)},n.onDragLeaveEditor=function(e){n.props.onDragLeaveEditor&&n.props.onDragLeaveEditor(e)},n.onMouseLeaveEditor=function(e){n.props.onMouseLeaveEditor&&n.props.onMouseLeaveEditor(e)},n.state={editing:!1,editorState:e.defaultEditorState,content:"",isPending:!1,showMore:!1,isExtraPending:!1,onResourceCallback:function(e){return e}},n.onSaveRef=n.onSaveRef.bind((0,f.default)(n)),n.onContentChange=n.onContentChange.bind((0,f.default)(n)),n.toggleEditingFlag=n.toggleEditingFlag.bind((0,f.default)(n)),n.postComment=n.postComment.bind((0,f.default)(n)),n.hideModal=n.hideModal.bind((0,f.default)(n)),n.showModal=n.showModal.bind((0,f.default)(n)),n.onAddExternalLink=n.onAddExternalLink.bind((0,f.default)(n)),n.commentEditorRef=E.default.createRef(),n.commentStickyContainerRef=E.default.createRef(),n.onCancelEdit=n.onCancelEdit.bind((0,f.default)(n)),n}return(0,d.default)(a,[{key:"onSaveRef",value:function(e){this.editor=e}},{key:"onContentChange",value:function(e,t){var a=this.props,n=a.getPlainText;(0,a.updateEditing)({isEditing:!!n(e),type:"COMMENT"}),this.setState({content:n(e),editorState:e},t)}},{key:"toggleEditingFlag",value:function(e){var t=this,a=this.props,n=a.createWithContent,r=a.defaultEditorState,o=this.state.editing;this.setState({editing:!o},(function(){t.props.onEditStatusChanged&&t.props.onEditStatusChanged(!o,t.commentEditorRef);var a=e?{editorState:n("#")}:{editorState:r};t.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a),(function(){t.editor&&(t.editor.focusToEnd(),setTimeout((function(){t.editor.focusToEnd()}),500))}))}))}},{key:"postComment",value:function(){var e=this,t=this.props,a=t.onPostComment,n=t.currentProject,r=t.issueCode,o=t.defaultEditorState,i=t.updateEditing,l=this.state,c=l.content;l.isPending||((0,T.default)((0,S.default)(c))?(0,I.danger)((0,h.t)("\u8bc4\u8bba\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a")):(this.setState({isPending:!0}),a(n.id,r,c,null,(function(){e.setState({isPending:!1,editing:!1,content:"",editorState:o}),i({isEditing:!1,type:""})})).finally((function(){e.setState({isPending:!1})}))))}},{key:"renderEditor",value:function(){var e=this.props,t=e.currentProject,a=e.avatar,n=(e.issueType,e.MediumMarkEditorWithExtraSuggestions),r=(e.MediumMarkEditor,e.isCommentSticky),o=e.userID,i=this.state.isExtraPending;return E.default.createElement("div",{className:(0,C.default)(O.default.editor,!r&&O.default.commentNormal)},E.default.createElement("div",{className:O.default.left},E.default.createElement(b.default,{size:"small",src:a})),E.default.createElement("div",{className:(0,C.default)(O.default.content,r&&O.default.hasMaxHeight),ref:this.commentEditorRef,onDragEnter:this.onDragEnterEditor,onDragLeave:this.onDragLeaveEditor,onMouseLeave:this.onMouseLeaveEditor},E.default.createElement(n,{autoSaveAlertDisabled:!0,placeholder:"".concat((0,h.t)("\u5728\u6b64\u8f93\u5165\u8bc4\u8bba\u5185\u5bb9\uff08\u652f\u6301 Markdown\uff09")),onChange:this.onContentChange,editorState:this.state.editorState,projectId:t.id||0,autoSize:!0,currentProject:t,onCommandEnter:this.postComment,ref:this.onSaveRef,mentionParams:{project_id:t.id},hashSearchParams:{owner:t.owner_user_name,project:t.name,id:t.id},onAddExternalLink:this.onAddExternalLink,userId:o}),E.default.createElement("div",{className:(0,C.default)(w.default.newButton,w.default.primary,w.default.h32,O.default.customBtnMr,i&&w.default.disabled),onClick:this.postComment},(0,h.t)("\u53d1\u8868")),r&&E.default.createElement("div",{className:(0,C.default)(w.default.newButton,w.default.default,w.default.h32,O.default.customBtnMr),onClick:this.onCancelEdit},(0,h.t)("\u53d6\u6d88"))))}},{key:"render",value:function(){var e,t,a=this,n=this.props,r=n.currentProject,o=n.avatar,i=n.issueCode,l=n.expanded,c=n.isCommentSticky,u=n.isCommentAbsBottom,d=this.state,f=d.editing,p=d.showMore;return c?E.default.createElement("div",{className:(0,C.default)(O.default.wrapper,(e={},(0,s.default)(e,O.default.commentAbsBottom,u),(0,s.default)(e,O.default.detail,u&&this.props.isDetail),(0,s.default)(e,O.default.open,f),e)),onScroll:function(e){e.stopPropagation()},onDrag:function(e){e.stopPropagation()},onMouseDown:function(e){e.stopPropagation()}},E.default.createElement("div",{className:(0,C.default)(O.default.container,(t={},(0,s.default)(t,O.default.expanded,l),(0,s.default)(t,O.default.detail,this.props.isDetail),t)),ref:this.commentStickyContainerRef},f?this.renderEditor():E.default.createElement("div",{className:O.default.triggerBar,onClick:function(){return a.showEdit()}},E.default.createElement(b.default,{size:"small",src:o}),E.default.createElement("span",null,(0,h.t)("\u70b9\u6b64\u53d1\u8868\u8bc4\u8bba")))),E.default.createElement(N.default,{show:p,onHide:this.hideModal,excludeds:[{code:i,id:r.id}],initialSelecteds:[],onConfirm:function(){var e;return(e=a.state).onResourceCallback.apply(e,arguments)},onAddLink:this.onAddExternalLink,currentProject:r})):this.renderEditor()}},{key:"componentDidMount",value:function(){!this.props.isCommentSticky&&this.props.onEditStatusChanged&&this.props.onEditStatusChanged(!0,this.commentEditorRef)}},{key:"componentDidUpdate",value:function(e){!1===e.autoshowComment&&this.props.autoshowComment&&(console.log(123),this.toggleEditingFlag(!0),this.props.autoToggleComment(this.props.issueCode,!1)),e.isCommentSticky!==this.props.isCommentSticky&&!this.props.isCommentSticky&&this.props.onEditStatusChanged&&this.props.onEditStatusChanged(!0,this.commentEditorRef),e.isCommentSticky!==this.props.isCommentSticky&&this.props.onRef&&this.props.onRef(this.commentStickyContainerRef)}},{key:"onCancelEdit",value:function(){this.state.content;this.props.updateEditing({isEditing:!1,type:""}),this.editor.onCancel(),this.setState({editorState:this.props.defaultEditorState}),this.toggleEditingFlag()}},{key:"onAddExternalLink",value:function(e){var t=this,a=this.props.currentProject,n=a.owner_user_name,r=a.name;this.setState({isExtraPending:!0}),(0,P.addExternalLink)(n,r,e).then((function(e){t.setState({isExtraPending:!1}),t.state.onResourceCallback([e.data])}))}},{key:"hideModal",value:function(){this.setState({showMore:!1})}},{key:"showModal",value:function(){this.setState({showMore:!0})}}]),a}(E.Component),l.propTypes={currentProject:g.default.shape({id:g.default.number.isRequired,name:g.default.string,owner_user_name:g.default.string}),avatar:g.default.string,issueCode:g.default.number,onPostComment:g.default.func,expanded:g.default.bool,userID:g.default.number,defaultEditorState:g.default.object,MediumMarkEditorWithExtraSuggestions:g.default.object,getPlainText:g.default.func,autoshowComment:g.default.bool,autoToggleComment:g.default.func,createWithContent:g.default.func,isCommentSticky:g.default.bool,isCommentAbsBottom:g.default.bool,onShowEdit:g.default.func,onEditStatusChanged:g.default.func,onDragEnterEditor:g.default.func,onDragLeaveEditor:g.default.func,onMouseLeaveEditor:g.default.func,isDetail:g.default.bool,updateEditing:g.default.func,issueType:g.default.string,onRef:g.default.func},i=c))||i)||i);t.default=M},ZYwa:function(e,t,a){"use strict";a.r(t);var n=a("cDcd"),r=a.n(n),o=a("mVeg"),i=a("K2gz"),l=a.n(i),c=a("1hCk"),s=a.n(c),u=a("246l"),d=a.n(u),f=a("XLbL"),p=a.n(f),m=a("KUqB"),v=a("sftu"),h=a.n(v),g=a("Th6D"),E=a.n(g),y=a("V/h/"),b=a("SLo4"),I=a.n(b),S=a("SUhN"),T=a.n(S),w=a("xgZS"),C=a("885C"),O=a("z0hg"),N=a("nuIr"),P=a("w3Wo"),j=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),D=function(){return(D=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},k=function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function i(e){try{c(n.next(e))}catch(t){o(t)}}function l(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}c((n=n.apply(e,t||[])).next())}))},R=function(e,t){var a,n,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(a=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){i.label=l[1];break}if(6===l[0]&&i.label<r[1]){i.label=r[1],r=l;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(l);break}r[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(c){l=[6,c],n=0}finally{a=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},M=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},A=function(e,t,a){if(a||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))},L=function(e){function t(t){var a,n,i=this;return(i=e.call(this,t)||this).defaultProps={thirdVisable:!0,deleteFeatch:!0},i.onChange=function(){var e=i.props.onChange;e&&e(i.getData())},i.getData=function(){var e=i.state;return{attachments:e.attachments,allAttachments:e.allAttachments,thirdLinks:e.thirdLinks}},i.resetData=function(){i.setState({attachments:[],thirdLinks:[]},i.combineThirdLinks)},i.onFileDropFail=function(e){var t=e.timestamp;i.setState({attachments:Object(y.default)(i.state.attachments,(function(e){var a=e.findIndex((function(e){return e.timestamp===t}));e.splice(a,1)}))},i.onChange)},i.onFileDropSuccess=function(e){i.setState((function(t){return{attachments:Object(y.default)(t.attachments,(function(t){var a;if("MODAO"===e.thirdType)Object(w.success)("".concat(Object(o.t)("\u5f15\u5165\u6210\u529f"))),a=t.findIndex((function(t){return t.timestamp===e.timestamp}));else if(t.find((function(t){return t.fileId===e.fileId}))){Object(w.success)("".concat(e.name).concat(Object(o.t)(" \u6587\u4ef6\u5df2\u66f4\u65b0!")));var n=t.findIndex((function(t){return t.timestamp===e.timestamp}));t.splice(n,1),a=t.findIndex((function(t){return t.fileId===e.fileId}))}else a=t.findIndex((function(t){return t.timestamp===e.timestamp}));t[a]=D(D({},t[a]),e)}))}})),i.setState((function(){i.combineThirdLinks()}))},i.fileUpload=function(e){i.setState({attachments:Object(y.default)(i.state.attachments,(function(t){t.splice.apply(t,A([t.length,0],M(e),!1))}))},i.combineThirdLinks)},i.onFileDropDelete=function(e){var t=e.fileId,a=e.isModao,n=e.isCodesign,r=i.props.currentProject.id;a||n?i.setState({thirdLinks:i.state.thirdLinks.filter((function(e){return e.fileId!==t}))},i.combineThirdLinks):i.handleDeleteAttachment(r,t)},i.onAddThirdLink=function(e){i.hideImportOutResourcePicker(),i.setState({thirdLinks:A(A([],M(i.state.thirdLinks),!1),M(e),!1)},i.combineThirdLinks)},i.hideImportOutResourcePicker=function(){i.setState({isShowImportOutResourcePicker:!1})},i.showImportOutResourcePicker=function(){i.setState({isShowImportOutResourcePicker:!0})},i.combineThirdLinks=function(){var e=i.getAllFileList(i.state);i.setState({allAttachments:i.sortAttachments(e)},i.onChange)},i.sortAttachments=function(e){var t=A([],M(e),!1);return t.sort((function(e,t){return e.timestamp-t.timestamp})),t},i.whetherShowMoveButton=function(){if(i.wrapperRef.current&&i.listRef.current){var e=i.wrapperRef.current.getBoundingClientRect().width,t=i.listRef.current.getBoundingClientRect().width;i.setState({showButton:t>e})}},i.state={allAttachments:i.getAllFileList(t.defaultAttachementFile),attachments:(null===(a=t.defaultAttachementFile)||void 0===a?void 0:a.attachments)||[],isShowImportOutResourcePicker:!1,thirdLinks:(null===(n=t.defaultAttachementFile)||void 0===n?void 0:n.thirdLinks)||[],showButton:!1,toLeft:0},i.wrapperRef=r.a.createRef(),i.listRef=r.a.createRef(),i}return j(t,e),t.prototype.componentDidMount=function(){this.onChange()},t.prototype.componentDidUpdate=function(e,t){var a;t.allAttachments.length!==this.state.allAttachments.length&&this.whetherShowMoveButton(),(null===(a=e.defaultAttachementFile.allAttachments)||void 0===a?void 0:a.length)!==this.state.allAttachments.length&&this.setState({attachments:e.defaultAttachementFile.attachments||[],allAttachments:e.defaultAttachementFile.allAttachments||[],thirdLinks:e.defaultAttachementFile.thirdLinks||[]})},t.prototype.render=function(){var e=this,t=this.state,a=t.attachments,n=t.allAttachments,i=t.isShowImportOutResourcePicker,c=t.showButton,u=t.toLeft,d=this.props,f=d.enterpriseGlobalKey,p=d.currentProject,m=d.user,v=d.thirdVisable,h=p.name,g=p.id;return r.a.createElement("div",{className:s.a.attachementSectionContainer},r.a.createElement("div",{className:s.a.sectionHeader},r.a.createElement("span",{className:s.a.title},Object(o.t)("\u9644\u4ef6")),r.a.createElement("span",{className:s.a.dividerLine}),r.a.createElement(I.a,{onHandleAttachments:this.fileUpload,currentAttachmentNum:a.length,attachmentLimit:n.length>=20},r.a.createElement("a",{className:s.a.uploadButton},Object(o.t)("\u672c\u5730\u4e0a\u4f20"))),v&&r.a.createElement("div",{className:s.a.importOutResourceWrap},r.a.createElement(T.a,{onHandleAttachments:this.onAddThirdLink,isShowPicker:i,onShow:this.showImportOutResourcePicker,onHide:this.hideImportOutResourcePicker,attachmentLimit:n.length>=20}))),r.a.createElement("div",{className:s.a.attachmentSection},n.length?r.a.createElement("div",{className:l()(s.a.attachmentWrapper,c&&s.a.rightBorder,u<0&&s.a.leftBorder),ref:this.wrapperRef},r.a.createElement("div",{className:s.a.attachmentList,ref:this.listRef,style:{left:"".concat(u,"px")}},!!n.length&&r.a.createElement(C.ThemeConsumer,null,(function(t){var a=t.hiddenFolderDirs;return n.map((function(t){return r.a.createElement("div",{className:s.a.attachmentItem,key:t.fileId},r.a.createElement(O.default,{attachment:t,enterpriseGlobalKey:f,currentProjectName:h,currentProjectId:g,dir:a[N.HIDDEN_FILE_TYPE.REQUIREMENTS].file_id,uploadFileSuccess:e.onFileDropSuccess,uploadFileFailed:e.onFileDropFail,uploadFileDelete:e.onFileDropDelete,uploadFileCancel:e.onFileDropCancel,allowPreview:!1,userId:m.id}))}))})))):r.a.createElement("div",{className:s.a.sectionPlaceholder},Object(o.t)("\u5c1a\u672a\u6dfb\u52a0\u9644\u4ef6")),c&&r.a.createElement("a",{className:s.a.next,onClick:function(){return e.moveContent()}}),u<0&&r.a.createElement("a",{className:s.a.pre,onClick:function(){return e.moveContent(!1)}})))},t.prototype.onFileDropCancel=function(e){var t=e.timestamp,a=e.isModao,n=e.isCodesign;a||n?this.setState({thirdLinks:this.state.thirdLinks.filter((function(e){return e.timestamp!==t}))},this.combineThirdLinks):this.setState({attachments:Object(y.default)(this.state.attachments,(function(e){var a=e.findIndex((function(e){return e.timestamp===t}));e.splice(a,1)}))},this.combineThirdLinks)},t.prototype.handleDeleteAttachment=function(e,t){return k(this,void 0,void 0,(function(){return R(this,(function(a){switch(a.label){case 0:return this.props.deleteFeatch?[4,Object(P.delAttachment)(e,t)]:[3,2];case 1:a.sent(),a.label=2;case 2:return this.setState({attachments:Object(y.default)(this.state.attachments,(function(e){var a=e.findIndex((function(e){return e.fileId===t}));e.splice(a,1)}))},this.combineThirdLinks),[2]}}))}))},t.prototype.moveContent=function(e){if(void 0===e&&(e=!0),this.wrapperRef.current&&this.listRef.current){var t=this.state.toLeft,a=this.wrapperRef.current.getBoundingClientRect().width,n=this.listRef.current.getBoundingClientRect().width+t-a;e?n<=a?this.setState({toLeft:t+-1*n,showButton:!1}):this.setState({toLeft:t-a}):n<=a?this.setState({toLeft:0,showButton:!0}):this.setState({toLeft:t+a})}},t.prototype.getAllFileList=function(e){var t=e.attachments,a=e.thirdLinks;if(!t&&!a)return[];if(!a)return A([],M(t),!1);var n=a.map((function(e){if(e.name)return e;var t,a,n="";return e.isModao||e.isCodesign?(t=e.isModao,a=e.isCodesign,t&&(n=e.modao.title||Object(o.t)("\u58a8\u5200\u9644\u4ef6")),a&&(n=e.codesign.title)):(t="MODAO"===e.thirdType,a="CODESIGN"===e.thirdType,t&&(n=e.title||Object(o.t)("\u58a8\u5200\u9644\u4ef6")),a&&(n=e.title)),D(D({},e),{noUpload:!0,isModao:t,isCodesign:a,name:n,createdAt:e.createdAt||e.timestamp})}));return A(A([],M(t),!1),M(n),!1)},t}(r.a.Component),x=a("DgMC"),_=a("NI22"),F=a("TGxl"),W=a("kits"),B=function(){return(B=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},H=function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function i(e){try{c(n.next(e))}catch(t){o(t)}}function l(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}c((n=n.apply(e,t||[])).next())}))},U=function(e,t){var a,n,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(a=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){i.label=l[1];break}if(6===l[0]&&i.label<r[1]){i.label=r[1],r=l;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(l);break}r[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(c){l=[6,c],n=0}finally{a=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},Y=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i};var q,G=Object(n.forwardRef)((function(e,t){var a=this,o=e.currentProject,i=e.initData,c=e.sourceIssuesDetails,u=Y(Object(F.e)({editorAutoFocus:!0,needToolBarSticky:!1,attachmentsSticky:!1,maxMainBodyHeight:0,isPending:!1,initEditorData:i?B({},i):{}}),2),d=u[0],f=u[1],p=d.editorAutoFocus,m=d.maxMainBodyHeight,v=d.isPending,h=d.initEditorData,g=r.a.createRef(),E=Object(n.useRef)(),y=Y(Object(n.useState)(!1),2),b=y[0],I=y[1],S=Y(Object(n.useState)(c.issueDescriptionType),2),T=S[0],w=S[1],C=function(){var e=g.current;e&&f({attachmentsSticky:e&&e.scrollTop+e.offsetHeight<e.scrollHeight&&e.scrollHeight>e.clientHeight})},O=function(){return H(a,void 0,void 0,(function(){var e;return U(this,(function(t){switch(t.label){case 0:return[4,Object(W.b)(o.id,c.id)];case 1:return e=t.sent().data,f({initEditorData:{pageId:e.pageId,pageDraftId:e.draftId,historyId:e.historyId}}),[2]}}))}))},N=function(){var e,t;return Object(_.isBlockType)(T)?B(B({},h),{descriptionType:_.EditorType.BLOCK}):{content:(null===(e=null===E||void 0===E?void 0:E.current)||void 0===e?void 0:e.getRichContent())||"",slateRaw:(null===(t=null===E||void 0===E?void 0:E.current)||void 0===t?void 0:t.getRichContent("raw"))||"",descriptionType:_.EditorType.MARKDOWN}},P=function(){var e;(null===(e=null===E||void 0===E?void 0:E.current)||void 0===e?void 0:e.removeDraft)&&E.current.removeDraft()};return Object(n.useEffect)((function(){O()}),[]),Object(n.useImperativeHandle)(t,(function(){return{getInfo:N,removeDraft:P,editType:T}})),r.a.createElement("div",{className:s.a.mainBody,style:{maxHeight:"".concat(m,"px")},ref:g,onScroll:function(){C()}},r.a.createElement("div",{className:s.a.editorContainer},r.a.createElement(_.default,B({},{type:T,defaultValue:c.slateRaw?{type:"raw",value:c.slateRaw}:{type:"markdown",value:c.description},readOnly:v,canChangeType:!0,isEditing:!0,autofocus:p,container:g.current,currentProject:o,initEditorData:h,isDisabled:v,onFullScreenCallback:I,onEditorTypeChangeCallback:function(e){w(e)}},{onLoad:function(e){e.isError?Object(_.isBlockType)(T)&&e.isDraftIdNotExist&&f({initEditorData:null},O):C()},className:l()(s.a.customSectionZindex,!b&&s.a.editorHeight),ref:E}))))})),z=a("T8xO"),V=a.n(z),Z=a("aHEs"),K=a("BKNj"),J=a("+STs"),Q=a.n(J),X=a("Chqb"),$=a.n(X),ee=function(){return(ee=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},te=function(e){var t=e.value,a=e.item,n=e.onSelect,o=e.focused,i=e.withText,c=function(){return a.id===(null===t||void 0===t?void 0:t.id)};return r.a.createElement("div",{className:l()($.a.issueItem,c()&&Q.a.checked,o&&Q.a.focus,i&&Q.a.withText),title:a.text,onClick:function(){return n(a)}},r.a.createElement("span",{className:$.a.icon},r.a.createElement(m.default,{type:a.iconType})),r.a.createElement("div",{className:l()($.a.content)},a.name),c()&&r.a.createElement("span",{className:l()($.a.checked)}))},ae=function(e){var t=e.withText,a=e.items,n=a&&a.length?a.filter((function(e){return"SUB_TASK"!==e.issueType})):[];return r.a.createElement(K.default,ee({},e,{items:n,className:Q.a.issueContainer,searchable:!1,clearable:!!e.isMultiple,showPanel:e.show,Trigger:function(e){var t=e.open,a=e.value;return a?r.a.createElement("div",{className:l()(Q.a.projectTrigger,Q.a.issueTrigger,t?Q.a.active:"")},r.a.createElement("span",{className:l()($.a.title,Q.a.issueTitle)},r.a.createElement(m.default,{type:a.iconType}),r.a.createElement("span",{className:Q.a.text},a.name)),r.a.createElement("span",{className:Q.a.caret})):r.a.createElement("div",{className:l()(Q.a.projectTrigger,t?Q.a.active:"",Q.a.disabled,Q.a.issueTrigger)},r.a.createElement("span",{className:l()($.a.title,Q.a.text)},Object(o.t)("\u8bf7\u9009\u62e9\u7c7b\u578b")),r.a.createElement("span",{className:Q.a.caret}))},triggerExtraProps:e.triggerExtraProps,Item:te,itemExtraProps:e.itemExtraProps,panelCustomStyle:t?Q.a.issueTypeFatItems:Q.a.issueTypeItems,isLocalSearch:!1}))},ne=function(){return(ne=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},re=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},oe=function(e){var t=e.value,a=e.item,n=e.onSelect,o=e.focused,i=e.withText;return r.a.createElement("div",{className:l()(Q.a.item,a.value===t&&Q.a.checked,o&&Q.a.focus,i&&Q.a.withText),title:a.text,onClick:function(){return n(a)}},r.a.createElement("span",{className:Q.a.icon},r.a.createElement("img",{className:Q.a.issueImg,src:a.avatar.src,alt:""})),r.a.createElement("div",{className:l()($.a.content)},a.text))},ie=function(e){var t=e.currProject,a=e.mounted,i=re(Object(n.useState)(!1),2),c=i[0],s=i[1],u=re(Object(n.useState)([]),2),d=u[0],f=u[1];return Object(n.useEffect)((function(){Object(W.e)().then((function(e){var a=e.data.map((function(e){return{avatar:{src:e.icon,shape:"square"},text:t&&t.id===e.id?Object(o.t)("\u5f53\u524d\u7814\u53d1\u7a7a\u95f4"):e.display_name,value:e.id.toString(),project_path:e.project_path,name:e.name}}));f(a)})).finally((function(){s(!1),a&&a instanceof Function&&a()}))}),[]),r.a.createElement(K.default,ne({},e,{items:d,className:Q.a.issueContainer,placeholder:c?"Loading...":Object(o.t)("\u8bf7\u9009\u62e9\u7814\u53d1\u7a7a\u95f4"),searchable:!1,clearable:!!e.isMultiple,showPanel:e.show,Trigger:function(e){var t=e.open,a=e.value,n=d.find((function(e){return e.value===a}));return n?r.a.createElement("div",{className:l()(Q.a.projectTrigger,Q.a.issueTrigger,t?Q.a.active:"")},r.a.createElement("span",{className:l()($.a.title,Q.a.issueTitle)},r.a.createElement("img",{className:Q.a.issueImg,src:n.avatar.src,alt:""}),r.a.createElement("span",{className:Q.a.text},n.text)),r.a.createElement("span",{className:Q.a.caret})):r.a.createElement("div",{className:l()(Q.a.projectTrigger,t?Q.a.active:"",Q.a.disabled,Q.a.issueTrigger)},r.a.createElement("span",{className:l()($.a.title,Q.a.text)},Object(o.t)("\u8bf7\u9009\u62e9\u7814\u53d1\u7a7a\u95f4")),r.a.createElement("span",{className:Q.a.caret}))},triggerExtraProps:e.triggerExtraProps,Item:oe,itemExtraProps:e.itemExtraProps,panelCustomStyle:Q.a.issueTypeItems,isLocalSearch:!1}))},le=a("DTVk"),ce=a("L8Eh"),se=a("ai0/"),ue=a("OTim"),de=a("/HJl"),fe=a.n(de);!function(e){e.status="status",e.assignee="assignee",e.requirement="requirement",e.relatedRequirement="relatedRequirement",e.iteration="iteration",e.storypoint="storypoint",e.release="release"}(q||(q={}));var pe=a("sWxF"),me=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i};var ve=r.a.memo(fe()((function(e){var t,a=e.CURRENT_USER_ENTERPRISE_PERMISSION_NAMESPACE_FOR_REDUX_STORE;return{ramOnline:null===(t=null===a||void 0===a?void 0:a.ramStatus)||void 0===t?void 0:t.ramOnline}}),{})((function(e){var t=e.currentProjectSetting,a=e.issueTypeDetail,i=e.onChangeAttributes,c=e.attributes,u=e.currentProject,d=e.ramOnline,f=me(Object(F.e)({availableRequirements:[],iterationList:[],parentRequirementsList:[]}),2),p=f[0],m=f[1],v=me(Object(n.useState)(!1),2),h=v[0],g=v[1],E=null===t||void 0===t?void 0:t.COOPERATE_MODE,y=Object(n.useMemo)((function(){if(!t||!a)return[];var e=(a.issueType===le.IssueType.requirement||a.issueType===le.IssueType.assignment&&"CLASSIC"===E)&&t.REQUIREMENT&&t.REQUIREMENT===N.MODULE_SWITCH.OPENED,n=-1!==[le.IssueType.bug].indexOf(a.issueType)&&t.REQUIREMENT&&t.REQUIREMENT===N.MODULE_SWITCH.OPENED,r="EPIC"!==a.issueType;return[{type:q.status,visable:!0},{type:q.assignee,visable:!0,required:!1},{type:q.requirement,visable:r&&e},{type:q.relatedRequirement,visable:r&&n},{type:q.release,visable:r&&d},{type:q.iteration,visable:r&&t.ITERATION&&t.ITERATION===N.MODULE_SWITCH.OPENED},{type:q.storypoint,useSize:t.STORY_POINT_TYPE===N.STORY_POINT_TYPE.TSHIRT,visable:r&&t.STORY_POINT&&t.STORY_POINT===N.MODULE_SWITCH.OPENED}].filter((function(e){return e.visable}))}),[t,a]),b=function(e){void 0===e&&(e="");u.name;var t=u.id;return Object(pe.getAvailableRequirementsWithoutCode)(t,{keyword:e}).then((function(e){var t=e.data;m({availableRequirements:t})}))},I=function(e){void 0===e&&(e="");u.name;var t=u.id;return Object(pe.getAvailableRequirementsWithoutCode)(t,{keyword:e}).then((function(e){var t=e.data;m({parentRequirementsList:t})}))};return Object(n.useEffect)((function(){y.find((function(e){return e.type===q.relatedRequirement}))&&b(),y.find((function(e){return e.type===q.iteration}))&&Object(W.c)(u.id).then((function(e){var t=e.data;m({iterationList:t.map((function(e){return{value:e.code,text:e.name,progress:{finished:e.completedCount,processing:e.processingCount,unstart:e.waitProcessCount}}}))})})),y.find((function(e){return e.type===q.requirement}))&&I()}),[y]),r.a.createElement("div",{className:l()(s.a.issuePropertyContainer),style:{paddingTop:"16px"}},y.map((function(e){var t,a,n;switch(e.type){case q.requirement:return r.a.createElement("div",{key:e.type,className:s.a.issuePropertySection},r.a.createElement("label",null,Object(o.t)("\u6240\u5c5e\u9700\u6c42")," "),r.a.createElement(se.default,{requireCode:!0,type:(null===(t=null===c||void 0===c?void 0:c.parentRequirement)||void 0===t?void 0:t.issueTypeDetail)||null,placeholder:Object(o.t)("\u672a\u5173\u8054\u9700\u6c42"),clearPlaceholder:Object(o.t)("\u89e3\u9664\u5173\u8054"),projectPath:u.project_path,searchable:!0,value:c.parentRequirement&&c.parentRequirement.code||0,disabled:!1,items:p.parentRequirementsList,selectedItem:c.parentRequirement,onSearch:function(e){I(e)},onSelect:function(e){i({type:"parentRequirement",value:e})},onClear:function(){i({type:"parentRequirement"})},portalProps:{toRight:!0,portalWrapStyle:{zIndex:1099,width:"280px"},isScroll:h,resetIsScroll:function(){g(!1)}}}));case q.storypoint:return r.a.createElement("div",{className:s.a.issuePropertySection},r.a.createElement("label",null,Object(o.t)("\u6545\u4e8b\u70b9")),r.a.createElement(ue.default,{useSize:e.useSize,value:c.storyPoint,onSelect:function(e){i({type:"storyPoint",value:e>-1?e:void 0})},onClear:function(){i({type:"storyPoint"})}}));case q.status:return r.a.createElement("div",{key:e.type});case q.assignee:return r.a.createElement("div",{key:e.type,className:s.a.issuePropertySection},r.a.createElement("label",null,Object(o.t)("\u5904\u7406\u4eba"),e.required&&r.a.createElement("span",{className:s.a.highlight},"*")),r.a.createElement(ce.default,{inProject:!0,projectID:u.id,value:(null===(a=null===c||void 0===c?void 0:c.assignee)||void 0===a?void 0:a.id)||null,clearable:!e.required,onSelect:function(e){return i({type:"assignee",value:e})},onClear:function(){return i({type:"assignee"})},triggerExtraProps:{initialSelectedItem:(null===c||void 0===c?void 0:c.assignee)||null}}));case q.relatedRequirement:return r.a.createElement("div",{key:e.type,className:s.a.issuePropertySection},r.a.createElement("label",null,Object(o.t)("\u5173\u8054\u9700\u6c42")),r.a.createElement(se.default,{requireCode:!0,type:null===(n=null===c||void 0===c?void 0:c.relatedRequirement)||void 0===n?void 0:n.issueTypeDetail,placeholder:Object(o.t)("\u672a\u5173\u8054\u9700\u6c42"),clearPlaceholder:Object(o.t)("\u6e05\u9664\u5df2\u9009"),searchable:!0,singleReturn:!0,projectPath:u.project_path,value:c.relatedRequirement?c.relatedRequirement.code:null,items:p.availableRequirements,selectedItem:c.relatedRequirement,onSearch:function(e){b(e)},onSelect:function(e){i({type:"relatedRequirement",value:e})},onClear:function(){i({type:"relatedRequirement"})},isBase:!0,disabled:!1,portalProps:{toRight:!0,portalWrapStyle:{zIndex:1049,width:"280px"},isScroll:h,resetIsScroll:function(){g(!1)}}}));case q.iteration:return r.a.createElement("div",{key:e.type,className:s.a.issuePropertySection},r.a.createElement("label",null,Object(o.t)("\u6240\u5c5e\u8fed\u4ee3")),r.a.createElement(se.default,{searchable:!0,type:{issueType:"sprint",iconType:"sprint",text:Object(o.t)("\u8fed\u4ee3")},placeholder:Object(o.t)("\u672a\u89c4\u5212\u8fdb\u8fed\u4ee3"),clearPlaceholder:Object(o.t)("\u79fb\u51fa\u8fed\u4ee3"),searchPlaceholder:Object(o.t)("\u5feb\u901f\u7b5b\u9009"),value:c.iterationCode,items:p.iterationList,isBase:!0,onSelect:function(e){i({type:"iterationCode",value:e.value})},onClear:function(){return i({type:"iterationCode"})},projectPath:u.project_path,disabled:!1,portalProps:{toRight:!0,portalWrapStyle:{zIndex:1049,width:"280px"},isScroll:h,resetIsScroll:function(){g(!1)}}}));default:return null}})))}))),he=function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function i(e){try{c(n.next(e))}catch(t){o(t)}}function l(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}c((n=n.apply(e,t||[])).next())}))},ge=function(e,t){var a,n,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(a=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){i.label=l[1];break}if(6===l[0]&&i.label<r[1]){i.label=r[1],r=l;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(l);break}r[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(c){l=[6,c],n=0}finally{a=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},Ee=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},ye=function(e,t,a){if(a||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))},be=a("7bn+"),Ie=a("f0Wu"),Se=a.n(Ie),Te=a("LvDl"),we=function(e,t){var a={name:function(e){return Object(Te.trim)(e.name)},watchers:function(e){return e.watchers?e.watchers.map((function(e){return e.id})):void 0},relatedIssueCode:function(e){var t;return null===(t=null===e||void 0===e?void 0:e.relatedRequirement)||void 0===t?void 0:t.code},parentCode:function(e){var t;return(null===(t=null===e||void 0===e?void 0:e.parentRequirement)||void 0===t?void 0:t.code)||0},iterationCode:"iterationCode",releaseIds:"releaseIds",storyPoint:"storyPoint",assignee:function(e){var t;return null===(t=null===e||void 0===e?void 0:e.assignee)||void 0===t?void 0:t.id},priority:"priority",requirementTypeId:"requirementType",startDate:"startDate",dueDate:"dueDate",workingHours:"workingHours",projectModuleId:"projectModule",defectTypeId:"defectType",labelIds:"labels",progress:"progress",associateIterations:function(e){return e.associateIteration?e.associateIteration.map((function(e){return e.id})):void 0},releaseDate:"releaseDate"},n=t.fields,r={customFieldValueMap:Object.keys(n).filter((function(e){return void 0!==n[e]})).map((function(t){var a=e[t].issueField.componentType;return a===be.PROPERTY_TYPE_CONSTANTS.SELECT_ITERATION_MULTI||a===be.PROPERTY_TYPE_CONSTANTS.SELECT_MEMBER_MULTI?{id:t,content:n[t].map((function(e){return e.id}))}:a===be.PROPERTY_TYPE_CONSTANTS.SELECT_ITERATION_SINGLE||a===be.PROPERTY_TYPE_CONSTANTS.SELECT_MEMBER_SINGLE?{id:t,content:n[t].id}:{id:t,content:n[t]}}))};return Object.keys(a).forEach((function(e){var n,o=a[e];"string"===typeof o?n=t[o]:o instanceof Function&&(n=o(t)),function(e){var t=Object.prototype.toString.call(e);return-1!==t.indexOf("Array")&&e.length>0||(-1!==t.indexOf("Number")||(-1!==t.indexOf("String")&&""!==e||-1!==t.indexOf("Object")&&Object.keys(e).length>0))}(n)&&(r[e]=-1!==e.indexOf("Date")?Se()(n).format("YYYY-MM-DD"):n)})),r},Ce=["SELECT_ITERATION_SINGLE","SELECT_ITERATION_MULTI"],Oe=a("AwMv"),Ne=a("YzRi"),Pe=a("Z4vw"),je=a("PoYe"),De=function(){return(De=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},ke=function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function i(e){try{c(n.next(e))}catch(t){o(t)}}function l(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}c((n=n.apply(e,t||[])).next())}))},Re=function(e,t){var a,n,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(a=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){i.label=l[1];break}if(6===l[0]&&i.label<r[1]){i.label=r[1],r=l;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(l);break}r[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(c){l=[6,c],n=0}finally{a=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},Me=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},Ae=function(e,t,a){if(a||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))};t.default=function(e){var t=this,a=e.closeHandle,i=e.user,c=e.enterpriseGlobalKey,u=e.sourceIssueCode,f=e.sourceIssueTypeDetail,v=e.sourceProject,g=e.callback,y=Me(Object(F.e)({name:"",watchers:[],relatedRequirement:void 0,parentRequirement:void 0,iterationCode:"",releaseList:[],releaseIds:[],storyPoint:void 0,assignee:void 0,priority:void 0,requirementType:void 0,startDate:void 0,dueDate:void 0,workingHours:void 0,projectModule:void 0,defectType:void 0,labels:[],progress:void 0,fields:{},associateIteration:[],releaseDate:void 0}),2),b=y[0],I=y[1],S=Me(Object(F.e)({isPending:!1,isLoading:!0,isFieldLoading:!1,sourceCustomFieldsList:[],schemeFieldsArchives:[],schemeFieldsIds:[],requirementTypes:[],bugTypes:[],moduleSchemes:[],isCopyComment:!0}),2),T=S[0],C=S[1],O=Me(Object(n.useState)(),2),j=O[0],D=O[1],k=Me(Object(F.e)({currentProject:De({},v),issueTypeDetail:{}}),2),R=k[0],M=k[1],A=R.currentProject,_=R.issueTypeDetail,B=Object(n.useRef)(),H=Me(Object(n.useState)(!1),2),U=H[0],Y=H[1],q=T.isLoading,z=T.isFieldLoading,K=T.schemeFieldsArchives,J=T.sourceCustomFieldsList,Q=Me(Object(F.e)({thirdLinks:[],attachments:[],allAttachments:[]}),2),X=Q[0],$=Q[1],ee=X.attachments,te=Me(Object(n.useState)(!1),2),ne=te[0],re=te[1],oe=r.a.createRef(),ce=Object(x.isMac)(),se=r.a.createRef(),ue=Object(n.useRef)(),de=function(e){var t=Ee(Object(n.useState)([]),2),a=t[0],r=t[1],o=function(){return he(void 0,void 0,void 0,(function(){var t,a;return ge(this,(function(n){switch(n.label){case 0:return[4,Object(W.d)(null!==(a=null===e||void 0===e?void 0:e.id)&&void 0!==a?a:0)];case 1:return t=n.sent().data,r(t),[2]}}))}))};return Object(n.useEffect)((function(){o()}),[e]),{initLabels:o,labels:a,addLabel:function(e,t,n,o){r(ye(ye([],Ee(a),!1),[{id:t,project_id:e,name:n,color:o}],!1))}}}(A),fe=de.labels,pe=de.addLabel,me={id:i.id,value:i.id,text:i.name,name:i.name,name_pinyin:i.name_pinyin,avatar:i.avatar,media:i.avatar},Ie={currentProject:A,currentProjectSetting:j,enterpriseGlobalKey:c,issueTypeDetail:_},Te=function(e){var t=B.current.watchers.map((function(e){return e.id}));0!==t.length&&Object(W.f)(e.id,t).then((function(e){var t=e.data;I({watchers:B.current.watchers.filter((function(e){return-1!==t.indexOf(e.id)}))})}))},Le=function(e){return ke(t,void 0,void 0,(function(){var a,n,r,o,i,l,c,s;return Re(this,(function(u){switch(u.label){case 0:return a=R.issueTypeDetail,n=B.current,r=String(v.id)===String(A.id),o=function(e){var a=B.current,n=String(v.id)===String(A.id),r={},o=e.filter((function(e){return"CUSTOM"===e.issueField.type}));return o&&0!==o.length?(o.forEach((function(e){return ke(t,void 0,void 0,(function(){var t,o,i,l,c,s,u,d,f,p,m,v,h;return Re(this,(function(g){switch(g.label){case 0:return t=e.issueField,o=t.componentType,i=t.name,(l=J.find((function(e){return e.issueField.componentType===o&&e.issueField.name===i})))?(c=l.issueField.componentType,s=a.issueSchemeFields[l.issueFieldId],n?[3,5]:-1!==Ce.indexOf(c)?[2]:c!==be.PROPERTY_TYPE_CONSTANTS.SELECT_MEMBER_SINGLE?[3,2]:[4,Object(W.f)(A.id,[s.id])]):[2];case 1:return u=g.sent().data,r[e.issueFieldId]=u.length>0?s:void 0,[2];case 2:return c!==be.PROPERTY_TYPE_CONSTANTS.SELECT_MEMBER_MULTI?[3,4]:[4,Object(W.f)(A.id,s.map((function(e){return e.id})))];case 3:return d=g.sent().data,r[e.issueFieldId]=s.filter((function(e){return-1!==d.indexOf(e.id)})),[2];case 4:if(c===be.PROPERTY_TYPE_CONSTANTS.SELECT_SINGLE&&l)return f=l.issueField.options.find((function(e){return e.value===String(s)})),(p=e.issueField.options.find((function(e){return e.name===f.name})))&&(r[e.issueFieldId]=p.value),[2];if(c===be.PROPERTY_TYPE_CONSTANTS.SELECT_MULTI&&s&&s.length>0)return m=l.issueField.options.filter((function(e){return-1!==s.indexOf(e.value)})),v=m.map((function(e){return e.name})),h=e.issueField.options.filter((function(e){return-1!==v.indexOf(e.name)})),r[e.issueFieldId]=h.map((function(e){return e.value})),[2];g.label=5;case 5:return r[e.issueFieldId]=s,[2]}}))}))})),r):r}(e),n.assignee?[4,Object(W.f)(A.id,[n.assignee.id])]:[3,2];case 1:-1!==u.sent().data.indexOf(n.assignee.id)&&(i=n.assignee),u.label=2;case 2:return l={name:b.name?b.name:n.name,assignee:i,storyPoint:n.storyPoint||void 0,priority:void 0!==n.priority?n.priority:void 0,projectModule:void 0,requirementType:n.requirementType&&n.requirementType.id||void 0,dueDate:n.dueDate&&253370736e6!==n.dueDate?n.dueDate:void 0,labels:n.labels&&!!n.labels.length&&n.labels.map((function(e){return e.id}))||[],workingHours:n.workingHours,progress:n.progress&&n.progress>0?0:void 0,startDate:n.startDate&&253370736e6!==n.startDate?n.startDate:void 0,releaseDate:n.releaseDate&&253370736e6!==n.releaseDate?n.releaseDate:void 0,associateIteration:n.associateIterations||[],fields:o},r?(l.defectType=n.defectType&&n.defectType.id||void 0,l.iterationCode=(null===(c=null===n||void 0===n?void 0:n.iteration)||void 0===c?void 0:c.code)||"",l.releaseList=(null===n||void 0===n?void 0:n.releases)||[],l.releaseIds=n.releases?n.releases.map((function(e){return e.id})):[],l.relatedRequirement=null===n||void 0===n?void 0:n.relatedRequirement,l.parentRequirement=a.issueType===le.IssueType.requirement?null===n||void 0===n?void 0:n.parent:void 0):(l.defectType=void 0,l.iterationCode="",l.releaseList=[],l.releaseIds=[],l.relatedRequirement=void 0,l.parentRequirement=void 0),I(l),0===(null===ee||void 0===ee?void 0:ee.length)&&(null===(s=n.files)||void 0===s?void 0:s.length)&&$({attachments:Ae([],Me(n.files),!1),allAttachments:Ae([],Me(n.files),!1)}),[2]}}))}))},xe=function(e){return Promise.all([Object(P.fetchCollaborationSettings)(e.name,!0).then((function(e){var t=e.data;D(t)})),Object(Z.fetchRequirementTypes)(e.name).then((function(e){var t=e.data;C({requirementTypes:t})})),Object(Z.fetchDefectTypes)(e.name).then((function(e){var t=e.data;C({bugTypes:t})})),Object(P.fetchIssueModules)(e.id).then((function(e){var t=e.data;C({moduleSchemes:t})}))])};Object(n.useEffect)((function(){Promise.all([Object(P.fetchIssueTypesScheme)(v.name,f.id,"DETAIL").then((function(e){var t=e.data;C({sourceCustomFieldsList:t.schemeFields.filter((function(e){return"CUSTOM"===e.issueField.type}))})})),Object(P.fetchIssueDetailByCode)(v.id,u,{withDescriptionMarkup:!0}).then((function(e){var t=e.data;B.current=t})),xe(v)]).then((function(){Te(v),C({isLoading:!1})}))}),[]);var _e=Object(n.useCallback)((function(e){var t,a,n=e.isCustom,r=e.type,o=e.value,i=e.issueFieldId;n?I({fields:De(De({},b.fields),(t={},t[i]=o,t))}):(b[r]=o,I(De(De({},b),((a={})[r]=o,a))))}),[b]);Object(n.useEffect)((function(){A&&_&&Object.keys(_).length?(C({isFieldLoading:!1}),Object(P.fetchIssueTypesScheme)(A.name,_.id,"DETAIL").then((function(e){var a=e.data;return ke(t,void 0,void 0,(function(){var e,t,n;return Re(this,(function(r){switch(r.label){case 0:return e=a.schemeFields.reduce((function(e,t){var a,n=e.archives,r=e.ids;return{archives:De(De({},n),(a={},a[t.issueFieldId]=t,a)),ids:Ae(Ae([],Me(r),!1),[t.issueFieldId],!1)}}),{archives:{},ids:[]}),t=e.archives,n=e.ids,C({schemeFieldsArchives:t,schemeFieldsIds:n}),[4,Le(a.schemeFields)];case 1:return r.sent(),C({isFieldLoading:!0}),[2]}}))}))}))):C({isFieldLoading:!1})}),[R]);var Fe=function(){return ke(t,void 0,void 0,(function(){var e,t,n,r,i,l,c,s,u;return Re(this,(function(d){switch(d.label){case 0:if(!z||ne)return[2];if(!_)return Object(w.warning)("".concat(Object(o.t)("\u8bf7\u9009\u62e9\u76ee\u6807\u7c7b\u578b"))),[2];if(!ue.current)return[2];if(!function(e,t){var a,n=((a={})[N.BASE_FIELD_TYPE.ASSIGNEE]="assignee",a[N.BASE_FIELD_TYPE.RELEASE_DATE]="releaseDate",a[N.BASE_FIELD_TYPE.ASSOCIATE_ITERATION]="associateIteration",a[N.BASE_FIELD_TYPE.START_DATE]="startDate",a[N.BASE_FIELD_TYPE.DUE_DATE]="dueDate",a[N.BASE_FIELD_TYPE.LABEL]="labels",a[N.BASE_FIELD_TYPE.WATCHER]="watchers",a[N.BASE_FIELD_TYPE.PRIORITY]="priority",a[N.BASE_FIELD_TYPE.WORKING_HOURS]="workingHours",a[N.BASE_FIELD_TYPE.DEFECT_TYPE]="defectType",a[N.BASE_FIELD_TYPE.MODULE]="projectModule",a[N.BASE_FIELD_TYPE.REQUIREMENT_TYPE]="requirementType",a),r=Object.keys(e).find((function(a){var r=e[a],o=r.required,i=r.issueField.type;if(o){var l=n[i]?t[n[i]]:t.fields[a];return!(Array.isArray(l)?l.length:null!==l&&void 0!==l)}return!1}));return r?(console.warn(e[r],t),Object(w.warning)("".concat(Object(o.t)("\u8bf7\u586b\u5199")).concat(e[r].issueField.name)),!1):!(t.startDate&&t.releaseDate&&Se()(t.startDate).isAfter(t.releaseDate))||(Object(w.warning)(Object(o.t)("\u7248\u672c\u5f00\u59cb\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e\u53d1\u5e03\u65e5\u671f")),!1)}(K,b))return[2];e=ue.current.getInfo(),(t=Object.assign(we(K,b),{fileIds:ee?ee.map((function(e){return e.fileId})):[],kmPage:e})).issueTypeId=_.id,(u={})[le.IssueType.requirement]={request:Oe.createRequirement,linkType:"requirements"},u[le.IssueType.assignment]={request:Oe.createAssignment,linkType:"assignments"},u[le.IssueType.bug]={request:Ne.createIssue,linkType:"bug-tracking"},u[le.IssueType.epic]={request:Oe.createEpics,linkType:"epics"},n=u[_.issueType],r=t.fileIds,delete t.fileIds,d.label=1;case 1:return d.trys.push([1,4,,5]),re(!0),_.issueType===le.IssueType.epic&&delete t.iterationCode,[4,n.request(A.id,t,!1,{"IGNORE-TEMPLATE-CHANGE-CHECK":!1})];case 2:return i=d.sent().data,l={sourceIssueId:B.current.id,copyComment:T.isCopyComment,projectChange:String(A.id)!==String(v.id)&&0===ue.current.editType},r&&r.length&&(l.copyFile=r),[4,Object(W.a)(A.id,i.id,l)];case 3:return d.sent(),c=A.project_path,Object(je.a)({type:"success",message:Object(o.t)("\u4e8b\u9879\u590d\u5236\u6210\u529f"),description:Object(o.t)("\u5df2\u5728\u300c{{projectName}}\u300d\u9879\u76ee\u4e2d\u521b\u5efa\u4e86\u4e00\u4e2a{{name}}\uff0c",{projectName:A.display_name,name:_.name}),link:"".concat(c,"/").concat(n.linkType,"/issues/").concat(i.code,"/detail"),linkName:Object(o.t)("\u70b9\u51fb\u67e5\u770b\u4e8b\u9879\u8be6\u60c5")}),ue.current&&ue.current.removeDraft(),g&&g(),a(),re(!1),[3,5];case 4:return s=d.sent(),re(!1),Object(x.configPlanNotToastMsg)(s.code)?[2]:(Object(je.a)({type:"error",message:Object(o.t)("\u4e8b\u9879\u590d\u5236\u5931\u8d25"),description:Object(Pe.getErrorMessage)(s.msg)||Object(o.t)("\u53ef\u80fd\u662f\u60a8\u6ca1\u6709\u5728\u300c{{projectName}}\u300d\u9879\u76ee\u4e2d\u521b\u5efa\u4e8b\u9879\u7684\u6743\u9650\u3002",{projectName:A.display_name})}),[3,5]);case 5:return[2]}}))}))},We=function(){var e;a(),(null===(e=ue.current)||void 0===e?void 0:e.removeDraft)&&ue.current.removeDraft()},Be=function(e){ce?e.metaKey&&"Enter"===e.key&&Fe():e.ctrlKey&&"Enter"===e.key&&Fe()};return Object(n.useEffect)((function(){return document.addEventListener("keydown",Be),function(){document.removeEventListener("keydown",Be)}}),[Be]),r.a.createElement(h.a,{className:l()(s.a.wrapper),show:!0,outsideClickCloseable:!1,keyboard:!1,enforceFocus:!1},r.a.createElement("span",{className:l()(s.a.closeButton),onClick:function(){return We()}}),q&&r.a.createElement("div",{className:s.a.modalLoading}),!q&&r.a.createElement("div",{className:s.a.main},r.a.createElement("div",{className:s.a.mainHeader},r.a.createElement("div",{className:s.a.headerInfoSection},r.a.createElement("span",{style:{marginRight:"8px"}},Object(o.t)("\u590d\u5236")),r.a.createElement(m.default,{type:f.iconType}),r.a.createElement("span",null,f.name),r.a.createElement("div",{className:s.a.attentionWrapper},r.a.createElement(E.a,{type:"REQUIREMENT",projectID:A.id,watchers:b.watchers||[],onChange:function(e){return I({watchers:e})},user:me,action:"create",suffixText:Object(o.t)("\u4eba\u5173\u6ce8\u4e2d"),showTooltip:!0}))),r.a.createElement("div",{className:s.a.headerTitleSection},r.a.createElement("input",{className:s.a.titleInput,ref:se,autoFocus:!0,placeholder:"".concat(Object(o.t)("\u8f93\u5165\u4e8b\u9879\u6807\u9898\uff08")).concat(ce?"\u2318":"Ctrl").concat(Object(o.t)(" + Enter \u53ef\u5feb\u901f\u521b\u5efa\uff09")),value:b.name,onChange:function(e){return I({name:e.target.value})}}))),r.a.createElement(G,De({ref:ue,sourceIssuesDetails:B.current},Ie,{currentProject:v,title:b.name})),r.a.createElement("div",{className:l()(s.a.mainFooter,s.a.nofile)},r.a.createElement(L,{thirdVisable:!1,currentProject:v,user:i,enterpriseGlobalKey:c,defaultAttachementFile:X,onChange:$,deleteFeatch:!1,ref:oe}),r.a.createElement("div",{className:s.a.operationsWrapper},r.a.createElement("div",{className:l()(s.a.operationButton,!ce&&s.a.wider,d.a.newButton,d.a.primary,d.a.h32,!z||ne?d.a.disabled:""),onClick:Fe},Object(o.t)("\u590d\u5236"),r.a.createElement("span",{className:s.a.key},ce?"\u2318":"Ctrl"),r.a.createElement("span",{className:l()(s.a.key,s.a.enter)})),r.a.createElement("div",{className:l()(s.a.operationButton,d.a.newButton,d.a.default,d.a.h32),onClick:function(){return We()}},Object(o.t)("\u53d6\u6d88")),r.a.createElement("span",{className:s.a.switch},r.a.createElement(V.a,{checked:T.isCopyComment,onChange:function(e){return C({isCopyComment:e})}}),r.a.createElement("span",{className:s.a.switchText},Object(o.t)("\u590d\u5236\u8bc4\u8bba")))))),!q&&r.a.createElement("div",{className:s.a.aside,onScroll:function(){return!U&&Y(!0)}},r.a.createElement("div",{className:s.a.asideContent},r.a.createElement("div",{className:s.a.issuePropertyContainer},r.a.createElement("div",{className:s.a.issuePropertySection},r.a.createElement("label",null,Object(o.t)("\u76ee\u6807\u7814\u53d1\u7a7a\u95f4")),r.a.createElement(ie,{value:String(A.id),onSelect:function(e){return function(e){return ke(t,void 0,void 0,(function(){var t;return Re(this,(function(a){switch(a.label){case 0:return e.value===A.id?[2]:(t={id:e.value,name:e.name,display_name:e.text,project_path:e.project_path},Te(t),[4,xe(t)]);case 1:return a.sent(),C({isFieldLoading:!1}),M({currentProject:t,issueTypeDetail:t.id===String(v.id)?B.current.issueTypeDetail:null}),[2]}}))}))}(e)},currProject:v,mounted:function(){M({issueTypeDetail:B.current.issueTypeDetail})}})),r.a.createElement("div",{className:s.a.issuePropertySection},r.a.createElement("label",null,Object(o.t)("\u76ee\u6807\u7c7b\u578b")),r.a.createElement(ae,{value:_,items:null===j||void 0===j?void 0:j.template.issueTypes,onSelect:function(e){return M({issueTypeDetail:e})}}))),z&&_&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ve,De({},Ie,{attributes:b,onChangeAttributes:_e})),r.a.createElement("div",{className:l()(s.a.issuePropertyContainer,s.a.hasNoBorder)},r.a.createElement(p.a,{isCreate:!0,schemeFieldArchives:T.schemeFieldsArchives,fieldIds:T.schemeFieldsIds,issueType:_.issueType,onChange:_e,customAttributes:b,labels:fe,requirementTypes:T.requirementTypes,bugTypes:T.bugTypes,moduleSchemes:T.moduleSchemes,addLabel:pe,projectID:A.id,currentProject:A,portalProps:{toRight:!0,portalWrapStyle:{zIndex:1099},isScroll:U,resetIsScroll:function(){Y(!1)}}}))))))}},Zrey:function(e,t,a){"use strict";a.r(t);var n=a("mVeg"),r=a("cDcd"),o=a.n(r),i=a("yZ+p"),l=a.n(i),c=a("OajT"),s=a.n(c),u=a("K2gz"),d=a.n(u),f=a("r/nT"),p=a.n(f),m=a("iR1w"),v=a("s4qW"),h=a.n(v),g=a("dtw8"),E=a("5kKY"),y=a("zyt4"),b=a.n(y),I=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),S=function(e){function t(t){return e.call(this,t)||this}return I(t,e),t.prototype.renderOp=function(){var e=this,t=this.props.isDetail;return o.a.createElement(E.ItemDropdown,{popupStyle:{width:160},portalContainer:function(){return t?document.querySelector('#wm-detail div[class^="spec-main"]'):document.querySelector('#wm-spec div[class^="spec-main"]')},portalAlign:{top:24,right:0},options:[{name:Object(n.t)("\u53d6\u6d88\u5173\u8054"),id:"cancel-associate"}],onSelect:function(t){"cancel-associate"===t.id&&e.props.onCancelAssociate(e.props.id)}})},t.prototype.render=function(){var e=this.props,t=e.id,a=e.name,n=e.depotId,r=e.priority,i=e.projectPath,l=e.allowUpdate,c=e.style;return o.a.createElement("div",{className:b.a.item,style:c},o.a.createElement(g.Link,{to:"".concat(i,"/testing/cases/").concat(t,"/update?id=")+(n?"".concat(n):""),target:"_blank",className:b.a.link},o.a.createElement("div",{className:b.a.icon}),o.a.createElement("div",{className:b.a.code},"#",t),o.a.createElement("div",{className:b.a.name,title:a},a)),o.a.createElement("div",{className:b.a.right},o.a.createElement("div",{className:d()(b.a.priority,b.a["priority-".concat(r)])},"P",r),l&&this.renderOp()))},t}(o.a.Component),T=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),w=function(){return(w=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},C=function(e){function t(t){var a=e.call(this,t)||this;return a.getListHeight=function(){return Math.min(345,36*a.props.list.length)},a.renderItem=function(e){var t=e.index,n=e.style,r=e.data,i=a.props.onCancelAssociate,l=r.list[t];return o.a.createElement(S,w({key:l.id,onCancelAssociate:i},l,{style:n,isDetail:a.props.isDetail}))},a}return T(t,e),t.prototype.render=function(){var e=this.props.list;return o.a.createElement("div",{className:h.a.list},o.a.createElement(m.FixedSizeList,{itemCount:e.length,itemSize:36,width:"100%",height:this.getListHeight(),itemData:{list:e},overscanCount:20},this.renderItem))},t}(o.a.Component),O=a("LvDl"),N=a("xgZS"),P=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),j=function(){return(j=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},D=function(e){function t(t){var a=e.call(this,t)||this;return a.inputRef=o.a.createRef(),a.onShowChoose=function(){a.setState({isShowChoose:!0},(function(){a.inputRef.current&&a.inputRef.current.focus()}))},a.onInputChange=function(e){var t=e.target.value;a.setState({keyword:t}),a.debounceSearch(t)},a.onAssociate=function(e,t){t?Object(N.danger)("\u5173\u8054\u5931\u8d25\uff0c\u8be5\u7528\u4f8b\u5df2\u88ab\u9700\u6c42/\u7f3a\u9677\u5173\u8054"):(a.setState({keyword:""}),a.props.onAssociate(e))},a.toCaseSpec=function(e){var t=e.id,n=e.related,r=a.props.projectPath;if(n){var o="".concat(r,"/testing/cases/").concat(t);window.open(o,"_blank")}},a.state={isShowChoose:!1,keyword:""},a.debounceSearch=Object(O.debounce)(a.props.onSearch,500),a}return P(t,e),t.prototype.componentDidMount=function(){this.props.onSearch()},t.prototype.renderHeader=function(){var e=this.props,t=e.SectionToggletrigger,a=e.allowUpdate;return o.a.createElement("div",{className:p.a.header},o.a.createElement(t,null),o.a.createElement("div",{className:p.a.title},Object(n.t)("\u5173\u8054\u6d4b\u8bd5\u7528\u4f8b")),a&&o.a.createElement("div",{className:p.a.divider}),a&&o.a.createElement("div",{className:p.a.addIcon,onClick:this.onShowChoose}))},t.prototype.renderChoose=function(){var e=this,t=this.state.keyword;return o.a.createElement("div",null,o.a.createElement(l.a,{value:t,className:p.a.customInput,ref:this.inputRef,onChange:this.onInputChange,prefix:o.a.createElement("div",{className:p.a.customSearchIcon}),suffix:o.a.createElement("div",{className:p.a.cancelBtn,onClick:function(){e.setState({isShowChoose:!1}),e.props.onCancel()}},Object(n.t)("\u53d6\u6d88")),size:"medium",placeholder:Object(n.t)("\u8f93\u5165\u6d4b\u8bd5\u7528\u4f8b ID \u6216\u6807\u9898")}),this.renderResult())},t.prototype.renderResult=function(){var e=this,t=this.props.searchResList;return t.length>0?o.a.createElement("div",{className:p.a.list},o.a.createElement("div",{className:p.a.listWrapper},t.map((function(t){return o.a.createElement("div",{className:d()(p.a.item,p.a.itemSearch,p.a.customItem,t.related?p.a.opacity:void 0),key:t.id,onClick:function(){return e.onAssociate(t.id,t.related)}},o.a.createElement("div",{className:p.a.icon,onClick:function(){return e.toCaseSpec(t)}}),o.a.createElement("div",{className:p.a.code,onClick:function(){return e.toCaseSpec(t)}},"#",t.id),o.a.createElement("div",{className:p.a.name},t.name))})))):o.a.createElement("div",{className:d()(p.a.list,p.a.noResult)},Object(n.t)("\u65e0\u641c\u7d22\u7ed3\u679c"))},t.prototype.componentDidUpdate=function(e){var t=this.props.isFocus;e.isFocus!==t&&t&&(this.onShowChoose(),this.props.onFocusChanged(!1))},t.prototype.render=function(){var e=this.state.isShowChoose,t=this.props,a=t.list,n=t.onCancelAssociate,r=t.projectPath,i=t.sectionExpanded,l=t.allowUpdate,c=t.isDetail,s=a.map((function(e){return j(j({},e),{projectPath:r,allowUpdate:l})}));return o.a.createElement("div",{className:p.a.wrap,id:"associated-test-case"},this.renderHeader(),i&&s.length>0&&o.a.createElement(C,{list:s,onCancelAssociate:n,isDetail:c}),e&&this.renderChoose())},t}(o.a.Component);t.default=s()(D)},a3nu:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=n(a("17x9")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),f=a("FaIw"),p=n(a("74sH")),m=a("1qdz"),v=a("7FZc");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,l.default)(a,e);var t=g(a);function a(){var e;(0,o.default)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).getContent=function(){var t=e.props.item.issueLog;if("success"===t.content.result){var a='\u7cfb\u7edf\u6267\u884c\u6d41\u7a0b\u63a7\u5236\u89c4\u5219\u6210\u529f\uff0c\u4e8b\u9879\u72b6\u6001\u53d8\u66f4\u4e3a"'.concat(t.content.statusName,'"');return d.default.createElement(v.TooltipTrigger,{title:a},d.default.createElement("span",null,a))}if("failed"===t.content.result)return"\u7cfb\u7edf\u6267\u884c\u6d41\u7a0b\u63a7\u5236\u89c4\u5219\u5931\u8d25\uff0c\u6761\u4ef6\u4e0d\u6ee1\u8db3"},e}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item;return d.default.createElement("div",{className:m.listItem,key:e.id},d.default.createElement("div",{className:m.dot}),d.default.createElement("div",{className:m.content},d.default.createElement(p.default,{className:"mr-10 ".concat(m.icon)}),d.default.createElement("span",{className:m.msg,title:e.issueLog.content.val},this.getContent()),d.default.createElement("span",{className:m.time},(0,f.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(d.Component);t.default=E,E.propTypes={item:u.default.object}},a4iY:function(e,t,a){"use strict";a("I5cv"),a("RW0V"),a("ioFf"),a("mYba"),a("jm62"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("0l/t"),a("f3/d"),a("bWfx");var o,i,l,c=n(a("lSNA")),s=n(a("lwsE")),u=n(a("W8MJ")),d=n(a("PJYZ")),f=n(a("7W2i")),p=n(a("a1gu")),m=n(a("Nsbk")),v=a("mVeg"),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=w(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),g=n(a("K2gz")),E=n(a("17x9")),y=a("nuIr"),b=a("DKcV"),I=a("w3Wo"),S=n(a("KUqB")),T=n(a("p1cY"));function w(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(w=function(e){return e?a:t})(e)}function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,m.default)(e);if(t){var r=(0,m.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,p.default)(this,a)}}var P=(0,b.WithProjectPermission)((l=i=function(e){(0,f.default)(a,e);var t=N(a);function a(e){var n;return(0,s.default)(this,a),(n=t.call(this,e)).getRequirementTypeList=function(){return n.props.currentProjectCooperateSettings.ISSUE_TYPES.filter((function(e){return"REQUIREMENT"===e.issueType}))},n.state={expanded:!1,requirementAvailable:!1},n.hideToggle=n.hideToggle.bind((0,d.default)(n)),n.showToggle=n.showToggle.bind((0,d.default)(n)),n.onToggle=n.onToggle.bind((0,d.default)(n)),n}return(0,u.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.handleClick,n=t.isPermissible,r=t.currentProjectCooperateSettings,o=this.state,i=o.expanded,l=o.requirementAvailable,c=n([{function:b.ProjectPermissionFunction.PROJECT_ISSUE,action:b.ProjectPermissionAction.CREATE}]),s=r.REQUIREMENT===y.MODULE_SWITCH.OPENED,u=!c||!l||!s,d=this.getRequirementTypeList();return h.default.createElement("div",{className:(0,g.default)(T.default.creationWrapper,1===d.length&&T.default.creationWrapperSingle)},h.default.createElement("div",{style:{display:y.KA_DEFECT_EDIT_ENTRY_DISABLE?"none":"flex"},className:(0,g.default)(T.default.creationTrigger,u&&T.default.disabled),onClick:function(){return e.onToggle(u)}},h.default.createElement("span",null,1===d.length?(0,v.t)("\u521b\u5efa{{name}}",{name:d[0].name}):(0,v.t)("\u521b\u5efa\u9700\u6c42"))),i&&h.default.createElement("div",{className:T.default.dropdownMenu},d.map((function(e){return h.default.createElement("div",{className:T.default.item,onClick:function(){return a(e)},key:e.id,title:e.name},h.default.createElement(S.default,{type:e.iconType,className:T.default.itemIcon}),h.default.createElement("div",{className:T.default.itemName},e.name))}))))}},{key:"componentDidMount",value:function(){this.getStatusFromIssueState()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.hideToggle,!1)}},{key:"onToggle",value:function(e){var t=this.props.handleClick;e||(1!==this.getRequirementTypeList().length?this.state.expanded?this.hideToggle():this.showToggle():t(this.getRequirementTypeList()[0]))}},{key:"hideToggle",value:function(){document.removeEventListener("click",this.hideToggle,!1),this.setState({expanded:!1})}},{key:"showToggle",value:function(){this.setState({expanded:!0}),document.addEventListener("click",this.hideToggle,!1)}},{key:"getStatusFromIssueState",value:function(){var e=this,t=this.props.currentProject;return(0,I.fetchIssueInitStatus)(t.id).then((function(t){var a=t.data;e.setState({requirementAvailable:a.REQUIREMENT})}))}}]),a}(h.Component),i.propTypes=O(O({currentProject:E.default.object,handleClick:E.default.func},b.WithProjectPermissionProps),{},{currentProjectCooperateSettings:E.default.object}),o=l))||o;t.default=P},aW2M:function(e,t,a){e.exports=a.p+"3ba10615f3000f0720b5e76a6fea3174.svg"},aWB4:function(e,t,a){"use strict";a.r(t);var n=a("mVeg"),r=a("cDcd"),o=a.n(r),i=a("K2gz"),l=a.n(i),c=a("jK/Q"),s=a.n(c),u=a("KUqB"),d=a("BKNj"),f=a("w3Wo"),p=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},m=function(e,t,a){if(a||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))},v=function(e){var t=e.value,a=e.active,n=e.disabled,r=e.placeholder;return o.a.createElement("div",{className:l()(s.a.epicTrigger,n&&s.a.epicTriggerDisabled,a&&s.a.epicTriggerActive)},o.a.createElement(u.default,{type:"epic"}),o.a.createElement("div",{className:s.a.epicTriggerText},t?t.name:r))},h=function(e){var t=e.value,a=e.item,n=e.focused,r=e.onSelect;return o.a.createElement("div",{className:l()(s.a.epicItem,n&&s.a.epicItemFocused),title:a.name,onClick:function(){return r(a)}},o.a.createElement(u.default,{type:"epic"}),o.a.createElement("div",{className:s.a.epicItemCode},"#",a.code),o.a.createElement("div",{className:s.a.epicItemName},a.name),t&&a.code===t.code&&o.a.createElement("div",{className:s.a.epicItemChecked}))};t.default=function(e){var t=e.currentProject,a=e.value,i=e.onSelect,l=p(Object(r.useState)([]),2),c=l[0],u=l[1],g=p(Object(r.useState)(!1),2),E=g[0],y=g[1],b=function(e){Object(f.fetchIssueList)(t.id,"EPIC",{content:{conditions:m([{constValue:null,fixed:!0,key:"STATUS_TYPE",value:["TODO","PROCESSING"]}],p(e?[{customFieldId:null,fixed:!0,key:"KEYWORD",value:e}]:[]),!1),sort:{key:"PRIORITY",value:"DESC"}},page:1,pageSize:10}).then((function(e){u(e.data.list)}))};return Object(r.useEffect)((function(){E&&b()}),[E]),o.a.createElement(d.default,{isSimple:!0,value:a,items:c,onExpandChange:function(e){return y(e)},placeholder:Object(n.t)("\u6dfb\u52a0\u53f2\u8bd7"),Trigger:v,Item:h,clearable:!0,clearButtonText:Object(n.t)("\u79fb\u9664\u53f2\u8bd7"),onClear:function(){return i(void 0)},onSearch:function(e){return b(e)},onSelect:i,panelCustomStyle:s.a.panel,isLocalSearch:!1,dataInited:!0})}},afBQ:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("RIqP"));a("xfY5"),a("f3/d");var o=a("mVeg"),i=n(a("cDcd")),l=n(a("Mj5j")),c=n(a("K2gz")),s=n(a("17x9")),u=n(a("9XYX")),d=a("dtw8"),f=a("5kKY"),p=a("BXnm"),m=a("IgEJ"),v=a("DgMC"),h=n(a("HwxY")),g=n(a("6Mal")),E=n(a("L8Eh")),y=a("iTKN"),b=n(a("NelW")),I=function(e){var t=e.isDragging,a=e.item,n=e.handleSubItem,s=void 0===n?function(){}:n,I=e.onStatusChange,S=void 0===I?function(){}:I,T=e.allowUpdate,w=e.allowDelete,C=e.moving,O=e.isDetail,N=e.parentType,P=e.parentCode,j=e.currentCode,D=e.projectID,k=e.projectPath,R=e.currentProject,M=e.disabledBottomSpace,A=e.onHourChange,L=void 0===A?function(){}:A,x=a&&a.issueStatus&&a.issueStatus.type&&"COMPLETED"===a.issueStatus.type,_=function(){return document.querySelector('div[data-frontend-module-container="coding-project-management-frontend"]')},F=function(){return"".concat(k,"/subtasks/issues/").concat(a.code,"/detail")};return i.default.createElement(h.default.Consumer,null,(function(e){var n;return i.default.createElement("div",{className:(0,c.default)(l.default.items,j&&Number(j)===a.code&&l.default.active,t?l.default.itemsIsDragging:"",C?l.default.itemsMoving:""),key:a.id},i.default.createElement("div",{className:"".concat(u.default.subTasksIcon," ").concat(l.default.itemIcon)}),i.default.createElement("div",{className:l.default.itemCode},i.default.createElement(d.Link,{to:F()},"#",a.code)),i.default.createElement("div",{className:l.default.itemDetail},i.default.createElement("div",{className:l.default.itemTitle,title:a.name},i.default.createElement(d.Link,{to:O?"".concat(k,"/").concat(N,"/issues/").concat(P,"/detail/subissues/").concat(a.code):F()},a.name))),!t&&a.dueDate&&i.default.createElement("div",{className:(0,c.default)(l.default.tag,l.default.itemRight,l.default.dueDate,l.default[(0,v.parseDueDate)(a.dueDate,x).color]),title:(0,v.parseDueDate)(a.dueDate,x).formatDate},(0,v.parseDueDate)(a.dueDate,x).text),!t&&i.default.createElement("div",{className:l.default.itemPriority},i.default.createElement(g.default,{componentType:y.ComponentType.ICON,value:a.priority,disabled:!T,onSelect:function(e){return S({priority:e.id},a)},isPortal:!0,portalProps:{portalContainer:_(),toRight:!0,scrollControl:e.scrollControl},disabledBottomSpace:M})),i.default.createElement("div",{className:l.default.timeTool},a.budgetedHoursShow?i.default.createElement(b.default,{onHourChange:L,data:a,projectID:D,allowUpdate:T}):null),i.default.createElement("div",{className:l.default.itemStatus},i.default.createElement(p.StatusSelect,{value:a.issueStatus,projectID:D,project:R,issueCode:a.code,disabled:!T,onSelect:function(e){return S(e,a)},portalContainer:_,portalAlign:{top:21,toRight:!0},disabledBottomSpace:M})),!t&&i.default.createElement("div",{className:l.default.itemAssignee},i.default.createElement(E.default,{componentType:y.ComponentType.ICON,disabled:!T,inProject:!0,projectID:D,value:null===(n=a.assignee)||void 0===n?void 0:n.id,onSelect:function(e){S({assignee:e.id},a)},onClear:function(){S({assignee:0},a)},triggerExtraProps:{initialSelectedItem:a.assignee},isPortal:!0,portalProps:{portalWrapStyle:{zIndex:1055},portalContainer:_(),toRight:!0,scrollControl:e.scrollControl},disabledBottomSpace:M})),(w||T)&&i.default.createElement("div",{className:l.default.menuDropdown},i.default.createElement(f.ItemDropdown,{popupStyle:{width:160},portalContainer:_,portalAlign:{top:24,left:-96},options:[].concat((0,r.default)(T?[{name:(0,o.t)("\u66f4\u6539\u7236\u4e8b\u9879"),id:m.SUBITEM_ACTIONS.MODIFYPARNET}]:[]),(0,r.default)(w?[{name:(0,o.t)("\u5220\u9664"),id:m.SUBITEM_ACTIONS.DELETE,type:"delete"}]:[])),onSelect:function(e){return function(e,t){var a={value:e.id,item:t};s(a)}(e,a)}})))}))};I.propTypes={item:s.default.object,transferStatus:s.default.array,getTransferStatus:s.default.func,resetTransferStatus:s.default.func,isDragging:s.default.bool,onStatusChange:s.default.func,handleSubItem:s.default.func,allowUpdate:s.default.bool,allowDelete:s.default.bool,moving:s.default.bool,isDetail:s.default.bool,parentType:s.default.string,parentCode:s.default.number,currentCode:s.default.string,projectID:s.default.number,projectPath:s.default.string,currentProject:s.default.object};var S=I;t.default=S},"ai0/":function(e,t,a){"use strict";a.r(t);var n=a("mVeg"),r=a("cDcd"),o=a.n(r),i=a("K2gz"),l=a.n(i),c=a("Y+p1"),s=a.n(c),u=a("eVvw"),d=a("WN9O"),f=a("GEKH"),p=a.n(f),m=a("sEfC"),v=a.n(m),h=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),g=function(){return(g=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},E=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},y=function(e){function t(t){var a=e.call(this,t)||this;return a.inputRef=o.a.createRef(),a.hide=function(){a.setState({isShow:!1,searchKeyword:""}),a.props.onHide(),document.removeEventListener("click",a.hide)},a.stopPropagation=function(e){e.nativeEvent.stopImmediatePropagation()},a.onClear=function(){var e=a.props.onClear;e&&e(),a.hide()},a.onSelect=function(e){a.hide(),a.props.onSelect&&a.props.onSelect(e)},a.onSearch=function(e){var t=e?e.target:{value:""};a.setState({searchKeyword:t.value}),a.searchCallback(t.value)},a.searchCallback=v()((function(e){a.props.onSearch&&a.props.onSearch(e)}),300),a.onKeyDown=function(e){var t=e.key,n=a.props,r=n.list,o=n.focusIndex;"Enter"===t?0===r.length?a.hide():a.onSelect(r[o]):"ArrowUp"===t?a.onArrow("up"):"ArrowDown"===t&&a.onArrow("down")},a.onArrow=function(e){var t=a.props,n=t.list,r=t.focusIndex,o=t.onFocusItemChange;if(n){var i="down"===e?r+1:r-1;i<n.length&&i>=0&&o(i)}},a.renderList=function(e){var t=a.props,n=t.renderList,r=t.value;return n?o.a.createElement("div",{className:p.a.listContainer},o.a.createElement("div",{className:p.a.list},n(e,a.onSelect))):o.a.createElement("div",{className:p.a.listContainer},o.a.createElement("div",{className:p.a.list},e.map((function(e,t){var n=r===e.id;return o.a.createElement("div",{className:l()(p.a.item,n&&p.a.itemSelected,0===t&&a.state.searchKeyword&&p.a.itemSelect),onClick:function(){return a.onSelect(e)},key:t},e.text||e.name)}))))},a.renderNoResult=function(){return o.a.createElement("div",{className:p.a.noData},Object(n.t)("\u65e0\u76f8\u5173\u6761\u76ee"))},a.renderSearch=function(){var e=a.props.searchPlaceholder,t=a.state.searchKeyword;return o.a.createElement("div",{className:p.a.search},o.a.createElement("span",{className:p.a.searchIcon}),o.a.createElement("input",{ref:a.inputRef,value:t,type:"text",className:p.a.searchInput,placeholder:e,onInput:a.onSearch,onKeyDown:a.onKeyDown,onFocus:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}}),t&&o.a.createElement("span",{className:p.a.removeIcon,onClick:function(){a.setState({searchKeyword:""},(function(){a.onSearch(void 0)}))}}))},a.renderClearable=function(){var e=a.props,t=e.renderClearable,n=e.clearableText;return t?o.a.createElement("div",{onClick:a.onClear}):o.a.createElement("div",{onClick:a.onClear,className:p.a.clearableText},n)},a.state={isShow:a.props.isShow,searchKeyword:""},a.props.isShow&&document.addEventListener("click",a.hide),a}return h(t,e),t.prototype.componentDidUpdate=function(e){var t=this,a=this.props.isShow;e.isShow!==a&&this.setState({isShow:a},(function(){a?(t.inputRef.current&&t.inputRef.current.focus(),document.addEventListener("click",t.hide)):document.removeEventListener("click",t.hide)}))},t.prototype.render=function(){var e=this.props,t=e.className,a=e.searchable,n=e.clearable,r=e.list,i=e.onClear,c=e.value,s=e.renderListEmptyRenderFirst,u=E(e,["className","searchable","clearable","list","onClear","value","renderListEmptyRenderFirst"]);return this.state.isShow?o.a.createElement(d.default,g({},u),o.a.createElement("div",{"data-frontend-module-container":"coding-project-management-frontend"},o.a.createElement("div",{onClick:this.stopPropagation,className:l()(t,p.a.wrap)},a&&this.renderSearch(),n&&void 0!==c&&c>0&&r.length>0&&this.renderClearable(),s&&s(i,c),r.length>0?this.renderList(r):!s&&this.renderNoResult()))):o.a.createElement("div",null)},t.defaultProps={searchable:!1,searchPlaceholder:Object(n.t)("\u641c\u7d22"),clearable:!1,clearableText:Object(n.t)("\u6e05\u7a7a"),renderListEmptyRenderFirst:null},t}(r.Component),b=a("fKTF"),I=a.n(b),S=a("KUqB"),T=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),w=function(){return(w=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},C=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},O=function(e,t,a){if(a||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))},N=function(e){function t(t){var a=e.call(this,t)||this;return a.onFocusItemChange=function(e){a.setState({focusIndex:e})},a.state={items:O([],C(t.items),!1),allItems:O([],C(t.items),!1),hasSearchStr:!1,isElemScroll:!1,isDropdownShow:!1,focusIndex:0},a.trigger=a.trigger.bind(a),a.onToggle=a.onToggle.bind(a),a.onSearch=a.onSearch.bind(a),a.dropdownItems=a.dropdownItems.bind(a),a.renderItemsList=a.renderItemsList.bind(a),a.relatedElemRef=o.a.createRef(),a}return T(t,e),t.prototype.trigger=function(){var e,t=this,a=this.props,n=a.items,r=a.type,i=a.value,l=a.projectPath,c=a.isBase,s=a.disabled,d=a.placeholder,f=a.selectedItem,p=a.triggerClassName,m=a.withoutLink,v=a.showCart,h=this.state.isDropdownShow,g=i?f||n.find((function(e){return e.value===Number(i)||e.code===i})):v?{text:"\u672a\u89c4\u5212"}:"",E={sprint:"".concat(l,"/iterations/").concat(i),REQUIREMENT:"".concat(l,"/requirements/issues/").concat(i,"/detail")};return e=!i||c||m?null:function(){window.open(E[null===r||void 0===r?void 0:r.issueType])},o.a.createElement(u.a,{showCart:v,type:null===r||void 0===r?void 0:r.iconType,className:p,title:g?(null===g||void 0===g?void 0:g.text)||(null===g||void 0===g?void 0:g.name):"",placeholder:g?"":d,disabled:s,toggleShow:h,onToggle:function(){t.setState({isDropdownShow:!0})},onLinkTo:e})},t.prototype.renderListEmptyRenderFirst=function(e,t){var a=this,r=this.state.allItems;return o.a.createElement("div",{className:l()([I.a.firstContainer,(!r||!r.length)&&I.a.noBorder]),onClick:function(){return a.setState({isDropdownShow:!1})}},o.a.createElement("div",{className:l()([I.a.item,!t&&I.a.itemSelect]),onClick:e},o.a.createElement("div",{className:I.a.icon},o.a.createElement(S.default,{type:"sprint"})),o.a.createElement("div",{className:I.a.title},Object(n.t)("\u672a\u89c4\u5212")),!t&&o.a.createElement("div",{className:l()([I.a.icon,I.a.checked])})))},t.prototype.renderItemsList=function(e,t){var a=this,n=this.props,r=n.requireCode,i=n.type,c=n.value,s=this.state.allItems;return o.a.createElement(o.a.Fragment,null,s&&s.map((function(e,n){var s;return o.a.createElement("div",{key:"".concat(n," + ").concat(null===e||void 0===e?void 0:e.value," || ").concat(null===e||void 0===e?void 0:e.id),className:l()(I.a.item,c&&(c===e.value||c===e.code)&&I.a.itemSelect),onClick:function(){t(e),a.setState({isDropdownShow:!1})},title:(null===e||void 0===e?void 0:e.text)||(null===e||void 0===e?void 0:e.name),onMouseOver:function(){return a.onFocusItemChange(n)}},o.a.createElement("div",{className:I.a.icon},"sprint"===(null===i||void 0===i?void 0:i.iconType)&&o.a.createElement(S.default,{type:null===i||void 0===i?void 0:i.iconType}),"sprint"!==(null===i||void 0===i?void 0:i.iconType)&&o.a.createElement(S.default,{type:null===(s=null===e||void 0===e?void 0:e.issueTypeDetail)||void 0===s?void 0:s.iconType})),r&&o.a.createElement("div",{className:I.a.code},"#",e.code||e.value),o.a.createElement("div",{className:I.a.title},(null===e||void 0===e?void 0:e.text)||(null===e||void 0===e?void 0:e.name)),Boolean(c)&&((null===e||void 0===e?void 0:e.value)===Number(c)||Number(c)===(null===e||void 0===e?void 0:e.code))&&o.a.createElement("div",{className:l()([I.a.icon,I.a.checked])}))})))},t.prototype.dropdownItems=function(){var e=this,t=this.props,a=t.clearable,r=t.portalProps,i=t.clearPlaceholder,l=t.value,c=t.onClear,s=t.onSelect,u=t.renderFirst,d=this.state,f=d.isDropdownShow,p=d.allItems,m=d.focusIndex;return o.a.createElement(y,w({list:p,value:l,isShow:f,renderList:this.renderItemsList,renderListEmptyRenderFirst:u?function(){return e.renderListEmptyRenderFirst(c,l)}:null,onHide:function(){e.setState({isDropdownShow:!1},(function(){e.onSearch("")}))},searchable:!0,onSearch:this.onSearch,focusIndex:m,onFocusItemChange:this.onFocusItemChange,onSelect:s,clearable:a,clearableText:i||Object(n.t)("\u79fb\u9664"),onClear:c,relatedElem:this.relatedElemRef.current,portalWrapStyle:{zIndex:1099}},r))},t.prototype.render=function(){var e=this.props,t=e.value,a=e.className,n=e.disabled,r=e.isDetail,i=this.state,c=i.isDropdownShow,s=i.hasSearchStr;return o.a.createElement("div",{className:l()(!t&&I.a.hasNoValue,c&&I.a.isExpanded,a,r&&I.a.isDetail,n&&I.a.disabled,s&&I.a.hasSearchStr)},o.a.createElement("div",{ref:this.relatedElemRef},this.trigger()),this.dropdownItems())},t.prototype.onSearch=function(e){this.setState({hasSearchStr:!!e});var t=this.props.items;this.props.onSearch?this.props.onSearch(e):e?this.setState({allItems:t.filter((function(t){var a,n;return(null===(a=null===t||void 0===t?void 0:t.text)||void 0===a?void 0:a.includes(e))||(null===(n=null===t||void 0===t?void 0:t.name)||void 0===n?void 0:n.includes(e))}))}):this.setState({allItems:O([],C(t),!1)})},t.prototype.componentDidUpdate=function(e){var t=this.props.items,a=e.items;s()(t,a)||this.setState({allItems:O([],C(t),!1)})},t.prototype.onToggle=function(e){this.setState({isDropdownShow:!e})},t.defaultProps={requireCode:!1,clearable:!0,renderFirst:!1},t}(o.a.Component);t.default=N},ayzq:function(e,t,a){e.exports={"batch-modify-modal":"batch-modify-modal-3h3LMuoZ66",batchModifyModal:"batch-modify-modal-3h3LMuoZ66","title-tip":"title-tip-30YrB9-NW8",titleTip:"title-tip-30YrB9-NW8","modify-body":"modify-body-2jLmX0yuAE",modifyBody:"modify-body-2jLmX0yuAE","form-item":"form-item-hZM3CquNJD",formItem:"form-item-hZM3CquNJD",label:"label-27UWBFIQZe","high-light":"high-light-cLfsESkk8-",highLight:"high-light-cLfsESkk8-","label-tip":"label-tip-1EejIiH3MQ",labelTip:"label-tip-1EejIiH3MQ",warning:"warning-2bnGeJkgIe"}},bD1J:function(e,t,a){e.exports={"attachments-item":"attachments-item-2fEIkCoM1F",attachmentsItem:"attachments-item-2fEIkCoM1F","is-image":"is-image-2SeFsCCdM1",isImage:"is-image-2SeFsCCdM1","is-disabled":"is-disabled-34lkRRcbMM",isDisabled:"is-disabled-34lkRRcbMM","attachments-item-cover":"attachments-item-cover-3dlTi5bXbk",attachmentsItemCover:"attachments-item-cover-3dlTi5bXbk","attachments-item-img":"attachments-item-img-2GoUUWf12V",attachmentsItemImg:"attachments-item-img-2GoUUWf12V","attachments-item-progress":"attachments-item-progress-q1MslRfH7X",attachmentsItemProgress:"attachments-item-progress-q1MslRfH7X","attachments-item-wrapper":"attachments-item-wrapper-1fOTp_2W6N",attachmentsItemWrapper:"attachments-item-wrapper-1fOTp_2W6N","attachments-item-title":"attachments-item-title-1p4Mo75V5U",attachmentsItemTitle:"attachments-item-title-1p4Mo75V5U","attachments-item-bar":"attachments-item-bar-3Eq_HVJ6z-",attachmentsItemBar:"attachments-item-bar-3Eq_HVJ6z-","attachments-item-logo":"attachments-item-logo-2Sh2-bZbIk",attachmentsItemLogo:"attachments-item-logo-2Sh2-bZbIk","attachments-modao-logo":"attachments-modao-logo-3Dm97POQPo",attachmentsModaoLogo:"attachments-modao-logo-3Dm97POQPo","attachments-codesign-logo":"attachments-codesign-logo-7LFnMr1Aep",attachmentsCodesignLogo:"attachments-codesign-logo-7LFnMr1Aep","attachments-item-size":"attachments-item-size-dngSdfHCEj",attachmentsItemSize:"attachments-item-size-dngSdfHCEj","attachments-item-action":"attachments-item-action-16P6PfAvGu",attachmentsItemAction:"attachments-item-action-16P6PfAvGu",cancel:"cancel-2oeN9-LfzX",del:"del-2k2DUyMQW_"}},begU:function(e,t,a){"use strict";a.r(t);var n,r=a("mVeg"),o=a("cDcd"),i=a.n(o),l=a("faye"),c=a.n(l),s=a("7FZc"),u=a("U1hV"),d=a.n(u),f=a("246l"),p=a.n(f),m=a("K2gz"),v=a.n(m),h=a("gUGe"),g=a.n(h),E=a("SLo4"),y=a.n(E),b=a("CL2D"),I=a("WxKA"),S=a("Gtz0"),T=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},w=a.n(S)()((function(e){var t=e.customTrigger,a=e.disabled,n=e.onHandleAttachments,l=e.currentAttachmentNum,c=e.noThirdLink,s=e.attachmentLimit,u=e.moduleConfig,d=T(Object(o.useState)(!1),2),f=d[0],p=d[1],m=function(e){n(e),p(!1)};Object(o.useEffect)((function(){var e=function(){p(!1)};return f&&document.addEventListener("click",e,!1),function(){f&&document.removeEventListener("click",e)}}),[f]);var h=T(Object(o.useState)(!1),2),E=h[0],S=h[1],w=T(Object(o.useState)(!1),2),C=w[0],O=w[1];return i.a.createElement("div",{className:g.a.triggerWrapper},i.a.createElement("div",{className:g.a.trigger,onClick:function(){s||p(!f)}},t),f&&i.a.createElement("div",{className:g.a.triggerDropdown,onClick:function(e){e.nativeEvent.stopImmediatePropagation()}},i.a.createElement(y.a,{disabled:a,onHandleAttachments:m,currentAttachmentNum:l},i.a.createElement("div",{className:g.a.item,"data-container":!0,"data-title":"\u4e0a\u4f20\u9644\u4ef6-\u672c\u5730\u4e0a\u4f20"},i.a.createElement("div",{className:v()(g.a.icon,g.a.iconUpload)}),Object(r.t)("\u672c\u5730\u4e0a\u4f20"))),!c&&(u.modao||u.codesign)&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:g.a.divider}),i.a.createElement("div",{className:g.a.tip},Object(r.t)("\u5176\u4ed6\u65b9\u5f0f")),u.codesign&&i.a.createElement("div",{className:g.a.item,onClick:function(){return O(!0)}},i.a.createElement("div",{className:v()(g.a.icon,g.a.iconCodesign)}),Object(r.t)("\u5173\u8054 CoDesign")),u.modao&&i.a.createElement("div",{className:g.a.item,onClick:function(){S(!0)}},i.a.createElement("div",{className:v()(g.a.icon,g.a.iconModao)}),Object(r.t)("\u58a8\u5200\u539f\u578b"))),i.a.createElement("div",{className:g.a.divider}),i.a.createElement("div",{className:g.a.uploadTip},Object(r.t)("\u62d6\u62fd\u6587\u4ef6\u5230\u6b64\u9875\u53ef\u4e0a\u4f20")),u.modao&&i.a.createElement(b.default,{isShowPicker:E,onHide:function(){S(!1)},onHandleAttachments:m}),C&&i.a.createElement(I.default,{onCancel:function(){return O(!1)},onHandleAttachments:m})))}));!function(e){e.EPIC="EPIC",e.DEFECT="DEFECT",e.ASSIGNMENT="MISSION",e.REQUIREMENT="REQUIREMENT",e.SUB_TASK="SUB_TASK",e.WORK_ITEM="WORK_ITEM",e.RISK="RISK",e.RELEASE="RELEASE"}(n||(n={}));var C=[{name:Object(r.t)("\u7f16\u8f91\u63cf\u8ff0"),value:"DESCRIPTION",icon:"edit",showCondition:function(e){return!!e.DESCRIPTION}},{name:Object(r.t)("\u4e0a\u4f20\u9644\u4ef6"),value:"UPLOAD",icon:"upload",showCondition:function(e){return!!e.UPLOAD}},{name:Object(r.t)("\u6dfb\u52a0\u4e8b\u9879"),value:"ADD_ISSUES",icon:"add-issues",showCondition:function(e,t,a,r){var o=r.epicCanCreateIssue;return!!e.ADD_ISSUES&&!(a!==n.EPIC||"SCRUM"!==t||!o)}},{name:Object(r.t)("\u6807\u8bb0\u98ce\u9669"),value:"IS_RISK",icon:"is-risk",showCondition:function(e){return!(!e.IS_RISK||!e.ISSUE_TYPE_RISK)}},{name:Object(r.t)("\u89e3\u9664\u98ce\u9669"),value:"CONTACT_RISK",icon:"contact-risk",showCondition:function(e){return!(e.IS_RISK||!e.ISSUE_TYPE_RISK)}},{name:Object(r.t)("\u5206\u89e3\u9700\u6c42"),value:"DECOMPOSE_REQUIREMENT",icon:"decompose-requirement",showCondition:function(e,t,a,r){var o=r.canSplitRequirement;return!!e.DECOMPOSE_REQUIREMENT&&!(a!==n.REQUIREMENT||!o)}},{name:Object(r.t)("\u5206\u89e3\u4efb\u52a1"),value:"DECOMPOSE_TASK",icon:"decompose-task",showCondition:function(e,t,a,r){var o=r.canSplitAssignment;return!!e.DECOMPOSE_TASK&&!("CLASSIC"!==t||a!==n.REQUIREMENT||!o)}},{name:Object(r.t)("\u6dfb\u52a0\u5b50\u5de5\u4f5c\u9879"),value:"SUBTASK",icon:"subtask",showCondition:function(e,t,a){return!!e.SUBTASK&&("SCRUM"===t&&a!==n.EPIC&&a!==n.SUB_TASK)}},{name:Object(r.t)("\u5173\u8054\u4ea7\u54c1\u9700\u6c42"),value:"RELATION_REQUIREMENT",icon:"relation-requirement",showCondition:function(e,t,a,r){var o=r.isHasProductRequirement;return!!r.prdRequirementPermission&&(void 0!==o&&(a===n.REQUIREMENT&&!o))}},{name:Object(r.t)("\u5173\u8054\u7f3a\u9677"),value:"LINK_BUG",icon:"link-bug",showCondition:function(e,t,a){return!!e.LINK_BUG&&a===n.REQUIREMENT}},{name:Object(r.t)("\u5173\u8054\u6d4b\u8bd5\u7528\u4f8b"),value:"LINK_TEST_CASE",icon:"test-case",showCondition:function(e,t,a){return!!e.LINK_TEST_CASE&&(a===n.REQUIREMENT||a===n.DEFECT)}},{name:Object(r.t)("\u5173\u8054\u9879\u76ee\u96c6\u5de5\u4f5c\u9879"),value:"LINK_WORK_ITEM",icon:"work-item",showCondition:function(e,t,a){return!!e.LINK_WORK_ITEM&&(a!==n.SUB_TASK&&a!==n.WORK_ITEM&&a!==n.RISK)}},{name:Object(r.t)("\u5173\u8054\u4ee3\u7801\u4ed3\u5e93"),value:"LINK_CODE_REPO",icon:"code",showCondition:function(e){return!!e.LINK_CODE_REPO}},{name:Object(r.t)("\u5b50\u5de5\u4f5c\u9879"),value:"DECOMPOSE_WORK_ITEM",icon:"work-item",showCondition:function(e,t,a,r){var o=r.canSplitWorkItem;return!!e.DECOMPOSE_WORK_ITEM&&!(a!==n.WORK_ITEM||!o)}},{name:Object(r.t)("\u5206\u89e3\u5230\u9879\u76ee"),value:"LINK_ISSUES",icon:"add-issues",showCondition:function(e,t,a,r){var o=r.canSplitProject;return!!e.LINK_ISSUES&&!(a!==n.WORK_ITEM||!o)}},{name:Object(r.t)("\u963b\u585e\u5173\u7cfb"),value:"RELATION",icon:"relation",showCondition:function(e,t){return!!e.RELATION&&"CLASSIC"===t}},{name:Object(r.t)("\u53d1\u8d77\u5ba1\u6279"),value:"ISSUE_REVIEW",icon:"issue-review",showCondition:function(e){return e.ISSUE_REVIEW}},{name:Object(r.t)("\u5f15\u7528\u8d44\u6e90"),value:"REFERENCES",icon:"reference",showCondition:function(e){return!!e.REFERENCES}},{name:Object(r.t)("\u8f6c\u9700\u6c42"),value:"CHANGE",icon:"relation",showCondition:function(e,t,a){return a===n.DEFECT}},{name:Object(r.t)("\u8f6c\u79fb"),value:"CHANGEONE",icon:"relation",showCondition:function(e,t,a){return a===n.DEFECT}}],O=a("Y+p1"),N=a.n(O),P=a("xgZS"),j=a("uelK"),D=a("dBa0"),k=a("QWzU"),R=a("EOid"),M=a("AwMv"),A=a("sftu"),L=a.n(A),x=a("vCmj"),_=a("zmh9"),F=a.n(_),W=a("LvDl"),B=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),H=function(){return(H=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},U=function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function i(e){try{c(n.next(e))}catch(t){o(t)}}function l(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}c((n=n.apply(e,t||[])).next())}))},Y=function(e,t){var a,n,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(a=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){i.label=l[1];break}if(6===l[0]&&i.label<r[1]){i.label=r[1],r=l;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(l);break}r[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(c){l=[6,c],n=0}finally{a=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},q=function(e){function t(t){var a=e.call(this,t)||this;return a.moreBtnRef=i.a.createRef(),a.changeBtnRef=i.a.createRef(),a.requirementRef=i.a.createRef(),a.updateItems=function(){var e=a.getItems(),t=e.slice(0,5);e.length>5&&t.push({name:"",value:"MORE",icon:"more",showCondition:function(){return!0}}),a.setState({items:t,moreItems:e.slice(5)})},a.showMore=function(){a.getMoreWrapPos((function(){a.setState({isShowMore:!0})}))},a.hideMore=function(){a.setState({isShowMore:!1})},a.getMoreWrapPos=function(e){var t=a.moreBtnRef.current;if(!t)return{};var n=t.getBoundingClientRect(),r=n.left,o=n.top,i=n.height;a.setState({moreWrapPos:{left:"".concat(r-8,"px"),top:"".concat(o+i+7,"px")}},(function(){"function"===typeof e&&e()}))},a.renderSlot=function(){var e=a.state,t=e.slotConfiguration,n=e.isShowMore;return t.id?i.a.createElement("div",{key:t.id,className:n?d.a.moreItem:v()(d.a.btn,p.a.newButton,p.a.h28,p.a.default),onClick:function(){a.setState({isShowMore:!1,slotVisible:!0})}},i.a.createElement("div",{className:n?v()(d.a.moreIcon,d.a["more-icon-ecology-setting"]):v()(d.a.icon,d.a["icon-ecology-setting"])}),i.a.createElement("div",{className:d.a.word6,title:t.triggerText},t.triggerText)):null},a.onBottomProject=function(e){var t=a.state.selectObjField;"project"===e&&t[e].page<t[e].totalPage&&a.onGetProject(t[e].keyWord,t[e].page+1,t[e].pageSize,!1)},a.timeout=null,a.showChange=function(){a.getChangeWrapPos((function(){a.setState({isShowChange:!0})}))},a.hideChange=function(){a.setState({isShowChange:!1})},a.getRequirementPos=function(e){var t=a.requirementRef.current;if(!t)return{};var n=t.getBoundingClientRect(),r=n.left,o=n.top,i=n.height;a.setState({requirementWrapPos:{left:"".concat(r-8,"px"),top:"".concat(o+i+7,"px")}},(function(){"function"===typeof e&&e()}))},a.getChangeWrapPos=function(e){var t=a.changeBtnRef.current;if(!t)return{};var n=t.getBoundingClientRect(),r=n.left,o=n.top;a.setState({changeWrapPos:{left:"".concat(r+165,"px"),top:"".concat(o-4,"px")}},(function(){"function"===typeof e&&e()}))},a.getCustomBtnItem=function(e){switch(e.value){case"CHANGE":return i.a.createElement(x.TextDropdown,{className:d.a.zxq,hoverTrigger:!0,placeholder:"\u8f6c\u9700\u6c42",value:!0,items:a.state.selectTypes,onSelect:function(e){return a.onSelect(e)}});case"CHANGEONE":return i.a.createElement("div",{className:v()(d.a.btn,p.a.newButton,p.a.h28,p.a.default),onClick:function(e){e.nativeEvent.stopImmediatePropagation(),a.onTransfer()}},i.a.createElement("div",{className:v()(d.a.icon,d.a["icon-".concat(e.icon)])}),Object(r.t)("\u8f6c\u79fb"));case"IS_RISK":return i.a.createElement("div",{className:v()(d.a.btn,p.a.newButton,p.a.h28,p.a.default),onClick:function(){a.onUpdateIsRiskUp(0)}},Object(r.t)("\u6807\u8bb0\u98ce\u9669"));case"CONTACT_RISK":return i.a.createElement("div",{className:v()(d.a.btn,p.a.newButton,p.a.h28,p.a.default),onClick:function(){a.onUpdateIsRiskUp(1)}},Object(r.t)("\u89e3\u9664\u98ce\u9669"));default:return null}},a.container=document.createElement("div"),a.state={items:[],moreItems:[],isShowMore:!1,moreWrapPos:{left:"0",top:"0"},slotConfiguration:{},slotVisible:!1,isRisk:2,visibleRiskModel:!1,titleRiskModelFlag:1,selectTypes:[],showModal:!1,selectObj:{show:!1,loading:!1,disabled:!0,txt:""},selectObjField:{},modalShow1:!1,modalShow2:!1,modalShow3:!1,modalLoading:!1,spaceB:"",isShowChange:!1,changeWrapPos:{left:"0",top:"0"},requirementWrapPos:{left:"0",top:"0"}},a}return B(t,e),t.prototype.componentDidMount=function(){var e;null===(e=document.querySelector('[data-module-extra-info="portal-target"]'))||void 0===e||e.appendChild(this.container),this.updateItems(),this.onGetRequirementType(),this.props.issueType===n.REQUIREMENT&&(window.addEventListener("resize",this.updateItems),window.addEventListener("click",this.hideMore)),this.getSlotInfo()},t.prototype.componentDidUpdate=function(e){N()(e.isShow,this.props.isShow)&&N()(e.isHasProductRequirement,this.props.isHasProductRequirement)&&N()(e.prdRequirementPermission,this.props.prdRequirementPermission)||this.updateItems(),e.posType!==this.props.posType&&this.state.isShowMore&&(this.getMoreWrapPos(),this.getChangeWrapPos()),this.props.controlHideMore&&e.controlHideMore!==this.props.controlHideMore&&this.setState({isShowMore:!1})},t.prototype.componentWillUnmount=function(){var e;null===(e=document.querySelector('[data-module-extra-info="portal-target"]'))||void 0===e||e.removeChild(this.container),window.removeEventListener("resize",this.updateItems),window.addEventListener("click",this.hideMore)},t.prototype.getSlotInfo=function(){var e=this;Object(j.getSlotConfiguration)({slot:D.SLOTS.COLLABORATION_DETAIL_BUTTON_ONE,type:"CURRENT"}).then((function(t){var a=t.data;e.setState({slotConfiguration:a||{}})}))},t.prototype.getItems=function(){var e=this.props,t=e.isShow,a=e.projectType,n=e.issueType,r=e.canSplitRequirement,o=e.canSplitAssignment,i=e.epicCanCreateIssue,l=e.canSplitWorkItem,c=e.canSplitProject,s=e.isHasProductRequirement,u=e.prdRequirementPermission;return 2!==this.state.isRisk&&(t.IS_RISK=!!this.state.isRisk),C.map((function(e){var a;return"REFERENCES"===(null===e||void 0===e?void 0:e.value)?H(H({},e),{name:null!==(a=null===t||void 0===t?void 0:t.RESOURCES_BTN_NAME)&&void 0!==a?a:e.name}):e})).filter((function(e){return e.showCondition(t,a,n,{canSplitRequirement:r,canSplitAssignment:o,epicCanCreateIssue:i,canSplitWorkItem:l,canSplitProject:c,isHasProductRequirement:s,prdRequirementPermission:u})}))},t.prototype.getItemDisabled=function(e){var t=this.props.isDisabled;return!!(t&&Object.keys(t).length&&Object.keys(t).includes(e.value))},t.prototype.getItemName=function(e){return this.getItemDisabled(e)&&"DESCRIPTION"===e.value?Object(r.t)("\u7f16\u8f91\u4e2d..."):e.name},t.prototype.onUpdateIsRiskUp=function(e){return U(this,void 0,void 0,(function(){return Y(this,(function(t){return this.setState({visibleRiskModel:!0,titleRiskModelFlag:e}),[2]}))}))},t.prototype.onSubmitRiskModel=function(){var e=this,t=this.state.titleRiskModelFlag;this.setState({isRisk:t?1:0,visibleRiskModel:!1},(function(){e.updateItems(),e.props.onChangeIsRisk()}))},t.prototype.onCancelRiskModel=function(){this.setState({visibleRiskModel:!1})},t.prototype.render=function(){var e=this,t=this.state,a=t.items,n=t.moreItems,o=t.isShowMore,l=t.slotVisible,u=t.visibleRiskModel,f=t.titleRiskModelFlag,m=t.isShowChange,h=this.props,g=h.onBtnClick,E=h.noThirdLink,y=h.uploadProps,b=h.isLoaded,I=h.isDisabled,S=h.slotContext,T=h.gid,C=h.projectID;return b?i.a.createElement("div",{className:d.a.btnAreas},!!a.length&&a.map((function(t){var a=e.getCustomBtnItem(t);return a||("UPLOAD"===t.value?i.a.createElement(w,H({className:d.a.btn,noThirdLink:E,attachmentLimit:y.currentAttachmentNum>=20,customTrigger:i.a.createElement("div",{className:v()(d.a.btn,p.a.newButton,p.a.h28,p.a.default),onClick:function(){y.currentAttachmentNum>=20?Object(P.warning)(Object(r.t)("\u6700\u591a\u53ea\u53ef\u4e0a\u4f2020\u4e2a\u9644\u4ef6")):g(t.value)}},i.a.createElement("div",{className:v()(d.a.icon,d.a["icon-".concat(t.icon)])}),t.name),key:t.value},y)):i.a.createElement("div",{className:d.a.btnWrap,key:t.value},e.getItemDisabled(t)&&I[t.value]?i.a.createElement(s.TooltipTrigger,{title:I[t.value]},i.a.createElement("div",{className:v()(d.a.btn,p.a.newButton,p.a.h28,p.a.default,d.a.btnDisabled),"data-container":!0,"data-title":e.getItemName(t)},i.a.createElement("div",{className:v()(d.a.icon,d.a["icon-".concat(t.icon)],"more"===t.icon&&d.a.marginRight),ref:"MORE"===t.value?e.moreBtnRef:null}),e.getItemName(t))):i.a.createElement("div",{className:v()(d.a.btn,p.a.newButton,p.a.h28,p.a.default,e.getItemDisabled(t)&&d.a.btnDisabled),onClick:function(a){a.nativeEvent.stopImmediatePropagation(),"MORE"===t.value?(e.props.onClickTrigger&&e.props.onClickTrigger(),o?e.hideMore():e.showMore()):(e.setState({isShowMore:!1}),g(t.value))}},i.a.createElement("div",{className:v()(d.a.icon,d.a["icon-".concat(t.icon)],"more"===t.icon&&d.a.marginRight),ref:"MORE"===t.value?e.moreBtnRef:null}),e.getItemName(t)),"MORE"===t.value&&o&&c.a.createPortal(i.a.createElement("div",{className:d.a.moreWrap,style:e.state.moreWrapPos},n.map((function(t){return"CHANGE"===t.value?i.a.createElement("div",{className:d.a.triggerDropdown,onClick:function(){e.state.isShowChange?e.hideChange():e.showChange()},ref:e.changeBtnRef},i.a.createElement("div",{className:d.a.moreItem,style:{justifyContent:"space-between"}},Object(r.t)("\u8f6c\u9700\u6c42"),i.a.createElement("img",{style:{width:"20px",marginRight:"10px"},src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTYuNSAxMWwzLTMtMy0zIiBzdHJva2U9IiMyMDJENDAiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBvcGFjaXR5PSIuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9zdmc+"}))):"CHANGEONE"===t.value?i.a.createElement("div",{className:d.a.triggerDropdown,onClick:function(t){t.nativeEvent.stopImmediatePropagation(),e.onTransfer()}},i.a.createElement("div",{className:d.a.moreItem},Object(r.t)("\u8f6c\u79fb"))):i.a.createElement("div",{key:t.value,className:d.a.moreItem,onClick:function(a){a.nativeEvent.stopImmediatePropagation(),e.setState({isShowMore:!1}),g(t.value)},"data-container":!0,"data-title":"".concat(t.name)},i.a.createElement("div",{className:v()(d.a.moreIcon,d.a["more-icon-".concat(t.icon)])}),t.name)})),e.renderSlot()),e.container),"MORE"===t.value&&o&&m&&e.renderChildMenu()))})),!(null===n||void 0===n?void 0:n.length)&&this.renderSlot(),i.a.createElement(k.default,{slotVisible:l,identity:D.SLOTS.COLLABORATION_DETAIL_BUTTON_ONE,context:S,onClose:function(){return e.setState({slotVisible:!1})}}),i.a.createElement(L.a,{closeButton:!0,show:this.state.selectObj.show,onHide:function(){return e.setState({selectObj:H(H({},e.state.selectObj),{show:!1})})},backdropClassName:d.a.modal,style:{width:500}},i.a.createElement(L.a.Body,null,Object.keys(this.state.selectObjField).map((function(t){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:d.a.modalTitle},e.state.selectObjField[t].title),i.a.createElement(x.TextDropdown,{searchable:!0,searchPlaceholder:"\u8bf7\u7b5b\u9009",placeholder:"\u8bf7\u9009\u62e9",items:e.state.selectObjField[t].arr,value:e.state.selectObjField[t].item.value,onScrollBottom:function(){return e.onBottomProject(t)},onSelect:function(a){return e.onSelectProject(t,a)},onSearch:function(a){return e.onKeywordSearch(t,a)}}))}))),i.a.createElement(L.a.Footer,null,i.a.createElement(F.a,{onClick:function(){return e.modalConfirm()},loading:this.state.selectObj.loading,disabled:this.state.selectObj.disabled,"data-container":!0,"data-title":this.state.selectObj.txt},"\u786e\u5b9a"),i.a.createElement(F.a,{style:{marginLeft:8},empty:!0,onClick:function(){return e.setState({selectObj:{show:!1,loading:!1,disabled:!0,txt:""},selectObjField:{}})},loading:this.state.selectObj.loading,disabled:this.state.selectObj.disabled},"\u53d6\u6d88"))),i.a.createElement(L.a,{show:this.state.modalShow1,onHide:function(){return e.setState({modalShow1:!1})},backdropClassName:d.a.modal,style:{width:500}},i.a.createElement(L.a.Body,null,i.a.createElement("h3",null,"\u521b\u5efa\u4eba\u548c\u5904\u7406\u4eba\u4e0d\u662f\u3010".concat(this.state.spaceB,"\u3011\u7814\u53d1\u7a7a\u95f4\u7684\u6210\u5458\uff0c\u65e0\u6cd5\u8fdb\u884c\u540e\u7eed\u7f3a\u9677\u9a8c\u8bc1\uff0c\u8bf7\u4fee\u6539\u5904\u7406\u4eba"))),i.a.createElement(L.a.Footer,null,i.a.createElement(F.a,{onClick:function(){return e.setState({modalShow1:!1})}},"\u786e\u5b9a"))),i.a.createElement(L.a,{show:this.state.modalShow2,onHide:function(){return e.setState({modalShow2:!1})},backdropClassName:d.a.modal,style:{width:500}},i.a.createElement(L.a.Body,null,i.a.createElement("h3",null,"\u521b\u5efa\u4eba\u6ca1\u6709\u7814\u53d1\u7a7a\u95f4\u7684\u6743\u9650\uff0c\u5c06\u7528\u5904\u7406\u4eba\u5728\u3010".concat(this.state.spaceB,"\u3011\u7814\u53d1\u7a7a\u95f4\u521b\u5efa\u7f3a\u9677\uff0c\u8bf7\u786e\u8ba4\u662f\u5426\u521b\u5efa"))),i.a.createElement(L.a.Footer,null,i.a.createElement(F.a,{onClick:function(){return e.doMove()},loading:this.state.modalLoading},"\u786e\u5b9a"),i.a.createElement(F.a,{style:{marginLeft:8},empty:!0,onClick:function(){return e.closeModal2()}},"\u53d6\u6d88"))),i.a.createElement(L.a,{show:this.state.modalShow3,onHide:function(){return e.setState({modalShow3:!1})},backdropClassName:d.a.modal,style:{width:500}},i.a.createElement(L.a.Body,null,i.a.createElement("h3",null,"\u662f\u5426\u786e\u8ba4\u8f6c\u4e3a\u7528\u6237\u6545\u4e8b\uff1f")),i.a.createElement(L.a.Footer,null,i.a.createElement(F.a,{onClick:function(){return e.doChange()},loading:this.state.modalLoading,"data-container":!0,"data-title":"\u8f6c\u9700\u6c42-\u7528\u6237\u6545\u4e8b-\u786e\u5b9a"},"\u786e\u5b9a"),i.a.createElement(F.a,{style:{marginLeft:8},empty:!0,onClick:function(){return e.setState({modalShow3:!1})}},"\u53d6\u6d88"))),u&&i.a.createElement(R.RiskModel,{show:u,title:f?"\u89e3\u9664\u98ce\u9669":"\u6807\u8bb0\u98ce\u9669",disabled:!!f,projectId:C,id:T,onSubmit:function(t){return e.onSubmitRiskModel.call(e,t)},onCancel:function(){return e.onCancelRiskModel.call(e)}})):i.a.createElement("div",{className:d.a.placeHolder})},t.prototype.renderChildMenu=function(){var e=this;return console.log("\u6e32\u67d3\u590f\u5b63\u83dc\u5355",this.state.selectTypes),c.a.createPortal(i.a.createElement("div",{className:d.a.moreWrap,style:this.state.changeWrapPos},this.state.selectTypes.map((function(t){return i.a.createElement("div",{key:t.value,className:d.a.moreItem,style:{width:"90px"},onClick:function(a){a.nativeEvent.stopImmediatePropagation(),e.setState({isShowMore:!1,isShowChange:!1}),e.onSelect(t)}},t.text)}))),this.container)},t.prototype.onSelect=function(e){var t=this,a=e.value;this.hideMore(),"STORY"===a?this.setState({modalShow3:!0}):"REQUIREMENT"===a&&this.setState({selectObj:{type:1,show:!0,loading:!1,disabled:!0,txt:"\u8f6c\u9700\u6c42-\u4ea7\u54c1\u9700\u6c42-\u786e\u5b9a"},selectObjField:{product:{title:"\u9009\u62e9\u4ea7\u54c1\u7ec4",arr:[],item:{}}}},(function(){t.onGetProductGroup()}))},t.prototype.onGetProject=function(e,t,a,n){return void 0===e&&(e=""),void 0===t&&(t=1),void 0===a&&(a=10),void 0===n&&(n=!1),U(this,void 0,void 0,(function(){var r,o,i,l,c,s,u,d,f;return Y(this,(function(p){switch(p.label){case 0:return r=this.props.projectID,o=this.state.selectObjField,[4,Object(M.getProjects)(r,{page:t,pageSize:a,type:"all",sortBy:{value:"DESC",key:"CREATE"},keyword:e})];case 1:return i=p.sent().data,l=i.list,c=i.totalPage,s=i.page,u=l.map((function(e){return{text:e.display_name,value:e.id}})),d=n?u:W.uniqWith(o.project.arr.concat(u),W.isEqual),f=H(H({},o.project),{arr:d,item:{},totalPage:c,page:s}),this.setState({selectObj:H(H({},this.state.selectObj),{loading:!1,disabled:!1}),selectObjField:H(H({},o),{project:f})}),[2]}}))}))},t.prototype.onGetProductGroup=function(e){return void 0===e&&(e=""),U(this,void 0,void 0,(function(){var t,a,n,r;return Y(this,(function(o){switch(o.label){case 0:return[4,Object(M.getProductGroupList)(e)];case 1:return t=o.sent().data,a=(t||[]).map((function(e){return{text:e.name,value:e.id}})),n=this.state.selectObjField,r=H(H({},n.product),{arr:a,item:{}}),this.setState({selectObj:H(H({},this.state.selectObj),{loading:!1,disabled:!1}),selectObjField:H(H({},n),{product:r})}),[2]}}))}))},t.prototype.onGetRequirementType=function(){return U(this,void 0,void 0,(function(){var e,t,a;return Y(this,(function(n){switch(n.label){case 0:return(e=this.props.projectID)?[4,Object(M.getRequirementType)(e)]:[3,2];case 1:t=n.sent().data,a=(t||[]).map((function(e){return{text:e.requirementTypeName,value:e.requirementType}})),this.setState({selectTypes:a}),n.label=2;case 2:return[2]}}))}))},t.prototype.onGetStatusList=function(){var e,t;return U(this,void 0,void 0,(function(){var a,n,r,o,i,l,c,s;return Y(this,(function(u){switch(u.label){case 0:return a=this.props,n=a.issueStatus,r=a.issueStatusName,o=this.state.selectObjField,[4,Object(M.getStatusList)(o.project.item.value,n)];case 1:return i=u.sent().data,l=(i||[]).map((function(e){return{text:e.name,value:e.id}})),c=o.status.item.text?null!==(e=l.find((function(e){return e.text===o.status.item.text})))&&void 0!==e?e:{value:"",text:""}:null!==(t=l.find((function(e){return e.text===r})))&&void 0!==t?t:{value:"",text:""},s=H(H({},o.status),{arr:l,item:c}),this.setState({selectObj:H(H({},this.state.selectObj),{loading:!1,disabled:!1}),selectObjField:H(H({},o),{status:s})}),[2]}}))}))},t.prototype.onTransfer=function(){var e=this;this.hideMore(),this.setState({selectObj:{type:2,show:!0,loading:!1,disabled:!0,txt:"\u8f6c\u79fb-\u786e\u5b9a"},selectObjField:{project:{title:"\u9009\u62e9\u7814\u53d1\u7a7a\u95f4",arr:[],item:{},page:1,pageSize:10,totalPage:0,keyWord:""},status:{title:"\u9009\u62e9\u72b6\u6001",arr:[],item:{},keyWord:""}}},(function(){e.onGetProject("",1,10,!1)}))},t.prototype.modalConfirm=function(){return U(this,void 0,void 0,(function(){var e,t,a,n,r,o,i,l,c,s,u,d;return Y(this,(function(f){switch(f.label){case 0:for(e=this.state,t=e.selectObj,a=e.selectObj.type,n=e.selectObjField,r=Object.keys(n),o=0;o<(null===r||void 0===r?void 0:r.length);o++)if(!n[r[o]].item.value)return Object(P.danger)("\u8bf7".concat(n[r[o]].title)),[2];this.setState({selectObj:H(H({},t),{loading:!0})}),i=this.props,l=i.projectID,c=i.issueCode,s=i.callback,f.label=1;case 1:return f.trys.push([1,6,,7]),2!==a?[3,3]:[4,Object(M.moveIssue)(l,c,n.project.item.value,n.status.item.value)];case 2:return(u=f.sent().data).code&&u.projectName?(this.setState({selectObj:H(H({},this.state.selectObj),{loading:!1,show:!1,txt:""}),selectObjField:{}}),s&&s(),window.open("/p/".concat(u.projectName,"/bug-tracking/issues/").concat(u.code),"_blank").focus()):8226===u?this.setState({modalShow2:!0,spaceB:n.project.item.text,selectObj:H(H({},this.state.selectObj),{loading:!1,show:!1,txt:""})}):8227===u&&this.setState({modalShow1:!0,spaceB:n.project.item.text,selectObj:H(H({},this.state.selectObj),{loading:!1,show:!1,txt:""})}),[3,5];case 3:return 1!==a?[3,5]:[4,Object(M.changeIssue2Requirement)(l,c,"REQUIREMENT",n.product.item.value)];case 4:u=f.sent().data,this.setState({selectObj:H(H({},this.state.selectObj),{loading:!1,show:!1,txt:""})}),s&&s(),this.props.getActivityList(),Object(P.success)("\u7f3a\u9677\u8f6c \u9700\u6c42-\u4ea7\u54c1\u9700\u6c42\u6210\u529f"),window.open("/requiremanage?requirementCode=".concat(u.code),"_blank").focus(),f.label=5;case 5:return[3,7];case 6:return d=f.sent(),console.log(d),this.setState({selectObj:H(H({},this.state.selectObj),{loading:!1})}),[3,7];case 7:return[2]}}))}))},t.prototype.doMove=function(){return U(this,void 0,void 0,(function(){var e,t,a,n,r,o;return Y(this,(function(i){switch(i.label){case 0:e=this.state.selectObjField,t=this.props,a=t.projectID,n=t.issueCode,this.setState({modalLoading:!0}),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,Object(M.moveIssue)(a,n,e.project.item.value,e.status.item.value,!0)];case 2:return r=i.sent().data,this.closeModal2(),r.code&&r.projectName&&window.open("/p/".concat(r.projectName,"/bug-tracking/issues/").concat(r.code),"_blank").focus(),[3,4];case 3:return o=i.sent(),this.setState({modalLoading:!1}),console.log(o),[3,4];case 4:return[2]}}))}))},t.prototype.onSelectProject=function(e,t){var a,n=this,r=this.state.selectObjField,o=H(H({},r[e]),{item:t});this.setState({selectObj:H(H({},this.state.selectObj),{disabled:!1}),selectObjField:H(H({},r),(a={},a[e]=o,a))},(function(){"project"===e&&n.onGetStatusList()}))},t.prototype.onKeywordSearch=function(e,t){var a,n=this,r=this.state.selectObj.type,o=this.state.selectObjField,i=H(H({},o[e]),{page:1,keyWord:t});this.setState({selectObj:H({},this.state.selectObj),selectObjField:H(H({},o),(a={},a[e]=i,a))}),clearTimeout(this.timeout),this.timeout=1===r?setTimeout((function(){n.onGetProductGroup(t)}),300):setTimeout((function(){n.onGetProject(t,1,i.pageSize,!0)}),300)},t.prototype.doChange=function(){return U(this,void 0,void 0,(function(){var e,t,a,n,r,o;return Y(this,(function(i){switch(i.label){case 0:e=this.props,t=e.projectID,a=e.issueCode,n=e.callback,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,Object(M.changeIssue2Requirement)(t,a,"STORY")];case 2:return r=i.sent().data,Object(P.success)("\u7f3a\u9677\u8f6c \u9700\u6c42-\u7528\u6237\u6545\u4e8b\u6210\u529f"),this.setState({modalShow3:!1}),n&&n(),this.props.getActivityList(),window.open("/p/".concat(r.projectName,"/requirements/issues/").concat(r.code),"_blank").focus(),[3,4];case 3:return o=i.sent(),console.log(o),[3,4];case 4:return[2]}}))}))},t.prototype.closeModal2=function(){this.setState({modalShow2:!1,modalLoading:!1})},t.defaultProps={projectType:"SCRUM",uploadProps:{}},t}(i.a.Component);t.default=q},bl1S:function(e,t,a){e.exports={"issue-pagination":"issue-pagination-3y6DgGnlPY",issuePagination:"issue-pagination-3y6DgGnlPY","left-wrapper":"left-wrapper-39AJFdNvfr",leftWrapper:"left-wrapper-39AJFdNvfr","right-wrapper":"right-wrapper-2Z7Lqo2nnM",rightWrapper:"right-wrapper-2Z7Lqo2nnM","batch-tip":"batch-tip-1ypvyrDIwP",batchTip:"batch-tip-1ypvyrDIwP","issue-list-info":"issue-list-info-2zBmyYYTj0",issueListInfo:"issue-list-info-2zBmyYYTj0","refresh-icon":"refresh-icon-3E7_FF801m",refreshIcon:"refresh-icon-3E7_FF801m",rotating:"rotating-2AdVqG7fnV",rotation:"rotation-3Mhg_x320G","page-action-wrapper":"page-action-wrapper-22qwVZVo4S",pageActionWrapper:"page-action-wrapper-22qwVZVo4S","page-action":"page-action-3wDp6RisA5",pageAction:"page-action-3wDp6RisA5",disabled:"disabled-20dGTxA5qQ","page-action-left":"page-action-left-uGlKBtRsHi",pageActionLeft:"page-action-left-uGlKBtRsHi","page-action-right":"page-action-right-19ChMSdg2A",pageActionRight:"page-action-right-19ChMSdg2A","batch-btn":"batch-btn-3skEuY3pUL",batchBtn:"batch-btn-3skEuY3pUL","icon-delete":"icon-delete-1ck2WgcNd4",iconDelete:"icon-delete-1ck2WgcNd4","icon-modify":"icon-modify-BO3dvOuqn5",iconModify:"icon-modify-BO3dvOuqn5","batch-modify":"batch-modify-1hBDSPncAU",batchModify:"batch-modify-1hBDSPncAU","batch-delete":"batch-delete-zv0t5xOXLE",batchDelete:"batch-delete-zv0t5xOXLE","disable-delete":"disable-delete-21qmKGhac5",disableDelete:"disable-delete-21qmKGhac5","disable-modify":"disable-modify-1KqOz-RJdl",disableModify:"disable-modify-1KqOz-RJdl","bult-action":"bult-action-Xc-_HuVykm",bultAction:"bult-action-Xc-_HuVykm",icon:"icon-2HfIgbiOt3",cancel:"cancel-2LO7D2T4U3","divide-line":"divide-line-3GD7QCl7o_",divideLine:"divide-line-3GD7QCl7o_","custom-margin":"custom-margin-2FAiN0y3PQ",customMargin:"custom-margin-2FAiN0y3PQ"}},c1w3:function(e,t,a){"use strict";a.r(t);var n=a("cDcd"),r=a.n(n),o=a("K2gz"),i=a.n(o),l=a("VI42"),c=a.n(l);t.default=function(e){var t=e.tabs,a=e.activeTab,n=e.className,o=e.tabClick;return r.a.createElement("div",{className:i()(c.a.tabWrapper,n)},t&&!!t.length&&t.map((function(e){return r.a.createElement("div",{className:i()(c.a.tab,a===e.value?c.a.active:""),key:e.value,onClick:function(){return o(e)}},e.text)})))}},cHAH:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=n(a("17x9")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),f=a("FaIw"),p=n(a("74sH")),m=a("1qdz"),v=a("7FZc");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,l.default)(a,e);var t=g(a);function a(){var e;(0,o.default)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).getContent=function(){var t="";switch(e.props.item.issueLog.action){case"ACTION_CROSS_PROJECT_PARENT":t="\u7cfb\u7edf\u6267\u884c\u8de8\u7a7a\u95f4\u7236\u5b50\u6d41\u7a0b\uff08\u7236\uff09\u89c4\u5219\u6210\u529f\u3002";break;case"ACTION_CROSS_PROJECT_SUB":t="\u7cfb\u7edf\u6267\u884c\u8de8\u7a7a\u95f4\u7236\u5b50\u6d41\u7a0b\uff08\u5b50\uff09\u89c4\u5219\u6210\u529f\u3002"}return d.default.createElement(v.TooltipTrigger,{title:t},d.default.createElement("span",null,t))},e}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item;return d.default.createElement("div",{className:m.listItem,key:e.id},d.default.createElement("div",{className:m.dot}),d.default.createElement("div",{className:m.content},d.default.createElement(p.default,{className:"mr-10 ".concat(m.icon)}),d.default.createElement("span",{className:m.msg,title:e.issueLog.content.val},this.getContent()),d.default.createElement("span",{className:m.time},(0,f.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(d.Component);t.default=E,E.propTypes={item:u.default.object}},cHah:function(e,t,a){"use strict";a.r(t);var n=a("mVeg"),r=a("cDcd"),o=a.n(r),i=a("27RU"),l=a.n(i),c=a("246l"),s=a.n(c),u=a("sftu"),d=a.n(u),f=a("K2gz"),p=a.n(f),m=a("cW10"),v=a("SLo4"),h=a.n(v),g=a("d063"),E=a("kCWS"),y=a("5hex"),b=a("7XaK"),I=a.n(b),S=a("h+87"),T=a("5N4S"),w=a.n(T),C=a("lJI2"),O=a.n(C),N=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),P=function(e){function t(t){var a=e.call(this,t)||this;return a.handleChange=function(){var e=a.props,t=e.checked,n=e.onChange;if(!e.disabled){var r=a.state.localChecked,o=void 0===t?r:t;a.setState({localChecked:!o}),n&&n(!o)}},a.state={localChecked:!1},a}return N(t,e),t.prototype.render=function(){var e=this.props,t=e.checked,a=e.className,n=e.disabled,r=this.state.localChecked,i=void 0===t?r:t;return o.a.createElement("div",{className:p()(O.a.checkbox,i&&O.a.checkboxActive,n&&O.a.checkboxDisabled,a),onClick:this.handleChange})},t}(r.PureComponent),j=a("iR1w"),D=a("Z4vw"),k=function(e){return Object(D.get)("/api/platform/team/members/search?".concat(Object(D.buildParams)(e)))},R=a("h74D"),M=a("O9Lt"),A=a.n(M),L=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),x=function(){return(x=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},_=function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function i(e){try{c(n.next(e))}catch(t){o(t)}}function l(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}c((n=n.apply(e,t||[])).next())}))},F=function(e,t){var a,n,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(a=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){i.label=l[1];break}if(6===l[0]&&i.label<r[1]){i.label=r[1],r=l;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(l);break}r[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(c){l=[6,c],n=0}finally{a=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},W=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},B=function(e,t,a){if(a||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))},H=function(e){function t(t){var a=e.call(this,t)||this;return a.getAllProjects=function(){var e,t=a.state,n=t.pager,r=t.projects,o=t.projectSearch;(e={page:n.page,pageSize:n.pageSize,keyword:o},Object(D.get)("/api/platform/project/projects/search?".concat(Object(D.buildParams)(e)))).then((function(e){var t=e.data;n.totalPage=t.totalPage,n.page=t.page,n.pageSize=t.pageSize;var o=[];o=t.page>1?B(B([],W(r),!1),W(t.list.map((function(e){return x(x({},e),{members:[],fetched:!1})}))),!1):t.list.map((function(e){return x(x({},e),{members:[],fetched:!1})})),a.setState({projects:o,pager:n})}))},a.handleUserSearchChange=function(e){a.setState({userSearch:e.target.value})},a.handleClearUserSearch=function(){a.setState({userSearch:""})},a.getFilteredUsers=function(){var e=a.state,t=e.users,n=e.userSearch;return t.filter((function(e){return e.name.indexOf(n)>-1||e.name_pinyin.indexOf(n)>-1}))},a.renderUserOverlay=function(){var e=a.state,t=e.userSearch,r=e.selectedUsers,i=e.userFetching,l=Array.from(r),c=a.getFilteredUsers();return o.a.createElement("div",{className:w.a.userOverlay},o.a.createElement("div",{className:w.a.userOverlaySearch},o.a.createElement("div",{className:w.a.userOverlaySearchIcon}),o.a.createElement("input",{value:t,className:w.a.userOverlaySearchInput,placeholder:Object(n.t)("\u641c\u7d22\u6210\u5458"),onChange:a.handleUserSearchChange}),t&&o.a.createElement("div",{className:w.a.userOverlaySearchRemoveIcon,onClick:a.handleClearUserSearch})),o.a.createElement("div",{className:w.a.userOverlayToProject},o.a.createElement("div",{className:w.a.userOverlayToProjectInner,onClick:a.handleOpenProjectOverlay},o.a.createElement("div",{className:w.a.userOverlayToProjectLeftIcon}),o.a.createElement("div",{className:w.a.userOverlayToProjectText},Object(n.t)("\u4ece\u9879\u76ee\u9009\u62e9")),o.a.createElement("div",{className:w.a.userOverlayToProjectRightIcon}))),t&&!c.length&&o.a.createElement("div",{className:w.a.searchEmpty,style:{height:0===l.length?276:252,marginBottom:0===l.length?0:24}},o.a.createElement("div",{className:w.a.searchEmptyIcon}),o.a.createElement("div",{className:w.a.searchEmptyText},Object(n.t)("\u672a\u627e\u5230\u76f8\u5173\u6210\u5458"))),!!c.length&&!i&&o.a.createElement(j.FixedSizeList,{className:p()(w.a.userOverlayList,0===l.length&&w.a.userOverlayListHigher),height:0===l.length?176:152,itemCount:c.length,itemSize:32,width:240,itemKey:function(e){return c[e].id},innerElementType:a.renderInnerElement},a.renderUserItemWrapper),i&&o.a.createElement(A.a,{show:!0}))},a.renderInnerElement=function(e){var t=e.children,n=a.getFilteredUsers();return o.a.createElement("div",{style:{position:"relative",height:32*n.length,width:"100%"}},t)},a.renderUserItemWrapper=function(e){var t=e.index,n=e.style,r=a.getFilteredUsers();return a.renderUserItem(r[t],n)},a.handleProjectSearchChange=function(e){var t=a.state.pager;t.page=1,a.setState({projectSearch:e,pager:t},(function(){a.timer&&window.clearTimeout(a.timer),a.timer=window.setTimeout((function(){a.getAllProjects()}),800)}))},a.handleClearProjectSearch=function(){a.handleProjectSearchChange("")},a.renderProjectOverlay=function(){var e=a.state,t=e.projectSearch,r=e.projects,i=e.selectedUsers,l=e.stickyId,c=Array.from(i);return o.a.createElement("div",{className:w.a.projectOverlay},o.a.createElement("div",{className:w.a.projectOverlayHeader},o.a.createElement("div",{className:w.a.projectOverlayHeaderIcon,onClick:a.handleCloseProjectOverlay}),Object(n.t)("\u4ece\u9879\u76ee\u9009\u62e9")),o.a.createElement("div",{className:w.a.projectOverlaySearch},o.a.createElement("div",{className:w.a.projectOverlaySearchIcon}),o.a.createElement("input",{value:t,className:w.a.projectOverlaySearchInput,placeholder:Object(n.t)("\u641c\u7d22\u9879\u76ee"),onChange:function(e){return a.handleProjectSearchChange(e.target.value)}}),t&&o.a.createElement("div",{className:w.a.projectOverlaySearchRemoveIcon,onClick:a.handleClearProjectSearch})),!r.length&&o.a.createElement("div",{className:w.a.searchEmpty,style:{height:0===c.length?276:252,marginBottom:0===c.length?0:24}},o.a.createElement("div",{className:w.a.searchEmptyIcon}),o.a.createElement("div",{className:w.a.searchEmptyText},Object(n.t)("\u672a\u627e\u5230\u76f8\u5173\u9879\u76ee"))),-1!==l&&a.renderProjectSticky(),o.a.createElement(j.FixedSizeList,{className:p()(w.a.projectOverlayList,0===c.length&&w.a.projectOverlayListHigher),height:0===c.length?176:152,itemCount:r.length,itemSize:32,width:240,innerElementType:a.renderProjectInnerElement,onScroll:a.handleProjectScroll,outerRef:function(e){return a.projectListRef=e},onItemsRendered:a.handleItemsRendered},a.renderProjectItem))},a.renderProjectInnerElement=function(e){var t=e.children,n=a.state.projects;return o.a.createElement("div",{style:{position:"relative",height:32*n.length,width:"100%"}},t)},a.handleItemsRendered=function(e){var t=e.visibleStartIndex,n=a.state.projects[t];"member"!==n.type?n.expand&&n.members.length&&t>0?a.setState({stickyId:n.id}):a.setState({stickyId:-1}):a.setState({stickyId:n.parentId})},a.handleProjectScroll=function(e){var t=e.scrollOffset,n=e.scrollDirection,r=a.state.projects,o=a.projectListRef.getBoundingClientRect().height;if(a.direction=n,t+o-8===32*r.length){var i=a.state.pager;i.page<i.totalPage&&(i.page=i.page+1,a.setState({pager:i},(function(){return a.getAllProjects()})))}},a.renderSelectedOverlay=function(){var e=a.state,t=e.selectedOverlayVisible,r=e.selectedUsers,i=e.users,l=Array.from(r),c=i.filter((function(e){return l.includes(e.id)}));return o.a.createElement("div",{className:p()(w.a.selectedOverlay,t&&w.a.selectedOverlayExpand)},o.a.createElement("div",{className:w.a.selectedOverlayHeader,onClick:a.handleToggleSelectedOverlayVisible},o.a.createElement("div",{className:w.a.selectedOverlayHeaderText},Object(n.t)("\u5df2\u9009 {{num}} \u540d\u6210\u5458",{num:c.length})),o.a.createElement("div",{className:w.a.selectedOverlayHeaderIcon})),o.a.createElement(j.FixedSizeList,{className:w.a.selectedOverlayList,height:216,itemCount:c.length,itemSize:32,width:240,innerElementType:a.renderSelectedInnerElement},a.renderSelectedItemWrapper))},a.renderSelectedItemWrapper=function(e){var t=e.index,n=e.style,r=a.state,o=r.selectedUsers,i=r.users,l=Array.from(o),c=i.filter((function(e){return l.includes(e.id)}));return a.renderSelectedItem(c[t],n)},a.renderSelectedInnerElement=function(e){var t=e.children,n=a.state,r=n.selectedUsers,i=n.users,l=Array.from(r),c=i.filter((function(e){return l.includes(e.id)}));return o.a.createElement("div",{style:{position:"relative",height:32*c.length,width:"100%"}},t)},a.renderUserItem=function(e,t){var n=a.state.selectedUsers,r=Array.from(n);return o.a.createElement("div",{className:w.a.userItem,style:t,onClick:function(){return a.handleCheckUserItem(e)}},o.a.createElement("img",{src:e.avatar,className:w.a.userItemAvatar}),o.a.createElement("div",{className:w.a.userItemName},e.name),o.a.createElement(P,{className:w.a.userItemCheck,checked:r.includes(e.id)}))},a.handleCheckUserItem=function(e){var t=a.state.selectedUsers;Array.from(t).includes(e.id)?t.delete(e.id):t.add(e.id),a.setState({selectedUsers:t})},a.renderProjectSticky=function(){var e=a.state,t=e.projectOverlayVisible,n=e.projects,r=e.selectedUsers,i=e.stickyId;if(!t)return null;var l=n.findIndex((function(e){return e.id===i})),c=n[l],s=c.members,u=Array.from(r);return o.a.createElement("div",{className:p()(w.a.projectItem,w.a.projectItemSticky,c.expand&&w.a.projectItemExpand),onClick:function(){return a.handleCheckProjectItem(c)}},o.a.createElement("div",{className:w.a.projectItemArrow,onClick:function(){return a.handleToggleExpandProject(l)}}),o.a.createElement("img",{src:c.icon,className:w.a.projectItemAvatar}),o.a.createElement("div",{className:w.a.projectItemName},c.display_name),o.a.createElement("div",{className:w.a.projectItemCheck},o.a.createElement(P,{checked:s.length&&s.every((function(e){return u.includes(e.id)}))})))},a.renderProjectItem=function(e){var t=e.index,n=e.style,r=a.state,i=r.projects,l=r.selectedUsers,c=i[t];if("member"===c.type)return a.renderUserItem(c,x(x({},n),{paddingLeft:28}));var s=c.members,u=Array.from(l);return o.a.createElement("div",{className:p()(w.a.projectItem,c.expand&&w.a.projectItemExpand),style:n,onClick:function(){return a.handleCheckProjectItem(c)}},o.a.createElement("div",{className:w.a.projectItemArrow,onClick:function(e){e.stopPropagation(),a.handleToggleExpandProject(t)}}),o.a.createElement("img",{src:c.icon,className:w.a.projectItemAvatar}),o.a.createElement("div",{className:w.a.projectItemName},c.display_name),o.a.createElement("div",{className:w.a.projectItemCheck},o.a.createElement(P,{checked:s.length&&s.every((function(e){return u.includes(e.id)}))})))},a.addUsers=function(e){var t=a.state.users,n=t.map((function(e){return e.id}));a.setState({users:B(B([],W(t),!1),W(e.filter((function(e){return!n.includes(e.user.id)})).map((function(e){return e.user}))),!1)})},a.handleCheckProjectItem=function(e){var t=a.state,n=t.selectedUsers,r=t.projects;if(e.fetched){var o=e.members,i=Array.from(n);o.every((function(e){return i.includes(e.id)}))?o.forEach((function(e){n.delete(e.id)})):o.forEach((function(e){n.add(e.id)})),a.setState({selectedUsers:n})}else a.getAllTeamMembers(e.id).then((function(t){var o=t.map((function(t){return n.add(t.user.id),x(x({},t.user),{type:"member",parentId:e.id})}));e.members=o,e.fetched=!0,a.setState({projects:r,selectedUsers:n}),a.addUsers(t)}))},a.getAllTeamMembers=function(e){return _(a,void 0,void 0,(function(){var t,a,n,r,o,i;return F(this,(function(l){switch(l.label){case 0:return[4,k({pageSize:999999,page:1,searchMemberUnderProjectId:e})];case 1:if(t=l.sent().data,a=t.list,n=t.totalPage,r=a,!(n>1))return[3,5];o=2,l.label=2;case 2:return o<=n?[4,k({pageSize:999999,page:o,searchMemberUnderProjectId:e})]:[3,5];case 3:i=l.sent().data.list,r=r.concat(i),l.label=4;case 4:return o++,[3,2];case 5:return[2,r]}}))}))},a.handleToggleExpandProject=function(e){var t=a.state.projects,n=t[e];n.expand?(n.expand=!1,n.fetched=!1,t.splice(e+1,n.members.length),a.state.stickyId===n.id&&a.setState({stickyId:-1}),a.setState({projects:t})):a.getAllTeamMembers(n.id).then((function(r){var o=r.map((function(e){return x(x({},e.user),{type:"member",parentId:n.id})}));n.expand=!0,n.members=o,n.fetched=!0,t.splice.apply(t,B([e+1,0],W(o),!1)),a.setState({projects:t}),a.addUsers(r)}))},a.renderSelectedItem=function(e,t){return o.a.createElement("div",{className:w.a.selectedItem,style:t},o.a.createElement("img",{src:e.avatar,className:w.a.selectedItemAvatar}),o.a.createElement("div",{className:w.a.selectedItemName},e.name),o.a.createElement("div",{className:w.a.selectedItemRemove,onClick:function(){return a.handleRemoveSelectedUser(e)}}))},a.handleRemoveSelectedUser=function(e){var t=a.state.selectedUsers;t.delete(e.id),a.setState({selectedUsers:t}),Array.from(t).length||a.setState({selectedOverlayVisible:!1})},a.handleToggleVisible=function(e){var t=a.props.onVisibleChange;a.setState({localVisible:e}),e?a.getAllProjects():a.setState({projectOverlayVisible:!1,selectedOverlayVisible:!1,userOverlayVisible:!0,userSearch:"",projectSearch:"",pager:{page:1,pageSize:100,totalPage:100}}),t&&t(e)},a.handlePopupVisibleChange=function(e){a.handleToggleVisible(e)},a.handleToggleSelectedOverlayVisible=function(){a.setState((function(e){return{selectedOverlayVisible:!e.selectedOverlayVisible}}))},a.handleOpenProjectOverlay=function(){a.setState({projectOverlayVisible:!0})},a.handleCloseProjectOverlay=function(){a.setState({projectOverlayVisible:!1})},a.handleSelect=function(){var e=a.props.onConfirm,t=a.state,n=t.selectedUsers,r=t.users;if(a.handleToggleVisible(!1),e){var o=Array.from(n);e(r.filter((function(e){return o.includes(e.id)})))}},a.state={localVisible:!1,userOverlayVisible:!0,projectOverlayVisible:!1,selectedOverlayVisible:!1,userSearch:"",projectSearch:"",projects:[],users:B([],W(t.valueList),!1),selectedUsers:new Set(t.value),pager:{page:1,pageSize:100,totalPage:100},stickyId:-1,userFetching:!1},a}return L(t,e),t.prototype.componentDidMount=function(){this.getAllProjects()},t.prototype.render=function(){var e=this.state,t=e.userOverlayVisible,a=e.projectOverlayVisible,r=e.selectedUsers,i=this.props.onCancel,l=Array.from(r);return o.a.createElement("div",{className:w.a.overlay,onClick:function(e){return e.stopPropagation()}},t&&this.renderUserOverlay(),a&&this.renderProjectOverlay(),!!l.length&&this.renderSelectedOverlay(),o.a.createElement("div",{className:w.a.overlayFooter},o.a.createElement("div",{className:p()(w.a.overlayFooterButton,w.a.overlayFooterButtonPrimary),onClick:this.handleSelect},Object(n.t)("\u786e\u8ba4\u6dfb\u52a0")),o.a.createElement("div",{className:p()(w.a.overlayFooterButton,w.a.overlayFooterButtonDefault),onClick:i},Object(n.t)("\u53d6\u6d88"))))},t}(r.Component);var U=Object(R.connect)((function(e){return{globalKey:e.APP.enterprise.globalKey}}))(H),Y=a("/mbV"),q=a.n(Y),G=a("yZ+p"),z=a.n(G),V=a("xgZS"),Z=a("yg2+"),K=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},J=function(e){var t=e.onCancel,a=e.onConfirm,i=K(Object(r.useState)(""),2),l=i[0],c=i[1],u=K(Object(r.useState)(""),2),d=u[0],f=u[1],m=K(Object(r.useState)(""),2),v=m[0],h=m[1];return o.a.createElement("div",{onClick:function(e){return e.stopPropagation()}},o.a.createElement("div",{className:q.a.title},Object(n.t)("\u6dfb\u52a0\u5916\u90e8\u6210\u5458")),o.a.createElement("div",{className:q.a.field},o.a.createElement("div",{className:q.a.fieldName},Object(n.t)("\u90ae\u7bb1"),o.a.createElement("div",{className:q.a.required},"*")),o.a.createElement("div",{className:q.a.fieldInput},o.a.createElement(z.a,{autoFocus:!0,size:"medium",placeholder:Object(n.t)("\u90ae\u7bb1"),value:l,onChange:function(e){c(e.target.value)}}))),o.a.createElement("div",{className:q.a.field},o.a.createElement("div",{className:q.a.fieldName},Object(n.t)("\u540d\u79f0")),o.a.createElement("div",{className:q.a.fieldInput},o.a.createElement(z.a,{size:"medium",placeholder:Object(n.t)("\u540d\u79f0"),value:d,onChange:function(e){f(e.target.value)}}))),o.a.createElement("div",{className:q.a.field},o.a.createElement("div",{className:q.a.fieldName},Object(n.t)("\u6536\u4ef6\u4eba\u79f0\u8c13")),o.a.createElement("div",{className:q.a.fieldInput},o.a.createElement(z.a,{size:"medium",placeholder:Object(n.t)("\u6536\u4ef6\u4eba\u79f0\u8c13"),value:v,onChange:function(e){h(e.target.value)}}))),o.a.createElement("div",{className:q.a.footer},o.a.createElement("div",{className:p()(q.a.button,q.a.buttonConfirm,s.a.newButton,s.a.primary,s.a.h32),onClick:function(){var e=l.trim(),t=d.trim(),r=v.trim();e?Object(Z.a)(e)?t.length>20?Object(V.danger)(Object(n.t)("\u540d\u79f0\u6700\u591a\u652f\u630120\u4f4d")):r.length>20?Object(V.danger)(Object(n.t)("\u79f0\u8c13\u6700\u591a\u652f\u630120\u4f4d")):a({id:-1,key:l,userType:"OUTER",name:t||e.split("@")[0],recipientSalutation:r||e.split("@")[0],email:e}):Object(V.danger)(Object(n.t)("\u90ae\u7bb1\u683c\u5f0f\u9519\u8bef")):Object(V.danger)(Object(n.t)("\u90ae\u7bb1\u4e0d\u80fd\u4e3a\u7a7a"))}},Object(n.t)("\u786e\u5b9a")),o.a.createElement("div",{className:p()(q.a.button,s.a.newButton,s.a.default,s.a.h32),onClick:function(e){e.stopPropagation(),t()}},Object(n.t)("\u53d6\u6d88"))))},Q=a("WN9O"),X=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},$=[{id:"include",name:Object(n.t)("\u6dfb\u52a0\u56e2\u961f\u5185\u6210\u5458")},{id:"exclude",name:Object(n.t)("\u6dfb\u52a0\u5916\u90e8\u6210\u5458")}],ee=function(e){var t=e.isScroll,a=e.resetIsScroll,i=e.value,l=e.onAddInner,c=e.onAddOuter,s=X(Object(r.useState)(""),2),u=s[0],d=s[1],f=X(Object(r.useState)(1),2),m=f[0],v=f[1],h=X(Object(r.useState)([]),2),g=h[0],E=h[1],y=Object(r.useRef)(null),b=X(Object(S.a)({onCancel:function(){return d("")}}),1)[0],T=b.visible,w=b.toggle,C=function(e){d(e)};return o.a.createElement("div",{className:I.a.add,onClick:function(e){e.stopPropagation(),w()}},o.a.createElement("div",{className:p()(I.a.addIcon,T&&I.a.addIconActive),ref:y},o.a.createElement("div",null)),T&&""===u&&o.a.createElement(Q.default,{relatedElem:y.current,offsetY:4,portalWrapStyle:{zIndex:1054,width:"160px"},isContentPositionAutoChange:!1,isScroll:t,resetIsScroll:a},o.a.createElement("div",{className:I.a.popup},$.map((function(e){return o.a.createElement("div",{key:e.id,className:I.a.popupItem,onClick:function(t){t.stopPropagation(),C(e.id)}},e.name)})))),T&&"include"===u&&y.current&&o.a.createElement(Q.default,{relatedElem:y.current,offsetY:4,portalWrapStyle:{zIndex:1054,width:"240px"},isContentPositionAutoChange:!1,isScroll:t,resetIsScroll:a},o.a.createElement(U,{value:i.filter((function(e){return"INNER"===e.userType})).map((function(e){return e.id})),valueList:g,onConfirm:function(e){l(e.map((function(e){return{key:e.id,id:e.id,userType:"INNER",email:"",name:e.name,recipientSalutation:"",avatar:e.avatar}}))),E(e),C("")},onCancel:function(){return C("")}})),T&&"exclude"===u&&o.a.createElement(Q.default,{relatedElem:y.current,offsetY:4,portalWrapStyle:{zIndex:1054,width:"418px"},isContentPositionAutoChange:!1,isScroll:t,resetIsScroll:a},o.a.createElement("div",{className:I.a.exclude},o.a.createElement(J,{key:m,onConfirm:function(e){i.findIndex((function(t){return t.email===e.email}))>-1?Object(V.danger)(Object(n.t)("\u8be5\u5916\u90e8\u6210\u5458\u5df2\u6dfb\u52a0")):(c(e),v(m+1),C(""))},onCancel:function(){return C("")}}))))},te=a("lGCG"),ae=a("V/h/"),ne=a("0Zwn"),re=function(){return(re=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},oe=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},ie=function(e,t,a){if(a||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))};t.default=function(e){var t=e.data,a=e.fromIssueId,i=e.onCancel,c=e.onItemChange,u=oe(Object(r.useState)(t?t.subject:""),2),f=u[0],v=u[1],b=oe(Object(r.useState)(t?t.reviewers:[]),2),I=b[0],S=b[1],T=oe(Object(r.useState)(t?t.cc:[]),2),w=T[0],C=T[1],O=oe(Object(r.useState)([]),2),N=O[0],P=O[1],j=oe(Object(r.useState)(t?t.issueReviewType.id:-1),2),D=j[0],k=j[1],R=oe(Object(r.useState)(t&&t.attachments?t.attachments:[]),2),M=R[0],A=R[1],L=oe(Object(r.useState)(!1),2),x=L[0],_=L[1],F=function(e){A(ie(ie([],oe(M),!1),oe(e),!1))},W=function(){Object(te.getIssueReviewTypes)().then((function(e){var t=e.data;-1===D||t.filter((function(e){return"ENABLE"===e.status})).some((function(e){return e.id===D}))||k(-1),P(t.map((function(e){return re(re({},e),{text:e.name})})))}))},B=function(e){var t=I.findIndex((function(t){return"INNER"===t.userType?t.id===e.id:e.email===t.email}));S(ie(ie([],oe(I.slice(0,t)),!1),oe(I.slice(t+1)),!1))},H=function(e){var t=w.findIndex((function(t){return"INNER"===t.userType?t.id===e.id:e.email===t.email}));C(ie(ie([],oe(w.slice(0,t)),!1),oe(w.slice(t+1)),!1))};Object(r.useEffect)((function(){W()}),[]);return o.a.createElement(d.a,{className:p()(l.a.wrapper),show:!0,outsideClickCloseable:!1,keyboard:!1,enforceFocus:!1,onHide:i,onScroll:function(){_(!0)}},o.a.createElement(ne.default,{currentAttachmentNum:M.length,onHandleAttachments:F,notUpload:!1,onIntoUploadElems:function(){}},o.a.createElement("div",{className:l.a.container},o.a.createElement("div",{className:l.a.title},Object(n.t)("\u53d1\u8d77\u5ba1\u6279")),o.a.createElement("div",{className:l.a.line},o.a.createElement("div",{className:l.a.label},Object(n.t)("\u5ba1\u6279\u7c7b\u578b"),o.a.createElement("span",{className:l.a.highlight},"*")),o.a.createElement("div",null,o.a.createElement(g.a,{placeholder:Object(n.t)("\u8bf7\u9009\u62e9\u5ba1\u6279\u7c7b\u578b"),items:N.filter((function(e){return"ENABLE"===e.status})),value:D,clearable:!1,onSelect:function(e){k(e.id)},isLocalSearch:!1}))),o.a.createElement("div",{className:l.a.line},o.a.createElement("div",{className:l.a.label},Object(n.t)("\u4e3b\u9898"),o.a.createElement("span",{className:l.a.highlight},"*")),o.a.createElement("div",{className:l.a.subject},o.a.createElement(m.a,{value:f,onChange:function(e){var t=e.target.value;v(t)},placeholder:Object(n.t)("\u7b80\u8981\u63cf\u8ff0\u8fd9\u6b21\u5ba1\u6279")}))),o.a.createElement("div",{className:l.a.line},o.a.createElement("div",{className:l.a.label},Object(n.t)("\u6d41\u7a0b")),o.a.createElement("div",{className:l.a.procedure},o.a.createElement("div",{className:l.a.procedureLine},o.a.createElement("div",{className:l.a.procedureTitle},o.a.createElement("div",{className:l.a.procedureTitleIcon}),o.a.createElement("div",{className:l.a.procedureTitleName},Object(n.t)("\u5ba1\u6279\u4eba"))),o.a.createElement("div",{className:l.a.procedureUser},I.map((function(e){return o.a.createElement("div",{className:l.a.procedureUserItem,key:e.key},o.a.createElement(E.a,{from:"create",editable:!0,data:e,onRemove:B}))})),o.a.createElement(ee,{isScroll:x,resetIsScroll:function(){return _(!1)},value:I,onAddInner:function(e){var t=I.filter((function(t){return"INNER"!==t.userType||e.findIndex((function(e){return e.id===t.id}))>-1})),a=e.filter((function(e){return"INNER"!==e.userType||I.findIndex((function(t){return t.id===e.id}))<0}));S(ie(ie([],oe(t),!1),oe(a),!1))},onAddOuter:function(e){S(ie(ie([],oe(I),!1),[e],!1))}}))),o.a.createElement("div",{className:l.a.procedureLine},o.a.createElement("div",{className:l.a.procedureTitle},o.a.createElement("div",{className:l.a.procedureTitleIcon}),o.a.createElement("div",{className:l.a.procedureTitleName},Object(n.t)("\u6284\u9001\u4eba"))),o.a.createElement("div",{className:l.a.procedureUser},w.map((function(e){return o.a.createElement("div",{className:l.a.procedureUserItem,key:e.id},o.a.createElement(E.a,{from:"create",key:e.id,editable:!0,data:e,onRemove:H}))})),o.a.createElement(ee,{isScroll:x,resetIsScroll:function(){return _(!1)},value:w,onAddInner:function(e){var t=w.filter((function(t){return"INNER"!==t.userType||e.findIndex((function(e){return e.id===t.id}))>-1})),a=e.filter((function(e){return"INNER"!==e.userType||w.findIndex((function(t){return t.id===e.id}))<0}));C(ie(ie([],oe(t),!1),oe(a),!1))},onAddOuter:function(e){C(ie(ie([],oe(w),!1),[e],!1))}}))))),o.a.createElement("div",{className:l.a.line},o.a.createElement("div",{className:l.a.label},Object(n.t)("\u9644\u4ef6"),o.a.createElement("div",{className:l.a.divider}),o.a.createElement(h.a,{onHandleAttachments:F,currentAttachmentNum:M.length,attachmentLimit:M.length>=20},o.a.createElement("div",{className:l.a.upload},o.a.createElement("div",{className:l.a.uploadIcon}),Object(n.t)("\u672c\u5730\u4e0a\u4f20")))),M.length?o.a.createElement("div",null,o.a.createElement(y.a,{allowPreview:!1,onPreview:function(){},attachments:M,uploadFileSuccess:function(e){e.isCanceled?A(Object(ae.default)(M,(function(t){var a=t.findIndex((function(t){return t.timestamp===e.timestamp}));t.splice(a,1)}))):A(Object(ae.default)(M,(function(t){var a=t.findIndex((function(t){return t.timestamp===e.timestamp}));t[a]=e})))},uploadFileFailed:function(e){var t=e.timestamp;A(Object(ae.default)(M,(function(e){var a=e.findIndex((function(e){return e.timestamp===t}));e.splice(a,1)})))},uploadFileDelete:function(e){var t=e.attachmentId;Object(te.deleteIssueReviewAttachment)(t).then((function(){A(Object(ae.default)(M,(function(e){var a=e.findIndex((function(e){return e.attachmentId===t}));e.splice(a,1)})))}))},uploadFileCancel:function(e){var t=e.timestamp;A(Object(ae.default)(M,(function(e){var a=e.findIndex((function(e){return e.timestamp===t}));e[a].isCanceled=!0})))}})):o.a.createElement("div",{className:l.a.empty},Object(n.t)("\u62d6\u62fd\u6587\u4ef6\u5230\u6b64\u9875\u9762\u53ef\u4e0a\u4f20"))),o.a.createElement("div",{className:l.a.footer},o.a.createElement("div",{className:p()(l.a.button,s.a.newButton,s.a.primary,s.a.h32),onClick:function(){if(-1!==D){var e=f.trim();e?e.length>128?Object(V.danger)(Object(n.t)("\u4e3b\u9898\u6700\u591a\u652f\u6301128\u4f4d")):M.length&&M.findIndex((function(e){return e.fileId<0}))>-1?Object(V.warning)(Object(n.t)("\u6709\u9644\u4ef6\u6b63\u5728\u4e0a\u4f20\uff0c\u8bf7\u7a0d\u540e\u63d0\u4ea4")):Object(te.createIssueReview)({typeId:D,subject:f,reviewers:I.map((function(e){var t=e.id,a=e.userType,n=e.email,r=e.name,o=e.recipientSalutation;return"INNER"===a?{id:t,userType:a}:{userType:a,email:n,name:r,recipientSalutation:o}})),cc:w.map((function(e){var t=e.id,a=e.userType,n=e.email,r=e.name,o=e.recipientSalutation;return"INNER"===a?{id:t,userType:a}:{userType:a,email:n,name:r,recipientSalutation:o}})),fromIssueId:a,attachments:M.map((function(e){return{storageKey:e.id,fileName:e.name,fileSize:e.size}}))}).then((function(e){var t=e.data;Object(V.success)(Object(n.t)("\u521b\u5efa\u6210\u529f")),c(t),i()}),(function(e){var t=e.code;24103!==t&&24102!==t||(W(),k(-1))})):Object(V.danger)(Object(n.t)("\u4e3b\u9898\u4e0d\u80fd\u4e3a\u7a7a"))}else Object(V.danger)(Object(n.t)("\u8bf7\u9009\u62e9\u5ba1\u6279\u7c7b\u578b"))}},Object(n.t)("\u53d1\u8d77\u5ba1\u6279")),o.a.createElement("div",{className:p()(l.a.button,s.a.newButton,s.a.default,s.a.h32),onClick:i},Object(n.t)("\u53d6\u6d88"))))))}},cIiR:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=n(a("kBmI")),v=a("1qdz");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.itemType;return f.default.createElement("div",{className:v.listItem,key:t.id},f.default.createElement("div",{className:v.dot}),f.default.createElement("div",{className:v.content},f.default.createElement(m.default,{className:"mr-10 ".concat(v.icon)}),f.default.createElement("span",{className:v.user},t.creator.name),t.issueLog&&1===t.issueLog.old?"\u3010\u6e90\u3011":"",f.default.createElement("span",null,(0,u.t)("\u91cd\u65b0\u6307\u6d3e\u4e86"),a,(0,u.t)("\u7ed9")),f.default.createElement("span",{className:"ml-10 ".concat(v.moreDot)},t.issueLog.content.name),f.default.createElement("span",{className:v.time},(0,p.timeFormat)(t.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=E,E.propTypes={item:d.default.object,itemType:d.default.string}},cUgn:function(e,t,a){"use strict";a.r(t);var n=a("cDcd"),r=a.n(n),o=a("l69I"),i=a.n(o),l=a("K2gz"),c=a.n(l),s=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),u=function(e){function t(t){var a=e.call(this,t)||this;return a.handleChange=function(){var e=a.props,t=e.checked,n=e.onChange;if(!e.disabled){var r=a.state.localChecked,o=void 0===t?r:t;a.setState({localChecked:!o}),n&&n(!o)}},a.state={localChecked:!1},a}return s(t,e),t.prototype.render=function(){var e=this.props,t=e.checked,a=e.className,n=e.disabled,o=this.state.localChecked,l=void 0===t?o:t;return r.a.createElement("div",{className:c()(i.a.checkbox,l&&i.a.checkboxActive,n&&i.a.checkboxDisabled,a),onClick:this.handleChange})},t}(n.PureComponent);t.default=u},cW10:function(e,t,a){"use strict";var n=a("cDcd"),r=a.n(n),o=a("S02u"),i=a.n(o),l=a("K2gz"),c=a.n(l);t.a=function(e){var t=e.value,a=e.onChange,n=e.placeholder,o=e.className,l=e.minHeight,s=void 0===l?36:l,u=e.autoFocus;return r.a.createElement("div",{className:i.a.wrapper},r.a.createElement("div",{className:i.a.div,style:{minHeight:s}},t.replace(/\n$/,"\n ")),r.a.createElement("textarea",{autoFocus:u,className:c()(i.a.textarea,o),placeholder:n,onChange:a,value:t}))}},cWGu:function(e,t,a){e.exports=a.p+"82aff8fa8ec65d5fd0d4c1c329f53866.svg"},dKc3:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjUgKDY3NDY5KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5maWxlLXR5cGUvaWxsdXN0cmF0b3I8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0i57y66Zm3L+ivpuaDhSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IumZhOS7tiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM5Ni4wMDAwMDAsIC02NjAuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJmaWxlLXR5cGUvaWxsdXN0cmF0b3IiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM5Ni4wMDAwMDAsIDY2MC4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0yLDMuNDYzODk1ODRlLTEzIEwxOCwzLjQ2Mzg5NTg0ZS0xMyBDMTkuMTA0NTY5NSwzLjQ2MTg2Njc4ZS0xMyAyMCwwLjg5NTQzMDUgMjAsMiBMMjAsMTggQzIwLDE5LjEwNDU2OTUgMTkuMTA0NTY5NSwyMCAxOCwyMCBMMiwyMCBDMC44OTU0MzA1LDIwIDEuMzUyNzA3NWUtMTYsMTkuMTA0NTY5NSAwLDE4IEwwLDIgQy0xLjM1MjcwNzVlLTE2LDAuODk1NDMwNSAwLjg5NTQzMDUsMy40NTcwNDMxMWUtMTMgMiwzLjQ1NTAxNDA1ZS0xMyBaIiBpZD0iUmVjdGFuZ2xlLTM3IiBmaWxsPSIjRkM5QTM4Ij48L3BhdGg+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOS42NzE4NzUsMTEuNjI1IEw3Ljc5Mjk2ODc1LDExLjYyNSBMNy40NjQ4NDM3NSwxMi42ODc1IEw2LDEyLjY4NzUgTDguMDg1OTM3NSw3IEw5LjM3NSw3IEwxMS40NzY1NjI1LDEyLjY4NzUgTDEwLjAwMzkwNjIsMTIuNjg3NSBMOS42NzE4NzUsMTEuNjI1IFogTTguMTIxMDkzNzUsMTAuNTY2NDA2MiBMOS4zNDM3NSwxMC41NjY0MDYyIEw4LjczMDQ2ODc1LDguNTkzNzUgTDguMTIxMDkzNzUsMTAuNTY2NDA2MiBaIE0xMy44NTE1NjI1LDEyLjY4NzUgTDEyLjQ4NDM3NSwxMi42ODc1IEwxMi40ODQzNzUsNyBMMTMuODUxNTYyNSw3IEwxMy44NTE1NjI1LDEyLjY4NzUgWiIgaWQ9IkFpIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},diFY:function(e,t,a){e.exports=a.p+"69dbc607f5c4684147ea8422341a56d5.svg"},dvtM:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAP_TYPE_TO_NAME=void 0;var n=a("mVeg"),r={ALL:(0,n.t)("\u4e8b\u9879"),EPIC:(0,n.t)("\u53f2\u8bd7"),REQUIREMENT:(0,n.t)("\u9700\u6c42"),MISSION:(0,n.t)("\u4efb\u52a1"),DEFECT:(0,n.t)("\u7f3a\u9677")};t.MAP_TYPE_TO_NAME=r},e7MF:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("o0o1")),i=n(a("yXPU")),l=n(a("lwsE")),c=n(a("W8MJ")),s=n(a("7W2i")),u=n(a("a1gu")),d=n(a("Nsbk")),f=a("mVeg"),p=n(a("17x9")),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),v=a("FaIw"),h=a("dtw8"),g=n(a("wK3Y")),E=a("w3Wo"),y=a("1qdz");function b(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(b=function(e){return e?a:t})(e)}function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var S={ADD:(0,f.t)("\u5173\u8054\u4e86\u7f3a\u9677"),ADD_AND_RELATE:(0,f.t)("\u521b\u5efa\u5e76\u5173\u8054\u4e86\u7f3a\u9677"),REMOVE:(0,f.t)("\u53d6\u6d88\u5173\u8054\u4e86\u7f3a\u9677")},T=function(e){(0,s.default)(a,e);var t=I(a);function a(){var e;(0,l.default)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(){var t=(0,i.default)(o.default.mark((function t(a,n){var r,i,l,c,s,u;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,i=r.projectId,l=r.item,t.prev=1,a.preventDefault(),t.next=5,(0,E.fetchIssueDetailByCode)(i,null===l||void 0===l||null===(c=l.issueLog)||void 0===c||null===(s=c.content)||void 0===s?void 0:s.code);case 5:u=t.sent,u.data.code&&window.open(n),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(1);case 12:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,a){return t.apply(this,arguments)}}(),e}return(0,c.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.item,n=t.projectPath;return m.default.createElement("div",{className:y.listItem,key:a.id},m.default.createElement("div",{className:y.dot}),m.default.createElement("div",{className:y.content},m.default.createElement(g.default,{className:"mr-10 ".concat(y.moreDot)}),a.issueLog&&1===a.issueLog.old?"\u3010\u6e90\u3011":"",m.default.createElement("span",{className:y.user},a.creator.name),m.default.createElement("span",null,"CREATE_AND_RELATE"===a.issueLog.content.from?S.ADD_AND_RELATE:S[a.issueLog.action]),m.default.createElement(h.Link,{className:"ml-10 ".concat(y.moreDot),target:"_blank",onClick:function(t){e.handleClick(t,"".concat(n,"/bug-tracking/issues/").concat(a.issueLog.content.code,"/detail"))}},"#",a.issueLog.content.code,"-",a.issueLog.content.name),m.default.createElement("span",{className:y.time},(0,v.timeFormat)(a.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(m.Component);t.default=T,T.propTypes={item:p.default.object,projectPath:p.default.string,projectId:p.default.number}},eC7o:function(e,t,a){e.exports={container:"container-27-DXVF4hF",disabled:"disabled-38bLYrEjlV",progress:"progress-3OI4Oj1lG6","no-permission-progress":"no-permission-progress-3nsa-Eofm3",noPermissionProgress:"no-permission-progress-3nsa-Eofm3",log:"log-2ydlWetmKp"}},ezwj:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d"),a("SMB2");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=E(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=n(a("gp0q")),v=n(a("2Mrz")),h=n(a("K2gz")),g=n(a("1qdz"));function E(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(E=function(e){return e?a:t})(e)}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var b={SCHEDULE:(0,u.t)("\u9884\u5b9a\u4f1a\u8bae"),QUICK:(0,u.t)("\u5feb\u901f\u4f1a\u8bae")},I=function(e){(0,l.default)(a,e);var t=y(a);function a(e){var n;return(0,o.default)(this,a),(n=t.call(this,e)).state={},n}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item;return f.default.createElement("div",{className:(0,h.default)(g.default.listItem,g.default.commentItem)},f.default.createElement("div",{className:g.default.dot}),f.default.createElement("div",{className:g.default.commentContainer},f.default.createElement("div",{className:g.default.customAvatarWrapper},f.default.createElement("div",{className:g.default.avatarSize},f.default.createElement(m.default,{src:e.creator.avatar,className:g.default.avatar,size:"small"})),f.default.createElement("span",{className:g.default.tmIcon},f.default.createElement("span",{className:g.default.tmIconImage}))),f.default.createElement("div",{className:(0,h.default)(g.default.commentBox)},this.renderComment())))}},{key:"renderComment",value:function(){var e=this.props.item,t=e.issueMeeting.content,a=t.creator.name,n=t.subject,r=t.type;return f.default.createElement("div",{className:g.default.commentContent},f.default.createElement("div",{className:g.default.meetingContent},f.default.createElement("div",{className:g.default.meetingTitle},f.default.createElement("span",{className:g.default.bold},a)," ",(0,u.t)("\u7684{{type}}\u5df2\u7ecf\u7ed3\u675f",{type:b[r]})),f.default.createElement("div",{className:g.default.body},f.default.createElement("div",{className:g.default.row},f.default.createElement("span",{className:g.default.label},(0,u.t)("\u4f1a\u8bae\u4e3b\u9898")),f.default.createElement("span",{className:g.default.text},n)),f.default.createElement("div",{className:g.default.row},f.default.createElement("span",{className:g.default.label},(0,u.t)("\u4f1a\u8bae\u65f6\u95f4")),f.default.createElement("span",{className:g.default.text},(0,p.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))),f.default.createElement("div",{className:g.default.commentStat},f.default.createElement("span",{className:g.default.commentUser},e.creator.name),f.default.createElement("div",{className:g.default.time},f.default.createElement(v.default,null),(0,p.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);I.propTypes={item:d.default.object,user:d.default.object};var S=I;t.default=S},f3hV:function(e,t,a){e.exports={wrapper:"wrapper-3e3cn2EJls",list:"list-10Xf4OLqre",create:"create-2E9uK23iPf","create-icon":"create-icon-24aFDH3Vtf",createIcon:"create-icon-24aFDH3Vtf","create-text":"create-text-TINR_XBgl9",createText:"create-text-TINR_XBgl9"}},f4ee:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=n(a("2Mrz")),v=a("1qdz");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item;return f.default.createElement("div",{className:v.listItem,key:e.id},f.default.createElement("div",{className:v.dot}),f.default.createElement("div",{className:v.content},f.default.createElement(m.default,{className:"mr-10 ".concat(v.icon)}),f.default.createElement("span",{className:v.user},e.creator.name),e.issueLog&&1===e.issueLog.old?"\u3010\u6e90\u3011":"",f.default.createElement("span",{className:v.msg,title:"".concat(e.issueLog.targetName,"\u4e3a ").concat(e.issueLog.content.val)},e.issueLog.content.val?(0,u.t)("\u66f4\u65b0\u4e86{{name}}\u4e3a {{value}}",{name:e.issueLog.targetName,value:e.issueLog.content.val}):(0,u.t)("\u66f4\u65b0\u4e86{{name}}\u4e3a \u201c\u672a\u9884\u4f30\u201d ",{name:e.issueLog.targetName})),f.default.createElement("span",{className:v.time},(0,p.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=E,E.propTypes={item:d.default.object}},fFua:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("o0o1")),i=n(a("yXPU")),l=n(a("lwsE")),c=n(a("W8MJ")),s=n(a("7W2i")),u=n(a("a1gu")),d=n(a("Nsbk")),f=a("mVeg"),p=n(a("17x9")),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),v=a("FaIw"),h=n(a("zIEN")),g=a("dtw8"),E=a("w3Wo"),y=a("1qdz");function b(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(b=function(e){return e?a:t})(e)}function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var S=function(e){(0,s.default)(a,e);var t=I(a);function a(){var e;(0,l.default)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(){var t=(0,i.default)(o.default.mark((function t(a,n,r){var i,l,c,s;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.props.item,t.prev=1,a.preventDefault(),t.next=5,(0,E.fetchIssueDetailByCode)(n,null===i||void 0===i||null===(l=i.issueLog)||void 0===l||null===(c=l.content)||void 0===c?void 0:c.sourceIssueCode);case 5:s=t.sent,s.data.code&&window.open(r),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(1);case 12:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,a,n){return t.apply(this,arguments)}}(),e}return(0,c.default)(a,[{key:"render",value:function(){var e=this,t=this.props.item,a={REQUIREMENT:"requirements",MISSION:"assignments",DEFECT:"bug-tracking"},n=t.issueLog.content;return m.default.createElement("div",{className:y.listItem,key:t.id},m.default.createElement("div",{className:y.dot}),m.default.createElement("div",{className:y.content},m.default.createElement(h.default,{className:"mr-10 ".concat(y.icon)}),m.default.createElement("span",{className:y.user},t.creator.name),m.default.createElement("span",null,(0,f.t)("\u590d\u5236\u4e8e")),m.default.createElement(g.Link,{className:"ml-10",target:"_blank",onClick:function(t){e.handleClick(t,n.sourceProjectId,"/p/".concat(n.sourceProjectName,"/").concat(a[n.issueType],"/issues/").concat(n.sourceIssueCode,"/detail"))}},(0,f.t)("\u5de5\u4f5c\u9879")," #",n.sourceIssueCode,"-",t.issueLog.content.sourceIssueName),m.default.createElement("span",{className:y.time},(0,v.timeFormat)(t.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(m.Component);t.default=S,S.propTypes={item:p.default.object,projectId:p.default.number}},fKTF:function(e,t,a){e.exports={"first-container":"first-container-3Jyk4ueeIs",firstContainer:"first-container-3Jyk4ueeIs","no-border":"no-border-19azMMi_Xf",noBorder:"no-border-19azMMi_Xf",item:"item-1e0N71-S12","item-select":"item-select-2OcJmfcuvr",itemSelect:"item-select-2OcJmfcuvr",title:"title-2_bPUdYFav",icon:"icon-1j1Nhc1kGG",code:"code-1gCEYtuvH_",sprint:"sprint-3dKvrV_5OK",requirements:"requirements-3AoR7TIb3j",checked:"checked-3fz0QCHwSQ",select:"select-I1PhKgM3AE","select-arrow-wrapper":"select-arrow-wrapper-2wwuIfltn0",selectArrowWrapper:"select-arrow-wrapper-2wwuIfltn0","menu-top":"menu-top-1G0DGikwkH",menuTop:"menu-top-1G0DGikwkH","dropdown-inner-wrap":"dropdown-inner-wrap-3rSP8q8pK0",dropdownInnerWrap:"dropdown-inner-wrap-3rSP8q8pK0","cart-down":"cart-down-26VYF4pE6B",cartDown:"cart-down-26VYF4pE6B","select-trigger":"select-trigger-1tiYK6D4Z1",selectTrigger:"select-trigger-1tiYK6D4Z1","item-text":"item-text-3Dn0Txjy3R",itemText:"item-text-3Dn0Txjy3R","item-text-ellipsis":"item-text-ellipsis-2ol7h4eJ5x",itemTextEllipsis:"item-text-ellipsis-2ol7h4eJ5x","is-expanded":"is-expanded-2jv3jh3ubl",isExpanded:"is-expanded-2jv3jh3ubl","inline-dropdown":"inline-dropdown-1nNYYY08Ae",inlineDropdown:"inline-dropdown-1nNYYY08Ae","iteration-trigger-wrapper":"iteration-trigger-wrapper-sRKE3AnQEO",iterationTriggerWrapper:"iteration-trigger-wrapper-sRKE3AnQEO","add-priority1":"add-priority1-yn8p8Egn5b",addPriority1:"add-priority1-yn8p8Egn5b","add-priority2":"add-priority2-1cp_EgiCDg",addPriority2:"add-priority2-1cp_EgiCDg","pre-icon":"pre-icon-HA3jtJ-_r4",preIcon:"pre-icon-HA3jtJ-_r4","has-no-value":"has-no-value-1fOTPDAjHg",hasNoValue:"has-no-value-1fOTPDAjHg","has-search-str":"has-search-str-nBqMoJWQhv",hasSearchStr:"has-search-str-nBqMoJWQhv","outer-link":"outer-link-1GElJtJpO8",outerLink:"outer-link-1GElJtJpO8","iteration-content":"iteration-content-3n5Vg9igNt",iterationContent:"iteration-content-3n5Vg9igNt","arrow-wrapper":"arrow-wrapper-7pjHgmIfoz",arrowWrapper:"arrow-wrapper-7pjHgmIfoz","iteration-no-value":"iteration-no-value-1rn_2S5ubA",iterationNoValue:"iteration-no-value-1rn_2S5ubA",link:"link-TUj8QlDEt0",disabled:"disabled-FdAoJ32hki","custom-progress":"custom-progress-2dwtboTVZ9",customProgress:"custom-progress-2dwtboTVZ9","no-iteration":"no-iteration-3PSl1kWKKf",noIteration:"no-iteration-3PSl1kWKKf",placeholder:"placeholder-3FhtBxbmBX"}},gEak:function(e,t,a){e.exports={"setting-viewer":"setting-viewer-1kmeNad2qh",settingViewer:"setting-viewer-1kmeNad2qh",header:"header-2lUBBKh-up","container-header":"container-header-1GbdHH3avb",containerHeader:"container-header-1GbdHH3avb","adjust-container":"adjust-container-1zZsHqyoZm",adjustContainer:"adjust-container-1zZsHqyoZm","working-hour-container":"working-hour-container-OHr30QvobC",workingHourContainer:"working-hour-container-OHr30QvobC","working-hour-box":"working-hour-box-3XdHXG7cRJ",workingHourBox:"working-hour-box-3XdHXG7cRJ","mutiple-select":"mutiple-select-kMwsYy3b9Y",mutipleSelect:"mutiple-select-kMwsYy3b9Y","input-after":"input-after-3J40OYDvGp",inputAfter:"input-after-3J40OYDvGp","working-hour-header":"working-hour-header-2uJxOYQKez",workingHourHeader:"working-hour-header-2uJxOYQKez","working-hour-program-name":"working-hour-program-name-ir-Ffft2YO",workingHourProgramName:"working-hour-program-name-ir-Ffft2YO",point:"point-2o7EllJu2O",input:"input-38YDyBocIe",picker:"picker-3Q_oqbXHu4","text-area":"text-area-2v0alh8BIH",textArea:"text-area-2v0alh8BIH",time:"time-1oxzWXJ2ze","btn-area":"btn-area-N74WNJzeGC",btnArea:"btn-area-N74WNJzeGC","dimension-radio":"dimension-radio-3yQzOlAgem",dimensionRadio:"dimension-radio-3yQzOlAgem","dimension-Box":"dimension-Box-1irlfFMYBU",dimensionBox:"dimension-Box-1irlfFMYBU","dimension-jump":"dimension-jump-2Tc6aH3AIc",dimensionJump:"dimension-jump-2Tc6aH3AIc"}},gP5I:function(e,t,a){"use strict";a.r(t);var n=a("mVeg"),r=a("cDcd"),o=a.n(r),i=a("f0Wu"),l=a.n(i),c=a("sftu"),s=a.n(c),u=a("KY5o"),d=a("zmh9"),f=a.n(d),p=a("df5+"),m=a.n(p),v=a("yZ+p"),h=a.n(v),g=a("xgZS"),E=a("BEfl"),y=a.n(E),b=a("sWxF"),I=function(){return(I=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},S=function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function i(e){try{c(n.next(e))}catch(t){o(t)}}function l(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}c((n=n.apply(e,t||[])).next())}))},T=function(e,t){var a,n,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(a=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){i.label=l[1];break}if(6===l[0]&&i.label<r[1]){i.label=r[1],r=l;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(l);break}r[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(c){l=[6,c],n=0}finally{a=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},w=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},C=h.a.TextArea;function O(e){var t=this,a=e.header,i=e.show,c=e.body,d=e.onSetting,p=e.onHide,v=w(Object(r.useState)(!1),2),E=v[0],O=v[1],N=w(Object(r.useState)(!1),2),P=N[0],j=N[1],D=w(Object(r.useState)(!1),2),k=D[0],R=D[1],M=function(){var e=c.remainingHours,t=c.startDate,a=c.workingDesc,n=c.recordHours,r=c.projectId,o=c.code;return{spendHour:0,remainingHour:e,startAt:t?l()(t+n).valueOf():l()().valueOf(),workingDesc:a,projectId:r,code:o}},A=w(Object(r.useState)(M()),2),L=A[0],x=A[1],_=function(e){return Math.round(100*e)/100};Object(r.useEffect)((function(){if(0===L.spendHour||L.spendHour||P){var e=l()().valueOf();E&&(e=L.startAt),E||0===Number(L.spendHour)||(e=l()(l()().valueOf()-36e5*Number(L.spendHour)).valueOf()),e=l()(l()().valueOf()-36e5*Number(L.spendHour)).valueOf();var t=M();if(P){var a=0,n=L.spendHour;if(n||0===n||""===n)if(k||!c.remainingHours&&0!==c.remainingHours)if(k&&(0===L.remainingHour||L.remainingHour)){var r;if(""===n)a=c.remainingHours,R(!1);else a=(r=Number(L.remainingHour-n))>=0&&r?_(r):0}else a=c.remainingHours;else a=(r=Number(c.remainingHours-n))>=0&&r?_(r):0;t=I(I({},L),{remainingHour:a,spendHour:n})}x(I(I({},t),{startAt:e,spendHour:L.spendHour}))}}),[L.spendHour,P]);var F=function(e){return e.replace(/[^\d.]/g,"").replace(/\.{2,}/g,".").replace(".","$#$").replace(/\./g,"").replace("$#$",".").replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")};return Object(r.useEffect)((function(){S(t,void 0,void 0,(function(){var e,t,a;return T(this,(function(n){switch(n.label){case 0:return e=c.projectId,t=c.code,[4,Object(b.getManhourHistories)(e,t)];case 1:return(a=n.sent().data)&&a.length>0&&(x((function(){return I(I({},L),{spendHour:a[a.length-1].recordHours})})),j(!0)),[2]}}))}))}),[]),o.a.createElement(s.a,{show:i,className:y.a.settingViewer,onScroll:function(e){return e.stopPropagation()}},o.a.createElement("div",{className:y.a.header},a),o.a.createElement("div",{className:y.a.adjustContainer},o.a.createElement(u.a,{recordHours:_(Number(L.spendHour)+Number(c.recordedHours)),remainingHours:_(Number(L.remainingHour)),segmentMargin:8})),o.a.createElement("div",{className:y.a.workingHourContainer},o.a.createElement("div",{className:y.a.workingHourBox},o.a.createElement("div",{className:y.a.workingHourHeader},Object(n.t)("\u4f7f\u7528\u5de5\u65f6")),o.a.createElement(h.a,{className:y.a.input,placeholder:!L.spendHour&&0!==L.spendHour||P?Object(n.t)("\u8bf7\u8f93\u5165\u5de5\u65f6"):L.spendHour,value:(L.spendHour||0===L.spendHour)&&P?L.spendHour:"",onChange:function(e){var t=F(e.target.value);t.indexOf(".")<0&&""!==t&&(t=parseFloat(t)),Number(t)>999.99?Object(g.warning)(Object(n.t)("\u6700\u591a\u652f\u6301 999 \u5c0f\u65f6")):(j(""!==t),x((function(){return I(I({},L),{spendHour:""===t?0:t})})))}}),o.a.createElement("div",{className:y.a.inputAfter},Object(n.t)("\u5c0f\u65f6"))),o.a.createElement("div",{className:y.a.workingHourBox},o.a.createElement("div",{className:y.a.workingHourHeader},Object(n.t)("\u5269\u4f59\u5de5\u65f6")),o.a.createElement(h.a,{className:y.a.input,placeholder:!L.remainingHour&&0!==L.remainingHour||k?Object(n.t)("\u8bf7\u8f93\u5165\u5de5\u65f6"):L.remainingHour,value:(L.remainingHour||0===L.remainingHour)&&k?L.remainingHour:"",onChange:function(e){var t=F(e.target.value);t.indexOf(".")<0&&""!==t&&(t=parseFloat(t)),Number(t)>999.99?Object(g.warning)(Object(n.t)("\u6700\u591a\u652f\u6301 999 \u5c0f\u65f6")):(""!==t?R(!0):(R(!1),null!==c.remainingHours&&c.remainingHours>=0&&(t=_(c.remainingHours-L.spendHour))),x((function(){return I(I({},L),{remainingHour:t<0?0:t})})))}}),o.a.createElement("div",{className:y.a.inputAfter},Object(n.t)("\u5c0f\u65f6")))),P&&(L.spendHour||0===L.spendHour)&&o.a.createElement(o.a.Fragment,null,o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:y.a.workingHourHeader},Object(n.t)("\u5f00\u59cb\u65f6\u95f4"),o.a.createElement("span",{className:y.a.point},"*")),o.a.createElement(m.a,{className:y.a.picker,clearable:!1,isDateDisabled:function(){return l()().valueOf()<l()(L.startAt).valueOf()},onChange:function(e){O(!0),e.isValid()?x(I(I({},L),{startAt:e.valueOf()})):l()().valueOf()}},o.a.createElement("div",{className:y.a.time},l()(L.startAt).format("YYYY-MM-DD HH:mm")))),o.a.createElement("div",{className:y.a.textArea},o.a.createElement("div",{className:y.a.workingHourHeader},Object(n.t)("\u5de5\u4f5c\u63cf\u8ff0")),o.a.createElement(C,{autosize:{minRows:3,maxRows:4},maxLength:"200",placeholder:Object(n.t)("\u7b80\u8981\u6982\u62ec\u4e00\u4e0b\u505a\u4e86\u4ec0\u4e48"),onChange:function(e){return x(I(I({},L),{workingDesc:String(e.target.value)}))},value:L.workingDesc,resizeable:!1}))),o.a.createElement("div",{className:y.a.btnArea},o.a.createElement(f.a,{disabled:!(P&&(L.spendHour||0===L.spendHour)||k&&(L.remainingHour||0===L.remainingHour)),onClick:function(){d(I(I({},L),{spendHour:L.spendHour||0}))}},Object(n.t)("\u786e\u5b9a\u767b\u8bb0")),o.a.createElement(f.a,{type:"default",empty:!0,onClick:function(){return p()}},Object(n.t)("\u53d6\u6d88"))))}O.defaultProps={header:Object(n.t)("\u767b\u8bb0\u5de5\u65f6")},t.default=O},"gRP+":function(e,t,a){e.exports={status:"status-2rJxeE0eJB","status-created":"status-created-2kbY0NZWV9",statusCreated:"status-created-2kbY0NZWV9","status-approved":"status-approved-3EG7P0Q3i-",statusApproved:"status-approved-3EG7P0Q3i-","status-refused":"status-refused-3nhduAFs27",statusRefused:"status-refused-3nhduAFs27","status-comment":"status-comment-3k1drVPyML",statusComment:"status-comment-3k1drVPyML","status-wait":"status-wait-2BT6NYZDKE",statusWait:"status-wait-2BT6NYZDKE","status-wait-gray":"status-wait-gray-3zdxRhQ9ha",statusWaitGray:"status-wait-gray-3zdxRhQ9ha","status-undo":"status-undo-5YpvAYO-zC",statusUndo:"status-undo-5YpvAYO-zC"}},gUGe:function(e,t,a){e.exports={"trigger-wrapper":"trigger-wrapper-1GywsfVSfT",triggerWrapper:"trigger-wrapper-1GywsfVSfT",trigger:"trigger-1bJGgoRCCY","trigger-dropdown":"trigger-dropdown-3v8ZVa4KRc",triggerDropdown:"trigger-dropdown-3v8ZVa4KRc",divider:"divider-1tOZH5Xo3G",item:"item-2ozLp--vzN",icon:"icon-3D9smbUhnk","icon-modao":"icon-modao-253_ZFf0aB",iconModao:"icon-modao-253_ZFf0aB","icon-codesign":"icon-codesign-3ZqnIGLMI-",iconCodesign:"icon-codesign-3ZqnIGLMI-","icon-upload":"icon-upload-1f4IkbtMuy",iconUpload:"icon-upload-1f4IkbtMuy",tip:"tip-1m9xykBCZ6","upload-tip":"upload-tip-_EHzVPitMz",uploadTip:"upload-tip-_EHzVPitMz"}},"h+87":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("cDcd"),r=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},o=function(e){var t=r(Object(n.useState)(!1),2),a=t[0],o=t[1],i=Object(n.useRef)(!1),l=Object(n.useCallback)((function(){document.body.click(),o(!0),i.current=!0}),[]),c=Object(n.useCallback)((function(){o(!1),i.current=!1,e&&e.onCancel&&e.onCancel()}),[]),s=Object(n.useCallback)((function(){i.current?(o(!1),i.current=!1):(document.body.click(),o(!0),i.current=!0)}),[]);return Object(n.useEffect)((function(){return window.addEventListener("click",c),function(){window.removeEventListener("click",c)}}),[]),[{visible:a,open:l,cancel:c,toggle:s}]}},hz4c:function(e,t,a){"use strict";a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("J4zp"));a("f3/d");var i=a("mVeg"),l=n(a("17x9")),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=m(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),s=n(a("sftu")),u=n(a("+9PU")),d=n(a("zmh9")),f=a("FwdT"),p=a("xgZS");function m(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(m=function(e){return e?a:t})(e)}var v=function(e){return void 0===e?"".concat(u.default.icon):/^.*\.(?:csv)$/i.test(e.name)?u.default.iconCsv:/^.*\.(?:xls|xlsx)$/i.test(e.name)?u.default.iconXlsx:u.default.icon},h=function(e){var t=(0,c.useState)(!1),a=(0,o.default)(t,2),n=a[0],r=a[1],l=(0,c.useState)(void 0),m=(0,o.default)(l,2),h=m[0],g=m[1],E=e.show,y=e.onHide,b=e.onSubmit,I=e.currentProject,S=e.issueTypeDetail||{};(0,c.useEffect)((function(){}));var T=function(){r(!1),g(void 0),y()},w=function(){b(h),r(!1),g(void 0)};return c.default.createElement("div",null,c.default.createElement(s.default,{className:u.default.container,show:E},c.default.createElement(s.default.Header,null,c.default.createElement("div",{className:u.default.header},(0,i.t)("\u4ece Excel \u5bfc\u5165"),S.name)),c.default.createElement(s.default.Body,null,c.default.createElement("div",{className:u.default.body},c.default.createElement("div",{className:u.default.dropZone},c.default.createElement(f.DropZone,{className:u.default.dropArea,onDrop:function(e){if(!function(e){return void 0!==e&&(!!/^.*\.(?:csv)$/i.test(e.name)||!!/^.*\.(?:xls|xlsx)$/i.test(e.name))}(e[0]))return r(!1),g(void 0),void(0,p.warning)((0,i.t)("\u8bf7\u4e0a\u4f20\u4e00\u4e2a Excel/CSV \u6587\u4ef6\uff0c\u6587\u4ef6\u683c\u5f0f\u7b26\u5408\u6a21\u677f\u683c\u5f0f"));e.length>0&&r(!0),g(e[0])}},c.default.createElement("div",{className:v(h)}),c.default.createElement("div",{className:u.default.bigText},void 0===h?(0,i.t)("\u62d6\u62fd\u6216\u70b9\u51fb\u6b64\u5904\u9009\u62e9\u6587\u4ef6"):h.name),c.default.createElement("div",{className:u.default.smallText},void 0===h?(0,i.t)("Excel \u6216 CSV \u6587\u4ef6"):"".concat(parseInt(h.size/1e3,10)," KB")))),c.default.createElement("p",{className:u.default.desc},(0,i.t)("\xb7 \u8bf7\u4e0a\u4f20\u4e00\u4e2a Excel/CSV \u6587\u4ef6\uff0c\u6587\u4ef6\u683c\u5f0f\u7b26\u5408\u6a21\u677f\u683c\u5f0f"),c.default.createElement("span",{className:u.default.line}),c.default.createElement("a",{href:"/external/collaboration/api/project/".concat(I.id,"/issues/import/demo-download/issue-type-id/").concat(S.id),download:!0,target:"_blank"},(0,i.t)("\u4e0b\u8f7d\u6a21\u677f"))),c.default.createElement("p",{className:u.default.desc},(0,i.t)("\xb7 \u786e\u4fdd\u8868\u683c\u5185\u53ea\u6709\u4e00\u4e2a\u5de5\u4f5c\u7c3f\uff0c\u5982\u679c\u6709\u591a\u4e2a\u5de5\u4f5c\u7c3f\u53ea\u6709\u7b2c\u4e00\u5f20\u4f1a\u88ab\u5904\u7406")),c.default.createElement("p",{className:u.default.desc},(0,i.t)("\xb7 \u5355\u6b21\u6700\u5927\u652f\u6301\u5bfc\u5165 5000 \u6761\u8bb0\u5f55")),c.default.createElement("p",{className:u.default.desc},(0,i.t)("\xb7 \u4e0a\u4f20 CSV \u6587\u4ef6\uff0c\u9700\u786e\u4fdd CSV \u4f7f\u7528\u7684\u662f\u9017\u53f7\u5206\u9694\u7b26")),c.default.createElement("p",{className:u.default.desc},(0,i.t)("\xb7 \u5c42\u7ea7\u5173\u7cfb\u901a\u8fc7\u7236\u4e8b\u9879\u6807\u9898\u5339\u914d\uff0c\u987b\u786e\u4fdd\u5173\u8054\u7236\u4e8b\u9879\u5728\u8868\u683c\u884c\u4e4b\u524d\u5df2\u521b\u5efa")),c.default.createElement("p",{className:u.default.desc},(0,i.t)("\xb7 \u591a\u9009\u9879\u503c\u4e4b\u95f4\u7528\u7ad6\u7ebf\u5206\u9694\uff0c\u4f8b\u5982A|B|C")))),c.default.createElement(s.default.Footer,null,c.default.createElement("div",null,c.default.createElement(d.default,{className:u.default.gap,disabled:!n,onClick:w,"data-container":!0,"data-title":"\u5bfc\u5165".concat(S.name,"-\u5bfc\u5165")},(0,i.t)("\u5bfc\u5165")),c.default.createElement(d.default,{empty:!0,onClick:T},(0,i.t)("\u5173\u95ed"))))))};h.propTypes={show:l.default.bool,onHide:l.default.func,onSubmit:l.default.func,currentProject:l.default.object,issueTypeDetail:l.default.any};var g=h;t.default=g},"i+Ig":function(e,t,a){e.exports={operates:"operates-Po1svQdSPO",operate:"operate-JcpuEZZ99w","operate-disabled":"operate-disabled-3q6CV5wT_m",operateDisabled:"operate-disabled-3q6CV5wT_m","operate-icon":"operate-icon-1_tlWHu3-0",operateIcon:"operate-icon-1_tlWHu3-0","operate-approved":"operate-approved-14W1t7sDN9",operateApproved:"operate-approved-14W1t7sDN9","operate-refused":"operate-refused-1Jwjt1ImLN",operateRefused:"operate-refused-1Jwjt1ImLN","operate-comment":"operate-comment-2Z3s2kH3KA",operateComment:"operate-comment-2Z3s2kH3KA","operate-more":"operate-more-2zd7DRp-n2",operateMore:"operate-more-2zd7DRp-n2","operate-resubmit":"operate-resubmit-11qZ98kZRZ",operateResubmit:"operate-resubmit-11qZ98kZRZ","operate-delete":"operate-delete-6pX7QdaX5-",operateDelete:"operate-delete-6pX7QdaX5-","operate-edit":"operate-edit-3-kLG1Wh9d",operateEdit:"operate-edit-3-kLG1Wh9d","operate-recall":"operate-recall-hnxRo-hVBt",operateRecall:"operate-recall-hnxRo-hVBt",panel:"panel-10Yg59fNo2",item:"item-2778AcxarJ","item-edit":"item-edit-2NwVodC9BE",itemEdit:"item-edit-2NwVodC9BE","item-icon":"item-icon-3GTqjMNGtW",itemIcon:"item-icon-3GTqjMNGtW","item-recall":"item-recall-2dQwVL85ar",itemRecall:"item-recall-2dQwVL85ar","item-delete":"item-delete-1z08fzIhAK",itemDelete:"item-delete-1z08fzIhAK","item-resubmit":"item-resubmit-gUB_lYLSth",itemResubmit:"item-resubmit-gUB_lYLSth","item-divider":"item-divider-30ZyzjEyRR",itemDivider:"item-divider-30ZyzjEyRR","item-danger":"item-danger-3eVugzlSAq",itemDanger:"item-danger-3eVugzlSAq"}},i6nV:function(e,t,a){e.exports={wrap:"wrap-1JfDP4xV6V","is-dropping":"is-dropping-14zFeBN0_e",isDropping:"is-dropping-14zFeBN0_e","not-upload-elem":"not-upload-elem-1bsb4mt4EY",notUploadElem:"not-upload-elem-1bsb4mt4EY"}},iKMW:function(e,t,a){e.exports=a.p+"2a54ed0da646dc312ea1192694e83b52.svg"},ibw4:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a("mVeg"),o=n(a("17x9")),i=n(a("cDcd")),l=n(a("sftu")),c=n(a("+9PU")),s=n(a("zmh9")),u=n(a("wVLe")),d=a("dvtM"),f=function(e){var t=e.show;return i.default.createElement("div",null,i.default.createElement(l.default,{className:c.default.container,show:t},i.default.createElement(l.default.Header,null,function(e){switch(e.status){case"success":return i.default.createElement("div",{className:c.default.header},i.default.createElement("span",{className:c.default.success}),i.default.createElement("span",{className:c.default.gapLeft},(0,r.t)("\u5bfc\u5165\u6210\u529f")));case"error":return i.default.createElement("div",{className:c.default.header},i.default.createElement("span",{className:c.default.warning}),i.default.createElement("span",{className:c.default.gapLeft},(0,r.t)("\u5bfc\u5165\u65f6\u68c0\u6d4b\u5230\u95ee\u9898")));default:return i.default.createElement("div",{className:c.default.header},i.default.createElement("span",{className:c.default.loading},i.default.createElement(u.default,null)),i.default.createElement("span",{className:c.default.gapLeft},(0,r.t)("\u6b63\u5728\u5bfc\u5165\uff0c\u8bf7\u7a0d\u540e...")))}}(e)),i.default.createElement(l.default.Body,null,function(e){var t=e.status,a=e.type,n=e.count,o=e.file,l=e.errorMsg;switch(t){case"success":return i.default.createElement("div",{className:c.default.body},(0,r.t)("\u6210\u529f\u5bfc\u5165 {{count}} \u6761",{count:n}),d.MAP_TYPE_TO_NAME[a]);case"error":var s={__html:l};return null===n?i.default.createElement("div",{className:c.default.body,dangerouslySetInnerHTML:s}):i.default.createElement("div",{className:c.default.body},n," ",(0,r.t)("\u6761"),d.MAP_TYPE_TO_NAME[a],(0,r.t)("\u65e0\u6cd5\u5bfc\u5165\uff0c\u60a8\u53ef\u4ee5"),i.default.createElement("a",{href:o.url,download:!0,target:"_blank"}," ",(0,r.t)("\u4e0b\u8f7d\u9519\u8bef\u8bb0\u5f55")," "),(0,r.t)("\u5bf9\u7167\u4fee\u6539\u540e\u91cd\u65b0\u5bfc\u5165"));default:return i.default.createElement("div",{className:c.default.body},(0,r.t)("\u5bfc\u5165\u65f6\u95f4\u53ef\u80fd\u9700\u8981\u51e0\u79d2\u5230\u51e0\u5206\u949f\uff0c\u4f60\u53ef\u4ee5\u5173\u95ed\u5f53\u524d\u7a97\u53e3\uff0c\u5bfc\u5165\u7ed3\u679c\u5c06\u5728\u7ad9\u5185\u901a\u77e5\u4e2d\u663e\u793a"))}}(e)),i.default.createElement(l.default.Footer,null,function(e){var t=e.status,a=e.onHide,n=e.onRetry;switch(t){case"success":return i.default.createElement("div",null,i.default.createElement(s.default,{empty:!0,onClick:a},(0,r.t)("\u5173\u95ed")));case"error":return i.default.createElement("div",null,i.default.createElement(s.default,{className:c.default.gap,onClick:n},(0,r.t)("\u91cd\u65b0\u4e0a\u4f20")),i.default.createElement(s.default,{empty:!0,onClick:a},(0,r.t)("\u5173\u95ed")));default:return i.default.createElement("div",null,i.default.createElement(s.default,{empty:!0,onClick:a},(0,r.t)("\u5173\u95ed")))}}(e))))};f.propTypes={show:o.default.bool,file:o.default.object,type:o.default.string,count:o.default.number,status:o.default.string,downloadUrl:o.default.string,errorMsg:o.default.string,onHide:o.default.func,onRetry:o.default.func};var p=f;t.default=p},"jK/Q":function(e,t,a){e.exports={item:"item-1reYrojMEK","item-select":"item-select-1ZsgdqnTsm",itemSelect:"item-select-1ZsgdqnTsm",title:"title-1yuZogVEKH",icon:"icon-3PEHAEWhtP",code:"code-i_K-bxr_Hb",sprint:"sprint-b0vso839TZ",requirements:"requirements-2rvlw_C1lf",checked:"checked-17z_3s8DoY",select:"select-ZEyyawSaiR","select-arrow-wrapper":"select-arrow-wrapper-3Sfz5U4aoW",selectArrowWrapper:"select-arrow-wrapper-3Sfz5U4aoW","menu-top":"menu-top-MXuY2wr4y5",menuTop:"menu-top-MXuY2wr4y5","dropdown-inner-wrap":"dropdown-inner-wrap-1pZmfXuibY",dropdownInnerWrap:"dropdown-inner-wrap-1pZmfXuibY","cart-down":"cart-down-2ecjNCi8BL",cartDown:"cart-down-2ecjNCi8BL","select-trigger":"select-trigger-2gqP4aONZM",selectTrigger:"select-trigger-2gqP4aONZM","item-text":"item-text-3k4TSmfi7I",itemText:"item-text-3k4TSmfi7I","item-text-ellipsis":"item-text-ellipsis-3nUnT_iqqM",itemTextEllipsis:"item-text-ellipsis-3nUnT_iqqM","is-expanded":"is-expanded--Zl012VnnH",isExpanded:"is-expanded--Zl012VnnH","inline-dropdown":"inline-dropdown-t-Zqkh_9xT",inlineDropdown:"inline-dropdown-t-Zqkh_9xT","iteration-trigger-wrapper":"iteration-trigger-wrapper-3azF67vlhI",iterationTriggerWrapper:"iteration-trigger-wrapper-3azF67vlhI","add-priority1":"add-priority1-2gm9DVhfHK",addPriority1:"add-priority1-2gm9DVhfHK","add-priority2":"add-priority2-3cMJYLxN4W",addPriority2:"add-priority2-3cMJYLxN4W","pre-icon":"pre-icon-1NpB9NPdQ8",preIcon:"pre-icon-1NpB9NPdQ8","has-no-value":"has-no-value-2lS_nSZmOV",hasNoValue:"has-no-value-2lS_nSZmOV","has-search-str":"has-search-str-3PptvrSIB8",hasSearchStr:"has-search-str-3PptvrSIB8","outer-link":"outer-link-M6CIgekrFT",outerLink:"outer-link-M6CIgekrFT","iteration-content":"iteration-content-1e45t9vwBi",iterationContent:"iteration-content-1e45t9vwBi","arrow-wrapper":"arrow-wrapper-3gOkz5Go9h",arrowWrapper:"arrow-wrapper-3gOkz5Go9h","iteration-no-value":"iteration-no-value-YlWPo7HT2o",iterationNoValue:"iteration-no-value-YlWPo7HT2o",link:"link-3l1DZuvSYl",disabled:"disabled-v8x_54KeZZ","custom-progress":"custom-progress-2A65a8t2VT",customProgress:"custom-progress-2A65a8t2VT","no-iteration":"no-iteration-3C9eWjZ_uv",noIteration:"no-iteration-3C9eWjZ_uv",placeholder:"placeholder-1gVC3yTBub","epic-trigger":"epic-trigger-2pZXewW4QQ",epicTrigger:"epic-trigger-2pZXewW4QQ","epic-trigger-disabled":"epic-trigger-disabled-3uQuXmN3eR",epicTriggerDisabled:"epic-trigger-disabled-3uQuXmN3eR","epic-trigger-active":"epic-trigger-active-22Uf4J-uaE",epicTriggerActive:"epic-trigger-active-22Uf4J-uaE","epic-trigger-text":"epic-trigger-text-2-2DXzXmMu",epicTriggerText:"epic-trigger-text-2-2DXzXmMu",panel:"panel-jN99a7PgJs","epic-item":"epic-item-3eVRnRgt2l",epicItem:"epic-item-3eVRnRgt2l","epic-item-focused":"epic-item-focused-3P8P0Fs7iO",epicItemFocused:"epic-item-focused-3P8P0Fs7iO","epic-item-code":"epic-item-code-2tDhfkLUYR",epicItemCode:"epic-item-code-2tDhfkLUYR","epic-item-name":"epic-item-name-3UTPAP3Jhf",epicItemName:"epic-item-name-3UTPAP3Jhf","epic-item-checked":"epic-item-checked-3F03Xr_N_U",epicItemChecked:"epic-item-checked-3F03Xr_N_U"}},jbvx:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=n(a("Rvrz")),v=a("1qdz");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E={RELATE:(0,u.t)("\u5173\u8054\u4e86"),UN_RELATE:(0,u.t)("\u89e3\u9664\u5173\u8054\u4e86")},y=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e,t=this.props.item;return f.default.createElement("div",{className:v.listItem,key:t.id},f.default.createElement("div",{className:v.dot}),f.default.createElement("div",{className:v.content},f.default.createElement(m.default,{className:"mr-10 ".concat(v.moreDot)}),t.issueLog&&1===t.issueLog.old?"\u3010\u6e90\u3011":"",f.default.createElement("span",{className:v.user},t.creator.name),f.default.createElement("span",null,E[t.issueLog.action],t.issueLog.targetName),f.default.createElement("span",null,"\u3010",null===(e=t.issueLog.content)||void 0===e?void 0:e.requirementName,"\u3011"),f.default.createElement("span",{className:v.time},(0,p.timeFormat)(t.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=y,y.propTypes={item:d.default.object}},jdYl:function(e,t,a){e.exports={root:"root-3BHUuX0Qzm","custom-input":"custom-input-2L6ps94xfy",customInput:"custom-input-2L6ps94xfy","result-wrapper":"result-wrapper-3SCKrLVRDm",resultWrapper:"result-wrapper-3SCKrLVRDm","result-empty":"result-empty-2j6FdfVgB9",resultEmpty:"result-empty-2j6FdfVgB9",icon:"icon-1oKpg23iGa","cancel-btn":"cancel-btn-2IZi2m30Qh",cancelBtn:"cancel-btn-2IZi2m30Qh","result-items":"result-items-kBGcJwoYR2",resultItems:"result-items-kBGcJwoYR2",item:"item-jV04bUFjon","is-disabled":"is-disabled-2GY8csHf4O",isDisabled:"is-disabled-2GY8csHf4O",desc:"desc-F2qyJ333Ev","item-code":"item-code-OZ3aqW-sD2",itemCode:"item-code-OZ3aqW-sD2","item-detail":"item-detail-24jABVqwKc",itemDetail:"item-detail-24jABVqwKc","item-detail-title":"item-detail-title-3Su8CM_-TA",itemDetailTitle:"item-detail-title-3Su8CM_-TA","result-filter-bar":"result-filter-bar-10BTbzsj6D",resultFilterBar:"result-filter-bar-10BTbzsj6D",detail:"detail-1-ilkW9NFN","input-wrapper":"input-wrapper-3_J7ZH6xFF",inputWrapper:"input-wrapper-3_J7ZH6xFF",wrapper:"wrapper-3QckkO7Yn3",title:"title-3ihfKFaZr4","requirement-icon":"requirement-icon-2aO-S7Rrjq",requirementIcon:"requirement-icon-2aO-S7Rrjq","issue-icon":"issue-icon-3KP4MsaVke",issueIcon:"issue-icon-3KP4MsaVke","assignment-icon":"assignment-icon-2t3neQb-6i",assignmentIcon:"assignment-icon-2t3neQb-6i","custom-detail":"custom-detail-3uAsZpHTz0",customDetail:"custom-detail-3uAsZpHTz0","belong-iteration":"belong-iteration-AI4N93wHjG",belongIteration:"belong-iteration-AI4N93wHjG","belong-epic":"belong-epic-3zKnDiJPIf",belongEpic:"belong-epic-3zKnDiJPIf","custom-search-icon":"custom-search-icon-230IbEUDL1",customSearchIcon:"custom-search-icon-230IbEUDL1"}},jj1q:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=g(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=a("dtw8"),v=n(a("zIEN")),h=a("1qdz");function g(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(g=function(e){return e?a:t})(e)}function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var y={CREATE:(0,u.t)("\u66f4\u6539\u4e86\u7236\u4e8b\u9879"),CHANGE_PARENT:(0,u.t)("\u66f4\u6539\u4e86\u7236\u4e8b\u9879"),REMOVE:(0,u.t)("\u53d6\u6d88\u5173\u8054\u7236\u4e8b\u9879")},b={REQUIREMENT:"requirements",MISSION:"assignments",DEFECT:"bug-tracking"},I=function(e){(0,l.default)(a,e);var t=E(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.projectPath,n="";return n="WORK_ITEM"===t.issueLog.content.parentType?"".concat(a,"/program/plan/work-items/").concat(t.issueLog.content.parentCode,"/detail"):"".concat(a,"/").concat(b[t.issueLog.content.parentType],"/issues/").concat(t.issueLog.content.parentCode,"/detail"),f.default.createElement("div",{className:h.listItem,key:t.id},f.default.createElement("div",{className:h.dot}),f.default.createElement("div",{className:h.content},f.default.createElement(v.default,{className:"mr-10 ".concat(h.icon)}),f.default.createElement("span",{className:h.user},t.creator.name),t.issueLog&&1===t.issueLog.old?"\u3010\u6e90\u3011":"",f.default.createElement("span",null,y[t.issueLog.action]),f.default.createElement(m.Link,{className:"ml-10 ".concat(h.moreDot),to:n,target:"_blank"},"#",t.issueLog.content.parentCode,"-",t.issueLog.content.parentName),f.default.createElement("span",{className:h.time},(0,p.timeFormat)(t.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=I,I.propTypes={item:d.default.object,projectPath:d.default.string}},jlRX:function(e,t,a){"use strict";a.r(t);var n=a("mVeg"),r=a("cDcd"),o=a.n(r),i=a("+sO4"),l=a.n(i),c=a("246l"),s=a.n(c),u=a("K2gz"),d=a.n(u),f=a("lIIp"),p=a("O0Gn"),m=a("E+oP"),v=a.n(m),h=a("Zsd2"),g=a.n(h),E=a("xgZS"),y=a("aHEs"),b=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),I=function(e,t,a,n){var r,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(i=(o<3?r(i):o>3?r(t,a,i):r(t,a))||i);return o>3&&i&&Object.defineProperty(t,a,i),i},S=function(e){function t(t){var a=e.call(this,t)||this;return a.onSaveRef=function(e){a.editor=e,e&&e.focusToEnd()},a.onAddExternalLink=function(e){var t=a.props.currentProject,n=t.owner_user_name,r=t.name;a.setState({isExtraPending:!0}),Object(p.addExternalLink)(n,r,e).then((function(e){a.setState({isExtraPending:!1}),a.state.onResourceCallback([e.data])}))},a.postComment=function(){var e=a.props,t=e.currentProject,r=e.issueCode,o=e.issueType,i=e.editCommentCallback,l=e.closeHandle,c=a.state,s=c.content,u=c.isPending,d=c.id;if(!u)if(v()(g()(s)))Object(E.danger)(Object(n.t)("\u8bc4\u8bba\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"));else{a.setState({isPending:!0});var f={REQUIREMENT:"requirements",SUB_TASK:"sub-tasks",ASSIGNMENT:"missions",EPIC:"epics",DEFECT:"defects",RISK:"risks",WORK_ITEM:"work-items"};"RISK"===o||"WORK_ITEM"===o?Object(y.editCommentV2)(t.name,f[o],r,d,s).then((function(){l(),i(d)})).finally((function(){a.setState({isPending:!1})})):Object(y.editComment)(t.id,f[o],r,d,s).then((function(){l(),i(d)})).finally((function(){a.setState({isPending:!1})}))}},a.state={editorState:t.defaultEditorState,showMore:!1,isExtraPending:!1,isPending:!1,content:"",id:t.commentId,onResourceCallback:function(){}},a.onSaveRef=a.onSaveRef.bind(a),a.postComment=a.postComment.bind(a),a.onAddExternalLink=a.onAddExternalLink.bind(a),a.onContentChange=a.onContentChange.bind(a),a.onCancel=a.onCancel.bind(a),a.handleKeydown=a.handleKeydown.bind(a),a}return b(t,e),t.prototype.render=function(){var e=this.state.isExtraPending,t=this.props,a=t.MediumMarkEditorWithExtraSuggestions,r=t.currentProject,i=t.userId,c=window.navigator.platform.toLowerCase(),u=/mac/.test(c);return o.a.createElement("div",{className:d()(l.a.wrapper)},o.a.createElement("div",{className:l.a.content},o.a.createElement(a,{autoSaveAlertDisabled:!0,placeholder:"".concat(Object(n.t)("\u5728\u6b64\u8f93\u5165\u8bc4\u8bba\u5185\u5bb9\uff08\u652f\u6301 Markdown\uff09")),onChange:this.onContentChange,editorState:this.state.editorState,projectId:r&&r.id||0,autoSize:!1,currentProject:r,onCommandEnter:this.postComment,ref:this.onSaveRef,mentionParams:{project_id:r&&r.id},hashSearchParams:{owner:r&&r.owner_user_name,project:r&&r.name,id:r&&r.id},onAddExternalLink:this.onAddExternalLink,userId:i})),o.a.createElement("div",{className:l.a.btnArea},o.a.createElement("div",{className:d()(s.a.newButton,s.a.primary,s.a.h32,l.a.btn,e&&s.a.disabled),onClick:this.postComment},Object(n.t)("\u4fdd\u5b58")),o.a.createElement("div",{className:d()(s.a.newButton,s.a.default,s.a.h32,l.a.btn),onClick:this.onCancel},Object(n.t)("\u53d6\u6d88")),o.a.createElement("div",{className:l.a.tips},o.a.createElement("div",{className:l.a.tag}),Object(n.t)("\u6309{{key}} +S \u53ef\u968f\u65f6\u4fdd\u5b58",{key:u?"\u2318":"Ctrl"}))))},t.prototype.componentDidMount=function(){var e=this;setTimeout((function(){e.editor&&e.editor.onFetch(e.props.commentDetail)})),window.addEventListener("keydown",this.handleKeydown)},t.prototype.componentWillUnmount=function(){window.removeEventListener("keydown",this.handleKeydown)},t.prototype.handleKeydown=function(e){(e.ctrlKey||e.metaKey)&&83===e.keyCode&&(e.preventDefault(),this.postComment())},t.prototype.onContentChange=function(e,t){var a=this.props.getPlainText;this.setState({content:a(e),editorState:e},t)},t.prototype.onCancel=function(){this.props.closeHandle()},t=I([Object(f.withAsyncMarkEditor)()],t)}(o.a.Component);t.default=S},jxN3:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("bWfx"),a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=n(a("JdeO")),v=a("1qdz");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e,t=this.props,a=t.item,n=t.itemType,r=null===(e=a.issueLog.content.defectKinds)||void 0===e?void 0:e.map((function(e){return e.name})).join();return f.default.createElement("div",{className:v.listItem,key:a.id},f.default.createElement("div",{className:v.dot}),f.default.createElement("div",{className:v.content},f.default.createElement(m.default,{className:"mr-10 ".concat(v.icon)}),f.default.createElement("span",{className:v.user},a.creator.name),a.issueLog&&1===a.issueLog.old?"\u3010\u6e90\u3011":"",f.default.createElement("span",null,(0,u.t)("\u66f4\u65b0\u4e86{{name}}\u7684\u7f3a\u9677\u7c7b\u578b\u4e3a",{name:n})),f.default.createElement("span",{className:"ml-10 ".concat(v.moreDot)},r),f.default.createElement("span",{className:v.time},(0,p.timeFormat)(a.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=E,E.propTypes={item:d.default.object,itemType:d.default.string}},jxzD:function(e,t,a){"use strict";a("I5cv"),a("mYba"),a("jm62"),a("EK0E");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("o0o1")),i=n(a("pVnL")),l=n(a("yXPU")),c=n(a("QILm")),s=n(a("RIqP")),u=n(a("lSNA")),d=n(a("lwsE")),f=n(a("W8MJ")),p=n(a("PJYZ")),m=n(a("7W2i")),v=n(a("a1gu")),h=n(a("Nsbk"));a("f3/d"),a("dRSK"),a("bWfx"),a("0l/t"),a("Btvt"),a("VRzm"),a("XfO3"),a("yt8O"),a("rGqo"),a("L9s1"),a("Z2Ku"),a("INYr"),a("CX2u"),a("pIFo"),a("hhXQ"),a("0mN4"),a("RW0V"),a("xfY5"),a("ioFf"),a("HEwt"),a("T39b"),a("OG14"),a("tUrg");var g,E,y,b,I=a("mVeg"),S=At(a("cDcd")),T=a("h74D"),w=n(a("17x9")),C=a("dtw8"),O=n(a("qLOp")),N=n(a("TsYS")),P=a("7FZc"),j=n(a("P5Jw")),D=n(a("qCZF")),k=n(a("WE/Q")),R=n(a("Yzhn")),M=a("nuIr"),A=n(a("QDR0")),L=n(a("AVuq")),x=n(a("wd/R")),_=a("FaIw"),F=a("AwMv"),W=a("w3Wo"),B=a("xgZS"),H=n(a("V/h/")),U=n(a("2KQ+")),Y=n(a("Y+p1")),q=n(a("n1Xv")),G=n(a("XiRy")),z=n(a("1+AE")),V=n(a("XLbL")),Z=n(a("8+Mu")),K=n(a("4qC0")),J=n(a("GoyQ")),Q=n(a("UB5X")),X=n(a("Z0cm")),$=n(a("BkRI")),ee=a("DKcV"),te=n(a("ai0/")),ae=n(a("K2gz")),ne=a("Z4vw"),re=a("FpRC"),oe=n(a("2CT0")),ie=n(a("wCj3")),le=n(a("L8Eh")),ce=n(a("Th6D")),se=n(a("Zsd2")),ue=a("DgMC"),de=n(a("OTim")),fe=a("885C"),pe=n(a("/kNv")),me=n(a("x2Em")),ve=n(a("/p1d")),he=n(a("Q95R")),ge=a("sWxF"),Ee=a("x+BT"),ye=n(a("TT2u")),be=a("5DNL"),Ie=a("3RH6"),Se=n(a("fRA5")),Te=n(a("Oo+0")),we=n(a("xMGB")),Ce=a("DTVk"),Oe=a("aHEs"),Ne=n(a("oIiO")),Pe=a("IecL"),je=n(a("1lUc")),De=n(a("mSbZ")),ke=n(a("htee")),Re=n(a("4Fdf")),Me=n(a("uk0h")),Ae=n(a("+Dhf")),Le=a("jzjO"),xe=n(a("begU")),_e=n(a("0Zwn")),Fe=n(a("W0/N")),We=n(a("HtPo")),Be=n(a("CF/V")),He=n(a("iOVS")),Ue=n(a("u5of")),Ye=n(a("8lvN")),qe=n(a("Qkhu")),Ge=n(a("qPyV")),ze=n(a("H8cV")),Ve=n(a("Zrey")),Ze=n(a("7hiy")),Ke=n(a("HwxY")),Je=n(a("AoGB")),Qe=n(a("KIkv")),Xe=n(a("KUqB")),$e=a("7bn+"),et=a("17N+"),tt=n(a("X5YD")),at=a("nuIr"),nt=a("LvkV"),rt=a("9+7+"),ot=a("lGCG"),it=n(a("WKBZ")),lt=n(a("cHah")),ct=n(a("DDpV")),st=n(a("QWzU")),ut=n(a("6yKH")),dt=a("cUHt"),ft=(n(a("IZvD")),n(a("M/Qn")),a("IgEJ")),pt=n(a("ZYwa")),mt=a("LvDl"),vt=a("82Y3"),ht=n(a("HQT4")),gt=a("DgMC"),Et=n(a("yTui")),yt=a("IgEJ"),bt=n(a("Se5f")),It=n(a("Mh+3")),St=a("BlBX"),Tt=n(a("q18W")),wt=n(a("q70N")),Ct=n(a("rAXo")),Ot=a("rkME"),Nt=a("P0O0"),Pt=n(a("GMsc")),jt=a("NTFJ"),Dt=At(a("Mdvu")),kt=a("AMAM"),Rt=["name"];function Mt(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(Mt=function(e){return e?a:t})(e)}function At(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=Mt(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}function Lt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function xt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Lt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _t(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,h.default)(e);if(t){var r=(0,h.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,v.default)(this,a)}}function Ft(e){var t,a;return{enterpriseGlobalKey:e.APP.enterprise.globalKey,enterpriseName:e.APP.enterprise.name,watermark:e.APP.enterprise.watermark,payed:e.APP.enterprise.payed,user:e.APP.user,isSensitiveAdmin:(0,ee.checkSensitiveAdmin)(e.CURRENT_USER_ENTERPRISE_PERMISSION_NAMESPACE_FOR_REDUX_STORE.currentEnterprisePermissionList,e.CURRENT_USER_PROJECT_PERMISSION_NAMESPACE_FOR_REDUX_STORE.currentProjectPermissionList),currentProjectCooperateSettings:e.APP.currentProjectCooperateSettings,closedMenuKeys:e.PROJECT_FUNCTIONS.closedMenuKeys,ramOnline:null===(t=e.CURRENT_USER_ENTERPRISE_PERMISSION_NAMESPACE_FOR_REDUX_STORE)||void 0===t||null===(a=t.ramStatus)||void 0===a?void 0:a.ramOnline}}var Wt=(g=(0,T.connect)(Ft),(0,C.withRouter)(E=g(E=(0,De.default)(E=(0,Ae.default)(E=(0,ke.default)(E=(0,Me.default)(E=(0,Re.default)(E=(0,ye.default)(E=(0,be.FlashAnchorDecorator)(E=(0,Je.default)((b=y=function(e){(0,m.default)(a,e);var t=_t(a);function a(e){var n;return(0,d.default)(this,a),(n=t.call(this,e)).isDeleteInFilePreview=!1,n.getFunctionFlags=function(){var e=n.props.currentProjectFunctions;return{codeManagementOpen:e.some((function(e){return e.code===nt.KEY_CONFIG.CODE_MANAGEMENT&&"1"===e.value})),testManagementOpen:e.some((function(e){return e.code===nt.KEY_CONFIG.TEST_MANAGEMENT&&"1"===e.value})),issueReviewOpen:rt.enableIssueReview}},n.getIssueTypeSplit=function(){var e=n.props.currentProjectCooperateSettings,t=n.state.detailInfoState,a=e.PROJECT_ISSUE_SPLIT_TYPE,r=a.find((function(e){return e.issueTypeDetail.id===t.issueTypeDetail.id}));return r?"ALL_REQUIREMENT"===r.splitType&&r.issueTypeDetail.issueTypeDetail?a.filter((function(e){return e.issueTypeDetail.issueType===Ce.IssueType.requirement})).map((function(e){return e.issueTypeDetail})):r.targetIssueTypes:[]},n.getAssignmentsIssueTypes=function(){return n.props.currentProjectCooperateSettings.ISSUE_TYPES.filter((function(e){return"MISSION"===e.issueType}))},n.formatIssueType=function(e){return n.props.detailInfo.issueTypeDetail.type===e},n.elemShow=function(){var e=n.props.currentProjectCooperateSettings,t=n.state.isStory,a=e.COOPERATE_MODE,r=e&&e.DEFECT&&e.DEFECT===M.MODULE_SWITCH.OPENED,o=e.txcAuthorized;n.dataLoad=(0,Fe.default)({elemInOrder:[o&&"feedBack","subRequirement",t&&"productRequirement","subTask",r&&"defect","associateTestCase","CLASSIC"===a&&"blockingRelation","codeRepo","reference","logs","comment"].filter((function(e){return e})),onRenderItem:function(e,t,a,r){n.setState({isRender:xt({},r),isRenderAll:t},(function(){a(),t&&n.setState({controlCaculatePos:Date.now()})}))}}),n.dataLoad("comment")},n.titleInputRef=S.default.createRef(),n.scrollRef=S.default.createRef(),n.renderParentsInfo=function(){var e,t,a,r=n.state,o=r.tooltipTitle,i=r.detailInfoState,l=r.nameList,c=r.showMoreCrumb,s=n.props,u=s.projectPath,d=s.currentProjectCooperateSettings,f=d&&d.EPIC&&d.EPIC===M.MODULE_SWITCH.OPENED,p=d.COOPERATE_MODE;return S.default.createElement(S.default.Fragment,null,"CLASSIC"===p?S.default.createElement(He.default,{issueType:null===i||void 0===i||null===(e=i.issueTypeDetail)||void 0===e?void 0:e.iconType,nameList:l,showMoreCrumb:c,toggleDropdown:n.toggleDropdown,projectPath:n.props.projectPath}):S.default.createElement("div",{className:O.default.detailId},i.parent&&S.default.createElement(P.TooltipTrigger,{title:"".concat((0,I.t)("\u6240\u5c5e\u7236\u9700\u6c42\uff1a#")).concat(i.parent.code," ").concat(i.parent.name)},S.default.createElement(C.Link,{to:"".concat(u,"/requirements/issues/").concat(i.parent.code,"/detail"),className:(0,ae.default)(O.default.code,O.default.number)},S.default.createElement(Xe.default,{type:null===i||void 0===i||null===(t=i.issueTypeDetail)||void 0===t?void 0:t.iconType}),"#",i.parent.code)),i.parent&&S.default.createElement("span",{className:O.default.codeIdDivideLine},"/"),f&&i.epic&&S.default.createElement(P.TooltipTrigger,{title:"".concat((0,I.t)("\u6240\u5c5e\u53f2\u8bd7\uff1a#")).concat(i.epic.code," ").concat(i.epic.name)},S.default.createElement(C.Link,{to:"".concat(u,"/epics/issues/").concat(i.epic.code,"/detail"),className:(0,ae.default)(O.default.code,O.default.number)},S.default.createElement(Xe.default,{type:"epic"}),"#",i.epic.code)),f&&i.epic&&S.default.createElement("span",{className:O.default.codeIdDivideLine},"/"),S.default.createElement("span",{className:(0,ae.default)(O.default.code,O.default.lastId,O.default.lastNumber)},S.default.createElement(C.Link,{to:"".concat(u,"/requirements/issues/").concat(i.code,"/detail"),className:(0,ae.default)(O.default.code,O.default.number)},S.default.createElement(Xe.default,{type:null===i||void 0===i||null===(a=i.issueTypeDetail)||void 0===a?void 0:a.iconType}),"#",i.code),S.default.createElement(P.TooltipTrigger,{title:o,onVisibleChange:n.onVisibleChange},S.default.createElement(j.default,{text:"".concat(window.location.origin).concat(u,"/requirements/issues/").concat(i.code,"/detail")},S.default.createElement("div",{className:O.default.copyIcon,onClick:n.onCopyClick})))),S.default.createElement("div",{className:(0,ae.default)(O.default.code,O.default.lastId,O.default.lastNumber),style:{marginLeft:20,fontWeight:600}},"|",S.default.createElement("span",{style:{color:"red",margin:"0 5px"}},"GID"),"#",i.id,S.default.createElement(P.TooltipTrigger,{title:o,onVisibleChange:n.copyGID},S.default.createElement(j.default,{text:i.id},S.default.createElement("div",{className:O.default.copyIcon,onClick:n.onCopyClick}))))))},n.copyGID=function(){n.setState({tooltipTitle:(0,I.t)("\u590d\u5236")})},n.renderTitle=function(e,t,a,r){var o=n.state,i=o.detailInfoState,l=o.inputFocus;return S.default.createElement(Et.default,{value:i.name,ref:!a&&n.titleInputRef,onBlur:function(){n.setState({inputFocus:!1}),n.submitTitleChange()},onChange:function(e){return n.setState({detailInfoState:xt(xt({},i),{},{name:e})})},viewLine:r,onPressEnter:n.submitTitleChange,initFocus:l,onFocus:function(){return n.setState({inputFocus:!0})}})},n.getDelStoryInfo=function(){var e=n.props.currentProject,t=n.state.detailInfoState;return new Promise((function(a){return(0,Oe.fetchDeleteIssue)(e.id,t.id).then((function(e){var t=e.data;a(t)}))}))},n.renderScrollTitle=function(e,t,a){return n.state.inputFocus?S.default.createElement(S.default.Fragment,null,n.renderTitle(e,!0,t)):S.default.createElement("div",{className:O.default.scrolledTitleWrap},S.default.createElement("div",{className:(0,ae.default)(O.default.titleIconWrap,n.state.noHoverIcon&&O.default.noHoverIcon)},S.default.createElement("div",{className:O.default.titleIcon},S.default.createElement(Xe.default,{type:a})),S.default.createElement("div",{className:O.default.breadcrumb},n.renderParentsInfo())),n.renderTitle(e,!0,t,1))},n.getLinkfragment=function(){var e=n.state.detailInfoState,t=n.props,a=t.browserRouter,r=t.projectPath,o=t.location.pathname,i=t.params.epicCode,l=t.iterationCode,c=a.params.subIssueCode,s=(0,ue.currentListPath)(o);return i?"".concat(r,"/epics/issues/").concat(e.epic.code,"/detail/subissues/"):-1!==s.indexOf("iterations")?"".concat(r,"/iterations/").concat(l,"/issues/"):-1!==s.indexOf("releases")?"".concat(r,"/releases/").concat(l,"/issues/"):c?"".concat(r,"/").concat(s,"/issues/").concat(a.params.requirementCode,"/detail/subissues/"):"".concat(r,"/").concat(s,"/issues/")},n.openCopyIssues=function(e){var t=n.props,a={sourceIssueTypeDetail:t.issueTypeDetail,sourceIssueCode:t.issueCode};e&&(a.sourceIssueTypeDetail=e.issueTypeDetail,a.sourceIssueCode=e.code),n.setState({copyIssuesInfo:a,showCopyIssues:!0})},n.copyCallback=function(){var e=n.props,t=(e.issueTypeDetail,e.issueCode,n.state.copyIssuesInfo),a=t.sourceIssueTypeDetail;t.sourceIssueCode;"MISSION"===a.issueType&&n.onSubTaskClassicChanged(),"REQUIREMENT"===a.issueType&&n.onSubRequirementsChanged(),n.callback()},n.onBtnClick=function(e){n["".concat(e.toLowerCase(),"BtnClicked")]&&n["".concat(e.toLowerCase(),"BtnClicked")]()},n.getEditComp=function(e){n.editComp=e},n.editStatusChanged=function(e,t){n.setState(xt({isDesEditing:e,isShowItemPlaceholder:xt(xt({},n.state.isShowItemPlaceholder),{},{description:void 0!==t?t:!e})},e?{}:{isDescriptionBtnFixed:!1}),(function(){n.setState({controlCaculatePos:Date.now()})}))},n.handleAssignmentRelationVisibleChange=function(e){n.setState({isAssignmentRelationVisible:e,isShowItemPlaceholder:xt(xt({},n.state.isShowItemPlaceholder),{},{subtask:e})},(function(){(0,re.scrollRelatedToTopMenu)("assignment-relation-input",200,n.scrollRef.current)}))},n.handleRequirementRelationVisibleChange=function(e){n.setState({isRequirementRelationVisible:e,isShowItemPlaceholder:xt(xt({},n.state.isShowItemPlaceholder),{},{subRequirement:e})},(function(){(0,re.scrollRelatedToTopMenu)("requirement-relation-input",200,n.scrollRef.current)}))},n.showSubTaskClassicCreationModal=function(){n.setState({showClassicSubTasksCreationModal:!0})},n.hideSubTaskClassicCreationModal=function(){n.setState({showClassicSubTasksCreationModal:!1},(function(){n.subAssignmentCreateInstance&&n.subAssignmentCreateInstance.current&&n.subAssignmentCreateInstance.current.focus()}))},n.handleAssignmentTitleChange=function(e){n.setState({assignmentTitle:e,controlAssignmentFocus:Date.now()})},n.onSubTaskClassicChanged=function(){var e=n.state.clearAssignmentTitle;n.setState({assignmentTitle:"",clearAssignmentTitle:!e}),n.fetchIssue(),n.dataLoad("subTask"),n.getActivityList(),n.props.refreshCallback&&n.props.refreshCallback()},n.handleBlockingRelationVisibleChange=function(e){n.setState({isBlockingRelationVisible:e,isShowItemPlaceholder:xt(xt({},n.state.isShowItemPlaceholder),{},{blockingRelation:e})})},n.showSubRequirementsCreationModal=function(){n.setState({showSubRequirementsCreationModal:!0})},n.hideSubRequirementsCreationModal=function(){n.setState({showSubRequirementsCreationModal:!1},(function(){n.subRequirementCreateInstance&&n.subRequirementCreateInstance.current&&n.subRequirementCreateInstance.current.focus()}))},n.handleRequirementTitleChange=function(e){n.setState({requirementTitle:e})},n.onSubRequirementsChanged=function(){var e=n.state.clearRequirementTitle;n.setState({requirementTitle:"",clearRequirementTitle:!e}),n.fetchIssue(),n.dataLoad("subRequirement"),n.getActivityList(),n.props.refreshCallback&&n.props.refreshCallback()},n.scrollToAttechment=function(){var e,t,a;null!==(e=n.scrollRef)&&void 0!==e&&e.current&&null!==(t=n.attechmentRef)&&void 0!==t&&t.current&&null!==(a=n.headerRef)&&void 0!==a&&a.current&&(0,re.scrollIntoView)(n.scrollRef.current,n.attechmentRef.current,-n.headerRef.current.offsetHeight)},n.handleReviewListChanged=function(e){n.fetchIssueReviewList((function(t){0!==t.length?e&&n.setState({activeLogTab:"approval"},(function(){(0,re.scrollRelatedToTopMenu)("issue-review-list",0,n.scrollRef.current)})):n.setState({activeLogTab:"activity"})})),setTimeout((function(){n.getActivityList()}),1e3)},n.getCodeRepoSetting=function(){var e=n.props.currentProject,t=n.state.detailInfoState;return(0,ge.fetchRepoSettingInfo)(e.name,t.issueTypeDetail.id).then((function(e){var t=e.data.find((function(e){return"RELATE_VCS"===e.configName}));t&&"ON"===t.configValue?(n.setState({codeRepoRelationOpened:!0}),n.getAssociatedCodeRepos()):n.dataLoad("codeRepo")}))},n.getCodeRepos=function(e){var t=n.props,a=t.enterpriseGlobalKey,r=t.currentProject,o=n.state,i=o.associatedCodeRepos,l=o.codeRepoList,c=o.attributes;e?n.setState({availableCodeRepos:l.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())&&!i.some((function(e){return e.id===t.id}))}))}):c.systemsId?Promise.all([(0,ge.fetchAvailableCodeRepos)(a,r.name),(0,ge.fetchExternalAvailableCodeRepos)(c.systemsId)]).then((function(e){var t=[],a=[];e.forEach((function(e,n){0===(null===e||void 0===e?void 0:e.code)&&(0===n?t=(0,s.default)(e.data):a=e.data.map((function(e){return{id:e.depotId,name:e.depotName,vcsType:"git"}})))}));var r=(0,ze.default)(t,a,"id");n.setState({codeRepoList:r,availableCodeRepos:r.filter((function(e){return!i.some((function(t){return t.id===e.id}))}))})})):(0,ge.fetchAvailableCodeRepos)(a,r.name).then((function(e){var t=e.data;n.setState({codeRepoList:t,availableCodeRepos:t.filter((function(e){return!i.some((function(t){return t.id===e.id}))}))})}))},n.onUpdateCodeRepos=function(e){var t=n.state.associatedCodeRepos,a=(0,$.default)(t);e.forEach((function(e){var t=e.name,n=(0,c.default)(e,Rt),r=a.findIndex((function(e){return e.name===t}));-1!==r&&(a[r]=xt(xt({},a[r]),n))})),n.setState({associatedCodeRepos:a})},n.associateCodeRepo=function(e){var t=n.props.currentProject,a=n.state.detailInfoState.code;(0,ge.associateCodeRepo)(t.name,a,e).then((function(){(0,B.success)((0,I.t)("\u66f4\u65b0\u6210\u529f")),n.getAssociatedCodeRepos().then((function(){return n.getCodeRepos()}))}))},n.cancelAssociateCodeRepo=function(e){var t=n.props.currentProject,a=n.state.detailInfoState.code;(0,ge.cancelAssociateCodeRepo)(t.name,a,e).then((function(){(0,B.success)((0,I.t)("\u66f4\u65b0\u6210\u529f")),n.getAssociatedCodeRepos().then((function(){return n.getCodeRepos()}))}))},n.cancelCodeRepo=function(){var e=n.state.isShowItemPlaceholder;n.setState({isShowItemPlaceholder:xt(xt({},e),{},{codeRepo:!1})})},n.referencesBtnClicked=function(){"activity"===n.state.activeLogTab?n.changeActivityTabAndShow():n.setState({activeLogTab:"activity"},(function(){n.setCommentPosition((function(){setTimeout((function(){n.changeActivityTabAndShow()}),0)}))}))},n.changeActivityTabAndShow=function(){"WITHOUT_COMMENT"===n.state.activitiesTab?n.setState({activitiesTab:"ALL",isShowItemPlaceholder:xt(xt({},n.state.isShowItemPlaceholder),{},{reference:!0})},(function(){n.changeTabFn(["ALL"]),n.setCommentPosition((function(){n.doShowReference()}))})):n.doShowReference()},n.doShowReference=function(){n.props.autoToggleComment(n.state.detailInfoState.code,!0)},n.scrollToBottom=function(e){(0,re.scrollRelatedToTopMenu)("bottom",0,n.scrollRef.current,e)},n.handleWorkItemRelationVisibleChange=function(e){n.setState({isWorkItemCreationVisible:e,isShowItemPlaceholder:xt(xt({},n.state.isShowItemPlaceholder),{},{workItem:e})})},n.insideProgramCheck=function(e){if(e)return 0===e.code&&e.data.length>0&&(n.setState({inProgram:!0}),n.getAssociatedWorkItems()),void n.dataLoad("workItem");var t=n.props.currentProject;return(0,ge.whetherInProgram)(t.id).then((function(e){e.data.length>0&&n.setState({inProgram:!0}),n.getAssociatedWorkItems()})).finally((function(){n.dataLoad("workItem")}))},n.workItemRelationChanged=function(){n.getAssociatedWorkItems(),n.getActivityList()},n.cancelWorkItem=function(){return n.setState({isShowItemPlaceholder:xt(xt({},n.state.isShowItemPlaceholder),{},{workItem:!1})})},n.handleSubRequirementListChange=function(e){n.setState({subRequirements:e})},n.handleSubAssignmentListChange=function(e){n.setState({classicSubTasks:e})},n.getNotUploadElems=function(){var e=n.state,t=e.isDesEditing,a=e.isCommentEditing;return[t&&n.editComp.containerRef.current,a&&n.commentEditorRef&&n.commentEditorRef.current]},n.dragEnterDes=function(e){n.dragEnter(e,"des")},n.dragEnterComment=function(e){n.dragEnter(e,"comment")},n.dragEnter=function(e,t){e.preventDefault(),e.stopPropagation(),n["des"===t?"intoDesCount":"intoCommentCount"]++},n.dragLeaveDes=function(e){n.dragLeave(e,"des")},n.dragLeaveComment=function(e){n.dragLeave(e,"comment")},n.dragLeave=function(e,t){e.preventDefault(),e.stopPropagation();var a="des"===t?"intoDesCount":"intoCommentCount";n[a]--,0===n[a]&&n.setState({notUpload:!1})},n.mouseLeaveDes=function(){n.mouseLeave("des")},n.mouseLeaveComment=function(){n.mouseLeave("comment")},n.handleCurrentInstanceForceRender=function(){n.props.isDetail&&n.forceUpdate()},n.getSubRequirementInstance=function(e){n.subRequirementInstance=e},n.getSubRequirementCreateInstance=function(e){n.subRequirementCreateInstance=e},n.getSubAssignmentCreateInstance=function(e){n.subAssignmentCreateInstance=e},n.getSubRequirementInstanceTreeData=function(e){var t=n.state.classicSubTasks;if(n.subRequirementInstance&&n.subRequirementInstance.current&&e===M.ISSUE_TYPE.REQUIREMENT){var a,r=n.subRequirementInstance.current,o=r.issueNodes,i=r.issues,l=!n.props.isDetail&&n.state.isFullScreen;return a=l?n.state.currSubIssueCode:n.props.params.subIssueCode,-1===o.findIndex((function(e){return e.code===+a}))?null:[].concat((0,s.default)(o.map((function(e){return i[e.code]}))),(0,s.default)(t))}return[].concat((0,s.default)(n.state.subRequirements),(0,s.default)(t))},n.handleSelectRequirementIssueType=function(e){n.setState({willCreateRequirementType:e})},n.handleSelectAssignmentIssueType=function(e){n.setState({willCreateAssignmentType:e})},n.renderActivity=function(e){var t=n.state,a=t.isInited,r=t.activities,o=t.detailInfoState,i=t.activitiesTab,l=t.isCommentSticky,c=n.props,s=c.isDetail,u=c.currentProject,d=c.user,f=c.projectPath,p=c.domID;return S.default.createElement(L.default,{isInited:a,scrollRef:n.scrollRef,isDetail:s,currentProject:u,user:d,activities:r,projectPath:f,domID:p,flashAnchor:n.props.flashAnchor,itemType:"REQUIREMENT",code:o.code,onPublishChildComment:n.postComment,editCommentCallback:n.handleEditCommentCallback,onDeleteComment:n.deleteComment,handleViewRecord:n.viewRecord,activeTab:[i],changeTab:function(e){return n.setState({activitiesTab:e},n.setCommentPosition)},getChangeTabFn:function(e){n.changeTabFn=e},isCommentSticky:l,hideTitle:e,handleEditComment:function(e){return n.setState({isEdittingCommentModalVisible:e})}})},n.changeActivityLogTab=function(e){n.setState({activeLogTab:e.value},(function(){n.setCommentPosition(),"approval"===e.value&&n.fetchIssueReviewList((function(e){0===e.length&&n.setState({activeLogTab:"activity"})}))}))},n.formatTypeText=function(e){var t=n.state,a=t.iterationConfirmParams,r=t.isIterationConfirmText,o=t.detailInfoState,i="";if(null===o.iteration&&a&&a.status===St.ITERATION_STATUS.PROCESSING&&(i=r.MoveIn[e]),o.iteration&&[St.ITERATION_STATUS.WAIT_PROCESS,St.ITERATION_STATUS.PROCESSING,St.ITERATION_STATUS.COMPLETED].includes(o.iteration.status)&&a&&[St.ITERATION_STATUS.WAIT_PROCESS,St.ITERATION_STATUS.PROCESSING,St.ITERATION_STATUS.COMPLETED].includes(a.status)){if(o.iteration&&o.iteration.status===St.ITERATION_STATUS.PROCESSING&&a&&a.status===St.ITERATION_STATUS.PROCESSING)return i=r.ToTarget[e];if(o.iteration&&o.iteration.status===St.ITERATION_STATUS.PROCESSING)return i=r.MoveOut[e];if(a&&a.status===St.ITERATION_STATUS.PROCESSING)return i=r.MoveIn[e]}return void 0===a&&o.iteration&&o.iteration.status===St.ITERATION_STATUS.PROCESSING&&(i=r.MoveOut[e]),i},n.getDropdownPortalToRight=function(){return!n.props.isDetail&&!n.state.isFullScreen},n.doScroll=function(){if(!n.state.inputFocus){var e=n.scrollRef.current.scrollTop,t=n.state.isScrolled;e>100&&!t?n.setState({isScrolled:!0}):e<=100&&n.setState({isScrolled:!1})}},n.onAttrScroll=function(){n.setState({isElemScroll:!0})},n.getFeedBackList=function(){var e=n.props.issueCode,t=n.props.currentProject.id;(0,W.fetchFeedBackList)(t,{issueCode:e}).then((function(e){n.setState({feedBackList:e.data}),n.dataLoad("feedBack")}))},n.getParentDetail=function(e){var t=n.state.detailInfoState,a=n.props.currentProject.id;e?0===e.code&&n.getCrumbs(e.data):(0,W.getParentIssues)(a,t.code).then((function(e){n.getCrumbs(e.data)}))},n.getCrumbs=function(e){var t=[];n.getNameList(t,e),n.setState({nameList:t,nameListLoaded:!0})},n.getNameList=function(e,t){e.unshift({code:t.code,name:t.name,type:t.type,id:n.props.detailInfo.id,issueTypeDetail:t.issueTypeDetail}),t.parent&&n.getNameList(e,t.parent)},n.toggleDropdown=function(){var e=n.state.showMoreCrumb;e?document.removeEventListener("click",n.hideDropdown):document.addEventListener("click",n.hideDropdown),n.setState({showMoreCrumb:!e})},n.hideDropdown=function(){n.setState({showMoreCrumb:!1}),document.removeEventListener("click",n.hideDropdown)},n.getSensitiveMessage=function(e,t){return(0,Pe.getSensitive)(e,t).then((function(e){return 0===e.code?(n.setState({isSensitive:e.data.isSensitive}),e.data.isSensitive):null}))},n.validateDefect=function(e,t){var a,r=n.state.attributes,o=null===(a=n.props.requirementSchemeFieldArchives[e])||void 0===a?void 0:a.issueField,i=["\u81f4\u547d","\u4e25\u91cd"],l=!!o&&o.options.find((function(e){return e.value===t&&i.includes(e.name)}));return!(!o||"\u7f3a\u9677\u4e25\u91cd\u7a0b\u5ea6"!==o.name||!l||r.defectKindIds.length&&r.defectPhaseId)&&((0,B.warning)((0,I.t)("\u8bf7\u5148\u586b\u5199\u201c\u5f15\u5165\u7f3a\u9677\u9636\u6bb5\u201d\u548c\u201c\u7f3a\u9677\u7c7b\u578b\u201d")),!0)},n.getListRule=function(){var e=n.props,t=e.detailInfo,a=e.currentProject;(0,F.fetchLimitRule)(a.id,t.code).then((function(){}))},n.getBasicInfo=function(e){var t=n.props,a=(t.detailInfo.type,t.issueCode),r=t.currentProjectCooperateSettings,o=t.zipRes3,i=void 0===o?{}:o,l=t.zipRes4,c=void 0===l?{}:l,u=t.currentProject,d=(i.code,i.data,c.code),f=c.data,p=n.state.isStory,m=n.getFunctionFlags(),v=m.codeManagementOpen,h=m.testManagementOpen,g=m.issueReviewOpen,E=r&&r.COOPERATE_MODE;n.setState({codeManagementOpen:v,testManagementOpen:h,issueReviewOpen:g}),Promise.all([n.props.getRequirementTypes(e&&e[It.default.getRequirementTypes]),n.props.getBugTypes(e&&e[It.default.getBugTypes]),n.props.getModuleSchemes(),n.props.getRequirementScheme(),n.props.getSourceTypes(e&&e[It.default.getSourceTypes])].concat((0,s.default)(v?[n.getCodeRepoSetting()]:[]),(0,s.default)(g?[n.fetchIssueReviewList()]:[]),[n.getIssues(!0,e&&e[It.default.getIssues])])).then((function(){n.setState({isInited:!0})})),n.getIssueStatusTransfers(e&&e[It.default.getIssueStatusTransfers]),n.getIterationList(e&&e[It.default.getIterationList]),n.getSubTasksList(a,e&&e[It.default.getSubTasksList]),n.getSplitIssueList().then((function(){p&&n.dataLoad("productRequirement")})),p&&(n.getListRule(),(0,Ot.isPermissible)("project",u.id,Nt.RelationRequirementPermissionAction.UPDATE).then((function(e){n.setState({prdRequirementPermission:e})}))),n.getResourceReference(0===d&&f).then((function(){n.dataLoad("reference")})),n.fetchManHourRecords(),h?n.fetchAssociatedTestCase(e&&e[It.default.fetchAssociatedTestCase]):n.dataLoad("associateTestCase"),v||n.dataLoad("codeRepo"),n.fetchIssue((function(){n.dataLoad("subRequirement"),n.dataLoad("subTask")}),e&&e[It.default.fetchIssue]),E===ft.MODE.CLASSIC&&n.fetchBlockingRelationList(e&&e[It.default.fetchBlockingRelationList]),n.getMeetingResource()},n.relationReqRefresh=function(){var e=n.props.updateCallback;n.getBasicInfo(),e&&e()},n.fetchTestCase=function(e){var t=n.props.currentProject,a=n.state.detailInfoState.code;(0,F.fetchTestCase)(t.id,a,{code:a,keyword:e}).then((function(e){var t=e.data;n.setState({availableTestCase:t})}))},n.associateTestCase=function(e){var t=n.props.currentProject,a=n.state.detailInfoState.code;(0,F.associateTestCase)(t.id,a,{caseId:e}).then((function(){(0,B.success)((0,I.t)("\u66f4\u65b0\u6210\u529f")),n.fetchAssociatedTestCase(),n.fetchTestCase()}))},n.cancelAssociateTestCase=function(e){var t=n.props.currentProject,a=n.state.detailInfoState.code;(0,F.cancelAssociateTestCase)(t.id,a,e).then((function(){(0,B.success)((0,I.t)("\u66f4\u65b0\u6210\u529f")),n.fetchAssociatedTestCase(),n.fetchTestCase()}))},n.cancelChooseTestCase=function(){return n.setState({isShowItemPlaceholder:xt(xt({},n.state.isShowItemPlaceholder),{},{associateTestCase:!1})})},n.blockingRelationChanged=function(){n.fetchBlockingRelationList(),n.getActivityList(),n.props.refreshCallback&&n.props.refreshCallback()},n.fetchManHourRecords=function(){var e=n.props,t=e.currentProject.id,a=e.detailInfo.code;return(0,ge.getManhourHistories)(t,a).then((function(e){var t=e.data;n.setState({manHourRecords:t})}))},n.fetchManHourRecordsAndFetchSpecData=(0,l.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.fetchManHourRecords();case 2:return e.next=4,n.changeAttributes({type:""});case 4:case"end":return e.stop()}}),e)}))),n.deleteManhourRecord=function(e,t){var a=n.props.currentProject.id;return(0,ge.delManHourHistory)(a,e.id,t).then((0,l.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.fetchManHourRecordsAndFetchSpecData();case 1:case"end":return e.stop()}}),e)}))))},n.fetchIssue=function(e,t){var a=n.props,r=a.currentProject,o=(a.currentProjectCooperateSettings,n.state.detailInfoState);t?0===t.code&&n.setState({subRequirements:t.data.requirements,classicSubTasks:t.data.missions},(function(){e&&e()})):(0,Oe.getRelatedIssues)(r.id,o.code).then((function(t){var a=t.data;n.setState({subRequirements:a.requirements,classicSubTasks:a.missions},(function(){e&&e()}))}))},n.fetchParentRequirements=function(e){var t=n.props.currentProject,a=n.state.detailInfoState;(0,W.fetchParent)(t.id,a.code,{keyword:e}).then((function(e){n.setState({parentRequirements:e.data})}))},n.updateParent=function(e,t){var a=n.props.currentProject,r=n.state.detailInfoState;(0,W.updateParent)(a.id,r.code,{parentRequirementCode:e}).then((function(e){var t;(0,B.success)((0,I.t)("\u66f4\u65b0\u6210\u529f")),n.setState({detailInfoState:xt(xt({},r),{},{iteration:null===(t=e.data)||void 0===t?void 0:t.iteration})}),n.getActivityList(),n.getParentDetail(),n.props.refreshCallback&&n.props.refreshCallback()}),(function(){n.setState({detailInfoState:xt(xt({},r),{},{parent:t})})}))},n.caculateDetailEleHeight=function(){return new Promise((function(e){n.doCaculate(-1,e)}))},n.doCaculate=function(e,t){if(n.detailBodyRef.current){var a=n.detailBodyRef.current.offsetHeight;a!==e?setTimeout((function(){n.doCaculate(a,t)}),300):t(a)}},n.setCommentPosition=function(){var e=(0,l.default)(o.default.mark((function e(t){var a,r,i,l,c;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.scrollRef&&n.scrollRef.current&&n.hiddenHeaderRef.current&&n.detailBodyRef.current)){e.next=7;break}return e.next=3,n.caculateDetailEleHeight();case 3:i=e.sent,l=n.scrollRef.current.offsetHeight-n.hiddenHeaderRef.current.offsetHeight,c=(null===(a=n.commentEditorRef)||void 0===a||null===(r=a.current)||void 0===r?void 0:r.offsetHeight)||140,n.setState(xt({isCommentSticky:i+c>=l},i+c<=l?{isDescriptionBtnFixed:!1,isCommentAbsBottom:!1}:{}),(function(){if(n.state.isCommentSticky&&(setTimeout((function(){var e=n.hiddenHeaderRef.current.offsetHeight+(n.detailBodyRef.current.offsetHeight<l?l:n.detailBodyRef.current.offsetHeight);n.setState({isCommentAbsBottom:n.scrollRef.current.offsetHeight-e>=0,minHeight:l})}),0),n.state.isDesEditing)){var e=n.editorRef.current.offsetHeight+24,a=n.scrollRef.current.offsetHeight-n.hiddenHeaderRef.current.offsetHeight-44;n.setState({isDescriptionBtnFixed:e>=a})}"function"===typeof t&&t()}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.actionCallback=function(){var e=n.props,t=(e.isDetail,e.detailInfo.type),a=e.issueCode;n.getSubItemsList(a,t),n.getSubTasksList(a),n.getActivityList(),n.props.updateCallback(),n.setState({subTasksInput:""})},n.renewDescription=function(e){var t=e.historyId,a=e.issueLogId,r=e.description,o=n.props.currentProject,i=n.state.detailInfoState;return(0,W.rollbackDescription)(o.id,i.code,a).then((function(){n.setState({historyId:t,description:r,isDescriptionEmpty:!r.replace(/\n|\s/g,"")}),n.getActivityList(),n.getResourceReference()})).then((function(){Dt.default.emit(Dt.EventBusType.BlockDesc,Dt.EventBusKeys.revertHistoryBlockDesc)}))},n.sensitiveCtrl=function(){var e=n.state.isSensitive,t=n.props,a=t.detailInfo,r=t.currentProject;e?n.setState({showDeleteModal:!0}):(0,Pe.addSensitive)(a.code,r.name).then((function(e){0===e.code&&((0,B.success)((0,I.t)("\u6807\u8bb0\u6210\u529f\uff01")),n.getSensitiveMessage(a.code,r.name))}))},n.cancelMark=function(){var e=n.props,t=e.detailInfo,a=e.currentProject;(0,Pe.cancelSensitive)(t.code,a.name).then((function(e){n.setState({showDeleteModal:!1}),0===e.code&&((0,B.success)((0,I.t)("\u53d6\u6d88\u6807\u8bb0\u6210\u529f\uff01")),n.getSensitiveMessage(t.code,a.name))}))},n.getRequestId=function(){var e,t=Object.values(n.props.requirementSchemeFieldArchives).filter((function(e){return e.issueField.name===(0,I.t)("\u9700\u6c42OA\u7f16\u53f7")}));return t.length>0&&(e=n.props.detailInfo.issueSchemeFields[t[0].issueField.id]),e},n.deleteOASyncRequestId=function(e){e&&(0,F.deleteRequestId)(currentProject.id,e)},n.getSplitIssueList=function(){var e=n.props,t=e.detailInfo,a=e.currentProject,r=t.issueTypeDetail.type,o=(0,u.default)({},M.REQUIREMENT_LOWER_TYPES.requirement,{splitType:"story",level:1});return new Promise((function(e){if(o[r]){var i=o[r].splitType;(0,F.fetchSplitIssueParentList)(i,a.id,t.code).then((function(t){var a=t.data;n.setState({splitParentRequirement:null!==a&&void 0!==a&&a.Requirement?{Requirement:a.Requirement}:{}}),e()}))}}))},n.getSubTasksList=function(e,t){var a=n.props.currentProject.id;return e?t?void(0===t.code?(n.setState({subTasks:t.data}),n.dataLoad("subTask")):n.dataLoad("subTask")):(0,F.fetchSubtasksList)(a,e).then((function(e){var t=e.data;n.setState({subTasks:t}),n.dataLoad("subTask")})).catch((function(e){(0,B.warning)((0,ne.getErrorMessage)(e.msg)),n.dataLoad("subTask")})):""},n.handleSubTasksInput=function(e){n.setState({subTasksInput:e.target.value})},n.handleSubTasksInputCancel=function(){n.setState({isCreateSubTasksVisible:!1,subTasksInput:"",isShowItemPlaceholder:xt(xt({},n.state.isShowItemPlaceholder),{},{subtask:!1})})},n.handleSubTasksInputCreate=function(){var e,t=n.props.currentProject.id,a=n.props.projectPath,r=n.state,o=r.subTasksInput,i=r.detailInfoState;o?(0,ge.fastCreateIssue)(t,{name:(0,se.default)(o),parentCode:i.code,priority:1,issueType:"SUB_TASK",issueDescriptionType:null!==(e=i.issueDescriptionType)&&void 0!==e?e:(0,vt.getPreferEditorType)()},!0).then((function(e){var t=e.data;(0,B.success)("".concat((0,I.t)("\u5b50\u5de5\u4f5c\u9879 #")).concat(t.code).concat((0,I.t)(" \u521b\u5efa\u6210\u529f\uff0c\u70b9\u51fb\u67e5\u770b\u5b50\u5de5\u4f5c\u9879\uff01")),{link:"".concat(a,"/subtasks/issues/").concat(t.code,"/detail")}),n.actionCallback()}),(function(e){var t=e.code;8026===t?((0,B.danger)((0,I.t)("\u521b\u5efa\u9875\u5c5e\u6027\u5df2\u53d8\u66f4\uff0c\u8bf7\u68c0\u67e5\u5fc5\u586b\u5c5e\u6027\u5e76\u518d\u6b21\u63d0\u4ea4\u3002")),n.setState({isReloading:!0},(function(){Promise.all([n.props.getRequirementScheme(),n.props.getRequirementScheme(!0)]).then((function(){n.setState({isReloading:!1})}))}))):8011!==t&&n.handleSubTasksInputFullCreate()})).finally((function(){n.setState({isPending:!1})})):(0,B.warning)((0,I.t)("\u8bf7\u8f93\u5165\u5b50\u5de5\u4f5c\u9879\u6807\u9898"))},n.handleSubTasksInputFullCreate=function(){n.setState({subTasksInputVisible:!0})},n.cancelCreationModal=function(){n.setState({subTasksInputVisible:!1})},n.handleAttentionChange=function(e){n.changeAttributes({type:"watchers",value:e})},n.handleSelfChange=function(e){var t=n.props,a=t.currentProject,r=t.user,o=n.state,i=o.detailInfoState,l=o.watchers;e?(0,W.watchIssue)(a.id,i.code).then((function(){n.setState({watchers:[].concat((0,s.default)(l),[r])}),(0,B.success)((0,I.t)("\u66f4\u65b0\u6210\u529f")),n.callback(),n.getActivityList()})):(0,W.unwatchIssue)(a.id,i.code).then((function(){n.setState({watchers:(0,s.default)(l.filter((function(e){return e.id!==r.id})))}),(0,B.success)((0,I.t)("\u66f4\u65b0\u6210\u529f")),n.callback(),n.getActivityList()}))},n.handleSort=function(e,t){var a=n.props.currentProject.id,r=n.state.detailInfoState;(0,F.sortSubtask)(a,r.code,{subTaskCode:e,beforeCode:t}).then((function(e){var t=e.data;(0,B.success)("".concat((0,I.t)("\u6392\u5e8f\u6210\u529f\uff01"))),n.props.refreshCallback&&n.props.refreshCallback(),t.length?Promise.all(t.map((function(e){return(0,W.fetchIssueStatusTransfers)(a,e.code).then((function(t){var a=t.data;return e.subtaskStatusTransfers=a,e}))}))).then((function(e){n.setState({subTasks:(0,s.default)(e)})})):n.setState({subTasks:[]})}),(function(e){var t=e.msg;(0,B.danger)((0,ne.getErrorMessage)(t)),n.getSubTasksList(r.code)})).finally((function(){n.setState({isPending:!1})}))},n.handleAffairsInput=function(e){n.setState({affairsInput:e.target.value})},n.handleAffairsInputCancel=function(){n.setState({isCreateAffairsVisible:!1,creationType:M.ISSUE_TYPE.DEFECT,affairsInput:"",isShowItemPlaceholder:xt(xt({},n.state.isShowItemPlaceholder),{},{defect:!1})})},n.handleAffairsInputShow=function(){var e=(0,p.default)(n).scrollRef;n.setState({affairsInput:"",isCreateAffairsVisible:!0,isAssociateAffairsVisible:!1,isShowItemPlaceholder:xt(xt({},n.state.isShowItemPlaceholder),{},{defect:!0})},(function(){(0,re.scrollRelatedToTopMenu)("bug-elem",200,e.current),n.bugInputRef.current&&n.bugInputRef.current.focus()}))},n.handleAffairsInputCreate=(0,mt.debounce)((function(){var e,t,a=n.props.currentProject,r=n.state,o=r.affairsInput,i=r.detailInfoState,l=r.creationType;if(!o)return l===M.ISSUE_TYPE.REQUIREMENT&&(t=(0,I.t)("\u8bf7\u8f93\u5165\u9700\u6c42\u6807\u9898")),l===M.ISSUE_TYPE.ASSIGNMENT&&(t=(0,I.t)("\u8bf7\u8f93\u5165\u4efb\u52a1\u6807\u9898")),l===M.ISSUE_TYPE.DEFECT&&(t=(0,I.t)("\u8bf7\u8f93\u5165\u7f3a\u9677\u6807\u9898")),void(0,B.warning)(t);var c={issueType:l,relatedIssueCode:i.code,name:(0,se.default)(o),issueDescriptionType:null!==(e=i.issueDescriptionType)&&void 0!==e?e:(0,vt.getPreferEditorType)()};""!==o&&(0,ge.fastCreateIssue)(a.id,c).then((function(){n.getIssues(),n.setState({affairsInput:""})})).catch((function(e){var t=e.code;(0,gt.configPlanNotToastMsg)(t)||8011!==t&&n.setState({creationType:l,isCreationModalVisible:!0})}))}),300),n.handleAffairsAssociate=function(){var e=(0,p.default)(n).scrollRef;n.setState({isAssociateAffairsVisible:!0,isCreateAffairsVisible:!1},(function(){(0,re.scrollRelatedToTopMenu)("affairs-associate-defect",200,e.current),n.bugInputRef.current&&n.bugInputRef.current.focus()}))},n.handleAffairsAssociateCancel=function(){n.setState({isAssociateAffairsVisible:!1})},n.handleAffairsInputFullCreate=function(){void 0===n.state.creationType&&n.setState({creationType:M.ISSUE_TYPE.DEFECT}),n.setState({isCreationModalVisible:!0})},n.closeCreateModal=function(){var e=n.state.creationType;n.setState({isCreationModalVisible:!1,creationType:e})},n.getIssues=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,a=n.props,r=a.currentProject,o=a.refreshCallback,i=a.issueCode;if(!t)return(0,ge.getRelatedDefects)(r.id,i).then((function(t){var a=t.data;n.setState({affairs:a,affairsInput:""}),n.dataLoad("defect"),n.getActivityList(),e||o()}));0===t.code&&(n.setState({affairs:t.data,affairsInput:""}),n.dataLoad("defect"),n.getActivityList(),e||o())},n.onIsFullWidthChange=function(e){n.setState({isFullWidth:e})},n.toggleFullScreenStatus=function(){var e=!n.state.isFullScreen;n.setState({isFullScreen:e}),(0,et.setIsSlideFullScreen)(e),n.props.onFullScreenChange&&n.props.onFullScreenChange(e)},n.handleFullScreenKey=function(e){n.state.isDesEditing||e.target===document.body&&"f"===e.key.toLowerCase()&&n.toggleFullScreenStatus()},n.state={tooltipTitle:(0,I.t)("\u590d\u5236\u94fe\u63a5"),noHoverIcon:!1,useOld:!1,detailInfoState:e.detailInfo,references:{},activities:[],description:e.detailInfo.descriptionMarkup,isDescriptionEmpty:!e.detailInfo.description.replace(/\n|\s/g,""),markdown:e.detailInfo.description,slateRaw:e.detailInfo.slateRaw,showCopyModal:!1,meetingResource:[],attachmentsState:n.combineThirdLinks(e.detailInfo.files,e.detailInfo.thirdLinks),isFilePreviewVisible:void 0,previewFileID:void 0,subItems:[],subTasks:[],isCreateRequirementModalVisible:!1,isCreateAssignmentModalVisible:!1,isCreateSubTasksVisible:!1,attributes:{assignee:void 0,priority:void 0,requirementType:void 0,defectKindIds:[],defectPhaseId:void 0,module:void 0,startDate:void 0,dueDate:void 0,workingHours:void 0,labels:[],watchers:[],fields:{},progress:void 0,wuKongReloadId:void 0,estimatedWorkHour:void 0,defectSourceId:void 0,systemsId:void 0,participants:[],programId:0,selectedProgram:{},milestone:void 0,groupTeamId:void 0,softwareUnitDTO:[]},assignee:e.detailInfo.assignee,watchers:e.detailInfo.watchers||[],iterationList:[],versionList:[],requirementStatusTransfers:[],citedSources:{},citingSources:{},isInited:!1,isHistoryRecordVisible:!1,currentLogId:void 0,parentSelectorStatus:!1,subTasksInputVisible:!1,subTasksInput:"",currentSubTask:null,showSideslip:!1,isSensitive:!1,showDeleteModal:!1,activitiesTab:"ALL",activeLogTab:"activity",isCommentSticky:!1,isCommentAbsBottom:!1,isScrolled:!1,inputFocus:!1,isCreateAffairsVisible:!1,isCreationModalVisible:!1,isAssociateAffairsVisible:!1,affairsInput:"",creationType:M.ISSUE_TYPE.DEFECT,affairs:[],associatedTestCase:[],availableTestCase:[],isAssociatedTestCaseFocus:!1,isShowApproveCreate:!1,issueReviewList:[],isDesEditing:!1,isFullScreen:(0,et.getIsSlideFullScreen)(),currSubIssueCode:null,isFullWidth:!0,subRequirements:[],showSubRequirementsCreationModal:!1,classicSubTasks:[],showClassicSubTasksCreationModal:!1,blockBeforeList:[],blockAfterList:[],isBlockingRelationVisible:!1,isShowItemPlaceholder:{description:!0,subtask:!1,subRequirement:!1,defect:!1,blockingRelation:!1,associateTestCase:!1,workItem:!1,codeRepo:!1,reference:!1},isRender:{feedBack:!1,subTask:!1,subRequirement:!1,defect:!1,blockingRelation:!1,associateTestCase:!1,workItem:!1,codeRepo:!1,reference:!1,logs:!1,comment:!1,productRequirement:!1},isRenderAll:!1,showMoreCrumb:!1,nameList:[],nameListLoaded:!1,manHourRecords:[],delFileId:void 0,showDeleteConfirmModal:!1,isElemScroll:!1,scrollControl:Date.now(),meeting:void 0,parentRequirements:[],parentRequirementSearchStr:"",feedBackList:[],isTestManageOpen:!1,isTestManageLoaded:!0,isEdittingCommentModalVisible:!1,willCreateRequirementType:{},willCreateAssignmentType:{},codeRepoRelationOpened:!1,associatedCodeRepos:[],availableCodeRepos:[],isAssociatedCodeRepoFocus:!1,inProgram:!1,isWorkItemCreationVisible:!1,associatedWorkItems:[],availableWorkItems:[],isAssociatedWorkItemFocus:!1,controlHideButtonActionMore:0,controlHideOptionMore:0,codeManagementOpen:!1,testManagementOpen:!1,issueReviewOpen:!1,pageId:e.detailInfo.pageId||void 0,historyId:void 0,controlCaculatePos:0,isDescriptionBtnFixed:!1,identity:"",slotVisible:!1,showCopyIssues:!1,copyIssuesInfo:{sourceIssueTypeDetail:null,sourceIssueCode:null},isIterationConfirm:!1,iterationConfirmParams:null,isIterationConfirmText:{MoveOut:{title:"\u786e\u8ba4\u79fb\u51fa\u8fed\u4ee3",desc:"\u4e8b\u9879\u79fb\u51fa\u8fed\u4ee3\uff0c\u4f1a\u9020\u6210\u8fed\u4ee3\u5b8c\u6210\u7387\u4e0b\u964d\uff0c\u662f\u5426\u786e\u8ba4\u79fb\u51fa\u5f53\u524d\u8fed\u4ee3?"},MoveIn:{title:"\u786e\u8ba4\u79fb\u5165\u8fed\u4ee3",desc:"\u4e8b\u9879\u79fb\u5165\u8fed\u4ee3\u540e\uff0c\u4f1a\u6c38\u4e45\u7b97\u4f5c\u8fed\u4ee3\u4e8b\u9879\u57fa\u6570\uff0c\u4f1a\u5f71\u54cd\u8fed\u4ee3\u5b8c\u6210\u7387\u7684\u8ba1\u7b97\uff0c\u662f\u5426\u786e\u8ba4\u79fb\u5165\u5f53\u524d\u8fed\u4ee3?"},ToTarget:{title:"\u786e\u8ba4\u79fb\u51fa\u8fed\u4ee3",desc:"\u4e8b\u9879\u79fb\u51fa\u5f53\u524d\u8fed\u4ee3\uff0c\u4f1a\u9020\u6210\u5f53\u524d\u8fed\u4ee3\u5b8c\u6210\u7387\u4e0b\u964d\u3002\u540c\u65f6\uff0c\u4e8b\u9879\u4f1a\u79fb\u5165\u65b0\u7684\u8fed\u4ee3\u540e\uff0c\u4f1a\u6c38\u4e45\u7b97\u4f5c\u65b0\u8fed\u4ee3\u4e8b\u9879\u57fa\u6570\uff0c\u4f1a\u5f71\u54cd\u65b0\u8fed\u4ee3\u5b8c\u6210\u7387\u7684\u8ba1\u7b97\uff0c\u662f\u5426\u786e\u8ba4\u6b64\u64cd\u4f5c?"}},prdRequirementPermission:!1,splitParentRequirement:void 0,isShowRelationRequirement:!1,isStory:n.formatIssueType(M.REQUIREMENT_LOWER_TYPES.requirement)},n.onVisibleChange=n.onVisibleChange.bind((0,p.default)(n)),n.onCopyClick=n.onCopyClick.bind((0,p.default)(n)),n.updateDescription=n.updateDescription.bind((0,p.default)(n)),n.onNameChange=n.onNameChange.bind((0,p.default)(n)),n.callback=n.callback.bind((0,p.default)(n)),n.deleteRequirement=n.deleteRequirement.bind((0,p.default)(n)),n.updateRequirement=n.updateRequirement.bind((0,p.default)(n)),n.showRequirementSelector=n.showRequirementSelector.bind((0,p.default)(n)),n.onParentUpdate=n.onParentUpdate.bind((0,p.default)(n)),n.postComment=n.postComment.bind((0,p.default)(n)),n.deleteComment=n.deleteComment.bind((0,p.default)(n)),n.fileUploadSpec=n.fileUploadSpec.bind((0,p.default)(n)),n.onFileDropSuccessSpec=n.onFileDropSuccessSpec.bind((0,p.default)(n)),n.onFileDropDeleteSpec=n.onFileDropDeleteSpec.bind((0,p.default)(n)),n.onFileDropCancelSpec=n.onFileDropCancelSpec.bind((0,p.default)(n)),n.onFileDropFailSpec=n.onFileDropFailSpec.bind((0,p.default)(n)),n.filePreviewHideSpec=n.filePreviewHideSpec.bind((0,p.default)(n)),n.previewItem=n.previewItem.bind((0,p.default)(n)),n.handleDelInPreviewFileSpec=n.handleDelInPreviewFileSpec.bind((0,p.default)(n)),n.onStatusChange=n.onStatusChange.bind((0,p.default)(n)),n.getSubItemsList=n.getSubItemsList.bind((0,p.default)(n)),n.handleSubTasksCallback=n.handleSubTasksCallback.bind((0,p.default)(n)),n.submitTitleChange=n.submitTitleChange.bind((0,p.default)(n)),n.cancelAssociateSubItem=n.cancelAssociateSubItem.bind((0,p.default)(n)),n.changeAttributes=n.changeAttributes.bind((0,p.default)(n)),n.getIterationList=n.getIterationList.bind((0,p.default)(n)),n.getVersionList=n.getVersionList.bind((0,p.default)(n)),n.onIterationChange=n.onIterationChange.bind((0,p.default)(n)),n.getIssueStatusTransfers=n.getIssueStatusTransfers.bind((0,p.default)(n)),n.getResourceReference=n.getResourceReference.bind((0,p.default)(n)),n.onRemoveReference=n.onRemoveReference.bind((0,p.default)(n)),n.toggleRecord=n.toggleRecord.bind((0,p.default)(n)),n.viewRecord=n.viewRecord.bind((0,p.default)(n)),n.handleRemoveEpic=n.handleRemoveEpic.bind((0,p.default)(n)),n.handleModifyParentIssue=n.handleModifyParentIssue.bind((0,p.default)(n)),n.openSlideslip=n.openSlideslip.bind((0,p.default)(n)),n.closeSlideslip=n.closeSlideslip.bind((0,p.default)(n)),n.getRequestId=n.getRequestId.bind((0,p.default)(n)),n.deleteOASyncRequestId=n.deleteOASyncRequestId.bind((0,p.default)(n)),n.fetchManHourRecordsAndFetchSpecData=n.fetchManHourRecordsAndFetchSpecData.bind((0,p.default)(n)),n.handleDeleteAttachmentConfirm=n.handleDeleteAttachmentConfirm.bind((0,p.default)(n)),n.handleEditCommentCallback=n.handleEditCommentCallback.bind((0,p.default)(n)),n.commentEditorRef=null,n.intoDesCount=0,n.intoCommentCount=0,n.commentStickyContainerRef=null,n.onScroll=n.onScroll.bind((0,p.default)(n)),n.desComp=null,n.headerRef=S.default.createRef(),n.hiddenHeaderRef=S.default.createRef(),n.detailBodyRef=S.default.createRef(),n.desComp=null,n.attechmentRef=S.default.createRef(),n.subtaskInputRef=S.default.createRef(),n.bugInputRef=S.default.createRef(),n.changeTabFn=null,n.editorRef=S.default.createRef(),n.elemShow(),n.handleIterationChangeConfirm=n.handleIterationChangeConfirm.bind((0,p.default)(n)),n}return(0,f.default)(a,[{key:"getMeetingResource",value:function(){var e=this,t=this.props,a=t.currentProject.name,n=t.issueCode;(0,ge.getTencentMeetingResource)(a,n).then((function(t){var a=t.data;if(a&&Array.isArray(a)){var n=a.map((function(e){return xt(xt({},e),{},{isSummary:"MINUTES_OF_MEETING"===e.resourcesType,isVideo:"VIEW_OF_MEETING"===e.resourcesType,fileId:e.id,name:"MINUTES_OF_MEETING"===e.resourcesType?(0,I.t)("\u4f1a\u8bae\u7eaa\u8981"):"VIEW_OF_MEETING"===e.resourcesType?(0,I.t)("\u4f1a\u8bae\u5f55\u5c4f"):"",link:e.resourcesId})}));e.setState({meetingResource:(0,s.default)(n)})}}))}},{key:"headerRender",value:function(e){var t=this,a=this.state,n=a.detailInfoState,r=a.watchers,o=a.isSensitive,l=a.showDeleteModal,c=a.isDesEditing,s=a.isFullWidth,u=a.nameList,d=a.inputFocus,f=a.isFullScreen,p=a.splitParentRequirement,m=a.prdRequirementPermission,v=!e&&this.state.isScrolled,h=this.props,g=h.projectPath,E=h.isDetail,y=h.requirementList,b=h.isPermissible,T=h.user,w=h.location.query,C=h.currentProject,N=h.currentProjectCooperateSettings,j=h.browserRouter,D=h.callFrom,k=h.isSensitiveAdmin,R=h.payed,L=h.detailInfo,x=h.zipRes,_=void 0===x?{}:x,F="outer"===D,W=C.name,B=y&&y.findIndex((function(e){return e.code===n.code}))+1,H=1===B,U=B===(y&&y.length),Y=y&&y.find((function(e){return e.code===n.code})),q=b([{function:ee.ProjectPermissionFunction.PROJECT_ISSUE,action:ee.ProjectPermissionAction.UPDATE}]),G=this.getLinkfragment(),z=N&&N.DEFECT&&N.DEFECT===M.MODULE_SWITCH.OPENED,V=null,Z=null;if(_&&_.data){var K=_.data;if(K[It.default.getParentDetail]&&K[It.default.getParentDetail].data){var J,Q=null===(J=K[It.default.getParentDetail])||void 0===J?void 0:J.data;V=null===Q||void 0===Q?void 0:Q.issueExtend,Z=null===Q||void 0===Q?void 0:Q.type}}var X={DESCRIPTION:q,UPLOAD:q,SUBTASK:q,LINK_BUG:q&&z,LINK_TEST_CASE:this.state.testManagementOpen&&q,ISSUE_REVIEW:this.state.issueReviewOpen&&q,LINK_WORK_ITEM:this.state.inProgram&&q,DECOMPOSE_TASK:q,DECOMPOSE_REQUIREMENT:q&&u.length>0,LINK_CODE_REPO:this.state.codeRepoRelationOpened&&q,RELATION:q,REFERENCES:!0,IS_RISK:!V||0===V.isRisk,ISSUE_TYPE_RISK:"sub_task"!==Z},$=N.COOPERATE_MODE,te=(0,rt.getAuidtPaymentState)(),ne=xt(xt(xt(xt(xt({},c?{DESCRIPTION:""}:{}),5===u.length?{DECOMPOSE_REQUIREMENT:(0,I.t)("\u65e0\u6cd5\u7ee7\u7eed\u5206\u89e3\uff0c\u6700\u591a\u652f\u63015\u5c42")}:{}),n.iteration&&"COMPLETED"===n.iteration.status&&"CLASSIC"===$?{DECOMPOSE_TASK:(0,I.t)("\u8fed\u4ee3\u5df2\u5b8c\u6210\uff0c\u65e0\u6cd5\u6dfb\u52a0\u5b50\u4efb\u52a1")}:{}),n.iteration&&"COMPLETED"===n.iteration.status&&"SCRUM"===$?{SUBTASK:(0,I.t)("\u8fed\u4ee3\u5df2\u5b8c\u6210\uff0c\u65e0\u6cd5\u6dfb\u52a0\u5b50\u5de5\u4f5c\u9879")}:{}),n.iteration&&"COMPLETED"===n.iteration.status&&"SCRUM"===$?{DECOMPOSE_REQUIREMENT:(0,I.t)("\u8fed\u4ee3\u5df2\u5b8c\u6210\uff0c\u65e0\u6cd5\u5206\u89e3\u9700\u6c42")}:{}),re={};e&&(re.position="static",re.visibility="hidden");var oe={};rt.KA_ISSUE_COPY_COMMITID_SWITCH&&(oe.copyCommit="bug:".concat(W," #").concat(n.code," ").concat(n.name));var ie=(0,dt.getSlotContext)(L,C.id);return S.default.createElement("div",{className:(0,ae.default)(O.default.specHeader,E&&O.default.detail,this.state.inputFocus&&v&&O.default.scrollFocus,v&&!c&&O.default.fixed,v&&O.default.noBorder),ref:e?this.hiddenHeaderRef:this.headerRef,style:re},S.default.createElement("div",{className:(0,ae.default)(O.default.main,v?O.default.fixed:"",f?O.default.fullScreenMain:"",E?O.default.detail:"")},S.default.createElement("div",{className:(0,ae.default)(O.default.headerPanelMenuWrapper,d&&O.default.focus)},this.renderParentsInfo(),S.default.createElement("div",{className:(0,ae.default)(O.default.menus,v&&d&&O.default.hide)},S.default.createElement(ht.default,{relationType:"ISSUE",relationId:n.id,inviteText:(0,I.t)("\u53d1\u8d77\u9700\u6c42\u8ba8\u8bba")}),S.default.createElement(ce.default,{type:"REQUIREMENT",projectID:C.id,watchers:r||[],onChange:this.handleAttentionChange,user:T,showTooltip:!0,readOnly:!q,handleSelfChange:this.handleSelfChange}),!E&&y&&!F&&Y&&S.default.createElement("div",{className:O.default.divideLine}),!E&&y&&!F&&Y&&S.default.createElement("div",{className:"".concat(O.default.preButton," ").concat(H&&O.default.disabled),title:(0,I.t)("\u4e0a\u4e00\u4e2a\u4e8b\u9879"),onClick:function(){if(!H){var e=y[B-2].code;j.push({pathname:"".concat(G).concat(e),query:xt({},w)})}}}),!E&&y&&!F&&Y&&S.default.createElement("div",{className:"".concat(O.default.nextButton," ").concat(U&&O.default.disabled),title:(0,I.t)("\u4e0b\u4e00\u4e2a\u4e8b\u9879"),onClick:function(){if(!U){var e=y[B].code;j.push({pathname:"".concat(G).concat(e),query:xt({},w)})}}}),S.default.createElement("div",{className:O.default.divideLine}),!E&&S.default.createElement(P.TooltipTrigger,{title:this.state.isFullScreen?(0,I.t)("\u5207\u6362\u5230\u4fa7\u680f(F)"):(0,I.t)("\u5168\u5c4f(F)")},S.default.createElement("div",{className:this.state.isFullScreen?O.default.cancelFullScreenBtn:O.default.toFullScreenBtn,onClick:this.toggleFullScreenStatus})),!E&&S.default.createElement(P.TooltipTrigger,{title:(0,I.t)("\u5728\u65b0\u6807\u7b7e\u9875\u6253\u5f00")},S.default.createElement("div",{className:O.default.openNewLink,onClick:function(){window.open("".concat(g,"/requirements/issues/").concat(n.code,"/detail"),"_blank")}})),S.default.createElement(A.default,(0,i.default)({deleteFunction:this.deleteRequirement,hasParent:!!n.parent,cancelRelatedFunction:this.cancelAssociateSubItem,onChangeEpic:this.showRequirementSelector,hasEpic:!!n.epic,handleRemoveEpic:this.handleRemoveEpic,currentProject:C,currentProjectCooperateSettings:N,premiumVersion:!te||R,isSensitiveAdmin:k,isSensitive:o,sensitiveCtrlFunction:this.sensitiveCtrl,isShowFullWidthOption:E||!E&&this.state.isFullScreen,isPermissible:b,viewDescriptionVersion:function(){return t.setState({isHistoryRecordVisible:!0})},copyTitle:n.name,copyLink:"".concat(window.location.origin).concat(g,"/requirements/issues/").concat(n.code,"/detail"),isFullWidth:s,onIsFullWidthChange:this.onIsFullWidthChange,type:"REQUIREMENT",issueTypeDetail:n.issueTypeDetail,customTip:"CLASSIC"===$&&(this.state.subRequirements.length>0||this.state.classicSubTasks.length>0)?(0,I.t)("".concat(n.issueTypeDetail.name,"\u4e0b\u542b\u6709\u5b50\u4e8b\u9879\uff0c").concat(n.issueTypeDetail.name,"\u5220\u9664\u540e\u5b50\u4efb\u52a1\u548c\u5b50\u9700\u6c42\u5c06\u4e00\u5e76\u5220\u9664\uff0c\u786e\u8ba4\u5220\u9664\u5417\uff1f")):"",controlHideMore:this.state.controlHideOptionMore},oe,{onClickTrigger:function(){t.setState({controlHideButtonActionMore:Date.now()})},slotCallback:function(e){return t.setState({identity:e,slotVisible:!0})},fetchCustomTip:this.getDelStoryInfo})),S.default.createElement(je.default,{title:(0,I.t)("\u786e\u5b9a\u8981\u53d6\u6d88\u6807\u8bb0"),show:l,onConfirm:this.cancelMark,onClose:function(){t.setState({showDeleteModal:!1})}}))),this.renderTitle(q,!1,e),(!v||v&&!d)&&S.default.createElement(xe.default,{projectType:$,issueType:M.ISSUE_TYPE.REQUIREMENT,isShow:X,isDisabled:ne,onBtnClick:this.onBtnClick,uploadProps:{disabled:!q,currentAttachmentNum:this.state.attachmentsState.length,onHandleAttachments:this.fileUploadSpec},issueStatus:n.issueStatus.type,issueCode:n.code,projectName:W,userId:T.id,projectPath:g,posType:v,isLoaded:this.isBtnActionLoaded(),canSplitRequirement:!!this.getIssueTypeSplit().length,canSplitAssignment:!!this.getAssignmentsIssueTypes().length,controlHideMore:this.state.controlHideButtonActionMore,slotContext:ie,onClickTrigger:function(){t.setState({controlHideOptionMore:Date.now()})},onChangeIsRisk:function(){return t.changeAttributes({type:""})},gid:L.id,projectID:C.id,isHasProductRequirement:p&&Object.keys(p).length>0,prdRequirementPermission:m})))}},{key:"isBtnActionLoaded",value:function(){return this.state.isTestManageLoaded&&this.state.nameListLoaded}},{key:"relation_requirementBtnClicked",value:function(){this.setState({isShowRelationRequirement:!0})}},{key:"descriptionBtnClicked",value:function(){var e=this,t=this.editComp;t.show().then((function(){e.setState({isShowItemPlaceholder:xt(xt({},e.state.isShowItemPlaceholder),{},{description:!1})},(function(){var a,n,r;null!==(a=e.scrollRef)&&void 0!==a&&a.current&&null!==(n=t.containerRef)&&void 0!==n&&n.current&&null!==(r=e.headerRef)&&void 0!==r&&r.current&&(0,re.scrollIntoView)(e.scrollRef.current,t.containerRef.current,-e.headerRef.current.offsetHeight-26),t.onHandle()}))}))}},{key:"subtaskBtnClicked",value:function(){var e=this;this.setState({isCreateSubTasksVisible:!0,subTasksInput:"",isShowItemPlaceholder:xt(xt({},this.state.isShowItemPlaceholder),{},{subtask:!0})},(function(){(0,re.scrollRelatedToTopMenu)("subtask-elem",200,e.scrollRef.current),e.subtaskInputRef.current&&e.subtaskInputRef.current.focus()}))}},{key:"decompose_taskBtnClicked",value:function(){var e=this;this.setState({isAssignmentRelationVisible:!0,controlAssignmentFocus:Date.now(),isShowItemPlaceholder:xt(xt({},this.state.isShowItemPlaceholder),{},{subtask:!0})},(function(){(0,re.scrollRelatedToTopMenu)("assignment-relation-input",200,e.scrollRef.current)}))}},{key:"decompose_requirementBtnClicked",value:function(){var e=this;this.setState({isRequirementRelationVisible:!0,controlRequirementFocus:Date.now(),isShowItemPlaceholder:xt(xt({},this.state.isShowItemPlaceholder),{},{subRequirement:!0})},(function(){(0,re.scrollRelatedToTopMenu)("requirement-relation-input",200,e.scrollRef.current)}))}},{key:"relationBtnClicked",value:function(){var e=this;this.setState({isBlockingRelationVisible:!0,controlFocus:Date.now(),isShowItemPlaceholder:xt(xt({},this.state.isShowItemPlaceholder),{},{blockingRelation:!0})},(function(){(0,re.scrollRelatedToTopMenu)("block-relation-input",200,e.scrollRef.current)}))}},{key:"fetchIssueReviewList",value:function(e){var t=this,a=this.props,n=a.currentProject,r=a.detailInfo;(0,ot.fetchIssueReviewList)(n.id,r.code).then((function(a){var n=a.data;t.setState({issueReviewList:n},(function(){e&&e(n)}))}))}},{key:"issue_reviewBtnClicked",value:function(){this.setState({isShowApproveCreate:!0})}},{key:"link_code_repoBtnClicked",value:function(){var e=this;(0,re.scrollRelatedToTopMenu)("associated-code-repo",200,this.scrollRef.current),this.setState({isShowItemPlaceholder:xt(xt({},this.state.isShowItemPlaceholder),{},{codeRepo:!0})},(function(){return e.setState({isAssociatedCodeRepoFocus:!0})}))}},{key:"getAssociatedCodeRepos",value:function(){var e=this,t=this.props.currentProject,a=this.state.detailInfoState.code;return(0,ge.fetchExternalAssociatedCodeRepos)(t.id,a).then((function(t){var a=t.data;e.setState({associatedCodeRepos:a.map((function(e){return xt(xt({},e),{},{vcsType:"git"})}))})})).finally((function(){return e.dataLoad("codeRepo")}))}},{key:"link_bugBtnClicked",value:function(){this.handleAffairsInputShow()}},{key:"link_test_caseBtnClicked",value:function(){var e=this;(0,re.scrollRelatedToTopMenu)("associated-test-case",200,this.scrollRef.current),this.setState({isShowItemPlaceholder:xt(xt({},this.state.isShowItemPlaceholder),{},{associateTestCase:!0})},(function(){return e.setState({isAssociatedTestCaseFocus:!0})}))}},{key:"link_work_itemBtnClicked",value:function(){var e=this;this.setState({isWorkItemCreationVisible:!0,controlFocus:Date.now(),isShowItemPlaceholder:xt(xt({},this.state.isShowItemPlaceholder),{},{workItem:!0})},(function(){(0,re.scrollRelatedToTopMenu)("work-item-relation-input",200,e.scrollRef.current)}))}},{key:"getAssociatedWorkItems",value:function(){var e=this,t=this.props.currentProject,a=this.state.detailInfoState.code;return(0,ge.fetchAssociatedWorkItems)(t.name,a).then((function(t){var a=t.data;e.setState({associatedWorkItems:a})})).finally((function(){return e.dataLoad("workItem")}))}},{key:"mouseLeave",value:function(e){this["des"===e?"intoDesCount":"intoCommentCount"]=0,this.setState({notUpload:!1})}},{key:"render",value:function(){var e,t,a,n,r=this,o=this.state,l=o.detailInfoState,c=o.markdown,s=o.slateRaw,u=o.description,d=o.activities,f=o.attachmentsState,p=o.isFilePreviewVisible,m=o.previewFileID,v=o.subTasks,h=o.isCreateSubTasksVisible,g=o.citedSources,E=o.citingSources,y=o.isInited,b=o.isHistoryRecordVisible,T=o.currentLogId,w=o.parentSelectorStatus,C=o.subTasksInputVisible,N=o.subTasksInput,P=o.isParentModified,j=o.currentSubTask,A=o.showSideslip,L=o.activitiesTab,x=o.isCommentSticky,_=o.isCreateAffairsVisible,F=o.isAssociateAffairsVisible,W=o.affairsInput,B=o.affairs,H=o.isCreationModalVisible,Y=o.creationType,V=o.isFullWidth,K=o.isShowItemPlaceholder,J=o.isRender,Q=o.isRenderAll,X=o.activeLogTab,$=o.subRequirements,te=o.classicSubTasks,ne=o.blockBeforeList,re=o.blockAfterList,le=o.isBlockingRelationVisible,ce=o.manHourRecords,se=o.showSubRequirementsCreationModal,ue=o.showClassicSubTasksCreationModal,de=o.showDeleteConfirmModal,ge=o.feedBackList,Ee=o.isEdittingCommentModalVisible,ye=o.isWorkItemCreationVisible,be=o.pageId,Ie=o.historyId,Oe=o.isDescriptionEmpty,Pe=o.minHeight,je=o.isDescriptionBtnFixed,De=o.identity,ke=o.slotVisible,Re=o.splitParentRequirement,Me=o.isShowRelationRequirement,Ae=this.props,Le=Ae.params,xe=Ae.expanded,Fe=Ae.isDetail,He=Ae.currentProject,Ge=Ae.user,ze=Ae.enterpriseGlobalKey,Je=Ae.enterpriseName,Qe=Ae.projectPath,Xe=Ae.isPermissible,$e=Ae.autoshowComment,et=Ae.domID,nt=Ae.currentProjectCooperateSettings,rt=Ae.location,ot=Ae.targetData,ut=Ae.requirementSchemeFieldArchives,ft=Ae.browserRouter,mt=Ae.location.query,vt=Ae.detailInfo,ht=He.name,gt=He.id,Et=(0,dt.getSlotContext)(vt,gt),yt=Xe([{function:ee.ProjectPermissionFunction.PROJECT_ISSUE,action:ee.ProjectPermissionAction.UPDATE}]),bt=void 0!==ut&&Object.values(ut).filter((function(e){return"HOUR_RECORD"===e.issueField.type})).length>0,It=this.state.issueReviewOpen&&this.state.issueReviewList.length>0,St=[];J.logs&&St.push({text:(0,I.t)("\u6d3b\u52a8\u65e5\u5fd7"),value:at.MATTER_TABS_TYPE.ACTIVITY}),bt&&St.push({text:(0,I.t)("\u5de5\u65f6\u65e5\u5fd7"),value:at.MATTER_TABS_TYPE.WORK}),It&&St.push({text:(0,I.t)("\u5ba1\u6279"),value:at.MATTER_TABS_TYPE.APPROVAL});var Tt=J.comment&&X!==at.MATTER_TABS_TYPE.WORK&&X!==at.MATTER_TABS_TYPE.APPROVAL&&d.length>0&&L!==at.ACTIVITIES_TAB.WITHOUT_COMMENT,Ot=nt&&nt.DEFECT&&nt.DEFECT===M.MODULE_SWITCH.OPENED,Nt=nt&&nt.COOPERATE_MODE,Pt=this.state.subTasksInputVisible||this.state.showSubRequirementsCreationModal||this.state.showClassicSubTasksCreationModal||this.state.isCreationModalVisible,Dt=this.state.notUpload&&(this.state.isDesEditing||this.state.isCommentEditing)||Pt||Ee||A||this.state.isShowApproveCreate,kt=nt.ISSUE_TYPES.find((function(e){return"SUB_TASK"===e.issueType})),Rt=nt.ISSUE_TYPES.find((function(e){return"DEFECT"===e.issueType})),Mt=x?{minHeight:"".concat(Pe,"px"),position:"relative"}:{position:"relative"};return S.default.createElement(_e.default,{currentAttachmentNum:f.length,onHandleAttachments:this.fileUploadSpec,notUpload:Dt,notUploadElems:this.getNotUploadElems(),onIntoUploadElems:function(){return r.setState({notUpload:!0})}},S.default.createElement(Ke.default.Provider,{value:{scrollControl:this.state.scrollControl}},S.default.createElement("div",{className:O.default.specWrapper,onScroll:this.onAttrScroll,id:"scroll-attr-wrap"},S.default.createElement("div",{className:(0,ae.default)(O.default.specDetail,Fe?O.default.isDetail:"",V&&O.default.isFullWidth)},this.headerRender(),this.headerRender(!0),S.default.createElement("div",{className:O.default.specMain,ref:this.scrollRef},S.default.createElement("div",{style:Mt,className:(0,ae.default)(O.default.detailWrapper,Fe&&O.default.isDetail)},S.default.createElement("div",{className:"".concat(O.default.detailBody," ").concat(!xe&&Fe&&O.default.isDetail," ").concat(V&&O.default.isFullWidth),ref:this.detailBodyRef,onClick:function(){return r.setState({controlHideButtonActionMore:Date.now()})}},S.default.createElement("div",{className:"".concat(O.default.mainWrapper," ").concat(xe&&O.default.mainExpanded)},S.default.createElement("div",{onDragEnter:this.dragEnterDes,onDragLeave:this.dragLeaveDes,onMouseLeave:this.mouseLeaveDes,ref:this.editorRef},S.default.createElement(D.default,{editorType:vt.issueDescriptionType,issueId:vt.id,isInited:y,scrollRef:this.scrollRef,readOnly:!yt,code:l.code,autoSaveKey:"".concat(ht,"_REQUIREMENT_DETAIL_DESCRIPTION-").concat(l.code),updateDescription:this.updateDescription,refreshActivity:function(){return r.getActivityList()},updatePageId:function(e){return r.setState({pageId:e})},historyId:Ie,currentProject:He,markdown:c,slateRaw:s,description:u,flashAnchor:this.props.flashAnchor,domID:et,enterpriseGlobalKey:ze,getThis:this.getEditComp,editStatusChanged:this.editStatusChanged,isShowPlaceholder:Oe&&K.description,location:rt,userId:Ge.id,pageId:be,setCommentPosition:this.setCommentPosition,onLoad:function(e){r.dataLoad("description"),e&&r.setState({isDescriptionEmpty:e.isEmpty})},isDescriptionBtnFixed:je})),f.length>0&&S.default.createElement("div",{className:O.default.sectionWrapper,ref:this.attechmentRef},S.default.createElement(fe.ThemeConsumer,null,(function(e){var t=e.hiddenFolderDirs;return S.default.createElement(Z.default,{expanded:xe,disabled:!yt,attachments:f,enterpriseGlobalKey:ze,currentProjectName:ht,currentProjectID:gt,currentAttachmentNum:f.length,issueCode:l.code,onHandleAttachments:r.fileUploadSpec,uploadFileSuccess:r.onFileDropSuccessSpec,uploadFileFailed:r.onFileDropFailSpec,uploadFileDelete:r.onFileDropDeleteSpec,uploadFileCancel:r.onFileDropCancelSpec,dir:t&&t[M.HIDDEN_FILE_TYPE.REQUIREMENTS]&&t[M.HIDDEN_FILE_TYPE.REQUIREMENTS].file_id,previewItemHandle:r.previewItem,userID:Ge.id})}))),J.feedBack&&S.default.createElement("div",{className:O.default.sectionWrapper},S.default.createElement(Ze.default,{feedBackList:ge})),J.productRequirement&&!!(Re&&Object.keys(Re).length>0)&&S.default.createElement("div",{className:O.default.sectionWrapper},S.default.createElement(wt.default,{type:jt.DM_ITEM_TYPE.PRD_REQUIREMENT,projectID:gt,currentProject:He,issueCode:l.code,allowUpdate:yt,list:null!==(e=null===Re||void 0===Re?void 0:Re.Requirement)&&void 0!==e?e:[],callback:this.onRemoveReference})),J.subRequirement&&($.length>0||K.subRequirement)&&S.default.createElement("div",{className:O.default.sectionWrapper},S.default.createElement(Te.default,{currentInstanceForceRender:this.handleCurrentInstanceForceRender,getInstance:this.getSubRequirementInstance,getCreateInputInstance:this.getSubRequirementCreateInstance,type:Ce.IssueType.requirement,projectID:gt,projectName:ht,parentCode:l.code,parentDescriptionType:l.issueDescriptionType,currentCode:!Fe&&this.state.isFullScreen&&A?this.state.currSubIssueCode:Number(Le.subIssueCode),isDetail:Fe,scrollTargetId:"requirement-relation-input",createVisible:this.state.isRequirementRelationVisible,onCreateVisibleChange:this.handleRequirementRelationVisibleChange,controlFocus:this.state.controlRequirementFocus,list:$,callback:this.onSubRequirementsChanged,isPermissible:Xe,onFullCreate:this.showSubRequirementsCreationModal,onListChange:this.handleSubRequirementListChange,onTitleChange:this.handleRequirementTitleChange,browserRouter:ft,query:mt,clearTitle:this.state.clearRequirementTitle,currentIteration:l.iteration,currentProjectCooperateSettings:nt,issueTypeDetail:vt.issueTypeDetail,onSelectIssueType:this.handleSelectRequirementIssueType,willCreateIssueType:this.state.willCreateRequirementType,canSplit:!!this.getIssueTypeSplit().length,isFullScreen:!Fe&&this.state.isFullScreen,iterationFinished:l&&l.iteration&&l.iteration.status&&"COMPLETED"===l.iteration.status})),se&&S.default.createElement(Ue.default,{name:this.state.requirementTitle,show:se,closeHandle:this.hideSubRequirementsCreationModal,callback:this.onSubRequirementsChanged,targetData:ot,parentCode:l.code,iteration:xt({},l.iteration),issueTypeDetail:this.state.willCreateRequirementType}),"CLASSIC"===Nt&&J.subTask&&(te.length>0||K.subtask)&&S.default.createElement("div",{className:O.default.sectionWrapper},S.default.createElement(Te.default,{type:Ce.IssueType.assignment,projectID:gt,projectName:ht,parentCode:l.code,currentCode:!Fe&&this.state.isFullScreen&&A?this.state.currSubIssueCode:Number(Le.subIssueCode),iterationFinished:l.iteration&&l.iteration.status&&"COMPLETED"===l.iteration.status,isDetail:Fe,scrollTargetId:"assignment-relation-input",createVisible:this.state.isAssignmentRelationVisible,onCreateVisibleChange:this.handleAssignmentRelationVisibleChange,controlFocus:this.state.controlAssignmentFocus,list:te,callback:this.onSubTaskClassicChanged,isPermissible:Xe,onFullCreate:this.showSubTaskClassicCreationModal,onListChange:this.handleSubAssignmentListChange,onTitleChange:this.handleAssignmentTitleChange,browserRouter:ft,query:mt,clearTitle:this.state.clearAssignmentTitle,currentProjectCooperateSettings:nt,issueTypeDetail:vt.issueTypeDetail,onSelectIssueType:this.handleSelectAssignmentIssueType,willCreateIssueType:this.state.willCreateAssignmentType,canSplit:!!this.getAssignmentsIssueTypes().length,isFullScreen:!Fe&&this.state.isFullScreen})),ue&&S.default.createElement(Ye.default,{name:this.state.assignmentTitle,show:ue,closeHandle:this.hideSubTaskClassicCreationModal,callback:this.onSubTaskClassicChanged,targetData:ot,parent:l,iteration:xt({},l.iteration),issueTypeDetail:this.state.willCreateAssignmentType}),"SCRUM"===Nt&&J.subTask&&(v.length>0||K.subtask)&&S.default.createElement("div",{className:O.default.sectionWrapper},S.default.createElement(q.default,{projectPath:Qe,isPermissible:Xe,isDetail:Fe,projectID:gt,currentProject:He,requirementCode:l.code,subItems:v,callback:this.actionCallback,handleAssociate:this.handleSubTasksCallback,handleSort:this.handleSort,handleModifyParent:this.showRequirementSelector,isRquirement:!0,parentType:"requirements",params:Le,isEditing:h,iterationFinished:l&&l.iteration&&l.iteration.status&&"COMPLETED"===l.iteration.status,isFullScreen:!Fe&&this.state.isFullScreen}),h&&S.default.createElement(z.default,{id:"subtask-elem",ref:this.subtaskInputRef,placeholder:(0,I.t)("\u5b50\u5de5\u4f5c\u9879\u6807\u9898\uff08\u6309\u56de\u8f66\u5feb\u901f\u521b\u5efa\uff0cShift + \u56de\u8f66\u5b8c\u6574\u521b\u5efa\uff09"),className:O.default.subtaskCreationInput,value:N,onChange:this.handleSubTasksInput,onCancel:this.handleSubTasksInputCancel,onCreate:this.handleSubTasksInputCreate,onFullCreate:this.handleSubTasksInputFullCreate,currentProject:He,currentProjectCooperateSettings:nt})),Ot&&J.defect&&(B.length>0||K.defect)&&S.default.createElement("div",{className:O.default.sectionWrapper},S.default.createElement(me.default,{isDetail:Fe,params:Le,isRequirementDeletable:!0,projectID:gt,issueCode:l.code,affairs:B,handleSimpleCreate:this.handleAffairsInputShow,handleAssociate:this.handleAffairsAssociate,callback:this.getIssues,isCreateAffairsVisible:h,onAffairsChange:this.handleAffairsChange,isPermissible:Xe,projectPath:Qe,isFullScreen:!Fe&&this.state.isFullScreen}),yt&&_&&S.default.createElement(z.default,{id:"bug-elem",ref:this.bugInputRef,associatePlaceholder:(0,I.t)("\u5173\u8054\u5df2\u6709\u7f3a\u9677"),placeholder:(0,I.t)("\u8f93\u5165\u6807\u9898\u5feb\u901f\u521b\u5efa\u7f3a\u9677"),className:O.default.subtaskCreationInput,multiple:!1,creationType:M.ISSUE_TYPE.DEFECT,value:W,onChange:this.handleAffairsInput,onCancel:this.handleAffairsInputCancel,onCreate:this.handleAffairsInputCreate,onFullCreate:this.handleAffairsInputFullCreate,handleAssociate:this.handleAffairsAssociate,currentProject:He,currentProjectCooperateSettings:nt}),yt&&F&&S.default.createElement(ve.default,{ref:this.bugInputRef,projectID:gt,issueCode:l.code,callback:this.getIssues,onCancel:function(){r.handleAffairsAssociateCancel(),r.handleAffairsInputCancel()}}),H&&Y===M.ISSUE_TYPE.DEFECT&&Rt&&S.default.createElement(he.default,{show:H&&Y===M.ISSUE_TYPE.DEFECT,name:W,closeHandle:this.closeCreateModal,callback:this.getIssues,currentProjectCooperateSettings:nt,relatedIssue:l,targetData:ot,issueTypeDetail:Rt,iterationCode:null===l||void 0===l||null===(t=l.iteration)||void 0===t?void 0:t.code})),this.state.testManagementOpen&&J.associateTestCase&&(this.state.associatedTestCase.length>0||K.associateTestCase)&&S.default.createElement("div",{className:O.default.sectionWrapper},S.default.createElement(Ve.default,{projectPath:Qe,allowUpdate:yt,list:this.state.associatedTestCase,searchResList:this.state.availableTestCase,isFocus:this.state.isAssociatedTestCaseFocus,onFocusChanged:function(e){return r.setState({isAssociatedTestCaseFocus:e})},onSearch:this.fetchTestCase,onAssociate:this.associateTestCase,onCancelAssociate:this.cancelAssociateTestCase,onCancel:this.cancelChooseTestCase,isDetail:Fe})),"CLASSIC"===Nt&&J.blockingRelation&&(ne.length>0||re.length>0||K.blockingRelation)&&S.default.createElement("div",{className:O.default.sectionWrapper},S.default.createElement(Se.default,{projectID:gt,issueCode:l.code,scrollTargetId:"block-relation-input",createVisible:le,onCreateVisibleChange:this.handleBlockingRelationVisibleChange,blockBeforeList:ne,blockAfterList:re,controlFocus:this.state.controlFocus,callback:this.blockingRelationChanged,allowUpdate:yt,projectPath:Qe,isDetail:Fe,currentProject:He,isFullScreen:!Fe&&this.state.isFullScreen})),J.workItem&&(this.state.associatedWorkItems.length>0||K.workItem)&&S.default.createElement("div",{className:O.default.sectionWrapper},S.default.createElement(we.default,{projectID:gt,projectPath:Qe,currentProject:He,issueCode:l.code,allowUpdate:yt,scrollTargetId:"work-item-relation-input",createVisible:ye,onCreateVisibleChange:this.handleWorkItemRelationVisibleChange,controlFocus:this.state.controlFocus,list:this.state.associatedWorkItems,callback:this.workItemRelationChanged,isDetail:Fe,isFullScreen:!Fe&&this.state.isFullScreen})),this.state.codeRepoRelationOpened&&J.codeRepo&&(this.state.associatedCodeRepos.length>0||K.codeRepo)&&S.default.createElement("div",{className:O.default.sectionWrapper},S.default.createElement(tt.default,{projectPath:Qe,allowUpdate:yt,list:this.state.associatedCodeRepos,searchResList:this.state.availableCodeRepos,isFocus:this.state.isAssociatedCodeRepoFocus,onFocusChanged:function(e){return r.setState({isAssociatedCodeRepoFocus:e})},onSearch:this.getCodeRepos,onAssociate:this.associateCodeRepo,onCancelAssociate:this.cancelAssociateCodeRepo,onCancel:this.cancelCodeRepo,isDetail:Fe,isAssociateDetail:!0,enterpriseGlobalKey:ze,currentProjectName:null===He||void 0===He?void 0:He.name,editionVersion:null===l||void 0===l||null===(a=l.edition)||void 0===a?void 0:a.editionVersion,onUpdateCodeRepos:this.onUpdateCodeRepos,code:null===l||void 0===l?void 0:l.code,issueType:null===l||void 0===l?void 0:l.type,issueStatusType:null===l||void 0===l||null===(n=l.issueStatus)||void 0===n?void 0:n.type})),J.reference&&(Object.keys(g).length>0||Object.keys(E).length>0||K.reference)&&S.default.createElement("div",{className:O.default.sectionWrapper},S.default.createElement(k.default,{flashAnchor:function(e){r.setState({activeLogTab:"activity"},(function(){r.props.flashAnchor(e)}))},currentProject:He,citedSources:g,citingSources:E,markdown:c,autoToggleComment:this.referencesBtnClicked,code:l.code,onRemoveReference:this.onRemoveReference})),St.length>=2&&S.default.createElement(S.default.Fragment,null,S.default.createElement("div",{id:"activity-log-tab"}),S.default.createElement(Be.default,{tabs:St,activeTab:X,onChange:this.changeActivityLogTab})),J.logs&&S.default.createElement(S.default.Fragment,null,"activity"===X&&this.renderActivity(bt),bt&&"work"===X&&S.default.createElement(Ne.default,{detailInfo:l,records:ce,onDelete:this.deleteManhourRecord,reloadData:this.fetchManHourRecordsAndFetchSpecData,allowUpdate:yt,user:Ge}),It&&"approval"===X&&S.default.createElement("div",{id:"issue-review-list"},S.default.createElement(it.default,{isDetail:Fe,list:this.state.issueReviewList,onItemChange:this.handleReviewListChanged,onShowCreate:function(){r.setState({isShowApproveCreate:!0})},onShowDetail:function(e){r.setState({issueReviewCode:e})},allowUpdate:yt}))))))),p&&S.default.createElement(U.default,{isShown:p,previewFiles:f,onFileViewerHide:this.filePreviewHideSpec,enterpriseGlobalKey:ze,currentId:gt,currentProjectName:ht,currentFileId:m,onHandleDelAttachment:this.handleDeleteAttachmentConfirm}),C&&kt&&S.default.createElement(ie.default,{parentCode:l.code,title:N,show:!0,callback:this.actionCallback,closeHandle:this.cancelCreationModal,targetData:ot,issueTypeDetail:kt}),b&&S.default.createElement(oe.default,{show:b,closeHandle:this.toggleRecord,enterpriseGlobalKey:ze,currentProject:He,issueType:M.HISTORY_RESCORDS[l.type],parentDescriptionType:l.issueDescriptionType,issueCode:l.code,pageId:be,currentLogId:T,handleUpdate:this.renewDescription,allowUpdate:yt}),w&&S.default.createElement(G.default,{show:!0,issueCode:l.code,currentSubtaskCode:j&&j.code,projectID:gt,closeHandle:function(){r.setState({parentSelectorStatus:!1,isParentModified:!1,currentSubTask:null})},currentParentCode:l.parent?l.parent.code:0,onUpdate:this.onParentUpdate,currentProject:He,isModification:P,handleSelect:this.handleModifyParentIssue,currentProjectCooperateSettings:nt}),A&&S.default.createElement(pe.default,{parentType:"requirements",subTasks:v,RequirementSpec:Bt,issueList:function(e){return r.getSubRequirementInstanceTreeData(e)},getList:function(){return r.fetchIssue()},params:Le,currentProject:He,projectPath:Qe,closeSlideslip:this.closeSlideslip,enterpriseName:Je,targetData:ot}),this.state.isShowApproveCreate&&S.default.createElement(lt.default,{fromIssueId:vt.id,onItemChange:function(){return r.handleReviewListChanged(!0)},onCancel:function(){return r.setState({isShowApproveCreate:!1})}}),this.state.issueReviewCode&&S.default.createElement(ct.default,{detailCode:this.state.issueReviewCode,allowUpdate:yt,onDetailCodeChange:function(e){r.setState({issueReviewCode:e})},onCancel:function(){r.setState({issueReviewCode:void 0},(function(){r.handleReviewListChanged()}))}}),S.default.createElement(st.default,{slotVisible:ke,identity:De,context:Et,onClose:function(){return r.setState({slotVisible:!1})}}),!Q&&S.default.createElement(We.default,null),S.default.createElement("div",{id:"bottom"}),Tt&&S.default.createElement(R.default,{autoToggleComment:this.props.autoToggleComment,autoshowComment:!!$e[l.code],expanded:xe,currentProject:He,avatar:Ge.avatar,issueCode:l.code,onPostComment:this.postComment,isCommentSticky:x,isCommentAbsBottom:this.state.isCommentAbsBottom,onEditStatusChanged:function(e,t){r.commentEditorRef=t,r.setState({isCommentEditing:e})},onDragEnterEditor:this.dragEnterComment,onDragLeaveEditor:this.dragLeaveComment,onMouseLeaveEditor:this.mouseLeaveComment,isDetail:Fe,userID:Ge.id,isDescriptionBtnFixed:je,onRef:function(e){return r.commentStickyContainerRef=e}})),A?S.default.createElement("div",{className:(0,ae.default)(O.default.specAttribute,Fe||!Fe&&this.state.isFullScreen?O.default.isDetail:O.default.isSpec,V&&O.default.isFullWidth)}):this.renderAttributes(),S.default.createElement(qe.default,{show:de,type:"ATTACHMENT",text:(0,I.t)("\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f"),onConfirm:function(){r.handleDelInPreviewFileSpec()},onClose:function(){r.setState({showDeleteConfirmModal:!1})}})),Me&&S.default.createElement(Ct.default,{projectId:gt,issueId:l.id,issueCode:l.code,showModal:Me,toogleRecordModal:function(){r.setState({isShowRelationRequirement:!1})},onRefresh:this.relationReqRefresh,attributes:this.state.attributes})),this.state.showCopyIssues&&S.default.createElement(pt.default,(0,i.default)({},this.state.copyIssuesInfo,{enterpriseGlobalKey:ze,user:this.props.user,sourceProject:this.props.currentProject,callback:this.copyCallback,closeHandle:function(){return r.setState({showCopyIssues:!1})}})))}},{key:"isAssignAttrRequired",value:function(e,t){if(!e)return!1;var a=!1;return Object.keys(e).forEach((function(n){var r=e[n]&&e[n].issueField;r&&r.type===t&&(a=e[n].required)})),a}},{key:"renderAttributes",value:function(){var e,t=this,a=this.props,n=a.isDetail,r=a.isPermissible,o=a.currentProjectCooperateSettings,i=a.projectPath,l=a.expanded,c=a.requirementSchemeFieldArchives,u=a.requirementUpdateFieldIDs,d=a.currentProject,f=a.bugTypes,p=a.requirementTypes,m=a.moduleSchemes,v=a.labels,h=a.addLabel,g=a.detailInfo,E=a.issueCode,y=(a.ramOnline,a.zipRes),b=void 0===y?{}:y,T=a.zipRes3,w=void 0===T?{}:T,C=a.zipRes4,P=void 0===C?{}:C,j=a.sourceTypes,D=this.state,k=D.detailInfoState,R=D.attributes,A=D.assignee,L=D.iterationList,F=D.watchers,W=D.isFullWidth,B=D.isInited,H=D.parentRequirements,U=D.subRequirements,Y=D.classicSubTasks,q=(D.meeting,D.versionList),G=D.isIterationConfirm,z=(0,dt.getSlotContext)(g,d.id),Z=r([{function:ee.ProjectPermissionFunction.PROJECT_ISSUE,action:ee.ProjectPermissionAction.UPDATE}]),K=o&&o.ITERATION&&o.ITERATION===M.MODULE_SWITCH.OPENED,J=r([{function:ee.ProjectPermissionFunction.PROJECT_ITERATION,action:ee.ProjectPermissionAction.UPDATE}]),Q=o&&o.STORY_POINT===M.MODULE_SWITCH.OPENED,X=o&&o.STORY_POINT_TYPE===M.STORY_POINT_TYPE.TSHIRT;if(H){var $=[];""===this.state.parentRequirementSearchStr&&k.parent&&$.push({isAvailable:!0,code:k.parent.code,name:k.parent.name,projectId:k.parent.projectId,type:k.parent.type,issueTypeDetail:k.parent.issueTypeDetail}),$=$.concat(H),k.parent?(0,Ge.default)($,"code"):H}var ne=(0,s.default)(L||[]);return k.iteration&&-1===ne.findIndex((function(e){return e.value===k.iteration.code}))&&ne.unshift({value:k.iteration.code,text:k.iteration.name}),S.default.createElement("div",{className:(0,ae.default)(O.default.specAttribute,n||!n&&this.state.isFullScreen?O.default.isDetail:O.default.isSpec,W&&O.default.isFullWidth)},"outer"===this.props.callFrom&&S.default.createElement("div",{className:(0,ae.default)(O.default.issueProperty,n&&O.default.isDetail)},S.default.createElement("div",{className:(0,ae.default)(O.default.label,n&&O.default.isDetail)},(0,I.t)("\u7814\u53d1\u7a7a\u95f4")),S.default.createElement("div",{className:(0,ae.default)(O.default.customBar,n&&O.default.isDetail)},S.default.createElement(Qe.default,{name:this.props.currentProject.display_name,icon:this.props.currentProject.icon,jumpUrl:this.props.currentProject.project_path}))),S.default.createElement("div",{className:(0,ae.default)(O.default.issueProperty,n&&O.default.isDetail)},S.default.createElement("div",{className:(0,ae.default)(O.default.label,n&&O.default.isDetail)},(0,I.t)("\u72b6\u6001")),S.default.createElement(N.default,{className:(0,ae.default)(O.default.step,O.default.customBar,n&&O.default.isDetail),value:k.issueStatus,onSelect:this.onStatusChange,disabled:!Z,isDetail:n,hoverControlArrow:!0,labelSize:"default",projectID:d.id,project:d,issueCode:E,detailType:g.issueTypeDetail.type,requirementSchemeFieldArchives:c,attributes:R,systemId:R.systemsId,itemInfo:g,iterationDropdownList:ne,versionList:q})),S.default.createElement("div",{className:(0,ae.default)(O.default.issueProperty,n&&O.default.isDetail)},S.default.createElement("div",{className:(0,ae.default)(O.default.label,n&&O.default.isDetail,this.isAssignAttrRequired(c,yt.FIELD_TYPE.ASSIGNEE)&&O.default.required)},(0,I.t)("\u5904\u7406\u4eba")),S.default.createElement("div",{className:(0,ae.default)(O.default.customBar,n&&O.default.isDetail)},S.default.createElement(le.default,{disabled:!Z,value:R.assignee||null,inProject:!0,projectID:d.id,onSelect:function(e){return t.changeAttributes({type:"assignee",value:e.value})},onClear:function(){return t.changeAttributes({type:"assignee"})},triggerExtraProps:{initialSelectedItem:A}}))),S.default.createElement("div",{className:(0,ae.default)(O.default.issueProperty,n&&O.default.isDetail)},S.default.createElement("div",{className:(0,ae.default)(O.default.label,n&&O.default.isDetail,this.isAssignAttrRequired(c,yt.FIELD_TYPE.PARTICIPANT)&&O.default.required)},(0,I.t)("\u53c2\u4e0e\u4eba")),S.default.createElement("div",{className:(0,ae.default)(O.default.customBar,n&&O.default.isDetail)},S.default.createElement(le.default,{disabled:!Z,value:R.participants.map((function(e){return e.id})),inProject:!0,isMultiple:!0,projectID:d.id,onSelect:function(e){var a=[];a=R.participants.find((function(t){return t.id===e.id}))?R.participants.filter((function(t){return e.id!==t.id})):(0,mt.concat)(R.participants,e),t.changeAttributes({type:"participants",value:a})},onClear:function(){return t.changeAttributes({type:"participants",value:[]})},triggerExtraProps:{initialSelectedItem:R.participants}}))),K&&S.default.createElement("div",{className:(0,ae.default)(O.default.issueProperty,n&&O.default.isDetail)},S.default.createElement("div",{className:(0,ae.default)(O.default.label,n&&O.default.isDetail)},(0,I.t)("\u8fed\u4ee3")),S.default.createElement(te.default,{type:{issueType:"sprint",iconType:"sprint"},placeholder:(0,I.t)("\u672a\u89c4\u5212\u8fdb\u8fed\u4ee3"),clearPlaceholder:(0,I.t)("\u79fb\u51fa\u8fed\u4ee3"),searchable:!0,value:k.iteration&&k.iteration.code||0,projectPath:i,items:ne,onSelect:this.onIterationChange,className:(0,ae.default)(O.default.iteration,n&&O.default.iterationInDetail,O.default.customBar,n&&O.default.isDetail),onClear:function(){t.onIterationChange()},disabled:!J,isDetail:n,portalProps:{toRight:this.getDropdownPortalToRight(),popDropdownMenuWidth:n?320:280,portalWrapStyle:{zIndex:1099,width:n?"320px":"280px"},isScroll:this.state.isElemScroll,resetIsScroll:function(){t.setState({isElemScroll:!1})}}})),K&&G&&S.default.createElement(bt.default,{className:Pt.default.confirmWrapper,modalStyle:{width:460},buttonStyle:{flexSpaceAround:!0},onCancel:function(){t.setState({isIterationConfirm:!1,iterationConfirmParams:null})},onHide:function(){t.setState({isIterationConfirm:!1,iterationConfirmParams:null})},show:G,callback:function(){t.setState({isIterationConfirm:!1},(function(){return t.handleIterationChangeConfirm()}))},title:this.formatTypeText("title"),confirmText:(0,I.t)("\u786e\u8ba4"),hideText:(0,I.t)("\u53d6\u6d88")},S.default.createElement("p",null,this.formatTypeText("desc"))),Q&&S.default.createElement("div",{className:(0,ae.default)(O.default.issueProperty,n&&O.default.isDetail)},S.default.createElement("div",{className:(0,ae.default)(O.default.label,n&&O.default.isDetail)},(0,I.t)("\u6545\u4e8b\u70b9")),S.default.createElement("div",{className:(0,ae.default)(O.default.customBar,n&&O.default.isDetail)},S.default.createElement(de.default,{useSize:X,value:k.storyPoint,disabled:!Z,onSelect:function(e){t.updateRequirement({storyPoint:e})},onClear:function(){t.updateRequirement({storyPoint:-1})}}))),(!this.props.issueTypeDetail.type||this.props.issueTypeDetail.type===M.REQUIREMENT_LOWER_TYPES.requirement)&&S.default.createElement(Tt.default,{status:"isEdit",getInnerVersionList:this.getVersionList,getVersion:function(e){return e},labelStyle:(0,ae.default)(O.default.label,n&&O.default.isDetail),boxStyle:(0,ae.default)(O.default.issueProperty,n&&O.default.isDetail),projectId:d.id,planDateCustomID:null===(e=Object.values(c).find((function(e){var t;return"\u8ba1\u5212\u4e0a\u7ebf\u65e5\u671f"===(null===(t=e.issueField)||void 0===t?void 0:t.name)})))||void 0===e?void 0:e.issueFieldId,onChange:this.changeAttributes,planDateValue:k.planDate,versionValue:k.edition,issueId:k.id,isSetDropdownPanelWidth:!0,updateActivity:function(){t.getActivityList()},isFieldUpdate:!0,updateVersions:function(e){var a={editionId:e};t.updateRequirement(a)}}),S.default.createElement("div",{className:O.default.splitLine,style:{marginTop:"16px"}}),B&&S.default.createElement(V.default,{user:this.props.user,expanded:l,className:O.default.issueProperties,isCreate:!1,schemeFieldArchives:c,fieldIds:u,issueType:"REQUIREMENT",onChange:this.changeAttributes,customAttributes:R,assignee:A,watchers:F,isFromDetailPage:n||l,isDetailPage:n,permissionFunction:ee.ProjectPermissionFunction.PROJECT_ISSUE,isPermissible:r,projectID:d.id,currentProject:d,bugTypes:f,requirementTypes:p,moduleSchemes:m,labels:v,addLabel:h,detailInfo:g,subRequirements:U,classicSubTasks:Y,activities:this.state.activities,sourceTypes:j,onManHourUpdate:function(){t.fetchManHourRecords().then((function(){t.changeAttributes({type:""})}))},onForwardLogs:function(){(0,re.scrollRelatedToTopMenu)("activity-log-tab",200,t.scrollRef.current),t.setState({activeLogTab:"work"})},portalProps:{toRight:this.getDropdownPortalToRight(),portalWrapStyle:{zIndex:1099},isScroll:this.state.isElemScroll,resetIsScroll:function(){t.setState({isElemScroll:!1})}},meetingCallback:function(e){t.setState({meeting:e}),t.getActivityList()},zipRes:b,zipRes3:w,zipRes4:P,systemsId:null===R||void 0===R?void 0:R.systemsId,onExpandChange:this.handleOnExpandChange}),S.default.createElement("div",{className:(0,ae.default)(O.default.createTime,O.default.creatorInfo),title:"".concat(k.creator.name).concat((0,I.t)(" \u521b\u5efa\u4e8e ")).concat((0,x.default)((0,_.timeFormat)(k.createdAt,"YYYY-MM-DD HH:mm:ss")).fromNow())},k.creator.name," ",(0,I.t)("\u521b\u5efa\u4e8e")," ",(0,x.default)((0,_.timeFormat)(k.createdAt,"YYYY-MM-DD HH:mm:ss")).fromNow()),S.default.createElement(ut.default,{context:z}))}},{key:"onScroll",value:function(e){var t=this.state,a=t.isDesEditing,n=t.isDescriptionBtnFixed;if(a){var r,o,i,l,c=this.scrollRef.current.scrollTop,s=this.scrollRef.current.getBoundingClientRect().height,u=this.editorRef.current.getBoundingClientRect().height,d=(null===(r=this.commentStickyContainerRef)||void 0===r||null===(o=r.current)||void 0===o?void 0:o.offsetHeight)||0;n=u>=s+c-(null===(i=this.headerRef)||void 0===i||null===(l=i.current)||void 0===l?void 0:l.offsetHeight)-d}this.setState({scrollControl:Date.now(),isDescriptionBtnFixed:n}),clearTimeout(this.scrollRunId),e.stopPropagation(),this.scrollRunId=setTimeout(this.doScroll,50)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.user,a=e.watermark,n=e.payed,r=e.isDetail,o=e.params.subIssueCode,i=e.detailInfo,l=e.getLabels,c=e.isSensitiveAdmin,s=e.currentProjectCooperateSettings,u=e.zipRes,d=void 0===u?{}:u,f=this.state.detailInfoState,p=d.code,m=d.data;this.scrollRef.current&&this.scrollRef.current.addEventListener("scroll",this.onScroll,!1);var v=(0,rt.getAuidtPaymentState)(),h=(0,rt.getWatermarkPaymentState)();if(l&&l(),r&&o&&this.openSlideslip(),this.initAttributesData(i),this.getBasicInfo(0===p&&m),i.pageId?this.state.isDescriptionEmpty&&this.dataLoad("description"):this.dataLoad("description"),!h||n){var g=(0,Ie.getText)(t);(0,Ie.watermarkService)(a,g,r)}v&&!n||(c&&this.getSensitiveMessage(i.code,this.props.currentProject.name),(0,Pe.track)({projectName:this.props.currentProject.name,pageIdentifier:"REQUIREMENT_DETAIL",code:f.code})),this.getParentDetail(0===p&&m[It.default.getParentDetail]),s.txcAuthorized&&this.getFeedBackList(),this.getIssueTypeSplit().length&&this.setState({willCreateRequirementType:this.getIssueTypeSplit()[0]}),this.getAssignmentsIssueTypes().length&&this.setState({willCreateAssignmentType:this.getAssignmentsIssueTypes()[0]}),document.addEventListener("keyup",this.handleFullScreenKey)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.payed,a=e.isDetail;(0,rt.getWatermarkPaymentState)()&&!t||(0,Ie.removeWatermark)(a),document.removeEventListener("keyup",this.handleFullScreenKey)}},{key:"componentDidUpdate",value:function(e,t){var a=this.props,n=a.params,r=a.detailInfo,o=a.issueCode,i=a.isDetail,l=e.params,c=e.detailInfo,s=(t.controlCaculatePos,t.meetingResource),u=this.state,d=(u.controlCaculatePos,u.meetingResource);(0,Y.default)(l,n)||(l.requirementCode!==n.requirementCode&&(this.getIssueStatusTransfers(),this.props.getRequirementScheme(),this.getSubItemsList(o,r.type),this.getSubTasksList(o),this.getIssues(!0)),i&&n.subIssueCode?this.openSlideslip():this.closeSlideslip()),(0,Y.default)(r,c)||(this.updateDetailInfo(o,r),this.getIssueTypeSplit().length&&this.setState({willCreateRequirementType:this.getIssueTypeSplit()[0]}),this.getAssignmentsIssueTypes().length&&this.setState({willCreateAssignmentType:this.getAssignmentsIssueTypes()[0]})),(0,Y.default)(d,s)||this.setState({attachmentsState:this.combineThirdLinks(r.files,r.thirdLinks)})}},{key:"updateDetailInfo",value:function(e,t){var a=this;this.setState(xt({detailInfoState:t,attachmentsState:(0,s.default)(t.files)},this.isDeleteInFilePreview?{isFilePreviewVisible:!1}:null),(function(){a.isDeleteInFilePreview=!1,a.initAttributesData(t),a.getSubItemsList(e,t.type),a.getSubTasksList(e)}))}},{key:"initAttributesData",value:function(e){var t,a,n,r;this.setState({attributes:{assignee:e.assignee&&e.assignee.id||void 0,priority:void 0!==e.priority?e.priority:void 0,defectKindIds:e.defectKinds&&e.defectKinds.length&&e.defectKinds.map((function(e){return e.id+""}))||[],defectPhaseId:e.defectPhase&&e.defectPhase.id+""||void 0,projectModule:e.projectModule&&e.projectModule.id||void 0,requirementType:e.requirementType&&e.requirementType.id||void 0,dueDate:e.dueDate||void 0,startDate:e.startDate||void 0,labels:e.labels&&!!e.labels.length&&e.labels.map((function(e){return e.id}))||[],watchers:e.watchers&&!!e.watchers.length&&e.watchers.map((function(e){return e.id}))||[],workingHours:e.workingHours,fields:e.issueSchemeFields||{},progress:e.progress,wuKongReloadId:e.wuKongReloadValue,estimatedWorkHour:(null===e||void 0===e?void 0:e.estimatedWorkHour)||void 0,defectSourceId:(null===e||void 0===e||null===(t=e.defectSource)||void 0===t?void 0:t.id)||void 0,systemsId:null===(a=e.systemDTO)||void 0===a?void 0:a.systemId,participants:e.participants||[],programId:e.programId,selectedProgram:e.program,milestone:null===(n=e.milestone)||void 0===n?void 0:n.id,groupTeamId:null===(r=e.groupTeam)||void 0===r?void 0:r.id,softwareUnitDTO:null===e||void 0===e?void 0:e.softwareUnitDTO},assignee:e.assignee,watchers:e.watchers||[]})}},{key:"changeAttributes",value:function(e){var t,a=this,n=e.isCustom,r=e.type,o=e.value,i=e.issueFieldId,l=e.customValue,c=e.operationType,s=e.specCallback,d=this.state.attributes,f=this.props.requirementSchemeFieldArchives;if(!this.validateDefect()){var p;if(n){var m=d.fields,v=o;!o&&(0,X.default)(m[i])?v=[]:!o&&((0,J.default)(m[i])||(0,Q.default)(m[i])||(0,K.default)(m[i]))&&(v=null),f[i].issueField.componentType!==$e.PROPERTY_TYPE_CONSTANTS.SELECT_MEMBER_SINGLE&&f[i].issueField.componentType!==$e.PROPERTY_TYPE_CONSTANTS.SELECT_ITERATION_SINGLE||(v=o?o.id:null),f[i].issueField.componentType!==$e.PROPERTY_TYPE_CONSTANTS.SELECT_MEMBER_MULTI&&f[i].issueField.componentType!==$e.PROPERTY_TYPE_CONSTANTS.SELECT_ITERATION_MULTI||(v=o?o.map((function(e){return e.id})):[]),p={customFieldValueMap:[{id:i,content:v}]}}else switch(r){case"participants":p=(0,u.default)({},r,o?o.map((function(e){return null===e||void 0===e?void 0:e.id})):[]);break;case"softwareUnitDTO":p={softwareUnitIds:o?o.map((function(e){return null===e||void 0===e?void 0:e.id})):[]};break;case"requirementType":case"priority":case"assignee":p=xt({},"requirementType"===r?{requirementTypeId:o||0}:(0,u.default)({},r,o||0));break;case"labels":case"watchers":var h=d.labels,g=d.watchers,E="labels"===r?"labelIds":"watchers",y="labels"===r?"delLabelIds":"delWatchers",b="labels"===r?h:g,I=Array.from(new Set(b.concat(o)));if(o)if(I.length===b.length){var S=b.findIndex((function(e){return!o.includes(e)}));p=(0,u.default)({},y,[b[S]])}else p=(0,u.default)({},E,[o[o.length-1]]),"watchers"===r&&(o=I);else p=(0,u.default)({},y,b);break;case"workingHours":p={workingHours:(null===(t=o)||void 0===t?void 0:t.workingHours)||0,estimatedWorkHour:o||void 0};break;case"projectModule":p={projectModuleId:o||0};break;case"progress":p={progress:o||0};break;case"systemsId":p={systemsId:o||0};break;case"groupTeamId":p={groupTeamId:o||0};break;case"programId":p={programId:o.id?o.id:o,milestoneId:0},c&&(p.operate=c);break;case"milestone":p={milestoneId:o||0};break;case"defectKindIds":p={defectKindIds:o||[],defectPhaseId:l};break;case"defectPhaseId":p={defectPhaseId:o||0,defectKindIds:[]};break;default:p=(0,u.default)({},r,o)}this.setState({attributes:xt(xt({},d),n?{fields:xt(xt({},d.fields),{},(0,u.default)({},i,o))}:(0,u.default)({},r,o))}),this.updateRequirement(p).then((function(){s&&s(),"softwareUnitDTO"===r&&a.getCodeRepoSetting()}))}}},{key:"fetchAssociatedTestCase",value:function(e){var t=this;if(e)return 0===e.code&&this.setState({associatedTestCase:e.data}),void this.dataLoad("associateTestCase");var a=this.props.currentProject,n=this.state.detailInfoState.code;(0,F.associatedTestCase)(a.id,n).then((function(e){var a=e.data;t.setState({associatedTestCase:a})})).finally((function(){t.dataLoad("associateTestCase")}))}},{key:"fetchBlockingRelationList",value:function(){var e=this,t=this.props.currentProject,a=this.state.detailInfoState;(0,Oe.fetchBlockRelation)(t.id,a.code,{blockType:"ALL"}).then((function(t){var a=t.data;e.setState({blockBeforeList:a.blocked_by,blockAfterList:a.blocks},(function(){e.dataLoad("blockingRelation")}))}),(function(){e.dataLoad("blockingRelation")}))}},{key:"getIssueStatusTransfers",value:function(e){var t=this;if(!e){var a=this.props,n=a.issueCode,r=a.currentProject;return(0,W.fetchIssueStatusTransfers)(r.id,n).then((function(e){var a=e.data;t.setState({requirementStatusTransfers:a})}))}0===e.code&&this.setState({requirementStatusTransfers:e.data})}},{key:"callback",value:function(e,t){var a=this.props.updateCallback;a&&a(e,t)}},{key:"onNameChange",value:function(e){var t=(0,H.default)(this.state.detailInfoState,(function(t){t.name=e.target.value}));this.setState({detailInfoState:t})}},{key:"submitTitleChange",value:function(){var e=this,t=this.state.detailInfoState,a=this.props.detailInfo;t.name&&t.name.length<=128?t.name!==a.name&&this.updateRequirement({name:t.name.trim()},(function(){e.titleInputRef&&e.titleInputRef.current&&(e.titleInputRef.current.blur(),e.setState({noHoverIcon:!0},(function(){setTimeout((function(){e.setState({noHoverIcon:!1})}),0)}))),e.setState({detailInfoState:xt(xt({},t),{},{name:t.name.trim()})})})):(0,B.warning)((0,I.t)("\u8bf7\u8f93\u5165\u4e0d\u8d85\u8fc7128\u4f4d\u7684\u9700\u6c42\u540d\u79f0"))}},{key:"onStatusChange",value:function(e){return this.updateRequirement(e)}},{key:"onVisibleChange",value:function(){this.setState({tooltipTitle:(0,I.t)("\u590d\u5236\u94fe\u63a5")})}},{key:"onCopyClick",value:function(){this.setState({tooltipTitle:(0,I.t)("\u5df2\u590d\u5236")})}},{key:"updateDescription",value:function(e){var t=this,a=this.props,n=a.currentProject,r=a.issueCode;return(0,W.modifyIssueDescription)(n.id,r,xt({},e)).then((function(e){return(0,kt.clearLocalStorage)(t.props),t.getResourceReference(),e}))}},{key:"deleteRequirement",value:function(){var e=this,t=this.props,a=t.currentProject,n=t.projectPath,r=t.refreshCallback,o=t.iterationCode,i=t.location,l=i.pathname,c=i.search,s=t.browserRouter,u=t.callFrom,d=this.state.detailInfoState,f=(0,ue.currentListPath)(l);(0,F.deleteRequirement)(a.id,d.code).then((function(){if((0,B.success)((0,I.t)("\u5220\u9664\u6210\u529f")),rt.KA_OA_SYNC_ENABLED){var t=e.getRequestId();e.deleteOASyncRequestId(t)}if("outer"===u)(0,Le.emitFromPM)({type:"closeSlide"});else if(/detail\/subissues/.test(l))s.push("".concat(n,"/epics/issues/").concat(d.epic.code,"/detail"));else{var a=-1!==f.indexOf("iterations")?"iterations":"releases";s.push("".concat(n,"/").concat(o?"".concat(a,"/").concat(o,"/issues"):"".concat(f,"/issues")).concat(c))}e.setState({isFilePreviewVisible:!1}),r(!0)}))}},{key:"updateRequirement",value:function(e,t){var a=this,n=this.props.currentProject,r=this.state.detailInfoState;return(0,F.updateRequirementDetail)(n.id,r.code,e).then((function(t){var n=t.data;return n.files=a.combineThirdLinks(n.files,n.thirdLinks),a.callback(n,e.statusId),a.getActivityList(),a.fetchManHourRecords(),a.getSplitIssueList(),a.getCodeRepoSetting(),(0,B.success)((0,I.t)("\u66f4\u65b0\u6210\u529f")),t}),(function(t){var n=t.code,o=t.data,i=t.msg,l=a.state.attachmentsState;return 8015===n?o.issue_status_id===e.statusId?(a.callback(null,e.statusId),a.getActivityList(),(0,B.success)((0,I.t)("\u66f4\u65b0\u6210\u529f"))):((0,B.danger)((0,I.t)("\u66f4\u65b0\u5931\u8d25\uff0c\u5f53\u524d\u72b6\u6001\u4e0d\u6b63\u786e\u3002")),a.callback(null,o.issue_status_id),a.getActivityList()):((0,B.danger)((0,ne.getErrorMessage)(i)),a.setState({detailInfoState:r,attachmentsState:(0,s.default)(l.filter((function(e){return e.fileId>0})))},(function(){a.initAttributesData(r)}))),t})).finally((function(){"function"===typeof t&&t()}))}},{key:"showRequirementSelector",value:function(e,t){this.setState({parentSelectorStatus:e,isParentModified:!!t,currentSubTask:t||null})}},{key:"onParentUpdate",value:function(){var e=this.props,t=e.projectPath,a=e.location.pathname,n=e.browserRouter,r=e.updateCallback,o=this.state.detailInfoState;"function"===typeof r&&(/detail\/subissues/.test(a)?n.push("".concat(t,"/epics/issues/").concat(o.epic.code,"/detail")):this.getActivityList(),r())}},{key:"handleModifyParentIssue",value:function(){var e=(0,l.default)(o.default.mark((function e(t){var a,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=this.state.currentSubTask,n=this.props.currentProject.id,e.next=5,(0,W.modifyParentIssue)(n,a.code,{parentCode:t.code});case 5:this.showRequirementSelector(!1),this.actionCallback(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),window.console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAssociateSubItem",value:function(){var e=this,t=this.props.currentProject,a=this.state.detailInfoState;(0,F.cancelAssociateSubItem)(t.id,a.code).then((function(){(0,B.success)((0,I.t)("\u53d6\u6d88\u5173\u8054\u6210\u529f")),e.callback(),e.getActivityList()}))}},{key:"handleEditCommentCallback",value:function(e){var t=this;this.getActivityList((function(){setTimeout((function(){(0,re.scrollRelatedToTopMenu)("comment-".concat(e),0,t.scrollRef.current)}))})),this.getResourceReference()}},{key:"postComment",value:function(e,t,a,n,r){var o=this;return(0,F.addComment)({projectID:e,requirementCode:t,content:a,parentID:n}).then((function(e){r&&r(),o.getActivityList((function(){setTimeout((function(){(0,re.scrollRelatedToTopMenu)("comment-".concat(e.data.id),0,o.scrollRef.current)}))})),o.getResourceReference()}))}},{key:"deleteComment",value:function(e,t,a,n){var r=this;(0,F.deleteComment)(e,t,a).then((function(){n&&n(),r.getResourceReference(),r.getActivityList()}))}},{key:"getActivityList",value:function(e){var t=this,a=this.props.issueCode,n=this.props.currentProject.id;return(0,F.fetchRequirementsActitvites)(n,a).then((function(a){t.setState({activities:a.data},(function(){e&&e()})),t.dataLoad("logs")}))}},{key:"getResourceReference",value:function(e){var t=this,a=this.state.detailInfoState,n=this.props.currentProject,r=e&&e[It.default.fetchCitedResourceReference],o=e&&e[It.default.fetchCitingResourceReference];return r&&o?new Promise((function(e){0===r.code&&0===o.code&&(t.setState({citedSources:r.data,citingSources:o.data}),e())})):Promise.all([(0,W.fetchCitedResourceReference)(n.id,a.code),(0,W.fetchCitingResourceReference)(n.id,a.code)]).then((function(e){t.setState({citedSources:e[0].data,citingSources:e[1].data})}))}},{key:"onRemoveReference",value:function(){(0,B.success)((0,I.t)("\u53d6\u6d88\u5173\u8054\u6210\u529f")),this.getResourceReference(),this.getActivityList(),this.getSplitIssueList()}},{key:"combineThirdLinks",value:function(e,t){var a;t&&Array.isArray(t)||(t=[]);var n=t.map((function(e){var t="MODAO"===e.thirdType,a="CODESIGN"===e.thirdType,n="";return t&&(n=e.title||(0,I.t)("\u58a8\u5200\u9644\u4ef6")),a&&(n=e.title),xt(xt({},e),{},{isModao:t,isCodesign:a,fileId:e.id,name:n,preview:t&&e.link})})),r=[];null!==(a=this.state)&&void 0!==a&&a.meetingResource&&(r=this.state.meetingResource||[]);var o=[].concat((0,s.default)(e),(0,s.default)(n),(0,s.default)(r));return o.sort((function(e,t){return(e.createdAt||e.created_at)-(t.createdAt||t.created_at)})),o}},{key:"fileUploadSpec",value:function(e){var t=this.state.attachmentsState;this.setState({attachmentsState:[].concat((0,s.default)(t),(0,s.default)(e))})}},{key:"handleDeleteAttachment",value:function(e,t,a){a?this.handleDeleteMeetingResource(e):t?this.handleDeleteModao(e):this.updateRequirement({delFileIds:[e]})}},{key:"handleDeleteMeetingResource",value:function(e){var t=this,a=this.props,n=a.currentProject.name,r=a.issueCode;(0,ge.deleteTencentMeetingResource)(n,r,e).then((function(){(0,B.success)((0,I.t)("\u5220\u9664\u6210\u529f")),t.setState({attachmentsState:t.state.attachmentsState.filter((function(t){return!((t.isSummary||t.isVideo)&&t.fileId===e)}))}),t.getActivityList()}))}},{key:"handleDeleteModao",value:function(e){var t=this,a=this.props,n=a.currentProject.id,r=a.issueCode;(0,F.deleteModao)(n,r,e).then((function(){(0,B.success)((0,I.t)("\u5220\u9664\u6210\u529f")),t.setState({attachmentsState:t.state.attachmentsState.filter((function(t){return!((t.isModao||t.isCodesign)&&t.fileId===e)}))}),t.getActivityList()}))}},{key:"onFileDropSuccessSpec",value:function(e){var t=this;if(e.isCanceled)this.setState({attachmentsState:(0,H.default)(this.state.attachmentsState,(function(t){var a=t.findIndex((function(t){return t.timestamp===e.timestamp}));t.splice(a,1)}))});else if(e.isModao||e.isCodesign){(0,B.success)((0,I.t)("\u66f4\u65b0\u6210\u529f"));var a=this.props,n=a.currentProject.id,r=a.issueCode;(0,W.fetchIssueDetailByCode)(n,r,{withDescriptionMarkup:!0}).then((function(e){var a=e.data;t.setState({attachmentsState:t.combineThirdLinks(a.files,a.thirdLinks)},(function(){t.scrollToAttechment()}))})),this.getActivityList()}else this.updateRequirement({fileIds:[e.fileId]},(function(){t.scrollToAttechment()}))}},{key:"onFileDropFailSpec",value:function(e){var t=e.timestamp;this.setState({attachmentsState:(0,H.default)(this.state.attachmentsState,(function(e){var a=e.findIndex((function(e){return e.timestamp===t}));e.splice(a,1)}))})}},{key:"onFileDropDeleteSpec",value:function(e){var t=e.fileId,a=e.isModao,n=e.isCodesign,r=e.isSummary,o=e.isVideo;this.handleDeleteAttachment(t,a||n,r||o)}},{key:"onFileDropCancelSpec",value:function(e){var t=e.timestamp;this.setState({attachmentsState:(0,H.default)(this.state.attachmentsState,(function(e){var a=e.findIndex((function(e){return e.timestamp===t}));e[a].isCanceled=!0}))})}},{key:"filePreviewHideSpec",value:function(e){this.setState({isFilePreviewVisible:e})}},{key:"previewItem",value:function(e){this.setState({previewFileID:e,isFilePreviewVisible:!0})}},{key:"handleDelInPreviewFileSpec",value:function(){var e=this,t=this.state.deleteFileId;this.isDeleteInFilePreview=!0,this.updateRequirement({delFileIds:[t]},(function(){e.setState({showDeleteConfirmModal:!1,deleteFileId:void 0})}))}},{key:"handleDeleteAttachmentConfirm",value:function(e,t){this.setState({showDeleteConfirmModal:!0,deleteFileId:t})}},{key:"getSubItemsList",value:function(e,t){var a=this,n=this.props.currentProject.id;return e&&t!==M.ISSUE_TYPE.ASSIGNMENT?(0,F.fetchSubItemsList)(n,e).then((function(e){var t=e.data;a.setState({subItems:(0,s.default)(t.subTasks)})})).catch((function(e){(0,B.warning)((0,ne.getErrorMessage)(e.msg))})):""}},{key:"handleSubTasksCallback",value:function(){var e=this;this.setState({isCreateSubTasksVisible:!0,subTasksInput:""},(function(){(0,re.scrollRelatedToTopMenu)("subtask-elem",200,e.scrollRef.current),e.subtaskInputRef.current&&e.subtaskInputRef.current.focus()}))}},{key:"getVersionList",value:function(e){this.setState({versionList:e})}},{key:"getIterationList",value:function(e){var t=this;if(!e){var a=this.props.currentProject;return(0,W.fetchIterationList)(a.id).then((function(e){t.setState({iterationList:t.formatIterationList(e.data)})}))}0===e.code&&this.setState({iterationList:this.formatIterationList(e.data)})}},{key:"formatIterationList",value:function(e){return e.map((function(e){return{value:e.code,text:e.name,status:e.status,progress:{finished:e.completedCount,processing:e.processingCount,unstart:e.waitProcessCount}}}))}},{key:"onIterationChange",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.props,r=n.currentProject,o=n.iterationCode,i=n.updateCallback,l=this.state.detailInfoState,c=l.iteration&&l.iteration.code||0;if((null===e||void 0===e?void 0:e.value)!==c)if(this.setState({useOld:a}),null===l.iteration&&e&&e.status===St.ITERATION_STATUS.PROCESSING)this.setState({isIterationConfirm:!0,iterationConfirmParams:e});else if(l.iteration&&[St.ITERATION_STATUS.WAIT_PROCESS,St.ITERATION_STATUS.PROCESSING,St.ITERATION_STATUS.COMPLETED].includes(l.iteration.status)&&e&&[St.ITERATION_STATUS.WAIT_PROCESS,St.ITERATION_STATUS.PROCESSING,St.ITERATION_STATUS.COMPLETED].includes(e.status)&&([St.ITERATION_STATUS.WAIT_PROCESS,St.ITERATION_STATUS.COMPLETED].includes(l.iteration.status)&&e.status===St.ITERATION_STATUS.PROCESSING||l.iteration.status===St.ITERATION_STATUS.PROCESSING&&[St.ITERATION_STATUS.WAIT_PROCESS,St.ITERATION_STATUS.PROCESSING,St.ITERATION_STATUS.COMPLETED].includes(e.status)))this.setState({isIterationConfirm:!0,iterationConfirmParams:e});else if(void 0===e&&l.iteration&&l.iteration.status===St.ITERATION_STATUS.PROCESSING)this.setState({isIterationConfirm:!0,iterationConfirmParams:e});else if(a)(0,W.updateIteration)(r.id,l.code,e?e.value:0).then((function(e){var a=e.data;(0,B.success)((0,I.t)("\u66f4\u65b0\u6210\u529f")),i(a),t.callback(),t.getActivityList(),o&&t.props.refreshCallback&&t.props.refreshCallback()}));else{var s={iterationCode:e?e.value:0};this.updateRequirement(s)}}},{key:"handleIterationChangeConfirm",value:function(){var e=this,t=this.props,a=t.currentProject,n=t.iterationCode,r=t.updateCallback,o=this.state,i=o.detailInfoState,l=o.iterationConfirmParams;if(o.useOld)(0,W.updateIteration)(a.id,i.code,l?l.value:0).then((function(t){var a=t.data;(0,B.success)((0,I.t)("\u66f4\u65b0\u6210\u529f")),r(a),e.callback(),e.getActivityList(),n&&e.props.refreshCallback&&e.props.refreshCallback(),e.setState({iterationConfirmParams:null})}));else{var c={iterationCode:l?l.value:0};this.updateRequirement(c)}}},{key:"toggleRecord",value:function(){var e=this.state.isHistoryRecordVisible;this.setState({isHistoryRecordVisible:!e})}},{key:"viewRecord",value:function(e){var t=e.currentId;this.setState({isHistoryRecordVisible:!0,currentLogId:t})}},{key:"handleRemoveEpic",value:function(){var e=this,t=this.props,a=t.currentProject,n=t.projectPath,r=t.location.pathname,o=t.browserRouter,i=this.state.detailInfoState;(0,Ee.deleteIssueFromEpic)(a.id,i.epic.code,i.code).then((function(){(0,B.success)((0,I.t)("\u53d6\u6d88\u5173\u8054\u6210\u529f")),/detail\/subissues/.test(r)?(o.push("".concat(n,"/epics/issues/").concat(i.epic.code,"/detail")),e.callback()):(e.callback(),e.getActivityList())}))}},{key:"openSlideslip",value:function(){this.setState({showSideslip:!0})}},{key:"closeSlideslip",value:function(){this.setState({showSideslip:!1})}}]),a}(S.Component),y.propTypes=xt(xt({onFullScreenChange:w.default.func,detailInfo:w.default.object,requirementList:w.default.array,projectPath:w.default.string,params:w.default.object,expanded:w.default.bool,isDetail:w.default.bool,currentProject:w.default.object,labels:w.default.array,user:w.default.object,requirementSchemeFieldArchives:w.default.object,requirementUpdateFieldIDs:w.default.array,requirementTypes:w.default.array,getRequirementScheme:w.default.func,getRequirementTypes:w.default.func,updateCallback:w.default.func,refreshCallback:w.default.func,enterpriseGlobalKey:w.default.string,enterpriseName:w.default.string,watermark:w.default.string,payed:w.default.bool,location:w.default.object,issueCode:w.default.oneOfType([w.default.number,w.default.string]),iterationCode:w.default.oneOfType([w.default.number,w.default.string]),autoshowComment:w.default.object,autoToggleComment:w.default.func,domID:w.default.string,flashAnchor:w.default.func},ee.WithProjectPermissionProps),{},{currentProjectCooperateSettings:w.default.object,browserRouter:w.default.object,callFrom:w.default.string,getLabels:w.default.func,targetData:w.default.object,onCodeChange:w.default.func,ramOnline:w.default.bool}),y.defaultProps={expanded:!0,requirementList:[],isDetail:!1},E=b))||E)||E)||E)||E)||E)||E)||E)||E)||E)||E),Bt=(0,C.withRouter)((0,T.connect)(Ft)((0,De.default)((0,ke.default)((0,Me.default)((0,Re.default)((0,ye.default)((0,be.FlashAnchorDecorator)(Wt)))))))),Ht=Wt;t.default=Ht},kCWS:function(e,t,a){"use strict";var n=a("mVeg"),r=a("cDcd"),o=a.n(r),i=a("K2gz"),l=a.n(i),c=a("p11V"),s=a.n(c),u=a("PnyR"),d=a.n(u),f=a("wMIR"),p=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i};t.a=function(e){var t=e.wait,a=e.from,i=e.data,c=e.status,u=e.editable,m=e.onRemove,v=p(Object(r.useState)(!1),2),h=v[0],g=v[1],E=p(Object(r.useState)(!1),2),y=E[0],b=E[1];return o.a.createElement("div",{className:l()(s.a.wrapper,t&&s.a.wrapperWait),onMouseEnter:function(){"create"===a||"creview"===a?"OUTER"===i.userType&&g(!0):b(!0)},onMouseLeave:function(){b(!1),g(!1)}},c&&o.a.createElement(f.a,{type:c,className:s.a.status}),o.a.createElement("img",{className:s.a.avatar,src:i.avatar||d.a}),o.a.createElement("div",{className:s.a.name},i.name),"OUTER"===i.userType&&o.a.createElement("div",{className:s.a.external},Object(n.t)("\u5916\u90e8")),"OUTER"===i.userType&&"create"!==a&&"creview"!==a&&o.a.createElement("div",{className:s.a.externalIcon,onMouseEnter:function(){b(!1),g(!0)},onMouseLeave:function(){g(!1),b(!0)}}),u&&m&&o.a.createElement("div",{className:s.a.remove,onClick:function(){return m(i)}}),!u&&o.a.createElement("div",{className:s.a.blank}),y&&o.a.createElement("div",{className:s.a.tip},"APPROVED"===i.approvalStatus&&Object(n.t)("{{name}} \u5df2\u540c\u610f",{name:i.name}),"REFUSED"===i.approvalStatus&&Object(n.t)("{{name}} \u5df2\u62d2\u7edd",{name:i.name}),"NONE"===i.approvalStatus&&Object(n.t)("{{name}} \u5c1a\u672a\u5904\u7406",{name:i.name})),h&&o.a.createElement("div",{className:s.a.info},o.a.createElement("div",{className:s.a.infoTitle},o.a.createElement("div",{className:s.a.infoTitleName,title:i.name},i.name),o.a.createElement("div",{className:s.a.infoTitleIcon},Object(n.t)("\u5916\u90e8"))),o.a.createElement("div",{className:s.a.infoEmail,title:i.email},i.email)))}},kgDq:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d"),a("bWfx");var o,i,l,c=n(a("RIqP")),s=n(a("lwsE")),u=n(a("W8MJ")),d=n(a("PJYZ")),f=n(a("7W2i")),p=n(a("a1gu")),m=n(a("Nsbk")),v=a("mVeg"),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=j(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),g=n(a("17x9")),E=a("dtw8"),y=n(a("K2gz")),b=n(a("7kQb")),I=n(a("EyEP")),S=n(a("mFAe")),T=n(a("MH4q")),w=n(a("KUqB")),C=a("IgEJ"),O=a("5kKY"),N=a("DTVk"),P=n(a("Qkhu"));function j(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(j=function(e){return e?a:t})(e)}function D(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,m.default)(e);if(t){var r=(0,m.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,p.default)(this,a)}}var k=(0,n(a("OajT")).default)((l=i=function(e){(0,f.default)(a,e);var t=D(a);function a(){var e;return(0,s.default)(this,a),(e=t.call(this)).state={showDeleteModal:!1},e.handleSelect=e.handleSelect.bind((0,d.default)(e)),e.getUrlByType=e.getUrlByType.bind((0,d.default)(e)),e}return(0,u.default)(a,[{key:"getUrlByType",value:function(e){var t=e.targetType,a=e.targetProjectName,n=e.code,r=t.toUpperCase(),o="/p/".concat(a);if(this.props.stopLink)return"";switch(r){case N.IssueType.requirement:return"PRD_ISSUE"===this.props.pro_issue?"/requiremanage/production-problem?requirementCode=".concat(n):a===C.PROJECT_NAME.REQUIRMENT_MANAGEMENT?"/requiremanage?requirementCode=".concat(n):"".concat(o,"/requirements/issues/").concat(n,"/detail");case N.IssueType.prd_requirement:case N.IssueType.intention:return a===C.PROJECT_NAME.REQUIRMENT_MANAGEMENT?"/requiremanage?requirementCode=".concat(n):"".concat(o,"/requirements/issues/").concat(n,"/detail");case N.IssueType.assignment:return"".concat(o,"/assignments/issues/").concat(n,"/detail");case N.IssueType.bug:return"".concat(o,"/bug-tracking/issues/").concat(n,"/detail");default:return""}}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.currentProject,r=t.style,o=t.isDelete,i=t.headerTitle,l=t.sectionExpanded,s=t.SectionToggletrigger,u=this.state.showDeleteModal,d=function(e){return n.name===e.targetProjectName?"#":"".concat(e.targetProjectName,"#")},f=(0,c.default)(o?[{id:"remove",name:(0,v.t)("\u89e3\u9664\u5173\u8054")}]:[]);return h.default.createElement("div",{className:b.default.wrapper},h.default.createElement("div",{className:I.default.header},h.default.createElement(s,null),h.default.createElement("div",{className:I.default.text},(0,v.t)(i))),l&&h.default.createElement("div",{className:b.default.body},h.default.createElement("div",{className:b.default.list},h.default.createElement("ul",{className:b.default.referenceList,style:r||{}},a.map((function(t,a){return h.default.createElement("li",{key:a},h.default.createElement("div",{className:(0,y.default)(b.default.icon,t.deletedAt>0&&b.default.deleteStyle)},h.default.createElement(w.default,{type:t.iconType.toLowerCase()})),t.deletedAt>0?h.default.createElement("span",{className:(0,y.default)(b.default.resourceId,b.default.deleteStyle)},d(t)+t.code):h.default.createElement(E.Link,{className:b.default.resourceId,to:e.getUrlByType(t),target:"_blank"},h.default.createElement("span",null,d(t)+t.code)),t.deletedAt>0?h.default.createElement("span",{className:(0,y.default)(b.default.resourceTitle,b.default.deleteStyle)},t.title):h.default.createElement(E.Link,{className:b.default.resourceTitle,to:e.getUrlByType(t),target:"_blank"},h.default.createElement("span",null,t.title)),t.deletedAt>0?h.default.createElement("div",{className:(0,y.default)(b.default.resourceStatus,b.default.deleteStatus)},h.default.createElement(T.default,{size:"small",bgColor:"#e9ecf0"},(0,v.t)("\u5df2\u5220\u9664"))):h.default.createElement("div",{className:b.default.resourceStatus},t.statusName&&t.statusType&&h.default.createElement(S.default,{status:{name:t.statusName,id:t.statusId,type:t.statusType}})),!!f.length&&h.default.createElement(O.ItemDropdown,{options:f,onSelect:e.handleSelect,popupStyle:{width:160},portalContainer:function(){return document.querySelector('#scroll-attr-wrap div[class^="spec-main"]')},portalAlign:{top:24,left:-96}}),u&&h.default.createElement(P.default,{show:u,text:(0,v.t)("\u63d0\u793a"),hasType:!1,customTip:(0,v.t)("\u786e\u8ba4\u53d6\u6d88\u5173\u8054 {{title}} \u5417\uff1f",{title:t.title}),onConfirm:function(){return e.removeReference(t)},onClose:function(){e.setState({showDeleteModal:!1})}}))}))))))}},{key:"handleSelect",value:function(e){switch(e.id){case"remove":this.setState({showDeleteModal:!0})}}},{key:"removeReference",value:function(e){(0,this.props.onRemoveReference)(e.code,e.targetProjectId)}}]),a}(h.Component),i.propTypes={currentProject:g.default.object,data:g.default.array,code:g.default.number,onRemoveReference:g.default.func,style:g.default.object,stopLink:g.default.bool,isDelete:g.default.bool,sectionExpanded:g.default.bool,pro_issue:g.default.string},i.defaultProps={isDelete:!0},o=l))||o;t.default=k},kits:function(e,t,a){"use strict";a.d(t,"d",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"e",(function(){return i})),a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return c})),a.d(t,"f",(function(){return s}));var n=a("Z4vw"),r=(a("cI3E"),function(e){return Object(n.get)("/api/platform/project/".concat(e,"/label?type=4&withCount=true"),!1)}),o=function(e,t){return Object(n.post)("/api/project/".concat(e,"/issues/copy/desc?").concat(Object(n.buildParams)({sourceIssueId:t})))},i=function(){return Object(n.get)("/api/platform/project/recent/views/search?pmType=PROJECT&pageSize=200")},l=function(e,t,a){return Object(n.postJSON)("/api/project/".concat(e,"/issues/").concat(t,"/after/copy"),a)},c=function(e){return Object(n.get)("/external/collaboration/api/project/".concat(e,"/iterations/no-page/getIndex?status=WAIT_PROCESS&status=PROCESSING"))},s=function(e,t){return Object(n.postJSON)("/collaboration/api/project/".concat(e,"/member"),{userIds:t},!1,{"CODING-PROJECT-ID":e})}},l2PE:function(e,t,a){e.exports={container:"container-10jJKvsGAe","empty-records":"empty-records-1q_NOHKfFU",emptyRecords:"empty-records-1q_NOHKfFU",empty:"empty-23L3EphXLs","main-header":"main-header-31E_n86nbZ",mainHeader:"main-header-31E_n86nbZ","sub-header":"sub-header-31_aLtr1fz",subHeader:"sub-header-31_aLtr1fz","empty-add":"empty-add-2Io3oep-0Z",emptyAdd:"empty-add-2Io3oep-0Z","add-wrapper":"add-wrapper-2MbP1YaX2k",addWrapper:"add-wrapper-2MbP1YaX2k","icon-wrapper":"icon-wrapper-1vZTQw3K4W",iconWrapper:"icon-wrapper-1vZTQw3K4W",icon:"icon-aqixwQ3Kwi",add:"add-8TbJQwOeqA","record-hours-header":"record-hours-header-24giQqGvhL",recordHoursHeader:"record-hours-header-24giQqGvhL","button-area":"button-area-1q7oKv6cbN",buttonArea:"button-area-1q7oKv6cbN",confirm:"confirm-1VJj37ET62"}},l69I:function(e,t,a){e.exports={checkbox:"checkbox-3CqiNeDoQR","checkbox-disabled":"checkbox-disabled-y5hd_brifT",checkboxDisabled:"checkbox-disabled-y5hd_brifT","checkbox-active":"checkbox-active-1_jecx0hVu",checkboxActive:"checkbox-active-1_jecx0hVu"}},lBUs:function(e,t,a){e.exports=a.p+"966231933d7422bf4c8e2c04ea16a06b.svg"},lD9n:function(e,t,a){e.exports=a.p+"d28862ef9e6737fa2c34b93a212bd64d.svg"},lGCG:function(e,t,a){"use strict";a.r(t),a.d(t,"fetchIssueReviewList",(function(){return r})),a.d(t,"getIssueReviewTypes",(function(){return o})),a.d(t,"createIssueReview",(function(){return i})),a.d(t,"deleteIssueReview",(function(){return l})),a.d(t,"getIssueReviewDetail",(function(){return c})),a.d(t,"processIssueReview",(function(){return s})),a.d(t,"commentIssueReview",(function(){return u})),a.d(t,"canUpdateIssueReview",(function(){return d})),a.d(t,"canResubmitIssueReview",(function(){return f})),a.d(t,"deleteIssueReviewAttachment",(function(){return p})),a.d(t,"getIssueReviewAttachments",(function(){return m})),a.d(t,"withdrawIssueReview",(function(){return v})),a.d(t,"reCreateIssueReview",(function(){return h})),a.d(t,"copyIssueReview",(function(){return g})),a.d(t,"getAttachmentPreview",(function(){return E})),a.d(t,"getAttachmentDownload",(function(){return y})),a.d(t,"getPermissions",(function(){return b}));var n=a("Z4vw"),r=function(e,t){return Object(n.get)("/api/project/".concat(e,"/issues/").concat(t,"/issue-reviews"))},o=function(){return Object(n.get)("/collaboration/api/issue-reviews/types")},i=function(e){return Object(n.postJSON)("/collaboration/api/issue-reviews",e)},l=function(e){return Object(n.del)("/collaboration/api/issue-reviews/".concat(e))},c=function(e){return Object(n.get)("/collaboration/api/issue-reviews/".concat(e))},s=function(e,t,a){return Object(n.postJSON)("/collaboration/api/issue-reviews/".concat(e,"/approval"),t,a)},u=function(e,t,a){return Object(n.postJSON)("/collaboration/api/issue-reviews/".concat(e,"/comment"),t,a)},d=function(e,t){return Object(n.get)("/collaboration/api/issue-reviews/".concat(e,"/could-update"),t)},f=function(e,t){return Object(n.get)("/collaboration/api/issue-reviews/".concat(e,"/could-re-submit"),t)},p=function(e){return Object(n.del)("/collaboration/api/issue-reviews/attachments/".concat(e))},m=function(e){return Object(n.get)("/collaboration/api/issue-reviews/".concat(e,"/files"))},v=function(e,t){return Object(n.postJSON)("/collaboration/api/issue-reviews/".concat(e,"/withdraw"),{},t)},h=function(e){return Object(n.postJSON)("/collaboration/api/issue-reviews/".concat(e,"/re-submit"))},g=function(e){return Object(n.get)("/collaboration/api/issue-reviews/".concat(e,"/copy"))},E=function(e,t){return Object(n.get)("/collaboration/api/issue-reviews/".concat(e,"/files/").concat(t,"/preview"))},y=function(e,t){return Object(n.get)("/collaboration/api/issue-reviews/".concat(e,"/files/").concat(t,"/download"))},b=function(e){return Object(n.get)("/api/platform/permission/project/".concat(e,"/current-user/permissions"))}},lJI2:function(e,t,a){e.exports={checkbox:"checkbox-3meUw5hGgK","checkbox-disabled":"checkbox-disabled-2_otKzrFDr",checkboxDisabled:"checkbox-disabled-2_otKzrFDr","checkbox-active":"checkbox-active-37Pot1_9Dm",checkboxActive:"checkbox-active-37Pot1_9Dm"}},lpQU:function(e,t,a){e.exports=a.p+"5c618f00b00ef90cb2b5ee1a1bdb5607.svg"},mHyL:function(e,t,a){e.exports=a.p+"0af529a2b46a5432a8fb078fb6206e42.svg"},mMyY:function(e,t,a){"use strict";a("RW0V"),a("ioFf"),a("mYba"),a("jm62"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("bWfx"),a("f3/d"),a("0l/t");var o=n(a("lSNA")),i=n(a("J4zp")),l=a("mVeg"),c=n(a("17x9")),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=g(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),u=n(a("sftu")),d=n(a("+9PU")),f=n(a("zmh9")),p=a("oG/b"),m=n(a("cUgn")),v=n(a("Jlc5")),h=n(a("K2gz"));function g(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(g=function(e){return e?a:t})(e)}function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b=function(e){var t=e.show,a=e.onHide,n=e.onSelect,r=e.currentProject,o=e.type,c=(0,s.useState)([]),g=(0,i.default)(c,2),E=g[0],b=g[1],I=(0,s.useRef)(null),S=(0,s.useState)(!1),T=(0,i.default)(S,2),w=T[0],C=T[1];(0,s.useEffect)((function(){t&&(r&&o?(0,p.getExportFields)(r.id,o).then((function(e){var t=e.data;b(t)})):(0,p.getTeamExportFields)().then((function(e){var t=e.data;b(t)})))}),[t]),(0,s.useEffect)((function(){var e=function(){if(I&&I.current){var e=I.current.scrollTop;C(e>0)}};return I&&I.current&&I.current.addEventListener("scroll",e,!0),function(){I&&I.current&&I.current.removeEventListener("scroll",e,!0)}}));var O=function(){a()},N=function(){n(E.filter((function(e){return e.selected})))};return s.default.createElement("div",null,s.default.createElement(u.default,{className:d.default.container,show:t},s.default.createElement(u.default.Header,null,s.default.createElement("div",{className:d.default.header},(0,l.t)("\u9009\u62e9\u5bfc\u51fa\u5c5e\u6027"))),s.default.createElement(u.default.Body,null,s.default.createElement("div",{className:d.default.body},s.default.createElement("div",{className:d.default.selections,ref:I},s.default.createElement("div",{className:(0,h.default)(d.default.item,d.default.itemOne,w?d.default.scrolling:""),key:"all"},s.default.createElement(m.default,{onChange:function(e){var t=E.map((function(t){return y(y({},t),e?{selected:!0}:{selected:!1})}));b(t)},checked:(0,v.default)(E,["selected",!0])}),s.default.createElement("span",{className:d.default.text},(0,l.t)("\u5168\u9009"))),E.map((function(e){return s.default.createElement("div",{className:d.default.item,key:"".concat(e.key,"-").concat(e.name),onClick:function(){var t=y(y({},e),{selected:!e.selected}),a=E.map((function(a){return a.key===e.key&&a.issueFieldId===e.issueFieldId?t:a}));b(a)}},s.default.createElement(m.default,{checked:e.selected}),s.default.createElement("span",{className:d.default.text},("PROJECT"===e.key?(0,l.t)("\u7814\u53d1\u7a7a\u95f4"):e.name)+(e.unit?" (".concat(e.unit,")"):"")))}))))),s.default.createElement(u.default.Footer,null,s.default.createElement("div",null,s.default.createElement(f.default,{className:d.default.gap,onClick:N,disabled:0===E.filter((function(e){return e.selected})).length},(0,l.t)("\u5bfc\u51fa")),s.default.createElement(f.default,{empty:!0,onClick:O},(0,l.t)("\u5173\u95ed"))))))};b.propTypes={type:c.default.string,show:c.default.bool,onHide:c.default.func,onSelect:c.default.func,currentProject:c.default.object};var I=b;t.default=I},mQA3:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),f=n(a("17x9")),p=a("FaIw"),m=n(a("JdeO")),v=a("1qdz");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.itemType;return d.default.createElement("div",{className:v.listItem,key:t.id},d.default.createElement("div",{className:v.dot}),d.default.createElement("div",{className:v.content},d.default.createElement(m.default,{className:"mr-10 ".concat(v.icon)}),t.issueLog&&1===t.issueLog.old?"\u3010\u6e90\u3011":"",d.default.createElement("span",{className:v.user},t.creator.name),d.default.createElement("span",null,(0,u.t)("\u66f4\u65b0\u4e86{{type}}\u7684\u9700\u6c42\u7c7b\u578b\u4e3a",{type:a})),d.default.createElement("span",{className:"ml-10 ".concat(v.moreDot)},t.issueLog.content.name),d.default.createElement("span",{className:v.time},(0,p.timeFormat)(t.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(d.Component);t.default=E,E.propTypes={item:f.default.object,itemType:f.default.string}},mtLS:function(e,t,a){e.exports={root:"root-1H8Qm2Y5nh","expanded-style":"expanded-style-2Y-a4Ww0GG",expandedStyle:"expanded-style-2Y-a4Ww0GG",trigger:"trigger-3uYZ1vwbIY","sub-requirement":"sub-requirement-1boql7w8Hy",subRequirement:"sub-requirement-1boql7w8Hy","subtask-trigger":"subtask-trigger-YSMuAbgsZ9",subtaskTrigger:"subtask-trigger-YSMuAbgsZ9","trigger-icon":"trigger-icon-2M0u-XA0tE",triggerIcon:"trigger-icon-2M0u-XA0tE",dropdown:"dropdown-11vzvBtYgL","delete-style":"delete-style-3bpCm1rXvg",deleteStyle:"delete-style-3bpCm1rXvg",red:"red-3eZSaIcHxf",border:"border-1fXlHuARoe","is-vertical":"is-vertical-21wbNC4nzl",isVertical:"is-vertical-21wbNC4nzl","is-disabled":"is-disabled-1S0RK47s4X",isDisabled:"is-disabled-1S0RK47s4X","option-description":"option-description-33ViD-qlQo",optionDescription:"option-description-33ViD-qlQo",question:"question-1PZbRt9yoL","divide-line":"divide-line-24uwaSUQmj",divideLine:"divide-line-24uwaSUQmj","help-icon":"help-icon-2zyo-FbVkJ",helpIcon:"help-icon-2zyo-FbVkJ",item:"item-1KQfkh8eq4","full-screen-help-icon":"full-screen-help-icon-3EkPwpnMVB",fullScreenHelpIcon:"full-screen-help-icon-3EkPwpnMVB","add-sensitive":"add-sensitive-1NlqFBba9f",addSensitive:"add-sensitive-1NlqFBba9f","min-width-hide":"min-width-hide-2-oVlkqG-e",minWidthHide:"min-width-hide-2-oVlkqG-e"}},n1Xv:function(e,t,a){"use strict";a("I5cv"),a("RW0V"),a("ioFf"),a("mYba"),a("jm62"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("INYr"),a("0l/t"),a("f3/d"),a("bWfx");var o,i,l,c=n(a("lSNA")),s=n(a("lwsE")),u=n(a("W8MJ")),d=n(a("PJYZ")),f=n(a("7W2i")),p=n(a("a1gu")),m=n(a("Nsbk")),v=a("mVeg"),h=W(a("cDcd")),g=a("iR1w"),E=a("7FZc"),y=n(a("Mj5j")),b=n(a("17x9")),I=a("IgEJ"),S=a("xgZS"),T=a("DKcV"),w=W(a("OajT")),C=n(a("NUcW")),O=a("l8Oe"),N=n(a("DDKl")),P=n(a("9kHG")),j=n(a("BkRI")),D=a("vi3I"),k=a("w3Wo"),R=a("Z4vw"),M=n(a("LAmh")),A=n(a("afBQ")),L=n(a("K2gz")),x=n(a("Qkhu")),_=a("nuIr");function F(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(F=function(e){return e?a:t})(e)}function W(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=F(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,m.default)(e);if(t){var r=(0,m.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,p.default)(this,a)}}var Y=(0,w.default)((l=i=function(e){(0,f.default)(a,e);var t=U(a);function a(e){var n;return(0,s.default)(this,a),(n=t.call(this,e)).wrapperRef=h.default.createRef(),n.getListHeight=function(){return Math.min(345,36*n.state.copySubItems.length)},n.getCurrentCode=function(){return n.props.params.subIssueCode},n.renderDragDropItem=function(e){var t=e.index,a=e.style,r=e.data,o=n.props,i=o.isPermissible,l=o.requirementCode,c=o.parentType,s=o.isDetail,u=o.projectPath,d=o.currentProject,f=n.getCurrentCode(),p=i([{function:T.ProjectPermissionFunction.PROJECT_ISSUE,action:T.ProjectPermissionAction.UPDATE}]),m=i([{function:T.ProjectPermissionFunction.PROJECT_ISSUE,action:T.ProjectPermissionAction.DELETE}]),v=n.state,g=v.copySubItems,E=v.moving,y=v.transfers,b=g[t],I=r.isFullScreen;return h.default.createElement(P.default,{key:b.code,index:b.code,id:b.code,containerId:"subtasks",handleMove:n.handleMove,handleMoveEnd:n.handleMoveEnd,handleMoveStart:n.handleMoveStart,style:a},(function(e){var t=e.isDragging;return h.default.createElement(A.default,{parentCode:l,parentType:c,currentCode:f,currentProject:d,projectPath:u,projectID:n.props.projectID,moving:E,isDetail:s,item:b,transferStatus:y["".concat(b.projectId,"-").concat(b.code)],getTransferStatus:n.getIssueStatusTransfers,resetTransferStatus:n.resetTransferStatus,isDragging:t,onHourChange:n.onHourChange,onStatusChange:n.onStatusChange,handleSubItem:n.handleSubItem,allowUpdate:p,allowDelete:m,isFullScreen:I,disabledBottomSpace:I?_.FULL_SCREEN.disabledBottomSpace:0})}))},n.handleDelete=function(){var e=n.props,t=e.projectID,a=e.callback,r=n.state.item;(0,D.deleteSubtask)(t,r.code).then((function(){(0,S.success)((0,v.t)("\u5df2\u5220\u9664")),n.setState({showModal:!1,item:void 0}),a()}),(function(e){window.console.log(e)}))},n.openConfirmModal=function(e){n.setState({showModal:!0,item:e})},n.handleMove=function(e,t,a){n.scheduleUpdate({dragItem:e,dropItem:t,callback:a})},n.scheduleUpdate=function(e){n.pendingUpdateObj=e,n.requestedFrame||(n.requestedFrame=requestAnimationFrame(n.handleDrawFrame))},n.handleDrawFrame=function(){var e=n.pendingUpdateObj,t=e.dragItem,a=e.dropItem,r=e.callback,o=t.id,i=a.id,l=n.state.copySubItems,c=l.findIndex((function(e){return e.code===o})),s=l.findIndex((function(e){return e.code===i})),u=l.splice(c,1)[0];l.splice(s,0,u),r&&r(),n.setState({copySubItems:l}),n.pendingUpdateObj=void 0,n.requestedFrame=void 0},n.handleMouseOver=function(){n.setState({moving:!1})},n.handleMoveStart=function(e,t){var a=n.state.copySubItems.findIndex((function(e){return e.code===t}));n.wrapperRef&&n.wrapperRef.current&&n.wrapperRef.current.removeEventListener("mouseover",n.handleMouseOver),n.setState({startContainerId:e,startIndex:a,moving:!0})},n.handleMoveEnd=function(e){var t=e.id;n.wrapperRef&&n.wrapperRef.current&&n.wrapperRef.current.addEventListener("mouseover",n.handleMouseOver);var a=n.state,r=a.copySubItems,o=a.startIndex,i=n.props.handleSort,l=r.findIndex((function(e){return e.code===t}));l!==o&&i&&i(r[l].code,l+1<r.length?r[l+1].code:null)},n.onHourChange=function(){var e=n.props.callback;e&&e()},n.onStatusChange=function(e,t){var a=n.props,r=a.projectID,o=a.callback,i=a.requirementCode;return(0,D.updateSubtaskDetail)(r,t.code,H({parentCode:i},e)).then((function(e){return(0,S.success)((0,v.t)("\u66f4\u65b0\u6210\u529f")),o&&o(),e}),(function(e){var t=e.msg;return(0,S.danger)((0,R.getErrorMessage)(t)),e}))},n.getIssueStatusTransfers=function(e){var t=e.projectId,a=e.code,r=n.state.transfers;return(0,k.fetchIssueStatusTransfers)(t,a).then((function(e){var o=e.data,i="".concat(t,"-").concat(a);n.setState({transfers:H(H({},r),{},(0,c.default)({},i,o))})}))},n.resetTransferStatus=function(e){var t=e.projectId,a=e.code,r=n.state.transfers,o="".concat(t,"-").concat(a);n.setState({transfers:H(H({},r),{},(0,c.default)({},o,[]))})},n.state={copySubItems:(0,j.default)(e.subItems||[]),showModal:!1,item:void 0,transfers:{}},n.interrelateSubItems=n.interrelateSubItems.bind((0,d.default)(n)),n.handleSubItem=n.handleSubItem.bind((0,d.default)(n)),n}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,t=e.subItems,a=e.sectionExpanded,n=e.isPermissible,r=e.isEditing,o=this.state.copySubItems,i=n([{function:T.ProjectPermissionFunction.PROJECT_ISSUE,action:T.ProjectPermissionAction.UPDATE}]),l=n([{function:T.ProjectPermissionFunction.PROJECT_ISSUE,action:T.ProjectPermissionAction.DELETE}]);return h.default.createElement(O.DndProvider,{backend:N.default},h.default.createElement("div",{className:y.default.subitemWrapper,ref:this.wrapperRef},this.renderHeader(),a&&(t.length?this.renderSubItems():!r&&h.default.createElement("p",{className:y.default.emptyTip},(0,v.t)("\u5c1a\u672a\u5173\u8054\u5b50\u5de5\u4f5c\u9879\uff0c\u53ef\u70b9\u51fb\u4e0a\u65b9\u6309\u94ae\u521b\u5efa\u5e76\u5173\u8054\u4e00\u4e2a\u5b50\u5de5\u4f5c\u9879"))),h.default.createElement("div",{className:y.default.subitemLayer},i&&this.wrapperRef.current&&h.default.createElement(M.default,{items:o,allowDelete:l,width:this.wrapperRef.current.getBoundingClientRect().width}))))}},{key:"renderHeader",value:function(){var e=this,t=this.props,a=t.SectionToggletrigger,n=t.isPermissible,r=t.iterationFinished,o=this.state.copySubItems,i=n([{function:T.ProjectPermissionFunction.PROJECT_ISSUE,action:T.ProjectPermissionAction.UPDATE}]);return h.default.createElement("div",{className:y.default.subitemHeader},h.default.createElement("div",{className:(0,L.default)(y.default.title,i?"":y.default.titleNoRight)},(0,v.t)("\u5b50\u5de5\u4f5c\u9879"),h.default.createElement(a,null)),h.default.createElement("div",{className:y.default.operation},i&&!r&&h.default.createElement("div",{className:y.default.createButton,onClick:function(){return e.interrelateSubItems()}}),i&&r&&h.default.createElement(E.TooltipTrigger,{title:(0,v.t)("\u8fed\u4ee3\u5df2\u5b8c\u6210\uff0c\u65e0\u6cd5\u6dfb\u52a0\u5b50\u5de5\u4f5c\u9879")},h.default.createElement("div",{className:(0,L.default)(y.default.createButton,y.default.disabled)})),!!o.length&&h.default.createElement("div",{className:y.default.progress},h.default.createElement(C.default,{total:o.filter((function(e){return!("COMPLETED"===e.issueStatus.type&&"\u5df2\u53d6\u6d88"===e.issueStatus.name)})).length,completed:o.filter((function(e){return"COMPLETED"===e.issueStatus.type&&"\u5df2\u53d6\u6d88"!==e.issueStatus.name})).length}))))}},{key:"renderSubItems",value:function(){var e=this,t=this.props,a=t.projectPath,n=t.isPermissible,r=t.isDetail,o=t.parentType,i=t.requirementCode,l=this.getCurrentCode(),c=this.state,s=c.copySubItems,u=c.showModal,d=n([{function:T.ProjectPermissionFunction.PROJECT_ISSUE,action:T.ProjectPermissionAction.UPDATE}]),f=n([{function:T.ProjectPermissionFunction.PROJECT_ISSUE,action:T.ProjectPermissionAction.DELETE}]);return h.default.createElement("div",{className:y.default.subitemDetail},d&&s&&!!s.length&&s.length>=10&&h.default.createElement(g.FixedSizeList,{itemCount:s.length,itemSize:36,height:this.getListHeight(),itemData:{copySubItems:s,isFullScreen:this.props.isFullScreen},overscanCount:20},this.renderDragDropItem),d&&s&&!!s.length&&s.length<10&&s.map((function(t,a){return e.renderDragDropItem({index:a,style:{},data:{isFullScreen:e.props.isFullScreen}})})),!d&&s&&!!s.length&&h.default.createElement(g.FixedSizeList,{itemCount:s.length,itemSize:36,height:this.getListHeight(),itemData:{copySubItems:s,isFullScreen:this.props.isFullScreen}},(function(t){var n=t.index,c=t.style,u=s[n];return h.default.createElement("div",{style:c},h.default.createElement(A.default,{isDetail:r,parentCode:i,parentType:o,currentCode:l,key:u.id,item:u,allowUpdate:d,allowDelete:f,onStatusChange:e.onStatusChange,handleSubItem:e.handleSubItem,projectPath:a}))})),h.default.createElement(x.default,{show:u,text:(0,v.t)("\u5220\u9664\u4e8b\u9879"),type:"SUB_TASK",onConfirm:this.handleDelete,onClose:function(){e.setState({showModal:!1,item:void 0})}}))}},{key:"interrelateSubItems",value:function(){(0,this.props.handleAssociate)()}},{key:"handleSubItem",value:function(e){var t=e.value,a=e.item,n=this.props,r=(n.projectID,n.callback,n.requirementCode,n.handleModifyParent);I.SUBITEM_ACTIONS.DELETE===t&&this.openConfirmModal(a),I.SUBITEM_ACTIONS.MODIFYPARNET===t&&r(!0,a)}},{key:"componentWillUnmount",value:function(){void 0!==this.requestedFrame&&cancelAnimationFrame(this.requestedFrame)}}],[{key:"getDerivedStateFromProps",value:function(e){return"subItems"in e?{copySubItems:e.subItems}:null}}]),a}(h.Component),i.propTypes=H(H(H({subItems:b.default.array,projectPath:b.default.string,projectID:b.default.number,currentProject:b.default.object,requirementCode:b.default.number,callback:b.default.func,handleAssociate:b.default.func},T.WithProjectPermissionProps),w.ToggleSectionWrapperProps),{},{handleModifyParent:b.default.func,isDetail:b.default.bool,parentType:b.default.string,params:b.default.object,isEditing:b.default.bool,iterationFinished:b.default.bool,isFullScreen:b.default.bool}),o=l))||o;t.default=Y},nGtF:function(e,t,a){e.exports=a.p+"e53f18058adb391d5176e57f947ff14d.svg"},nPYk:function(e,t,a){e.exports={progress:"progress-3yQIrr_2a9",header:"header-MuUOh2myD4",noted:"noted-M2Ro_JXxuL","empty-record-tip":"empty-record-tip-YFqqFARtGw",emptyRecordTip:"empty-record-tip-YFqqFARtGw","record-text":"record-text-3JUAuUfykf",recordText:"record-text-3JUAuUfykf","left-text":"left-text-TtqtlWmmo1",leftText:"left-text-TtqtlWmmo1"}},nWua:function(e,t,a){e.exports={"subitem-wrapper":"subitem-wrapper-1vHctaAHpI",subitemWrapper:"subitem-wrapper-1vHctaAHpI","subitem-header":"subitem-header-3B1xsI0REO",subitemHeader:"subitem-header-3B1xsI0REO",title:"title-3sxxyOjFfp",operation:"operation-WlvQFBCS0u",progress:"progress-1PLwtQkdyY",migration:"migration-1qeIu1BCTm","create-button":"create-button-18yWKb4ALW",createButton:"create-button-18yWKb4ALW","find-button":"find-button-1Xg4-B1GRZ",findButton:"find-button-1Xg4-B1GRZ","link-button":"link-button-2zlnGx6w-D",linkButton:"link-button-2zlnGx6w-D","subitem-detail":"subitem-detail-oCCXVJ2qZe",subitemDetail:"subitem-detail-oCCXVJ2qZe",items:"items-t__4sD15lz",active:"active-2y_6BC9MRK","item-left":"item-left-1KrkZ7Gxs7",itemLeft:"item-left-1KrkZ7Gxs7","item-right":"item-right-iD-62ZX290",itemRight:"item-right-iD-62ZX290","status-tag":"status-tag-3___pNHswe",statusTag:"status-tag-3___pNHswe","item-icon":"item-icon-1fC23hakQS",itemIcon:"item-icon-1fC23hakQS","item-detail":"item-detail-3o8Ewd0SlE",itemDetail:"item-detail-3o8Ewd0SlE","item-code":"item-code-15HtCyzy6Q",itemCode:"item-code-15HtCyzy6Q","item-spec":"item-spec-1ckyayGdJY",itemSpec:"item-spec-1ckyayGdJY","item-title":"item-title-Flzhq3Wm6s",itemTitle:"item-title-Flzhq3Wm6s","item-priority":"item-priority-2UA3kVR2Qo",itemPriority:"item-priority-2UA3kVR2Qo","item-status":"item-status-3Z04EezFLT",itemStatus:"item-status-3Z04EezFLT","item-assignee":"item-assignee-Lz0YmlCc29",itemAssignee:"item-assignee-Lz0YmlCc29",avatar:"avatar-271kXcFCxK","default-avatar":"default-avatar-2uRLBakIRK",defaultAvatar:"default-avatar-2uRLBakIRK","label-wrapper":"label-wrapper-1V8zOGzddH",labelWrapper:"label-wrapper-1V8zOGzddH",disabled:"disabled-1qIJ8YZFB4",step:"step-2A69nox1ji","empty-tip":"empty-tip-1S8PXV6a5G",emptyTip:"empty-tip-1S8PXV6a5G","requirement-icon":"requirement-icon-1BjCYdSPIJ",requirementIcon:"requirement-icon-1BjCYdSPIJ","assignment-icon":"assignment-icon-2qCCoI8Wwv",assignmentIcon:"assignment-icon-2qCCoI8Wwv","defect-icon":"defect-icon-1uHbjZZMnk",defectIcon:"defect-icon-1uHbjZZMnk","to-right":"to-right-18pAoj6uOL",toRight:"to-right-18pAoj6uOL","member-right":"member-right-3K36a-Wy_1",memberRight:"member-right-3K36a-Wy_1",tag:"tag-2kdqNvrgTD",orange:"orange-3bXiBn30dA",red:"red-18zGyE9Y_5",gray:"gray-qooL7riaYX","due-date":"due-date-9SYaygrVcZ",dueDate:"due-date-9SYaygrVcZ","dragging-item":"dragging-item-30-CbNQ1DA",draggingItem:"dragging-item-30-CbNQ1DA","item-is-dragging":"item-is-dragging-2492Wao_rX",itemIsDragging:"item-is-dragging-2492Wao_rX","item-is-moving":"item-is-moving-1vhqB9SZxo",itemIsMoving:"item-is-moving-1vhqB9SZxo"}},nwSi:function(e,t,a){e.exports={wrapper:"wrapper-3fRoPk83YZ","comment-abs-bottom":"comment-abs-bottom-1YSP8FEU7z",commentAbsBottom:"comment-abs-bottom-1YSP8FEU7z","editor-btns":"editor-btns-2Gfri85_QM",editorBtns:"editor-btns-2Gfri85_QM",visible:"visible-2XYSQJfpNE",open:"open-3fb9JCKXPp","desc-btn":"desc-btn-1kEY05ZICx",descBtn:"desc-btn-1kEY05ZICx",container:"container-7M1gSI5-w_",detail:"detail-ROPmFxvCsF","trigger-bar":"trigger-bar-47c0GDqVzn",triggerBar:"trigger-bar-47c0GDqVzn",expanded:"expanded-36ZgDACp4S",editor:"editor-3WER0EJl6Z","comment-normal":"comment-normal-1-4-1x-EIp",commentNormal:"comment-normal-1-4-1x-EIp",left:"left-4hm31EnfNH",content:"content-Gi5YiRwhPU","has-max-height":"has-max-height-OMhUZpG1Td",hasMaxHeight:"has-max-height-OMhUZpG1Td","custom-btn-mr":"custom-btn-mr-22SBQU_w-G",customBtnMr:"custom-btn-mr-22SBQU_w-G"}},o2bY:function(e,t,a){e.exports={"setting-viewer":"setting-viewer-3a9Nzp6OBn",settingViewer:"setting-viewer-3a9Nzp6OBn",header:"header-Vp4qn_bBui","container-header":"container-header-1WTe28s_ue",containerHeader:"container-header-1WTe28s_ue","adjust-container":"adjust-container-3CWfINRpSh",adjustContainer:"adjust-container-3CWfINRpSh","working-hour-container":"working-hour-container-2BSMWFGnRN",workingHourContainer:"working-hour-container-2BSMWFGnRN","working-hour-box":"working-hour-box-3wqzxKCU9O",workingHourBox:"working-hour-box-3wqzxKCU9O","input-after":"input-after-2PuKNxkYMr",inputAfter:"input-after-2PuKNxkYMr","working-hour-header":"working-hour-header-3EqI4mNJg8",workingHourHeader:"working-hour-header-3EqI4mNJg8","working-hour-program-name":"working-hour-program-name-XdARJdjotA",workingHourProgramName:"working-hour-program-name-XdARJdjotA",point:"point-1Hjr5d7uDP",input:"input-2tqPfV0Wbp",picker:"picker-TqM7vNcEMt","text-area":"text-area-1feNBCcvpN",textArea:"text-area-1feNBCcvpN",time:"time-1JSFtHwQrq","btn-area":"btn-area--JcHxKJqoc",btnArea:"btn-area--JcHxKJqoc","dimension-radio":"dimension-radio-1KHiJKdok0",dimensionRadio:"dimension-radio-1KHiJKdok0","dimension-Box":"dimension-Box-1jpatbBF3l",dimensionBox:"dimension-Box-1jpatbBF3l","dimension-jump":"dimension-jump-2ylyherjdb",dimensionJump:"dimension-jump-2ylyherjdb"}},"oG/b":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamExportFields=t.getExportFields=t.importIssueDetail=t.importIssues=t.exportTeamIssueDetail=t.exportTeamIssues=t.exportIssueDetail=t.exportIssues=void 0;var n=a("Z4vw");t.exportIssues=function(e,t,a){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return(0,n.postJSON)("/external/collaboration/api/project/".concat(e,"/issues/").concat(t,"/export"),a,r)};t.exportIssueDetail=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,n.get)("/api/project/".concat(e,"/issues/export/").concat(t),a)};t.exportTeamIssues=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,n.postJSON)("/external/collaboration/agile/api/team-view/issues/export",e,t)};t.exportTeamIssueDetail=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,n.get)("/agile/api/team-view/issues/export/".concat(e),t)};t.importIssues=function(e,t,a){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return(0,n.post)("/external/collaboration/api/project/".concat(e,"/issues/issue-type-id/").concat(t,"/import/v2?storageKey=").concat(a),r)};t.importIssueDetail=function(e,t){return(0,n.get)("/api/project/".concat(e,"/issues/import/").concat(t))};t.getExportFields=function(e,t){return(0,n.get)("/external/collaboration/api/project/".concat(e,"/issues/").concat(t,"/export-fields"))};t.getTeamExportFields=function(){return(0,n.get)("/external/collaboration/agile/api/team-view/issues/export-fields")}},oIiO:function(e,t,a){"use strict";a("RW0V"),a("ioFf"),a("0l/t"),a("mYba"),a("jm62"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("bWfx"),a("Z2Ku");var o=n(a("lSNA")),i=n(a("J4zp")),l=a("mVeg"),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=S(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),s=n(a("17x9")),u=n(a("/Cp5")),d=n(a("IdN8")),f=n(a("gP5I")),p=a("sWxF"),m=n(a("38k+")),v=n(a("9+fn")),h=a("xgZS"),g=a("Z4vw"),E=n(a("l2PE")),y=a("5JFE"),b=n(a("TRyi")),I=a("uQHf");function S(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(S=function(e){return e?a:t})(e)}function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var C=function(e){var t,a,n,r,o,s,S,T,C=e.records,O=e.onDelete,N=e.detailInfo,P=e.reloadData,j=e.allowUpdate,D=e.schemeFields,k=e.user,R=(0,c.useState)(!1),M=(0,i.default)(R,2),A=M[0],L=M[1],x=(0,c.useState)(!1),_=(0,i.default)(x,2),F=_[0],W=_[1],B=(0,c.useState)(!1),H=(0,i.default)(B,2),U=H[0],Y=H[1],q=(0,c.useState)(null),G=(0,i.default)(q,2),z=G[0],V=G[1],Z=N.projectId,K=N.code,J=N.remainingHours,Q=N.startDate,X=(0,c.useState)(Boolean(C.length)),$=(0,i.default)(X,2),ee=$[0],te=$[1],ae=(0,c.useState)(0),ne=(0,i.default)(ae,2),re=ne[0],oe=ne[1],ie=(0,c.useState)(void 0),le=(0,i.default)(ie,2),ce=le[0],se=le[1],ue=null!==N&&void 0!==N&&N.workingHours?Math.round((null===N||void 0===N?void 0:N.workingHours)/8*100)/100:null===N||void 0===N?void 0:N.workingHours;(0,c.useEffect)((function(){te(Boolean(C.length))}),[C]),(0,c.useEffect)((function(){fe(!1)}),[N.programId]);var de=function(){var e;j&&(0,p.getqueryProgramInfoApi)(N.id,{type:!0,issueType:null===N||void 0===N||null===(e=N.issueTypeDetail)||void 0===e?void 0:e.type}).then((function(e){var t,a;if(0===e.code&&"CURRENT_USER_NOT_IN_THIS_PROGRAM_APPLY_MANAGER"===(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.exceptionType))return y.Modal.error({title:c.default.createElement(c.default.Fragment,null,"\u5de5\u65f6\u586b\u62a5\uff1a\u5f53\u524d\u7528\u6237\u4e0d\u662f\u9879\u76ee\u6210\u5458\u4e0d\u53ef\u4ee5\u586b\u62a5\uff1b\u82e5\u8981\u6b63\u5e38\u586b\u62a5\u5de5\u65f6\u9700\u52a0\u5165\u8be5\u9879\u76ee\uff0c\u8bf7\u5411\u9879\u76ee\u7ecf\u7406\u3010",c.default.createElement("span",{style:{color:"#0066ff"}}," ",(0,l.t)(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.exceptionMessage)),"\u3011\u7533\u8bf7\u52a0\u5165\u8be5\u9879\u76ee"),closable:!0,getContainer:function(){return document.querySelector('[data-frontend-module-container="coding-project-management-frontend"]')||document.body},zIndex:2080,className:E.default.confirm,icon:c.default.createElement("div",{style:{float:"left",marginRight:"16px"}},c.default.createElement(b.default,{style:{color:"#ff4d4f",width:"22px",height:"22px"},translate:void 0,onAuxClick:void 0,onAuxClickCapture:void 0})),onOk:function(){},okButtonProps:{style:{display:"none"}},okText:"\u5173\u95ed"});if(0===e.code&&e.data){var n;if("SUB_TASK"===(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.type))return(0,h.danger)((0,g.getErrorMessage)("\u4efb\u52a1\u5b50\u7c7b\u578b\u4e0d\u652f\u6301\u5de5\u65f6\u586b\u62a5!"));se(e.data),W(!0)}}))},fe=function(e){var t;(0,p.getqueryProgramInfoApi)(N.id,{type:e,issueType:null===N||void 0===N||null===(t=N.issueTypeDetail)||void 0===t?void 0:t.type}).then((function(e){0===e.code&&e.data&&se(e.data)}))};(0,c.useEffect)((function(){if(C.length>0){var e=0;C.forEach((function(t){e+=t.recordHours})),oe(e)}}),[ee,C]);var pe=(0,c.useMemo)((function(){return{issueId:null===ce||void 0===ce?void 0:ce.issueId,check:!0,issueType:null===ce||void 0===ce?void 0:ce.issueType}}),[null===ce||void 0===ce?void 0:ce.issueId]);return c.default.createElement("div",{className:E.default.container,onScroll:function(e){return e.stopPropagation()}},ee&&C.map((function(e){return c.default.createElement(u.default,{key:e.id,item:e,issueTypeDetail:null===N||void 0===N?void 0:N.issueTypeDetail,allowUpdate:j,onDelete:function(e){L(!0),V(e)},onEdit:function(e){Y(!0),V(e)}})})),!ee&&c.default.createElement("div",{className:E.default.emptyRecords},c.default.createElement("div",{className:E.default.empty}),c.default.createElement("div",{className:E.default.mainHeader},(0,l.t)("\u6682\u65e0\u5de5\u65f6\u65e5\u5fd7")),c.default.createElement("div",{className:E.default.subHeader},(0,l.t)("\u901a\u8fc7\u767b\u8bb0\u5de5\u65f6\u6765\u8ddf\u8e2a\u5904\u7406\u4e8b\u9879\u82b1\u8d39\u7684\u65f6\u95f4")),j&&c.default.createElement("div",{className:E.default.emptyAdd,onClick:de,"data-container":!0,"data-title":"REQUIREMENT"===(null===N||void 0===N||null===(t=N.issueTypeDetail)||void 0===t?void 0:t.issueType)&&"requirement"!==(null===N||void 0===N||null===(a=N.issueTypeDetail)||void 0===a?void 0:a.type)?"\u9700\u6c42\u6c60\u586b\u62a5":"\u7814\u53d1\u7a7a\u95f4\u586b\u62a5"},(0,l.t)("\u767b\u8bb0\u5de5\u65f6"))),j&&ee&&c.default.createElement("div",{className:E.default.addWrapper,onClick:de},c.default.createElement("div",{className:E.default.iconWrapper},c.default.createElement("span",{className:E.default.icon})),c.default.createElement("span",{className:E.default.add,"data-container":!0,"data-title":"REQUIREMENT"===(null===N||void 0===N||null===(n=N.issueTypeDetail)||void 0===n?void 0:n.issueType)&&"requirement"!==(null===N||void 0===N||null===(r=N.issueTypeDetail)||void 0===r?void 0:r.type)?"\u9700\u6c42\u6c60\u586b\u62a5":"\u7814\u53d1\u7a7a\u95f4\u586b\u62a5"},(0,l.t)("\u767b\u8bb0\u5de5\u65f6"))),["REQUIREMENT","MISSION","DEFECT"].includes(null===N||void 0===N||null===(o=N.issueTypeDetail)||void 0===o?void 0:o.issueType)&&"prd_issue"!==(null===N||void 0===N||null===(s=N.issueTypeDetail)||void 0===s?void 0:s.type)&&c.default.createElement(c.default.Fragment,null,U&&ce&&c.default.createElement(v.default,{header:(0,l.t)("\u7f16\u8f91\u5de5\u65f6"),show:U,item:z,body:w(w(w({},z),N),{},{recordHours:(null===ce||void 0===ce?void 0:ce.workHour)||"",remainingHours:null!==ce&&void 0!==ce&&ce.workHour?ue-(null===ce||void 0===ce?void 0:ce.workHour):ue,workHourType:null===ce||void 0===ce?void 0:ce.currentWorkhourType}),user:k,fillDetail:ce,schemeFields:D,onSetting:function(e){if(null===z||void 0===z||!z.programWorkHourId)return(0,h.danger)((0,g.getErrorMessage)("\u6682\u4e0d\u652f\u6301\u4fee\u6539\uff0c\u8bf7\u5148\u540c\u6b65\u6570\u636e!"));(0,p.updateApi)({id:null===z||void 0===z?void 0:z.programWorkHourId,type:"PROGRAM",workHour:null===e||void 0===e?void 0:e.workHour,issueType:null===ce||void 0===ce?void 0:ce.issueType}).then((function(e){0===e.code&&(fe(!1),Y(!1),P&&P())}))},onHide:function(){return Y(!1)}})),A&&c.default.createElement(d.default,{show:A,actualRemainingHours:z&&z.actualRemainingHours,rollbackRemainingHours:z&&z.rollbackRemainingHours,onDelete:function(e){L(!1),O(z,e)},onHide:function(){L(!1),V(null)}}),["REQUIREMENT","MISSION","DEFECT"].includes(null===N||void 0===N||null===(S=N.issueTypeDetail)||void 0===S?void 0:S.issueType)&&"prd_issue"!==(null===N||void 0===N||null===(T=N.issueTypeDetail)||void 0===T?void 0:T.type)?c.default.createElement(c.default.Fragment,null,F&&ce&&c.default.createElement(m.default,{header:c.default.createElement(I.ButtonHeader,{header:(0,l.t)("\u767b\u8bb0\u5de5\u65f6"),params:pe,setCreateModal:W,method:p.createWorkHoursAuto,reloadData:P}),show:F,body:w(w({},N),{},{recordHours:(null===ce||void 0===ce?void 0:ce.workHour)||"",remainingHours:null!==ce&&void 0!==ce&&ce.workHour?ue-(null===ce||void 0===ce?void 0:ce.workHour):ue,workHourType:null===ce||void 0===ce?void 0:ce.currentWorkhourType}),user:k,fillDetail:ce,schemeFields:D,onSetting:function(e){(0,p.createAcpi)(w(w({},e),{},{programId:null===e.programId?0:e.programId})).then((function(e){0===e.code&&(fe(!1),W(!1),P&&P())}))},onHide:function(){return W(!1)}})):c.default.createElement(c.default.Fragment,null,F&&c.default.createElement(f.default,{header:(0,l.t)("\u767b\u8bb0\u5de5\u65f6"),show:F,body:{recordedHours:re,remainingHours:J,startDate:Q,workingDesc:"",projectId:Z,code:K},onSetting:function(e){(0,p.editHourRecords)(Z,K,e).then((function(e){0===e.code&&(W(!1),P&&P())}))},onHide:function(){return W(!1)}})))};C.propTypes={detailInfo:s.default.object.isRequired,records:s.default.array.isRequired,onDelete:s.default.func.isRequired,reloadData:s.default.func,allowUpdate:s.default.bool,schemeFields:s.default.object.isRequired,user:s.default.object.isRequired};var O=C;t.default=O},oZEX:function(e,t,a){e.exports={wrapper:"wrapper-3pAQRnA7by",header:"header-H1WgwTb4fU","left-column":"left-column-39HsDWYjWv",leftColumn:"left-column-39HsDWYjWv","right-column":"right-column-2vcYf7puXx",rightColumn:"right-column-2vcYf7puXx","user-info":"user-info-Rb58bC9D9e",userInfo:"user-info-Rb58bC9D9e","action-right":"action-right-2X89GKpMpU",actionRight:"action-right-2X89GKpMpU",recovery:"recovery-2Tayoox1Km",nav:"nav-2IXwo_AAii",box:"box-3U-SyK6akf",disabled:"disabled-2094wZnx6Z",arrow:"arrow-hMP3_AyJbL",prev:"prev-3O0QUHOoX_",next:"next-4waAfswDfq",container:"container-2SNQS9CDli",avatar:"avatar-R0kVsSXDqX","user-detail":"user-detail-2mhdMg534l",userDetail:"user-detail-2mhdMg534l",name:"name-3_D9EaOiE7",date:"date-3A6qUQYubb","user-list":"user-list-2WSV3PHli2",userList:"user-list-2WSV3PHli2","user-item":"user-item-Qp_Z367hBH",userItem:"user-item-Qp_Z367hBH","is-selected":"is-selected-1dPCTY9XfL",isSelected:"is-selected-1dPCTY9XfL",detail:"detail-2WgHvfe3RG",description:"description-1Eq7vQ4KB2","is-empty":"is-empty-8jJmHuJq3F",isEmpty:"is-empty-8jJmHuJq3F","transform-panel":"transform-panel-fLXfafDZjC",transformPanel:"transform-panel-fLXfafDZjC","transform-loading":"transform-loading-NP0PLVgX5v",transformLoading:"transform-loading-NP0PLVgX5v"}},ooH1:function(e,t,a){"use strict";var n=a("mVeg"),r=a("cDcd"),o=a.n(r),i=a("K2gz"),l=a.n(i),c=a("7Oud"),s=a.n(c),u=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i};function d(e){var t=u(Object(r.useState)(!1),2),a=t[0],i=t[1],c=Object(r.useRef)(null),d=e.recordHours,f=e.remainingHours,p=e.segmentMargin,m=e.className,v=e.onClick,h=d+f,g=0!==h?d/h*100:h;Object(r.useEffect)((function(){if(c.current){var e=c.current.offsetWidth;i(e<100)}}));return o.a.createElement("div",{className:l()([s.a.container,m]),onClick:v},o.a.createElement("div",{className:s.a.header,ref:c,style:{marginBottom:"".concat(p,"px")}},d||f?!d&&f>0?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:s.a.emptyRecordTip},Object(n.t)("\u672a\u8bb0\u5f55\u5de5\u65f6")),!a&&o.a.createElement("div",{className:s.a.leftText},Object(n.t)("\u5269 {{remain}} \u5929",{remain:Number(null===f||void 0===f?void 0:f.toFixed(2))}))):d>0&&!f?o.a.createElement("div",null,Object(n.t)("\u5df2\u8bb0\u5f55 {{recordHours}} \u5929",{recordHours:Number(null===d||void 0===d?void 0:d.toFixed(2))})):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:s.a.recordText},Object(n.t)("\u5df2\u8bb0\u5f55 {{recordHours}} \u5929",{recordHours:Number(null===d||void 0===d?void 0:d.toFixed(2))})),!a&&o.a.createElement("div",{className:s.a.leftText},Object(n.t)("\u5269 {{remainingHours}} \u5929",{remainingHours:Number(null===f||void 0===f?void 0:f.toFixed(2))}))):o.a.createElement("div",{className:s.a.emptyRecordTip},Object(n.t)("\u672a\u8bb0\u5f55\u5de5\u65f6"))),o.a.createElement("div",{className:s.a.progress},o.a.createElement("div",{className:s.a.noted,style:{width:"".concat(g,"%")}})))}d.defaultProps={segmentMargin:3},t.a=d},p11V:function(e,t,a){e.exports={wrapper:"wrapper-2UEK-s3hlo","wrapper-wait":"wrapper-wait-H2lgLqGZem",wrapperWait:"wrapper-wait-H2lgLqGZem",avatar:"avatar-2FWzAE71ds",name:"name-1px2y2hTla",external:"external-1XaNelvgVl",status:"status-19LQaJkChN",blank:"blank-2s3VQGLeLF","external-icon":"external-icon-7ahjAYlUbc",externalIcon:"external-icon-7ahjAYlUbc",remove:"remove-2uSnzSAl_v",tip:"tip-1M4h0MIyJm",info:"info-2MUs2K9ojp","info-title":"info-title-1vlZ3-36VJ",infoTitle:"info-title-1vlZ3-36VJ","info-title-name":"info-title-name-xpk13ZKErK",infoTitleName:"info-title-name-xpk13ZKErK","info-title-icon":"info-title-icon-1ACwRH3hHS",infoTitleIcon:"info-title-icon-1ACwRH3hHS","info-email":"info-email-un_Jwa2ptM",infoEmail:"info-email-un_Jwa2ptM"}},p1cY:function(e,t,a){e.exports={"creation-wrapper":"creation-wrapper-36jnbSflwr",creationWrapper:"creation-wrapper-36jnbSflwr","creation-wrapper-single":"creation-wrapper-single-2Fw234fG1o",creationWrapperSingle:"creation-wrapper-single-2Fw234fG1o","creation-trigger":"creation-trigger-3ZClSLifhB",creationTrigger:"creation-trigger-3ZClSLifhB",disabled:"disabled-1lLJpCe2ei","dropdown-menu":"dropdown-menu-szJBJsUuB1",dropdownMenu:"dropdown-menu-szJBJsUuB1",item:"item-1wzNDbjNl_","item-icon":"item-icon-1Gt1zJytbe",itemIcon:"item-icon-1Gt1zJytbe","item-name":"item-name-370Ks0BvfY",itemName:"item-name-370Ks0BvfY"}},pENc:function(e,t,a){e.exports=a.p+"8d7deea3af73825daf8cbdc9e77b6d83.svg"},pKv4:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d"),a("bWfx");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=n(a("LUQD")),v=a("1qdz");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E={ADD:(0,u.t)("\u6dfb\u52a0"),REMOVE:(0,u.t)("\u79fb\u9664")},y=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item,t=e.issueLog.content.watchers;return f.default.createElement("div",{className:v.listItem,key:e.id},f.default.createElement("div",{className:v.dot}),f.default.createElement("div",{className:v.content},f.default.createElement(m.default,{className:"mr-10 ".concat(v.icon)}),f.default.createElement("span",{className:v.user},e.creator.name),e.issueLog&&1===e.issueLog.old?"\u3010\u6e90\u3011":"",f.default.createElement("span",null,E[e.issueLog.action],(0,u.t)("\u5173\u6ce8\u4eba")),f.default.createElement("span",{className:"ml-10 ".concat(v.customAction)},t.map((function(e){return e.name})).join(", ")),f.default.createElement("span",{className:v.time},(0,p.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=y,y.propTypes={item:d.default.object}},pSsg:function(e,t,a){e.exports=a.p+"a37c114dd1bfd675473deb0c806ef811.svg"},pheU:function(e,t,a){e.exports={root:"root-2pbSFqDYeD","custom-input":"custom-input-3mfJw5uRDc",customInput:"custom-input-3mfJw5uRDc","result-wrapper":"result-wrapper-E-5iEKyG5c",resultWrapper:"result-wrapper-E-5iEKyG5c","result-empty":"result-empty-2zJW4q9nBM",resultEmpty:"result-empty-2zJW4q9nBM",icon:"icon-24e3y_3x2D","cancel-btn":"cancel-btn-3s4CERvFWS",cancelBtn:"cancel-btn-3s4CERvFWS","result-items":"result-items-xFg7SGB6hX",resultItems:"result-items-xFg7SGB6hX",item:"item-1HqqWmenGn","is-disabled":"is-disabled-3mDI5nis5O",isDisabled:"is-disabled-3mDI5nis5O",desc:"desc-2GpnGKZx16","item-code":"item-code-Bk7kvkyJNO",itemCode:"item-code-Bk7kvkyJNO","item-detail":"item-detail-3rRopuY2mk",itemDetail:"item-detail-3rRopuY2mk","item-detail-title":"item-detail-title-2k4zbC_se0",itemDetailTitle:"item-detail-title-2k4zbC_se0","result-filter-bar":"result-filter-bar-19MHSEjsE6",resultFilterBar:"result-filter-bar-19MHSEjsE6",detail:"detail-3b6-Apkgln",wrapper:"wrapper-3uKp1tznEc",title:"title-ekMEwI9F6_","custom-result":"custom-result-3mSoGaxm4i",customResult:"custom-result-3mSoGaxm4i","requirement-icon":"requirement-icon-1DQE2jSvYz",requirementIcon:"requirement-icon-1DQE2jSvYz","issue-icon":"issue-icon-2Un2A-c9kW",issueIcon:"issue-icon-2Un2A-c9kW","assignment-icon":"assignment-icon-2pFstILZQU",assignmentIcon:"assignment-icon-2pFstILZQU","epic-icon":"epic-icon-A24cbzkzkY",epicIcon:"epic-icon-A24cbzkzkY","custom-detail":"custom-detail-2Jij-PRnmD",customDetail:"custom-detail-2Jij-PRnmD","belong-iteration":"belong-iteration-2kQmQ8MGFa",belongIteration:"belong-iteration-2kQmQ8MGFa","custom-search-icon":"custom-search-icon-3Fjh92aIPn",customSearchIcon:"custom-search-icon-3Fjh92aIPn"}},qCZF:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("o0o1"));a("Btvt"),a("VRzm"),a("pIFo"),a("hEkN"),a("dRSK"),a("CX2u");var i,l,c,s=n(a("yXPU")),u=n(a("lwsE")),d=n(a("W8MJ")),f=n(a("PJYZ")),p=n(a("7W2i")),m=n(a("a1gu")),v=n(a("Nsbk")),h=a("mVeg"),g=A(a("cDcd")),E=n(a("17x9")),y=n(a("K2gz")),b=n(a("30Wv")),I=n(a("HtPo")),S=a("FpRC"),T=n(a("FLqE")),w=n(a("246l")),C=(n(a("qLOp")),a("xgZS")),O=a("AoGB"),N=A(a("NI22")),P=a("w3Wo"),j=n(a("Y+p1")),D=a("LvDl"),k=a("LC46"),R=A(a("Mdvu"));function M(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(M=function(e){return e?a:t})(e)}function A(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=M(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}function L(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,v.default)(e);if(t){var r=(0,v.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,m.default)(this,a)}}var x=(0,O.WithIssueEditingCtxDecorator)((c=l=function(e){(0,p.default)(a,e);var t=L(a);function a(e){var n;return(0,u.default)(this,a),(n=t.call(this,e)).renderEditorBtns=function(){var e=n.state,t=e.isLoading,a=e.isExtraPending;return g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:(0,y.default)(w.default.newButton,w.default.primary,w.default.h32,T.default.customBtnMr,(a||t)&&w.default.disabled),onClick:n.onSave,"data-container":!0,"data-title":"\u7f16\u8f91\u63cf\u8ff0-\u4fdd\u5b58"},(0,h.t)("\u4fdd\u5b58")),g.default.createElement("div",{className:(0,y.default)(w.default.newButton,w.default.default,w.default.h32,T.default.customBtnMr),onClick:n.onCancelEdit},(0,h.t)("\u53d6\u6d88")))},n.toggleExpanded=function(){n.setState({isExpanded:!n.state.isExpanded},(function(){setTimeout(n.props.setCommentPosition)}))},n.resetNeedToolBarStickyState=function(e){n.setState({needToolBarStickyState:e})},n.pageAdjust=function(){n.runId&&clearTimeout(n.runId),n.runId=setTimeout((function(){var e=document.querySelector("#".concat(n.state.inputWrapId));if(e){var t=e.getBoundingClientRect();n.setState({isTooLong:t.height>320})}}),100)},n.onSaveSuccess=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];setTimeout((function(){return n.props.refreshActivity()}),1e3),e||(0,C.success)((0,h.t)("\u66f4\u65b0\u6210\u529f")),n.toggleEdit(!0),n.props.updateEditing({isEditing:!1,type:"DESCRIPTION"})},n.resetRichEditor=function(){var e,t;if(null!==(e=n.editorRef)&&void 0!==e&&null!==(t=e.current)&&void 0!==t&&t.removeDraft)return n.editorRef.current.removeDraft()},n.cacuCommentPosition=(0,D.debounce)((function(){n.props.setCommentPosition&&"function"===typeof n.props.setCommentPosition&&n.props.setCommentPosition()}),300),n.onChange=function(e){var t=e.isEmpty,a=n.props,r=a.updateEditing,o=a.autoSaveKey,i=n.state.initEditorData;r({isEditing:!0,type:"DESCRIPTION",isEmpty:t}),n.cacuCommentPosition(),t?(0,N.setIssueDescriptionDraft)(o):(0,N.setIssueDescriptionDraft)(o,i)},n.onEditorDetect=function(){var e=n.props,t=e.pageId,a=e.autoSaveKey,r=e.editorType;if((0,N.isBlockType)(r))if(t){var o=(0,N.getIssueDescriptionDraft)(a);o?n.updateInitEditorData(o):n.createDraft(t)}else n.descriptionTransform()},n.onHandle=function(){n.onEditorDetect(),n.props.editStatusChanged&&n.props.editStatusChanged(n.state.showEdit)},n.edit=function(){n.state.showEdit||n.toggleEdit()},n.show=function(){return n.props.isShowPlaceholder&&n.setState({minHeight:195}),new Promise((function(e){n.setState({showEdit:!0},(function(){e()}))}))},n.descriptionTransform=function(){var e=n.props,t=e.currentProject,a=e.code;return n.setState({isTransforming:!0},(function(){n.state.isExpanded&&n.toggleExpanded()})),(0,P.issueDescriptionTransform)(t.id,a).then((function(){return n.checkTransformation()}))},n.checkTransformation=function(){var e=n.props,t=e.currentProject,a=e.code,r=e.updatePageId;return n.tranformTimer&&clearTimeout(n.tranformTimer),(0,P.checkDescriptionPageId)(t.id,a).then((function(e){var t=e.data.pageId;t?(r(t),n.createDraft(t).then((function(){return n.setState({isTransforming:!1})}))):n.tranformTimer=setTimeout(n.checkTransformation,1e3)}))},n.createDraft=function(e){var t=n.props.currentProject;return(0,N.createPageDraft)({module:"collaboration",function:"description",scopeType:"project",scopeId:t.id,projectId:t.id,pageId:e}).then((function(e){var t=e.data;return n.updateInitEditorData(t)}))},n.updateInitEditorData=function(e){return n.setState({initEditorData:{pageId:e.pageId,pageDraftId:e.pageDraftId,historyId:e.historyId}})},n.refreshDescription=function(){var e,t;null!==(e=n.editorRef)&&void 0!==e&&null!==(t=e.current)&&void 0!==t&&t.refresh&&n.editorRef.current.refresh()},n.state={showEdit:!1,isLoading:!1,showAnimate:!1,showMore:!1,isExtraPending:!1,isTooLong:!1,isExpanded:!1,inputWrapId:"markdown-render-wrap-".concat(Date.now()),initEditorData:null,isTransforming:!1,needToolBarStickyState:e.needToolBarSticky,minHeight:void 0,eleId:void 0,mdContent:e.markdown,fullscreen:!1,rawContent:e.slateRaw,description:e.description},n.toggleEdit=n.toggleEdit.bind((0,f.default)(n)),n.onCancelEdit=n.onCancelEdit.bind((0,f.default)(n)),n.onSave=n.onSave.bind((0,f.default)(n)),n.onMdHistoryRevert=n.onMdHistoryRevert.bind((0,f.default)(n)),n.onBlockHistoryRevert=n.onBlockHistoryRevert.bind((0,f.default)(n)),n.resetNeedToolBarStickyState=n.resetNeedToolBarStickyState.bind((0,f.default)(n)),n.containerRef=g.default.createRef(),n.editorRef=g.default.createRef(),n.editorContainerRef=g.default.createRef(),e.getThis&&n.props.getThis((0,f.default)(n)),n.runId=null,n.tranformTimer=null,n.resizeObserver=null,n}return(0,d.default)(a,[{key:"renderEditor",value:function(){var e=this,t=this.state,a=t.initEditorData,n=(t.needToolBarStickyState,t.minHeight,t.isLoading),r=t.mdContent,o=t.rawContent,i=this.props,l=i.currentProject,c=(i.enterpriseGlobalKey,i.scrollRef),s=i.autoSaveKey,u=i.pageId,d=i.editorType,f=(i.issueId,o?{type:"raw",value:o}:{type:"markdown",value:""===r.replace(/[\s\r\n]+/g,"")?"":r});return g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:T.default.editorContainer,ref:this.editorContainerRef},g.default.createElement(N.default,{type:d,readOnly:this.state.isLoading,currentProject:l,initEditorData:a,defaultValue:f,showToolBar:!0,isEditing:!0,onEditorChange:this.onChange,autofocus:!0,container:c.current,isDisabled:n,onLoad:function(t){t.isError&&t.isDraftIdNotExist&&((0,N.setIssueDescriptionDraft)(s),e.setState({initEditorData:null},(function(){return e.createDraft(u)}))),e.props.onLoad(t)},className:(0,y.default)(T.default.customSectionZindex,!this.state.fullscreen&&T.default.editorHeight),ref:this.editorRef,onContentChanged:this.pageAdjust,onRichEditorChange:this.pageAdjust,onFullScreenCallback:function(t){e.props.setCommentPosition(),e.setState({fullscreen:t})}})),this.renderEditorBtns())}},{key:"renderMarkdown",value:function(){var e=this.props,t=(e.editorType,e.location),a=e.scrollRef,n=(e.pageId,e.currentProject,e.enterpriseGlobalKey,e.issueId,this.state),r=n.isTooLong,o=n.isExpanded,i=n.isTransforming,l=(n.showEdit,n.mdContent,n.rawContent,n.description);return g.default.createElement("div",{className:(0,y.default)(T.default.descriptionWrapper,o&&T.default.expanded)},i&&g.default.createElement("div",{className:(0,y.default)(T.default.transformPanel)},g.default.createElement(I.default,{className:T.default.transformLoading}),(0,h.t)("\u6b63\u5728\u5347\u7ea7\u4e3a\u53ef\u89c6\u5316\u7f16\u8f91\uff0c\u8bf7\u7a0d\u5019\u2026")),g.default.createElement("div",{id:this.state.inputWrapId},g.default.createElement(b.default,{html:l||"<span class=".concat(T.default.emptyContent,">").concat((0,h.t)("\u672a\u7f16\u5199\u63cf\u8ff0"),"</span>"),enableCodeCopy:!0,location:t,scrollRef:a})),r&&g.default.createElement(g.default.Fragment,null,!o&&g.default.createElement("div",{className:T.default.mask}),g.default.createElement("div",{className:(0,y.default)(T.default.toggleBtn,o&&T.default.toggleBtnExpanded),onClick:this.toggleExpanded},o?(0,h.t)("\u6536\u8d77\u63cf\u8ff0"):(0,h.t)("\u5c55\u5f00\u63cf\u8ff0"))))}},{key:"render",value:function(){var e=this,t=this.state,a=t.showEdit,n=t.showAnimate,r=t.isTransforming,o=this.props,i=o.isShowPlaceholder,l=o.readOnly;return i?l?g.default.createElement("div",{className:(0,y.default)(T.default.placeholder,T.default.placeholderReadOnly)},(0,h.t)("\u672a\u7f16\u5199\u63cf\u8ff0")):g.default.createElement("div",{className:T.default.placeholder,onClick:function(){e.setState({minHeight:195}),e.edit()}},(0,h.t)("\u70b9\u6b64\u7f16\u8f91\u63cf\u8ff0\uff0c\u6d89\u53ca\u6570\u5b57\u8fd0\u7b97\u3001\u7279\u6b8a\u7b26\u53f7\u7b49\u63a8\u8350\u4f7f\u7528\u884c\u5185\u4ee3\u7801\u529f\u80fd")):g.default.createElement("div",{className:(0,y.default)(T.default.root),ref:this.containerRef,onScroll:function(e){e.stopPropagation()}},g.default.createElement("div",{id:"description",className:T.default.anchor}),g.default.createElement("div",{className:(0,y.default)(!a&&T.default.contentWrapper,n&&T.default.flash)},!r&&a?this.renderEditor():this.renderMarkdown()))}},{key:"componentDidMount",value:function(){var e=this,t=document.querySelector("#".concat(this.state.inputWrapId));ResizeObserver&&t&&(this.resizeObserver=new ResizeObserver((function(a){a.find((function(e){return e.target===t}))&&e.pageAdjust()})),this.resizeObserver.observe(t)),this.pageAdjust(),R.default.on(R.EventBusType.MdDesc,R.EventBusKeys.revertHistoryMdDesc,this.onMdHistoryRevert),R.default.on(R.EventBusType.BlockDesc,R.EventBusKeys.revertHistoryBlockDesc,this.onBlockHistoryRevert)}},{key:"componentWillUnmount",value:function(){var e,t=document.querySelector("#".concat(this.state.inputWrapId));this.resizeObserver&&t&&(null===(e=this.resizeObserver)||void 0===e||e.unobserve(t),this.resizeObserver=null);clearTimeout(this.tranformTimer),R.default.destroy(R.EventBusType.MdDesc,R.EventBusKeys.revertHistoryMdDesc,this.onMdHistoryRevert),R.default.destroy(R.EventBusType.BlockDesc,R.EventBusKeys.revertHistoryBlockDesc,this.onBlockHistoryRevert)}},{key:"shouldComponentUpdate",value:function(e,t){var a=e.domID,n=e.location;if(e.isShowPlaceholder!==this.props.isShowPlaceholder||e.historyId!==this.props.historyId||e.needToolBarSticky!==this.props.needToolBarSticky||!(0,j.default)(t,this.state)||e.isDescriptionBtnFixed!==this.props.isDescriptionBtnFixed||a===n.hash&&"#description"===n.hash)return!0}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.domID,n=t.location,r=t.isInited,o=t.scrollRef,i=t.historyId,l=t.isShowPlaceholder;a!==n.hash||"#description"!==n.hash||this.state.showAnimate||this.flashContent(),!e.isInited&&r&&("#description"!==n.hash||this.state.showAnimate||(this.flashContent(),(0,S.scrollRelatedToTopMenu)("description",0,o.current))),n.hash&&"#description"!==n.hash&&(e.location.hash&&e.location.hash!==n.hash||!e.location.hash)&&(0,S.scrollRelatedToTopMenu)(decodeURI(n.hash).replace("#",""),104,o.current),e.needToolBarSticky!==this.props.needToolBarSticky&&this.resetNeedToolBarStickyState(this.props.needToolBarSticky),i===e.historyId||!l&&e.isShowPlaceholder||this.refreshDescription()}},{key:"flashContent",value:function(){var e=this,t=this.props.flashAnchor;this.setState({showAnimate:!0}),window.setTimeout((function(){e.setState({showAnimate:!1}),t()}),1500)}},{key:"onSave",value:function(){var e=(0,s.default)(o.default.mark((function e(){var t,a,n,r,i,l,c,s,u,d,f,p,m,v,g,E,y,b,I=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props,n=a.updateDescription,r=a.autoSaveKey,i=a.editorType,l=a.currentProject,c=a.code,s=this.state,u=s.isLoading,d=s.initEditorData,!u){e.next=4;break}return e.abrupt("return");case 4:if(this.setState({isLoading:!0}),!(0,N.isBlockType)(i)||null===(t=this.editorRef)||void 0===t||!t.current){e.next=15;break}return e.prev=6,e.next=9,(0,k.getBlockEditorFinished)(this.editorRef.current);case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(6),this.setState({isLoading:!1}),e.abrupt("return",(0,C.warning)((0,h.t)("\u66f4\u65b0\u63cf\u8ff0\u8d85\u65f6")));case 15:if((0,N.isBlockType)(i)){e.next=23;break}if(l.id&&c){e.next=18;break}return e.abrupt("return");case 18:y=null!==(f=null===(p=this.editorRef)||void 0===p||null===(m=p.current)||void 0===m?void 0:m.getRichContent())&&void 0!==f?f:"",b=null!==(v=null===(g=this.editorRef)||void 0===g||null===(E=g.current)||void 0===E?void 0:E.getRichContent("raw"))&&void 0!==v?v:"",(0,P.modifyIssueDescription)(l.id,c,{content:y,slateRaw:b,descriptionType:N.EditorType.MARKDOWN}).then((function(e){e.data&&I.setState({mdContent:e.data.markdown||"",rawContent:e.data.slateRaw||"",description:e.data.description||""}),I.resetRichEditor(),I.onSaveSuccess()})).finally((function(){I.setState({isLoading:!1})})),e.next=24;break;case 23:n({pageId:d.pageId,historyId:d.historyId,pageDraftId:d.pageDraftId}).then((function(e){var t;e.data&&I.setState({description:e.data.description||""}),I.props.onLoad({isEmpty:!(null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.description)}),(0,N.setIssueDescriptionDraft)(r),I.onSaveSuccess()})).finally((function(){I.setState({isLoading:!1,initEditorData:null})}));case 24:case"end":return e.stop()}}),e,this,[[6,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"onMdHistoryRevert",value:function(){var e=(0,s.default)(o.default.mark((function e(t){var a,n,r,i,l,c,s,u,d,f,p,m,v,g,E,y=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.content,r=t.slateRaw,i=t.cb,l=this.props,l.updateDescription,l.autoSaveKey,c=l.editorType,s=l.currentProject,u=l.code,d=this.state,f=d.isLoading,d.initEditorData,!f){e.next=5;break}return e.abrupt("return");case 5:if(this.setState({isLoading:!0}),!(0,N.isBlockType)(c)||null===(a=this.editorRef)||void 0===a||!a.current){e.next=16;break}return e.prev=7,e.next=10,(0,k.getBlockEditorFinished)(this.editorRef.current);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(7),this.setState({isLoading:!1}),e.abrupt("return",(0,C.warning)((0,h.t)("\u66f4\u65b0\u63cf\u8ff0\u8d85\u65f6")));case 16:if((0,N.isBlockType)(c)){e.next=22;break}if(s.id&&u){e.next=19;break}return e.abrupt("return");case 19:g=null!==n&&void 0!==n?n:"",E=null!==(p=null!==r&&void 0!==r?r:null===(m=this.editorRef)||void 0===m||null===(v=m.current)||void 0===v?void 0:v.getRichContent("raw"))&&void 0!==p?p:"",(0,P.modifyIssueDescription)(s.id,u,{content:g,slateRaw:E,descriptionType:N.EditorType.MARKDOWN}).then((function(e){e.data&&y.setState({mdContent:e.data.markdown||"",rawContent:e.data.slateRaw||"",description:e.data.description||""}),y.resetRichEditor(),y.onSaveSuccess(!0),y.toggleEdit(!0)})).finally((function(){y.setState({isLoading:!1}),null===i||void 0===i||i()}));case 22:case"end":return e.stop()}}),e,this,[[7,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onBlockHistoryRevert",value:function(){(0,N.setIssueDescriptionDraft)(this.propsautoSaveKey),this.onSaveSuccess(!0),this.setState({isLoading:!1,initEditorData:null}),this.toggleEdit(!0)}},{key:"onCancelEdit",value:function(){var e,t,a=this,n=this.props,r=n.currentProject,o=n.autoSaveKey,i=n.editorType,l=this.state.initEditorData;confirm((0,h.t)("\u6700\u65b0\u63cf\u8ff0\u8fd8\u672a\u4fdd\u5b58\uff0c\u786e\u8ba4\u79bb\u5f00\uff1f"))&&(this.props.updateEditing({isEditing:!1,type:"DESCRIPTION"}),(0,N.isBlockType)(i)?((0,N.delPageDraft)({pageId:l.pageId,pageDraftId:l.pageDraftId,module:"collaboration",function:"description",scopeType:"project",scopeId:r.id}).then((function(){a.toggleEdit(),a.setState({initEditorData:null}),(0,N.setIssueDescriptionDraft)(o)})),null!==(e=this.editorRef)&&void 0!==e&&null!==(t=e.current)&&void 0!==t&&t.emptyContent&&this.editorRef.current.emptyContent()):(this.resetRichEditor(),this.toggleEdit()))}},{key:"toggleEdit",value:function(e){var t=this,a=this.state.showEdit;this.pageAdjust(),this.setState({showEdit:!a},(function(){a||t.onEditorDetect(),t.props.editStatusChanged&&t.props.editStatusChanged(t.state.showEdit,e?t.state.isDescriptionEmpty:void 0)}))}}]),a}(g.Component),l.propTypes={editorType:E.default.oneOf(N.EditorType),readOnly:E.default.bool,code:E.default.number,issueId:E.default.number,autoSaveKey:E.default.string,enterpriseGlobalKey:E.default.string,description:E.default.string,markdown:E.default.string,slateRaw:E.default.string,currentProject:E.default.object,updateDescription:E.default.func,location:E.default.object,flashAnchor:E.default.func,domID:E.default.string,scrollRef:E.default.any,isInited:E.default.bool,getThis:E.default.func,editStatusChanged:E.default.func,isShowPlaceholder:E.default.bool,updateEditing:E.default.func,userId:E.default.number,pageId:E.default.string,historyId:E.default.number,updatePageId:E.default.func,needToolBarSticky:E.default.string,setCommentPosition:E.default.func,onLoad:E.default.func,isDescriptionBtnFixed:E.default.bool},i=c))||i,_=g.default.memo(x);t.default=_},qLOp:function(e,t,a){e.exports={"issue-property":"issue-property-28zXHsfxrj",issueProperty:"issue-property-28zXHsfxrj","issue-property-label":"issue-property-label-1n0SM9xgUO",issuePropertyLabel:"issue-property-label-1n0SM9xgUO","create-button":"create-button-3_M19xGahh",createButton:"create-button-3_M19xGahh","link-button":"link-button-2YpuDgniPw",linkButton:"link-button-2YpuDgniPw","detail-header-wrapper":"detail-header-wrapper-22pcJdj_pQ",detailHeaderWrapper:"detail-header-wrapper-22pcJdj_pQ","detail-header":"detail-header-wcXG0dYL0d",detailHeader:"detail-header-wcXG0dYL0d","is-scrolled":"is-scrolled-9VJbbY0JEZ",isScrolled:"is-scrolled-9VJbbY0JEZ","detail-wrapper":"detail-wrapper-272RWmD7CH",detailWrapper:"detail-wrapper-272RWmD7CH","is-detail":"is-detail-2-gIlf5rAD",isDetail:"is-detail-2-gIlf5rAD","detail-body":"detail-body-1G2xLQ-LYB",detailBody:"detail-body-1G2xLQ-LYB","km-editor":"km-editor-3vjRvl5liZ",kmEditor:"km-editor-3vjRvl5liZ","main-wrapper":"main-wrapper-1Azcmdo2RC",mainWrapper:"main-wrapper-1Azcmdo2RC","main-expanded":"main-expanded-2E7tbS7lnB",mainExpanded:"main-expanded-2E7tbS7lnB","issue-properties":"issue-properties-3KsgeXSjty",issueProperties:"issue-properties-3KsgeXSjty","section-wrapper":"section-wrapper-3cGFGIqKLZ",sectionWrapper:"section-wrapper-3cGFGIqKLZ","section-attachments":"section-attachments-3BMdoZq6rx",sectionAttachments:"section-attachments-3BMdoZq6rx","section-attachments-left":"section-attachments-left-3p7MGYXdtA",sectionAttachmentsLeft:"section-attachments-left-3p7MGYXdtA","section-attachments-circle":"section-attachments-circle-2mlf0gzAOQ",sectionAttachmentsCircle:"section-attachments-circle-2mlf0gzAOQ","section-attachments-icon":"section-attachments-icon-3wgUGZ8fmb",sectionAttachmentsIcon:"section-attachments-icon-3wgUGZ8fmb","section-attachments-container":"section-attachments-container-3LqDWeXLmj",sectionAttachmentsContainer:"section-attachments-container-3LqDWeXLmj","section-attachments-box":"section-attachments-box-1vnXXnQ5GA",sectionAttachmentsBox:"section-attachments-box-1vnXXnQ5GA","section-attachments-empty":"section-attachments-empty-2t6vfDr8FH",sectionAttachmentsEmpty:"section-attachments-empty-2t6vfDr8FH","section-header":"section-header-3k26XG5GAQ",sectionHeader:"section-header-3k26XG5GAQ","add-attachment":"add-attachment-34UEd6nn4M",addAttachment:"add-attachment-34UEd6nn4M","is-single-columned":"is-single-columned-1oGlW0TDrL",isSingleColumned:"is-single-columned-1oGlW0TDrL","member-selector":"member-selector-1QEXTghZvR",memberSelector:"member-selector-1QEXTghZvR","label-selector":"label-selector-1a1GqPYqCL",labelSelector:"label-selector-1a1GqPYqCL","watcher-selector":"watcher-selector-3l5ZmMWQWW",watcherSelector:"watcher-selector-3l5ZmMWQWW","text-field":"text-field-cRKM46X-Ir",textField:"text-field-cRKM46X-Ir","header-panel-menu-wrapper":"header-panel-menu-wrapper-3_DbYafM1f",headerPanelMenuWrapper:"header-panel-menu-wrapper-3_DbYafM1f",focus:"focus-3hU8y9xT9q","detail-id":"detail-id-1xv7Dg5HSl",detailId:"detail-id-1xv7Dg5HSl",code:"code-21Jn8HOUW3","last-number":"last-number-3JvJw7xZU3",lastNumber:"last-number-3JvJw7xZU3","last-id":"last-id-2xCHJXMJMo",lastId:"last-id-2xCHJXMJMo","copy-icon":"copy-icon-2XXsb0g0lw",copyIcon:"copy-icon-2XXsb0g0lw",number:"number-1sTlvpqCUS","last-line":"last-line-XZZwvgEiHr",lastLine:"last-line-XZZwvgEiHr","code-id-divide-line":"code-id-divide-line-3o6gBfatFQ",codeIdDivideLine:"code-id-divide-line-3o6gBfatFQ",description:"description-1FtoB48xrw",menus:"menus-3I_bmv1NUh","pre-button":"pre-button-3ksIQCNIkK",preButton:"pre-button-3ksIQCNIkK","next-button":"next-button-1_I-FdOG-M",nextButton:"next-button-1_I-FdOG-M",disabled:"disabled-2KlkmxT-qT","divide-line":"divide-line-2wGcsCGRim",divideLine:"divide-line-2wGcsCGRim","spread-button":"spread-button-jOzS29himt",spreadButton:"spread-button-jOzS29himt",expanded:"expanded-2NnlaYW6GO","title-input":"title-input-EPO5WUy3uw",titleInput:"title-input-EPO5WUy3uw","title-input-focus":"title-input-focus-q7o6EMXadw",titleInputFocus:"title-input-focus-q7o6EMXadw","title-input-scrolled":"title-input-scrolled-1iWLVZDbDF",titleInputScrolled:"title-input-scrolled-1iWLVZDbDF","title-input-wrap":"title-input-wrap-vgzClStSYY",titleInputWrap:"title-input-wrap-vgzClStSYY","title-input-focus-wrap":"title-input-focus-wrap-3gN9im9Zbb",titleInputFocusWrap:"title-input-focus-wrap-3gN9im9Zbb","brief-info":"brief-info-27CU_lgDWF",briefInfo:"brief-info-27CU_lgDWF","left-wrapper":"left-wrapper-18ygb6EL-u",leftWrapper:"left-wrapper-18ygb6EL-u","right-wrapper":"right-wrapper-KFiHvmp92u",rightWrapper:"right-wrapper-KFiHvmp92u","create-time":"create-time-ccw254F72L",createTime:"create-time-ccw254F72L",iteration:"iteration-9DhC3r4iGf","iteration-in-detail":"iteration-in-detail-EPnCqqHcEI",iterationInDetail:"iteration-in-detail-EPnCqqHcEI","create-user":"create-user-25eHwf3GOK",createUser:"create-user-25eHwf3GOK",watching:"watching-3LL8x8cmqH",step:"step-2weyfH8blR","sub-items-wrapper":"sub-items-wrapper-uZwQCu5zPG",subItemsWrapper:"sub-items-wrapper-uZwQCu5zPG","more-sources":"more-sources-3x5dKpu21b",moreSources:"more-sources-3x5dKpu21b","attachment-incline-icon":"attachment-incline-icon-35ZvHPeIhs",attachmentInclineIcon:"attachment-incline-icon-35ZvHPeIhs","attachment-incline-icon-margin":"attachment-incline-icon-margin-3-2mdplnra",attachmentInclineIconMargin:"attachment-incline-icon-margin-3-2mdplnra",gap:"gap-iaYekAmqRM","subtask-creation-input":"subtask-creation-input-3pnwuGHNdS",subtaskCreationInput:"subtask-creation-input-3pnwuGHNdS","spec-wrapper":"spec-wrapper-2x83MygJUZ",specWrapper:"spec-wrapper-2x83MygJUZ","spec-detail":"spec-detail-325DJsLsc5",specDetail:"spec-detail-325DJsLsc5","spec-main":"spec-main-MYrS-0yJmd",specMain:"spec-main-MYrS-0yJmd","is-full-width":"is-full-width-34SpH5ZLis",isFullWidth:"is-full-width-34SpH5ZLis","spec-attribute":"spec-attribute-1NukPDNFti",specAttribute:"spec-attribute-1NukPDNFti","meeting-notify":"meeting-notify-32-U-7cD39",meetingNotify:"meeting-notify-32-U-7cD39",desc:"desc-JWPkJkxbsU","enter-meeting":"enter-meeting-2kyXET6BpS",enterMeeting:"enter-meeting-2kyXET6BpS","creator-info":"creator-info-19G6XEWCxc",creatorInfo:"creator-info-19G6XEWCxc","split-line":"split-line-JDyjX5wvDo",splitLine:"split-line-JDyjX5wvDo","is-spec":"is-spec-26z1H4GXAD",isSpec:"is-spec-26z1H4GXAD",label:"label-mYC7MPGvFJ",required:"required-eoaTqS1Ta3","custom-bar":"custom-bar-3NWACEUsiQ",customBar:"custom-bar-3NWACEUsiQ","spec-header":"spec-header-OhEN_7AHbh",specHeader:"spec-header-OhEN_7AHbh","scroll-focus":"scroll-focus-177lJzeEkH",scrollFocus:"scroll-focus-177lJzeEkH",fixed:"fixed-2lp2oEARQ7","no-border":"no-border-1MbtfBQbLG",noBorder:"no-border-1MbtfBQbLG",main:"main-zIfZCy01KW",detail:"detail-XkdBNrh2Dx","full-screen-main":"full-screen-main-1EW3wVrO2b",fullScreenMain:"full-screen-main-1EW3wVrO2b","toolbar-portal":"toolbar-portal-30CACRkPIV",toolbarPortal:"toolbar-portal-30CACRkPIV","scrolled-title-wrap":"scrolled-title-wrap-2xHsLg2yER",scrolledTitleWrap:"scrolled-title-wrap-2xHsLg2yER","scrolled-title-inner-wrap":"scrolled-title-inner-wrap-1l2-92OuGW",scrolledTitleInnerWrap:"scrolled-title-inner-wrap-1l2-92OuGW","title-icon-wrap":"title-icon-wrap-14XIW0XmFS",titleIconWrap:"title-icon-wrap-14XIW0XmFS",breadcrumb:"breadcrumb-3qbj-BB6mN","title-icon":"title-icon-1cbMdlLNOV",titleIcon:"title-icon-1cbMdlLNOV","no-hover-icon":"no-hover-icon-2OnTdi3TZi",noHoverIcon:"no-hover-icon-2OnTdi3TZi",hide:"hide-3N66ZdQu2J","spec-detail-info":"spec-detail-info-3CcpabjDAy",specDetailInfo:"spec-detail-info-3CcpabjDAy","custom-main-wrapper":"custom-main-wrapper-3aHdGeVadO",customMainWrapper:"custom-main-wrapper-3aHdGeVadO","to-full-screen-btn":"to-full-screen-btn-3WzHGXULYW",toFullScreenBtn:"to-full-screen-btn-3WzHGXULYW","cancel-full-screen-btn":"cancel-full-screen-btn-1FdL1yg_JV",cancelFullScreenBtn:"cancel-full-screen-btn-1FdL1yg_JV","open-new-link":"open-new-link-RybTe_b5m9",openNewLink:"open-new-link-RybTe_b5m9",processing:"processing-3FCshX5kgC",waiting:"waiting-17DhjxCjPG",title:"title-xGUA5GwlLo",time:"time-aAbhzfIYC1",line:"line-3Zc9h49d_V"}},qMwZ:function(e,t,a){e.exports={body:"body-1D-X0rHdEn",prev:"prev-3kWJYBVfth",title:"title-2d79wIJvfW",list:"list-3bMuF-CyYq","reference-list":"reference-list-3mA0QTM-Wt",referenceList:"reference-list-3mA0QTM-Wt",icon:"icon-35mQO6LKVt","resource-id":"resource-id-3_bCFe8-7V",resourceId:"resource-id-3_bCFe8-7V","resource-title":"resource-title-2BiQkJnJUK",resourceTitle:"resource-title-2BiQkJnJUK","resource-status":"resource-status-3X3U1Rqzie",resourceStatus:"resource-status-3X3U1Rqzie","delete-status":"delete-status-1-YOpSqoL4",deleteStatus:"delete-status-1-YOpSqoL4","disable-link":"disable-link-1xrD97x-9U",disableLink:"disable-link-1xrD97x-9U","item-date":"item-date-27m-Zj1IzV",itemDate:"item-date-27m-Zj1IzV","delete-style":"delete-style-2CSzp6_16n",deleteStyle:"delete-style-2CSzp6_16n","add-reference":"add-reference-1yhv5K5hJr",addReference:"add-reference-1yhv5K5hJr","vcs-detail":"vcs-detail-NYXs97IDZc",vcsDetail:"vcs-detail-NYXs97IDZc","vcs-tag":"vcs-tag-3zkO1eyvKV",vcsTag:"vcs-tag-3zkO1eyvKV","vcs-icon":"vcs-icon-23c6lUeYLZ",vcsIcon:"vcs-icon-23c6lUeYLZ","vcs-text":"vcs-text-dAUZRbxG3H",vcsText:"vcs-text-dAUZRbxG3H","vcs-committer":"vcs-committer-1-gWmFQul1",vcsCommitter:"vcs-committer-1-gWmFQul1"}},qjwa:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=E(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=n(a("u3SJ")),v=n(a("zIEN")),h=a("dtw8"),g=a("1qdz");function E(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(E=function(e){return e?a:t})(e)}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var b={CREATE:(0,u.t)("\u521b\u5efa\u4e86 "),REQUIREMENT_CREATE_FROM_DEFECT:(0,u.t)("\u5c06\u7f3a\u9677\u8f6c\u4e3a\u9700\u6c42 "),STORY_CREATE_FROM_DEFECT:(0,u.t)("\u8f6c\u5316\u4e86\u7f3a\u9677\u4e3a\u7528\u6237\u6545\u4e8b "),PRODUCT_REQUIREMENT_CREATE_FROM_DEFECT:"\u8f6c\u5316\u4e86\u7f3a\u9677\u4e3a\u4ea7\u54c1\u9700\u6c42",CONVERT_ISSUE:(0,u.t)("\u5c06\u751f\u4ea7\u95ee\u9898\u8f6c\u4e3a ")},I=function(e){(0,l.default)(a,e);var t=y(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.itemType,n=e.projectPath,r=t&&t.issueLog&&t.issueLog.action,o=t&&t.issueLog&&t.issueLog.action&&"REQUIREMENT_CREATE_FROM_DEFECT"===t.issueLog.action,i="STORY_CREATE_FROM_DEFECT"===r||"PRODUCT_REQUIREMENT_CREATE_FROM_DEFECT"===r,l="PRODUCT_REQUIREMENT_CREATE_FROM_DEFECT"===t.issueLog.action?"/requiremanage?requirementCode=".concat(t.issueLog.content.requirementCode):"".concat(n,"/requirements/issues/").concat(t.issueLog.content.requirementCode,"/detail");return f.default.createElement("div",{className:g.listItem,key:t.id},f.default.createElement("div",{className:g.dot}),f.default.createElement("div",{className:"PRODUCT_REQUIREMENT_CREATE_FROM_DEFECT"===r?g.content2:g.content},i?f.default.createElement(v.default,{className:"mr-10 ".concat(g.icon)}):f.default.createElement(m.default,{className:"mr-10 ".concat(g.icon)}),f.default.createElement("span",{className:g.user},t.creator.name),f.default.createElement("span",{className:"PRODUCT_REQUIREMENT_CREATE_FROM_DEFECT"===r?"":g.customAction},t.issueLog&&1===t.issueLog.old?"\u3010\u6e90\u3011":"",b[r],f.default.createElement("span",{style:{color:"#0066ff",cursor:"pointer"},onClick:function(){window.open(l,"_blank")}},"PRODUCT_REQUIREMENT_CREATE_FROM_DEFECT"===r&&t.issueLog.content.requirementCode?"#".concat(t.issueLog.content.requirementCode,"-").concat(t.issueLog.content.requirementName):""),f.default.createElement("span",{style:{color:"#0066ff",cursor:"pointer"},onClick:function(){window.open(l,"_blank")}}," ","STORY_CREATE_FROM_DEFECT"===r&&t.issueLog.content.requirementCode?"#".concat(t.issueLog.content.requirementCode,"-").concat(t.issueLog.content.requirementName):""),"STORY_CREATE_FROM_DEFECT"===r&&t.issueLog.content.defectCode?"\u3010".concat(t.issueLog.content.defectName,"\u3011"):"","PRODUCT_REQUIREMENT_CREATE_FROM_DEFECT"===r&&t.issueLog.content.defectCode?"\u7531\u3010".concat(t.issueLog.content.projectDisplayName,"\u3011\u7814\u53d1\u7a7a\u95f4\u6d41\u8f6c\u800c\u6765"):"",i?"":"EPIC"===t.issueType?(0,u.t)("\u53f2\u8bd7"):o?this.transferCover(t.issueLog):a),f.default.createElement("span",{className:g.time},(0,p.timeFormat)(t.createdAt,"YYYY-MM-DD HH:mm"))))}},{key:"transferCover",value:function(e){var t=e&&e&&e.content,a=this.props.projectPath;return f.default.createElement("span",{title:t.requirementName},f.default.createElement(h.Link,{to:"".concat(a,"/requirements/issues/").concat(t.requirementCode,"/detail"),target:"_blank"},"#",t.requirementCode,"-",t.requirementName))}}]),a}(f.Component);t.default=I,I.propTypes={item:d.default.object,itemType:d.default.string,projectPath:d.default.string}},"r/50":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjUgKDY3NDY5KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5maWxlLXR5cGUvb3RoZXJzPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9Iue8uumZty/or6bmg4UiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSLpmYTku7YiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC01MTYuMDAwMDAwLCAtNjYwLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iZmlsZS10eXBlL290aGVycyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTE2LjAwMDAwMCwgNjYwLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTIsMy40NjM4OTU4NGUtMTMgTDE4LDMuNDYzODk1ODRlLTEzIEMxOS4xMDQ1Njk1LDMuNDYxODY2NzhlLTEzIDIwLDAuODk1NDMwNSAyMCwyIEwyMCwxOCBDMjAsMTkuMTA0NTY5NSAxOS4xMDQ1Njk1LDIwIDE4LDIwIEwyLDIwIEMwLjg5NTQzMDUsMjAgLTEuNjQxMDg2MDllLTE1LDE5LjEwNDU2OTUgLTEuNzc2MzU2ODRlLTE1LDE4IEwtMS43NzYzNTY4NGUtMTUsMiBDLTEuOTExNjI3NTllLTE1LDAuODk1NDMwNSAwLjg5NTQzMDUsMy40NTcwNDMxMWUtMTMgMiwzLjQ1NTAxNDA1ZS0xMyBaIiBpZD0iUmVjdGFuZ2xlLTM3IiBmaWxsPSIjQTFBQ0JGIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTAsMTUgQzkuNCwxNSA5LDE0LjYgOSwxNCBDOSwxMy40IDkuNCwxMyAxMCwxMyBDMTAuNiwxMyAxMSwxMy40IDExLDE0IEMxMSwxNC42IDEwLjYsMTUgMTAsMTUgWiIgaWQ9IlBhdGgiIGZpbGw9IiNGRkZGRkYiIG9wYWNpdHk9IjAuOTAwMDAwMDM2Ij48L3BhdGg+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEuNiwxMC40IEMxMS4xLDEwLjcgMTEuMSwxMC44IDExLjEsMTEgTDExLjEsMTIgTDkuMSwxMiBMOS4xLDExIEM5LjEsOS43IDkuOSw5LjEgMTAuNSw4LjcgQzExLDguNCAxMS4xLDguMyAxMS4xLDggQzExLjEsNy40IDEwLjcsNyAxMC4xLDcgQzkuNyw3IDkuNCw3LjIgOS4yLDcuNSBMOC43LDguNCBMNyw3LjQgTDcuNSw2LjUgQzgsNS42IDksNSAxMC4xLDUgQzExLjgsNSAxMy4xLDYuMyAxMy4xLDggQzEzLjEsOS40IDEyLjIsMTAgMTEuNiwxMC40IFoiIGlkPSJQYXRoIiBmaWxsPSIjRkZGRkZGIiBvcGFjaXR5PSIwLjkwMDAwMDAzNiI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},"r/nT":function(e,t,a){e.exports={item:"item-DMs3bR_1xd","item-search":"item-search-26eF1QVJxq",itemSearch:"item-search-26eF1QVJxq",opacity:"opacity-2bE6_s871A",icon:"icon-urPLrF3W06",code:"code-RBEVBnICDG",name:"name-2GO-z-jobX",header:"header-2MoUOhm33j",title:"title-nuVvXwytI7",divider:"divider-uAjdTbWncO","add-icon":"add-icon-3TBpruJ1Hl",addIcon:"add-icon-3TBpruJ1Hl","cancel-btn":"cancel-btn-36GSrPZpO3",cancelBtn:"cancel-btn-36GSrPZpO3","custom-input":"custom-input-2U1zMQCNG5",customInput:"custom-input-2U1zMQCNG5","custom-search-icon":"custom-search-icon-1JtYFlRuza",customSearchIcon:"custom-search-icon-1JtYFlRuza",list:"list-NzgbKKqhwj","list-wrapper":"list-wrapper-3DMGkIXnMi",listWrapper:"list-wrapper-3DMGkIXnMi","custom-item":"custom-item-Wyse3NiZht",customItem:"custom-item-Wyse3NiZht","no-result":"no-result-1btIQ_2YLO",noResult:"no-result-1btIQ_2YLO"}},r1tQ:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=n(a("oHG8")),v=a("1qdz");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E={PRODUCT_GROUP:"\u4ea7\u54c1\u7ec4",SYSTEM_CLUSTER_TYPE:"\u7cfb\u7edf\u7fa4",SYSTEM_TYPE:"\u6240\u5c5e\u7cfb\u7edf",ISSUE_PROGRAM:"\u6240\u5c5e\u9879\u76ee"},y=function(e){(0,l.default)(a,e);var t=g(a);function a(){var e;(0,o.default)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).formantAction=function(){var t,a,n,r,o,i,l=e.props.item.issueLog;return"UPDATE"===l.action&&null!==(t=l.content)&&void 0!==t&&t.name?f.default.createElement(f.default.Fragment,null,f.default.createElement("span",null,"\u66f4\u65b0\u4e86".concat(E[l.target],"\u4e3a")),f.default.createElement("span",{className:"ml-10 ".concat(v.customAction," ").concat(v.moreDot),title:(null===(a=l.content)||void 0===a?void 0:a.name)||(0,u.t)("\u672a\u89c4\u5212")},(null===(n=l.content)||void 0===n?void 0:n.name)||(0,u.t)("\u672a\u89c4\u5212"))):f.default.createElement(f.default.Fragment,null,f.default.createElement("span",null,"\u79fb\u9664\u4e86".concat(E[l.target])),(null===(r=l.content)||void 0===r?void 0:r.name)&&f.default.createElement("span",{className:"ml-10 ".concat(v.customAction," ").concat(v.moreDot),title:(null===(o=l.content)||void 0===o?void 0:o.name)||(0,u.t)("\u672a\u89c4\u5212")},(null===(i=l.content)||void 0===i?void 0:i.name)||(0,u.t)("\u672a\u89c4\u5212")))},e}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item;return f.default.createElement("div",{className:v.listItem,key:e.id},f.default.createElement("div",{className:v.dot}),f.default.createElement("div",{className:v.content},f.default.createElement(m.default,{className:"mr-10 ".concat(v.icon)}),f.default.createElement("span",{className:v.user},e.creator.name),e.issueLog&&1===e.issueLog.old?"\u3010\u6e90\u3011":"",this.formantAction(),f.default.createElement("span",{className:v.time},(0,p.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=y,y.propTypes={item:d.default.object}},r9gF:function(e,t,a){e.exports={item:"item-3Lz105ys6b","item-search":"item-search-1miQbLtlK8",itemSearch:"item-search-1miQbLtlK8",icon:"icon-2Z3_BjqYBe",content:"content-2NV2bcmjmw",name:"name-c0PhHOfCUO",description:"description-3KZIHRUd_Y",header:"header-1E86dWJiJ5","header-left":"header-left-QNuvMl0dR8",headerLeft:"header-left-QNuvMl0dR8",title:"title-35-yhL12d8",divider:"divider-3TM6h6qvin","add-icon":"add-icon-3GJeOgZxvf",addIcon:"add-icon-3GJeOgZxvf","batch-create":"batch-create-2dy4c37Bje",batchCreate:"batch-create-2dy4c37Bje","popover-content":"popover-content-_hhmXrL8PZ",popoverContent:"popover-content-_hhmXrL8PZ","popover-item":"popover-item-FuioZMDIqg",popoverItem:"popover-item-FuioZMDIqg",popover:"popover-V5CwTn-E5r","cancel-btn":"cancel-btn-2OnirIRrpn",cancelBtn:"cancel-btn-2OnirIRrpn",svn:"svn-4ozyyqDNQ3","custom-input":"custom-input-2hIdwH-Yez",customInput:"custom-input-2hIdwH-Yez","custom-search-icon":"custom-search-icon-2YUVWw5h_N",customSearchIcon:"custom-search-icon-2YUVWw5h_N",list:"list--9eWongC_T","list-wrapper":"list-wrapper-2B01-YCL_z",listWrapper:"list-wrapper-2B01-YCL_z","custom-item":"custom-item-1wvYDAtEdh",customItem:"custom-item-1wvYDAtEdh","no-result":"no-result-2i9Ggb6qzQ",noResult:"no-result-2i9Ggb6qzQ"}},rAXo:function(e,t,a){"use strict";a.r(t);var n=a("cDcd"),r=a.n(n),o=a("mVeg"),i=a("Yaim"),l=a.n(i),c=a("K2gz"),s=a.n(c),u=a("sftu"),d=a.n(u),f=a("zmh9"),p=a.n(f),m=a("yZ+p"),v=a.n(m),h=a("AwMv"),g=a("AjCu"),E=a("xgZS"),y=a("7FZc"),b=a("aHEs"),I=a("5JFE"),S=a("vCmj"),T=a.n(S),w=a("IZvD"),C=a.n(w),O=a("cOQu"),N=a.n(O),P=a("SEFM"),j=a.n(P),D=a("2oD7"),k=a.n(D),R=a("Do0A"),M=a.n(R),A=a("9bl7"),L=a.n(A),x=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},_=function(e,t,a){if(a||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))},F=function(e){var t=e.isshow,a=e.setIsshow,i=e.selected,l=e.setSelected,c=e.listValue,s=e.setListValue,u=e.valueInput,d=e.setValueInput,f=e.items,p=e.selectFocusType,m=e.more,v=e.cRef,h=x(Object(n.useState)([]),2),g=h[0],E=h[1];Object(n.useImperativeHandle)(v,(function(){return{clearList:function(){E([])}}}));var y=r.a.createElement("div",{className:L.a.optionsBody,onClick:function(e){return function(e){e.stopPropagation(),a(!0)}(e)}},void 0!==u?r.a.createElement("div",{className:L.a.FilterInput},r.a.createElement(C.a,{onChange:function(e,t){d(t)},placeholder:Object(o.t)("\u641c\u7d22"),value:u,icon:r.a.createElement(N.a,{onClick:function(){d(u)}})})):null,r.a.createElement("div",{className:L.a.optionClose,onClick:function(e){e.stopPropagation(),u&&d(""),a(!1),s([]),l([]),E([])}},r.a.createElement(k.a,{className:L.a.optionIcon})," \u6e05\u9664\u5df2\u9009\u62e9\u9879"),r.a.createElement("ul",{className:L.a.optionsUl},f.map((function(e){return r.a.createElement("li",{className:"".concat(c.includes(e.value)?L.a.active:""," ").concat(L.a.optionsLi),key:e.value,onClick:function(t){return function(e,t){e.stopPropagation();var n=g,r=[];(n=[t]).map((function(e){r.push(e.value)})),s(_([],x(r),!1)),l(_([],x(n),!1)),a(!1)}(t,e)}}," ",r.a.createElement(M.a,{className:L.a.optionsLiIcon}),e.text)})),m));return r.a.createElement(T.a,{menu:y,className:"".concat(t?L.a.show:L.a.closeoption," ").concat(L.a.filter)},r.a.createElement("div",{className:L.a.selected,onClick:function(e){e.stopPropagation(),p&&p(),a(!t)}},i.length?r.a.createElement("div",{className:L.a.selectedtext},i.length&&i.map((function(e,t){return t<3?r.a.createElement("div",{className:L.a.text},e.text," ",t!==i.length-1?r.a.createElement("span",null,","):null):void 0})),i.length>3?r.a.createElement("div",{className:L.a.text}," \u5df2\u9009\u62e9",i.length,"\u4e2a"):null):"\u8bf7\u9009\u62e9",r.a.createElement(j.a,{className:L.a.icon})))},W=a("rkME"),B=a("P0O0"),H=function(){return(H=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},U=function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function i(e){try{c(n.next(e))}catch(t){o(t)}}function l(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}c((n=n.apply(e,t||[])).next())}))},Y=function(e,t){var a,n,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(a=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){i.label=l[1];break}if(6===l[0]&&i.label<r[1]){i.label=r[1],r=l;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(l);break}r[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(c){l=[6,c],n=0}finally{a=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},q=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},G=function(e,t,a){if(a||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))},z=null,V={abort:null,promise:null};t.default=function(e){var t=e.projectId,a=e.issueId,c=e.issueCode,u=e.showModal,f=e.toogleRecordModal,m=e.onRefresh,S=e.attributes,T=Object(n.useRef)(null),w=q(Object(n.useState)(!1),2),C=w[0],O=w[1],N=q(Object(n.useState)([]),2),P=N[0],j=N[1],D=q(Object(n.useState)(),2),k=D[0],R=D[1],M=q(Object(n.useState)(NaN),2),A=M[0],L=M[1],x=q(Object(n.useState)([]),2),_=x[0],Z=x[1],K=q(Object(n.useState)(!1),2),J=K[0],Q=K[1],X=q(Object(n.useState)([]),2),$=X[0],ee=X[1],te=q(Object(n.useState)([]),2),ae=te[0],ne=te[1],re=q(Object(n.useState)([]),2),oe=re[0],ie=re[1],le=q(Object(n.useState)(!1),2),ce=le[0],se=le[1],ue=q(Object(n.useState)(""),2),de=ue[0],fe=ue[1],pe=q(Object(n.useState)({}),2),me=pe[0],ve=pe[1],he=q(Object(n.useState)(!1),2),ge=he[0],Ee=he[1];Object(n.useEffect)((function(){ye(),Ce()}),[]),Object(n.useEffect)((function(){Object.values(me).length&&Object(h.getSystemListBySystemId)(H(H({},me),{name:de})).then((function(e){e.data.list.map((function(e){e.text=e.systemName,e.value=e.id})),ee(G([],q(e.data.list),!1))}))}),[de]);var ye=function(e){void 0===e&&(e=""),O(!0),z&&clearTimeout(z),V.abort&&V.abort(),z=setTimeout((function(){(V=Ie(Object(h.fetchAllPrdRequirement)(t,a,e))).promise.then((function(e){e.data&&j(e.data),O(!1)})).catch((function(){O(!1)}))}),300)},be=[{key:"checkbox",width:80,title:function(){return r.a.createElement("span",{className:l.a.label})},render:function(e,t){return r.a.createElement("div",{className:s()(l.a.colWrapper,l.a.link)},r.a.createElement(g.a,{onChange:function(e){return Te(e,t)},checked:A===t.id}))}},{key:"id",width:100,title:function(){return r.a.createElement("span",{className:l.a.label},"ID")},render:function(e,t){return r.a.createElement("div",{className:l.a.colWrapper},"#",t.code)}},{key:"name",width:640,title:function(){return r.a.createElement("span",{className:l.a.label},"\u540d\u79f0")},render:function(e,t){return r.a.createElement("div",{title:t.name,className:l.a.colWrapper},t.name)}}],Ie=function(e){var t={abort:null,permise:null},a=new Promise((function(e,a){t.abort=a}));return t.promise=Promise.race([e,a]),t},Se=function(e){R(e),ye(e)},Te=function(e,t){e?(L(t.id),Ee(!1),ie([]),ne([]),fe(""),Object(h.fetchProductGroupSelected)(t.id).then((function(e){var t=e.data,a=t.filter((function(e){return 1===e.type})),n=t.filter((function(e){return 2===e.type}));if(a.length){if(!n.length){Object(E.warning)("\u4ea7\u54c1\u9700\u6c42\u6240\u5c5e\u7cfb\u7edf\u4e3a\u7a7a\uff0c\u8bf7\u5148\u5173\u8054\u7cfb\u7edf!");var r={systemClusterIds:t.map((function(e){return e.refId})),name:"",page:1,pageSize:9999};ve(H({},r)),Object(h.getSystemListBySystemId)(r).then((function(e){e.data.list.map((function(e){e.text=e.systemName,e.value=e.id})),ee(G([],q(e.data.list),!1)),Q(!0)}))}}else Object(E.warning)("\u4ea7\u54c1\u9700\u6c42\u6240\u5c5e\u7cfb\u7edf\u7fa4\u4e3a\u7a7a\uff0c\u8bf7\u5148\u5173\u8054\u7cfb\u7edf\u7fa4!"),Ee(!0)}))):L(NaN)},we=function(){return U(void 0,void 0,void 0,(function(){var e,n,r,o,i;return Y(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,Object(h.relationRequirement)(t,c,{targIssueId:A})];case 1:return l.sent(),Object(E.success)("\u5173\u8054\u4ea7\u54c1\u9700\u6c42\u6210\u529f"),Q(!1),f(!1),m(),[3,3];case 2:return e=l.sent(),console.log(e),[3,3];case 3:return"\u5f00\u53d1\u7a7a\u95f4"!==(null!==(i=null===(o=null===(r=null===(n=window.reduxStore.getState())||void 0===n?void 0:n.APP)||void 0===r?void 0:r.currentProject)||void 0===o?void 0:o.projectType)&&void 0!==i?i:"")?[3,5]:[4,Object(h.checkTeam)({projectID:t,storyId:a,issueId:A}).then((function(e){e.data||Object(E.warning)("\u5f53\u524d\u7528\u6237\u6545\u4e8b\u5bf9\u5e94\u7684\u8d1f\u8d23\u5c0f\u961f\u4e0e\u9009\u62e9\u7684\u4ea7\u54c1\u9700\u6c42\u5bf9\u5e94\uff08\u4e3b\u529e\u5c0f\u961f\u222a\u8f85\u529e\u5c0f\u961f\uff09\u65e0\u4ea4\u96c6\u3002")}))];case 4:l.sent(),l.label=5;case 5:return[2]}}))}))},Ce=function(){S.systemsId||Object(b.fetchSystemsByProjectId)(t,"").then((function(e){var t=e.data;Z(t)}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{closeButton:!0,show:u,onHide:function(){return f(!1)},style:{width:950},outsideClickCloseable:!1},r.a.createElement(d.a.Header,null,r.a.createElement("div",{className:l.a.header},r.a.createElement("h2",null,Object(o.t)("\u5173\u8054\u4ea7\u54c1\u9700\u6c42")),r.a.createElement(W.CurrentUserResourcePermission,{resourceType:"project",resourceId:t,action:B.RelationRequirementPermissionAction.CREATE,noPermissibleRender:r.a.createElement(y.TooltipTrigger,{title:"\u6682\u65e0\u5feb\u6377\u521b\u5efa\u4ea7\u54c1\u9700\u6c42\u6743\u9650"},r.a.createElement(p.a,{disabled:!0},Object(o.t)("\u5feb\u6377\u521b\u5efa\u4ea7\u54c1\u9700\u6c42")))},r.a.createElement(p.a,{onClick:function(){var e,t=S.systemsId,a=NaN;t?a=t:1===_.length&&(a=null===(e=_[0])||void 0===e?void 0:e.systemId),a?Object(b.getGroupSystemId)(a).then((function(e){var t=e.data,a=t.product_group,n=t.product_system_groups,r=t.systems;a.refId&&n.refId&&r.refId?window.open("/requiremanage?autoCreateType=prd_requirement&product_group_id=".concat(a.refId,"&product_system_groups_id=").concat(n.refId,"&systems_id=").concat(r.refId,"&systems_name=").concat(encodeURIComponent(r.name)),"_blank"):Object(E.warning)("\u5f53\u524d\u7528\u6237\u4e0d\u5728\u7cfb\u7edf\u5bf9\u5e94\u7684\u4ea7\u54c1\u7ec4\u5217\u8868\u4e2d\uff0c\u65e0\u6cd5\u521b\u5efa\u4ea7\u54c1\u9700\u6c42")})).catch((function(e){console.log(e)})):window.open("/requiremanage?autoCreateType=prd_requirement","_blank")}},Object(o.t)("\u5feb\u6377\u521b\u5efa\u4ea7\u54c1\u9700\u6c42"))))),r.a.createElement(d.a.Body,null,r.a.createElement("div",{className:l.a.customFilterBar},r.a.createElement("div",{className:l.a.dropdwonMargin},r.a.createElement(v.a,{value:k,onChange:function(e){Se(e.target.value)},suffix:k?r.a.createElement("div",{className:i.clearIcon,onClick:function(){Se("")}}):r.a.createElement("div",{className:i.searchIcon}),placeholder:Object(o.t)("\u4ea7\u54c1\u9700\u6c42\u540d\u79f0")}))),r.a.createElement("div",{ref:T,className:l.a.tableWrapper},r.a.createElement(I.Table,{loading:C,columns:be,dataSource:P,pagination:!1,bordered:!0}))),r.a.createElement(d.a.Footer,null,r.a.createElement("div",{className:l.a.btnFooter},r.a.createElement(W.CurrentUserResourcePermission,{resourceType:"project",resourceId:t,action:B.RelationRequirementPermissionAction.UPDATE,noPermissibleRender:r.a.createElement(y.TooltipTrigger,{title:"\u6682\u65e0\u5173\u8054\u4ea7\u54c1\u9700\u6c42\u6743\u9650"},r.a.createElement(p.a,{disabled:!0},Object(o.t)("\u4fdd\u5b58")))},r.a.createElement(p.a,{disabled:C||!A||ge,onClick:function(){return we()},"data-container":!0,"data-title":Object(o.t)("\u5173\u8054\u4ea7\u54c1\u9700\u6c42-\u4fdd\u5b58")},Object(o.t)("\u4fdd\u5b58"))),r.a.createElement(p.a,{style:{marginLeft:30},empty:!0,onClick:function(){return f(!1)}},Object(o.t)("\u53d6\u6d88"))))),r.a.createElement(d.a,{closeButton:!0,show:J,onHide:function(){L(NaN),Q(!1)},style:{width:450,top:"30%"},outsideClickCloseable:!1,onClick:function(e){e.stopPropagation(),se(!1)}},r.a.createElement(d.a.Header,null,r.a.createElement("div",{className:l.a.header},r.a.createElement("h2",null,Object(o.t)("\u5173\u8054\u7cfb\u7edf")))),r.a.createElement(d.a.Body,null,r.a.createElement(F,{isshow:ce,setIsshow:se,selected:ae,setSelected:ne,listValue:oe,setListValue:ie,items:$,valueInput:de,setValueInput:fe,selectFocusType:function(){se(!1)}})),r.a.createElement(d.a.Footer,null,r.a.createElement("div",{className:l.a.btnFooter},r.a.createElement(p.a,{disabled:C||!A,onClick:function(){var e={type:2,refId:ae[0].value,name:ae[0].text,requirementId:A};Object(h.bindingProduct)(e).then((function(e){0===e.code&&we()}))}},Object(o.t)("\u4fdd\u5b58")),r.a.createElement(p.a,{style:{marginLeft:30},empty:!0,onClick:function(){L(NaN),Q(!1)}},Object(o.t)("\u53d6\u6d88"))))))}},rOfl:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=g(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=a("1qdz"),v=n(a("GzxT")),h=a("nuIr");function g(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(g=function(e){return e?a:t})(e)}function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var y={ADD:(0,u.t)("\u5173\u8054"),REMOVE:(0,u.t)("\u53d6\u6d88\u5173\u8054")},b=function(e){(0,l.default)(a,e);var t=E(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item;return f.default.createElement("div",{className:m.listItem,key:e.id},f.default.createElement("div",{className:m.dot}),f.default.createElement("div",{className:m.content},f.default.createElement("div",{className:"mr-10 ".concat(m.icon)},(0,v.default)(e.issueLog.content.resource_type)),e.issueLog&&1===e.issueLog.old?"\u3010\u6e90\u3011":"",f.default.createElement("span",{className:m.user},e.creator.name),f.default.createElement("span",null,y[e.issueLog.action],"\u4e86",h.RESOURCE_TYPE[e.issueLog.content.resource_type]),f.default.createElement("a",{className:"ml-10",href:e.issueLog.content.path,title:e.issueLog.content.name,target:"_blank"},e.issueLog.content.name),f.default.createElement("span",{className:m.time},(0,p.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=b,b.propTypes={item:d.default.object}},"s/lc":function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var r=a("mVeg"),o=n(a("17x9")),i=n(a("cDcd")),l=n(a("sftu")),c=n(a("zmh9")),s=n(a("+9PU")),u=n(a("wVLe")),d=a("dvtM"),f=function(e){var t=e.show;return i.default.createElement("div",null,i.default.createElement(l.default,{className:s.default.container,show:t},i.default.createElement(l.default.Header,null,function(e){switch(e.status){case"success":return i.default.createElement("div",{className:s.default.header},i.default.createElement("span",{className:s.default.success}),i.default.createElement("span",{className:s.default.gapLeft},(0,r.t)("\u5bfc\u51fa\u6210\u529f\uff0c\u8bf7\u4e0b\u8f7d\u5bfc\u51fa\u6587\u4ef6")));case"error":return i.default.createElement("div",{className:s.default.header},i.default.createElement("span",{className:s.default.error}),i.default.createElement("span",{className:s.default.gapLeft},(0,r.t)("\u5bfc\u51fa\u5931\u8d25")));default:return i.default.createElement("div",{className:s.default.header},i.default.createElement("span",{className:s.default.loading},i.default.createElement(u.default,null)),i.default.createElement("span",{className:s.default.gapLeft},(0,r.t)("\u6b63\u5728\u5bfc\u51fa\uff0c\u8bf7\u7a0d\u540e...")))}}(e)),i.default.createElement(l.default.Body,null,function(e){var t=e.status,a=e.type,n=e.count,o=e.file,l=e.errorMsg;switch(t){case"success":return i.default.createElement("div",{className:s.default.body},n," ",(0,r.t)("\u6761"),d.MAP_TYPE_TO_NAME[a],(0,r.t)("\u5df2\u6210\u529f\u5bfc\u51fa\u5230")," ",i.default.createElement("a",{href:o.url,download:!0,target:"_blank"},o.name));case"error":return i.default.createElement("div",{className:s.default.body},l);default:return i.default.createElement("div",{className:s.default.body},(0,r.t)("\u5bfc\u51fa\u65f6\u95f4\u53ef\u80fd\u9700\u8981\u51e0\u79d2\u5230\u51e0\u5206\u949f\uff0c\u4f60\u53ef\u4ee5\u5173\u95ed\u5f53\u524d\u7a97\u53e3\uff0c\u5bfc\u51fa\u7ed3\u679c\u5c06\u5728\u7ad9\u5185\u901a\u77e5\u4e2d\u663e\u793a"))}}(e)),i.default.createElement(l.default.Footer,null,function(e){var t=e.status,a=e.onHide,n=e.file;switch(t){case"success":return i.default.createElement("div",null,i.default.createElement("a",{href:n.url,download:!0,target:"_blank",title:(0,r.t)("\u4e0b\u8f7d")},i.default.createElement(c.default,{className:s.default.gap},(0,r.t)("\u4e0b\u8f7d\u6587\u4ef6"))),i.default.createElement(c.default,{empty:!0,onClick:a},(0,r.t)("\u5173\u95ed")));case"error":default:return i.default.createElement("div",null,i.default.createElement(c.default,{empty:!0,onClick:a},(0,r.t)("\u5173\u95ed")))}}(e))))};f.propTypes={file:o.default.object,show:o.default.bool,type:o.default.string,count:o.default.number,status:o.default.string,downloadUrl:o.default.string,errorMsg:o.default.string,onHide:o.default.func};var p=f;t.default=p},s06w:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("0l/t");var o,i,l,c=n(a("lSNA")),s=n(a("lwsE")),u=n(a("W8MJ")),d=n(a("7W2i")),f=n(a("a1gu")),p=n(a("Nsbk")),m=O(a("cDcd")),v=n(a("17x9")),h=a("dtw8"),g=n(a("K2gz")),E=n(a("5nF9")),y=a("nuIr"),b=a("mVeg"),I=O(a("uelK")),S=a("dBa0"),T=n(a("/HJl")),w=a("7bn+");function C(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(C=function(e){return e?a:t})(e)}function O(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=C(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}function N(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,f.default)(this,a)}}var P=(0,h.withRouter)((l=i=function(e){(0,d.default)(a,e);var t=N(a);function a(){var e;(0,s.default)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={slotConfiguration:{}},e}return(0,u.default)(a,[{key:"componentDidMount",value:function(){this.getSlotInfo()}},{key:"getSlotInfo",value:function(){var e=this;(0,I.getSlotConfiguration)({slot:S.SLOTS.COLLABORATION_TAB_ONE,type:"CURRENT"}).then((function(t){var a=t.data;e.setState({slotConfiguration:a||{}})}))}},{key:"render",value:function(){var e=this.props,t=e.projectPath,a=e.location,n=e.children,r=e.currentProjectCooperateSettings,o=(e.ramOnline,e.currentProject),i=r&&r.COOPERATE_MODE&&r.COOPERATE_MODE===y.PROJECT_TYPE.CLASSIC,l=r&&r.PLAN_PAGE&&r.PLAN_PAGE===y.MODULE_SWITCH.OPENED,s=r&&r.ITERATION&&r.ITERATION===y.MODULE_SWITCH.OPENED,u=r&&r.REQUIREMENT&&r.REQUIREMENT===y.MODULE_SWITCH.OPENED,d=r&&r.MISSION&&r.MISSION===y.MODULE_SWITCH.OPENED,f=r&&r.DEFECT&&r.DEFECT===y.MODULE_SWITCH.OPENED,p=[!1,u,d,f],v=this.state.slotConfiguration,T=v.triggerType&&v.displayMode===S.SLOTS_DISPLAY.INLINE,C=v.triggerType&&v.displayMode!==S.SLOTS_DISPLAY.INLINE;return m.default.createElement("div",{className:E.default.menuBar},m.default.createElement("div",{className:E.default.leftSection},!i&&m.default.createElement(h.Link,{className:(0,g.default)(E.default.tabLink,(0,c.default)({},E.default.active,/\p\/.+\/backlog/.test(a.pathname))),to:"".concat(t,"/backlog/issues")},(0,b.t)("\u5f85\u89c4\u5212")),i&&l&&m.default.createElement(h.Link,{className:(0,g.default)(E.default.tabLink,(0,c.default)({},E.default.active,/\p\/.+\/planning/.test(a.pathname))),to:"".concat(t,"/collaboration/planning")},(0,b.t)("\u8ba1\u5212")),s&&m.default.createElement(h.Link,{className:(0,g.default)(E.default.tabLink,(0,c.default)({},E.default.active,/\p\/.+\/iterations/.test(a.pathname))),to:"".concat(t,"/iterations")},(0,b.t)("\u8fed\u4ee3")),s&&m.default.createElement("span",{className:E.default.divider}),!!p.length&&p.filter((function(e){return!!e})).length>=2&&m.default.createElement(h.Link,{className:(0,g.default)(E.default.tabLink,(0,c.default)({},E.default.active,/\p\/.+\/all/.test(a.pathname))),to:"".concat(t,"/all/issues")},(0,b.t)("\u5168\u90e8\u4e8b\u9879")),!i&&!1,u&&m.default.createElement(h.Link,{className:(0,g.default)(E.default.tabLink,(0,c.default)({},E.default.active,/\brequirements_product\b/.test(a.pathname))),to:"".concat(t,"/requirements_product/issues")},(0,b.t)("\u4ea7\u54c1\u9700\u6c42")),u&&m.default.createElement(h.Link,{className:(0,g.default)(E.default.tabLink,(0,c.default)({},E.default.active,/\p\/.+\/\brequirements\b/.test(a.pathname))),to:"".concat(t,"/requirements/issues")},(0,b.t)("\u7528\u6237\u6545\u4e8b")),d&&m.default.createElement(h.Link,{className:(0,g.default)(E.default.tabLink,(0,c.default)({},E.default.active,/\p\/.+\/assignments/.test(a.pathname))),to:"".concat(t,"/assignments/issues")},(0,b.t)("\u4efb\u52a1")),f&&m.default.createElement(h.Link,{className:(0,g.default)(E.default.tabLink,(0,c.default)({},E.default.active,/\p\/.+\/bug-tracking/.test(a.pathname))),to:"".concat(t,"/bug-tracking/issues")},(0,b.t)("\u7f3a\u9677")),T&&m.default.createElement(h.Link,{className:(0,g.default)(E.default.tabLink,(0,c.default)({},E.default.active,/\p\/.+\/slot/.test(a.pathname))),to:"".concat(t,"/collaboration/slot")},v.triggerText)),m.default.createElement("div",{className:E.default.rightSection},C&&m.default.createElement("div",{style:{marginRight:"8px",lineHeight:1}},m.default.createElement(I.default,{modalProps:{getContainer:function(){return document.querySelector("#container")||document.body}},project:{id:o.id},drawerProps:{zIndex:w.ZINDEX_LEVEL.MODAL+1,getContainer:function(){return document.querySelector("#container")||document.body},width:680,style:{position:"absolute"}},identity:S.SLOTS.COLLABORATION_TAB_ONE})),n))}}]),a}(m.Component),i.propTypes={projectPath:v.default.string,currentProject:v.default.object,params:v.default.object,location:v.default.object,route:v.default.object,children:v.default.node,currentTab:v.default.string,currentProjectCooperateSettings:v.default.object,ramOnline:v.default.bool},o=l))||o;var j=(0,T.default)((function(e){var t,a;return{ramOnline:null===(t=e.CURRENT_USER_ENTERPRISE_PERMISSION_NAMESPACE_FOR_REDUX_STORE)||void 0===t||null===(a=t.ramStatus)||void 0===a?void 0:a.ramOnline}}),{})(P);t.default=j},s4qW:function(e,t,a){e.exports={list:"list-3VmYQR0ZhI"}},sMiW:function(e,t,a){e.exports={"invite-modal":"invite-modal-1yO1XrZeOD",inviteModal:"invite-modal-1yO1XrZeOD","modal-body":"modal-body-3nY0_Q8sR6",modalBody:"modal-body-3nY0_Q8sR6",row:"row-3jshSMvplR",content:"content-2hEFhFymZv",title:"title-3GbUHVHaDb",footer:"footer-2t--uB02Sq",confirm:"confirm-2Ky4YMY4zA",close:"close-1tnubn2Kj4"}},sWxF:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createBranch=t.queryWorkHoursTransferInfo=t.fetchHolidayApi=t.createWorkHoursAuto=t.queryAllWorkHoursAndAssignee=t.getqueryWorkHourFillingReportInfoApi=t.getqueryProgramInfoApi=t.updateApi=t.createAcpi=t.batchUpdateIssues=t.getAvailableStatus=t.getAvailableFields=t.batchDeleteIssues=t.getOASyncRequirementStart=t.getOASyncRequirementInfo=t.cancelAssociateWorkItem=t.associateWorkItem=t.fetchAvailableWorkItems=t.fetchAssociatedWorkItems=t.whetherInProgram=t.cancelAssociateCodeRepo=t.associateCodeRepo=t.fetchExternalAvailableCodeRepos=t.fetchAvailableCodeRepos=t.fetchExternalAssociatedCodeRepos=t.fetchAssociatedCodeRepos=t.fetchRepoSettingInfo=t.createSimpleTencentMeeting=t.createTencentMeeting=t.editTencentMeeting=t.endTencentMeeting=t.deleteTencentMeetingResource=t.getTencentMeetingResource=t.getTencentMeetingDetail=t.editHourRecords=t.delManHourHistory=t.getManhourHistories=t.updateRelatedRequirement=t.getAvailableRequirementsWithoutCode=t.getAvailableRequirements=t.removeDefectFromRequirement=t.joinDefectIntoRequirement=t.getDefectsWhichCanBeRelated=t.getRelatedDefects=t.fetchModuleIsInited=t.modifyIssue=t.fastCreateIssue=t.modifyParentIssue=t.fetchIssueDetailOnlyByCode=t.fetchAllIssueStatus=t.fetchProjectIssueFields=t.upgradeTeamFilter=t.fetchMoreFilterFields=t.setDefaultIssueFilter=t.updateIssueFilter=t.createIssueFilter=t.renameIssueFilter=t.deleteIssueFilter=t.fetchIssueFilters=t.fetchIssueListTree=t.fetchIssueList=t.fetchFilterConditionHash=t.fetchHashFilterCondition=t.fetchDescriptionHistory=t.fetchCitedResourceReference=t.fetchCitingResourceReference=t.updateIssueListSetting=t.fetchIssueListSetting=t.fetchIssueStatusInIteration=t.updateKanbanList=t.fetchKanbanList=t.fetchIssueStatusList=t.fetchIssueStatusTransfers=t.fetchIssueInitStatus=t.updateIteration=t.fetchSimpleIterations=t.sortRequirementType=t.deleteRequirementType=t.modifyRequirementType=t.createRequirementType=t.fetchRequirementTypes=t.sortDefectType=t.modifyDefectType=t.deleteDefectType=t.createDefectType=t.fetchDefectTypes=t.fetchIssueModules=t.fetchInitedProjectList=t.fetchApplyInitializationStatus=t.initialAgile=t.initializeIssue=t.delAttachment=t.fetchHiddenFolderDirs=t.fetchIssueScheme=void 0;var n=a("Z4vw"),r=a("ehTL");a("7bn+");t.fetchIssueScheme=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,n.get)("/api/project/".concat(e,"/issues/").concat(t,"/type/").concat(a?"CREATE":"DETAIL","/scheme"),r)};t.fetchHiddenFolderDirs=function(e){return(0,n.get)("/api/project/".concat(e,"/issues/attachment_folders"))};t.delAttachment=function(e,t){return(0,n.del)("/api/project/".concat(e,"/file/delete/v1?").concat((0,n.buildParamsWithBrackets)({fileIds:t})))};t.initializeIssue=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return(0,n.get)("/api/project/".concat(e,"/issues").concat(a?"/agile":"","/init?").concat((0,n.buildParams)(t)),r)};t.initialAgile=function(e,t){return(0,n.postJSON)("/api/project/".concat(e,"/cooperate/init"),t)};t.fetchApplyInitializationStatus=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return(0,n.get)("/api/project/".concat(e,"/cooperate").concat(a?"/init":"","/is-copied?").concat((0,n.buildParams)(t)),r)};t.fetchInitedProjectList=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,n.get)("/api/project/".concat(e,"/cooperate").concat(a?"/init":"","/replicable-projects").concat((0,n.buildParams)(t)))};t.fetchIssueModules=function(e,t){return(0,n.get)("/api/project/".concat(e,"/issues/modules"),t)};t.fetchDefectTypes=function(e,t,a){return(0,n.get)("/api/team/".concat(e,"/issues/defects/types?").concat((0,n.buildParams)(t)),a)};t.createDefectType=function(e,t){return(0,n.post)("/api/team/".concat(e,"/issues/defects/types"),{name:t})};t.deleteDefectType=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,n.del)("/api/team/".concat(e,"/issues/defects/types/").concat(t),a)};t.modifyDefectType=function(e,t,a){return(0,n.put)("/api/team/".concat(e,"/issues/defects/types/").concat(t),{name:a})};t.sortDefectType=function(e,t){return(0,n.patchJSON)("/api/team/".concat(e,"/issues/defects/types/batch-sort"),{defectTypeIdList:t})};t.fetchRequirementTypes=function(e,t,a){return(0,n.get)("/api/team/".concat(e,"/issues/requirements/types?").concat((0,n.buildParams)(t)),a)};t.createRequirementType=function(e,t){return(0,n.post)("/api/team/".concat(e,"/issues/requirements/types"),{name:t})};t.modifyRequirementType=function(e,t,a){return(0,n.put)("/api/team/".concat(e,"/issues/requirements/types/").concat(t),{name:a})};t.deleteRequirementType=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,n.del)("/api/team/".concat(e,"/issues/requirements/types/").concat(t),a)};t.sortRequirementType=function(e,t){return(0,n.patchJSON)("/api/team/".concat(e,"/issues/requirements/types/batch-sort"),{requirementTypeIdList:t})};t.fetchSimpleIterations=function(e){return(0,n.get)("/external/collaboration/api/project/".concat(e,"/iterations/no-page"))};t.updateIteration=function(e,t,a){return(0,n.post)("/external/collaboration/api/project/".concat(e,"/issues/").concat(t,"/join/iteration"),{iterationCode:a})};t.fetchIssueInitStatus=function(e){return(0,n.get)("/api/project/".concat(e,"/issues/init-status"))};t.fetchIssueStatusTransfers=function(e,t){return(0,n.get)("/external/collaboration/api/project/".concat(e,"/issues/").concat(t,"/available-transfers"))};t.fetchIssueStatusList=function(e,t){return(0,n.get)("/external/collaboration/api/project/".concat(e,"/issues/all-status?").concat((0,n.buildParams)(t)))};t.fetchKanbanList=function(e,t){return(0,n.get)("/api/project/".concat(e,"/kanban_columns?").concat((0,n.buildParams)(t)))};t.updateKanbanList=function(e,t,a){return(0,n.postJSON)("/api/project/".concat(e,"/kanban_columns?").concat((0,n.buildParams)(t)),a)};t.fetchIssueStatusInIteration=function(e,t){return(0,n.get)("/external/collaboration/api/project/".concat(e,"/kanban_columns/").concat(t,"/all-status"))};t.fetchIssueListSetting=function(e,t){return(0,n.get)("/collaboration/api/project/".concat(e,"/user-settings?").concat((0,n.buildParams)(t)))};t.updateIssueListSetting=function(e,t,a){return(0,n.post)("/collaboration/api/project/".concat(e,"/user-settings/").concat(t),{value:a})};t.fetchCitingResourceReference=function(e,t){var a={scopeType:"PROJECT",scopeId:e,resourceCode:t};return(0,n.get)("/api/platform/resource/citing?".concat((0,n.buildParams)(a)))};t.fetchCitedResourceReference=function(e,t){var a={scopeType:"PROJECT",scopeId:e,resourceCode:t};return(0,n.get)("/api/platform/resource/cited?".concat((0,n.buildParams)(a)))};t.fetchDescriptionHistory=function(e,t,a){return(0,n.get)("/api/project/".concat(e,"/issues/").concat(t,"/").concat(a,"/description/histories"))};t.fetchHashFilterCondition=function(e,t,a){return(0,n.get)("/external/collaboration/api/project/".concat(e,"/issues/").concat(t,"/filters/conditions?").concat((0,n.buildParams)(a)))};t.fetchFilterConditionHash=function(e,t,a){return(0,n.postJSON)("/api/project/".concat(e,"/issues/").concat(t,"/filters/conditions"),a)};t.fetchIssueList=function(e,t,a,r){return(0,n.postJSON)("/external/collaboration/api/project/".concat(e,"/issues/").concat(t,"/list"),a,r)};t.fetchIssueListTree=function(e,t,a,r){return(0,n.postJSON)("/external/collaboration/api/project/".concat(e,"/issues/").concat(t,"/list/tree"),a,r)};t.fetchIssueFilters=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,n.get)("/external/collaboration/api/project/".concat(e,"/issues/").concat(t,"/filters"),a)};t.deleteIssueFilter=function(e,t,a){return(0,n.del)("/api/project/".concat(e,"/issues/").concat(t,"/filters/").concat(a))};t.renameIssueFilter=function(e,t,a,r){return(0,n.postJSON)("/api/project/".concat(e,"/issues/").concat(t,"/filters/").concat(a,"/name"),r)};t.createIssueFilter=function(e,t,a){return(0,n.postJSON)("/external/collaboration/api/project/".concat(e,"/issues/").concat(t,"/filters"),a)};t.updateIssueFilter=function(e,t,a,r){return(0,n.postJSON)("/api/project/".concat(e,"/issues/").concat(t,"/filters/").concat(a,"/content"),r)};t.setDefaultIssueFilter=function(e,t,a){return(0,n.patch)("/external/collaboration/api/project/".concat(e,"/issues/").concat(t,"/filters/").concat(a,"/default"))};t.fetchMoreFilterFields=function(e,t){return(0,n.get)("/external/collaboration/api/project/".concat(e,"/issues/").concat(t,"/filters/more-fields"))};t.upgradeTeamFilter=function(e,t,a){return(0,n.post)("/api/project/".concat(e,"/issues/").concat(t,"/filters/").concat(a,"/shared-team"))};t.fetchProjectIssueFields=function(e){return(0,n.get)("/api/project/".concat(e,"/issues/all-issue-fields"))};t.fetchAllIssueStatus=function(e){return(0,n.get)("/api/project/".concat(e,"/issues/all-issue-statuses"))};t.fetchIssueDetailOnlyByCode=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,n.get)("/external/collaboration/api/project/".concat(e,"/issues/").concat(t,"?").concat((0,n.buildParams)(a)),r)};t.modifyParentIssue=function(e,t,a){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return(0,n.patchJSON)("/external/collaboration/api/project/".concat(e,"/issues/sub-tasks/").concat(t,"/fields"),a,r)};t.fastCreateIssue=function(e,t){return(0,n.postJSON)("/external/collaboration/api/project/".concat(e,"/issues/smart"),t)};t.modifyIssue=function(e,t,a,r){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];switch(e){case"REQUIREMENT":return(0,n.patchJSON)("/external/collaboration/api/project/".concat(t,"/issues/requirements/").concat(a,"/fields"),r,o);case"MISSION":return(0,n.patchJSON)("/external/collaboration/api/project/".concat(t,"/issues/missions/").concat(a,"/fields"),r,o);case"DEFECT":return(0,n.patchJSON)("/external/collaboration/api/project/".concat(t,"/issues/defects/").concat(a,"/fields"),r,o);case"EPIC":return(0,n.patchJSON)("/api/project/".concat(t,"/issues/epics/").concat(a,"/fields"),r,o);case"SUB_TASK":return(0,n.patchJSON)("/external/collaboration/api/project/".concat(t,"/issues/sub-tasks/").concat(a,"/fields"),r,o);default:return(0,n.patchJSON)("/external/collaboration/api/project/".concat(t,"/issues/requirements/").concat(a,"/fields"),r,o)}};t.fetchModuleIsInited=function(e,t){return(0,n.get)("/collaboration/api/project/".concat(e,"/user-settings/modules-switch?").concat((0,n.buildParams)(t)))};t.getRelatedDefects=function(e,t){return(0,n.get)("/api/project/".concat(e,"/issues/requirements/").concat(t,"/defects"))};t.getDefectsWhichCanBeRelated=function(e,t,a){return(0,n.get)("/api/project/".concat(e,"/issues/requirements/").concat(t,"/available-defects?").concat((0,n.buildParams)(a)))};t.joinDefectIntoRequirement=function(e,t,a){return(0,n.post)("/external/collaboration/api/project/".concat(e,"/issues/requirements/").concat(t,"/defects"),{defectCode:a})};t.removeDefectFromRequirement=function(e,t,a){return(0,n.del)("/api/project/".concat(e,"/issues/requirements/").concat(t,"/defects?").concat((0,n.buildParamsWithBrackets)({defectCode:a})))};t.getAvailableRequirements=function(e,t,a){return(0,n.get)("/api/project/".concat(e,"/issues/defects/").concat(t,"/available-requirements?").concat((0,n.buildParams)(a)))};t.getAvailableRequirementsWithoutCode=function(e,t){return(0,n.get)("/external/collaboration/api/project/".concat(e,"/issues/defects/relate/available-requirements?").concat((0,n.buildParams)(t)))};t.updateRelatedRequirement=function(e,t,a){return(0,n.post)("/api/project/".concat(e,"/issues/defects/").concat(t,"/requirements"),{requirementCode:a})};t.getManhourHistories=function(e,t){return(0,n.get)("/external/collaboration/api/project/".concat(e,"/issues/").concat(t,"/new/hour-records"))};t.delManHourHistory=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,n.del)("/external/work-hour-management/api/issues/hour-record/".concat(t,"?withDrawFlag=").concat(a))};t.editHourRecords=function(e,t,a){return(0,n.postJSON)("/api/project/".concat(e,"/issues/").concat(t,"/record-hour"),a)};t.getTencentMeetingDetail=function(e,t){return(0,n.get)("/collaboration/api/project/".concat(e,"/meetings/issues/").concat(t),!0)};t.getTencentMeetingResource=function(e,t){return(0,n.get)("/collaboration/api/project/".concat(e,"/issue/").concat(t,"/meeting/resource"),!0)};t.deleteTencentMeetingResource=function(e,t,a){return(0,n.del)("/collaboration/api/project/".concat(e,"/issue/").concat(t,"/meeting/resource/").concat(a))};t.endTencentMeeting=function(e,t){return(0,n.del)("/collaboration/api/project/".concat(e,"/meetings/").concat(t))};t.editTencentMeeting=function(e,t,a,r,o,i,l){return(0,n.putJSON)("/collaboration/api/project/".concat(e,"/meetings/").concat(t),{issueCode:a,subject:r,startTime:o,endTime:i,password:l})};t.createTencentMeeting=function(e,t,a,r,o,i){return(0,n.postJSON)("/collaboration/api/project/".concat(e,"/meetings/create"),{issueCode:t,subject:a,startTime:r,endTime:o,password:i},!0)};t.createSimpleTencentMeeting=function(e,t){return(0,n.postJSON)("/collaboration/api/project/".concat(e,"/meetings/quick/create"),{issueCode:t},!0)};t.fetchRepoSettingInfo=function(e,t){return(0,n.get)("/collaboration/api/project/".concat(e,"/settings/issue-types/").concat(t,"/configs"))};t.fetchAssociatedCodeRepos=function(e,t){return(0,n.get)("/collaboration/api/project/".concat(e,"/issues/").concat(t,"/relate/depots"))};t.fetchExternalAssociatedCodeRepos=function(e,t){return(0,n.get)("/external/collaboration/api/project/".concat(e,"/issues/").concat(t,"/relate/depots"))};t.fetchAvailableCodeRepos=function(e,t){return(0,n.get)("/api/user/".concat(e,"/project/").concat(t,"/depot-group/depots?type=ALL"))};t.fetchExternalAvailableCodeRepos=function(e){return(0,n.get)("/external/sam/softWareUnitList/".concat(e,"/depots?page=1&pageSize=500"))};t.associateCodeRepo=function(e,t,a){return(0,n.post)("/collaboration/api/project/".concat(e,"/issues/").concat(t,"/relate/depots/").concat(a))};t.cancelAssociateCodeRepo=function(e,t,a){return(0,n.del)("/collaboration/api/project/".concat(e,"/issues/").concat(t,"/relate/depots/").concat(a))};t.whetherInProgram=function(e){return(0,n.get)("/external/collaboration/api/platform/program/list?".concat((0,n.buildParams)({projectId:e})))};t.fetchAssociatedWorkItems=function(e,t){return(0,n.get)("/collaboration/api/project/".concat(e,"/issues/").concat(t,"/work-items"))};t.fetchAvailableWorkItems=function(e,t,a){return(0,n.get)("/collaboration/api/project/".concat(e,"/issues/").concat(t,"/work-items/available?").concat((0,n.buildParams)(a)))};t.associateWorkItem=function(e,t,a){return(0,n.post)("/collaboration/api/project/".concat(e,"/issues/").concat(t,"/work-items/").concat(a))};t.cancelAssociateWorkItem=function(e,t,a){return(0,n.del)("/collaboration/api/project/".concat(e,"/issues/").concat(t,"/work-items/").concat(a))};t.getOASyncRequirementInfo=function(e,t){return(0,n.get)("/delivery/middle/api/project/".concat(t,"/requirement/").concat(e))};t.getOASyncRequirementStart=function(e,t){return(0,n.get)("/delivery/middle/api/project/".concat(t,"/requirement/").concat(e,"/sysn"))};t.batchDeleteIssues=function(e,t){return(0,n.delJSON)("/api/project/".concat(e,"/issues/batch/delete"),t)};t.getAvailableFields=function(e,t){return(0,n.postJSON)("/external/collaboration/api/project/".concat(e,"/issues/batch/update/available-fields"),t)};t.getAvailableStatus=function(e,t){return(0,n.postJSON)("/api/project/".concat(e,"/issues/batch/update/available-status"),t)};t.batchUpdateIssues=function(e,t){return(0,n.postJSON)("/external/collaboration/api/project/".concat(e,"/issues/batch/update"),t)};t.createAcpi=function(e){return(0,n.postJSON)("/external/work-hour-management/work-hour-filling/".concat(e.programId,"/create"),e)};t.updateApi=function(e){return(0,n.putJSON)("/external/work-hour-management/my-work-hour/updateWorkHour",e)};t.getqueryProgramInfoApi=function(e,t){return(0,n.postJSON)("/external/work-hour-management/work-hour-filling/issues/".concat(e,"/queryProgramInfo"),t)};t.getqueryWorkHourFillingReportInfoApi=function(e){return(0,n.postJSON)("/external/work-hour-management/work-hour-filling/queryWorkHourFillingReportInfo",e)};t.queryAllWorkHoursAndAssignee=function(e){return(0,n.postJSON)("/external/work-hour-management/work-hour-filling/queryAllWorkHoursAndAssignee",e)};t.createWorkHoursAuto=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.issueId,a=e.programId,r=e.type,o=e.workHourType,i=e.check,l=e.issueType;return(0,n.postJSON)("/external/work-hour-management/work-hour-filling/one-button/create",{issueId:t,programId:a,type:r,workHourType:o,check:i,issueType:l})};t.fetchHolidayApi=function(){return(0,n.postJSON)("/external/work-hour-management/work-hour-filling/query/holidayList")};t.queryWorkHoursTransferInfo=function(e){return(0,n.postJSON)("/external/work-hour-management/my-work-hour/program/issue/transfer/info",e)};t.createBranch=function(e,t,a,n){return(0,r.postJSON)("/external/code-repo/user/".concat(e,"/project/").concat(t,"/depot/").concat(a,"/git/branches/create"),n,!0)}},scNj:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=g(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=n(a("+2iF")),v=a("7FZc"),h=a("1qdz");function g(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(g=function(e){return e?a:t})(e)}function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,l.default)(a,e);var t=E(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.handleViewRecord,n=e.itemType;return f.default.createElement("div",{className:h.listItem,key:t.id},f.default.createElement("div",{className:h.dot}),f.default.createElement("div",{className:h.content},f.default.createElement(m.default,{className:"mr-10 ".concat(h.icon)}),f.default.createElement("span",{className:h.user},t.creator.name),t.issueLog&&1===t.issueLog.old?"\u3010\u6e90\u3011":"",f.default.createElement("span",null,(0,u.t)("\u66f4\u65b0\u4e86"),n,(0,u.t)("\u63cf\u8ff0")),f.default.createElement("span",{className:h.time},(0,p.timeFormat)(t.createdAt,"YYYY-MM-DD HH:mm")),f.default.createElement("div",{className:h.historyRecord},f.default.createElement(v.TooltipTrigger,{title:(0,u.t)("\u67e5\u770b\u8be5\u7248\u672c")},f.default.createElement("div",{className:h.historyIcon,onClick:function(){return a({currentId:t.issueLog&&t.issueLog.id})}})))))}}]),a}(f.Component);t.default=y,y.propTypes={item:d.default.object,handleViewRecord:d.default.func,itemType:d.default.string}},tSsN:function(e,t,a){e.exports=a.p+"b3ac3f2a129d305fbb2dbdb2c0023c17.svg"},tTuW:function(e,t,a){e.exports={wrapper:"wrapper-1jo5APTIn5",container:"container-6gX8Z3Am8R",slider:"slider-3VOs7mWNoy",list:"list-2DUmbYEaJf",item:"item-2kKwSFjx0N",next:"next-3vJTYsigjB",prev:"prev-1djxyGN8OJ"}},tlM8:function(e,t,a){e.exports={"tab-wrapper":"tab-wrapper-KQP8hCADTV",tabWrapper:"tab-wrapper-KQP8hCADTV",tab:"tab-1W_xBi5GIG",active:"active-o3gG1mfuox"}},u5of:function(e,t,a){"use strict";a("I5cv"),a("ioFf"),a("mYba"),a("jm62"),a("EK0E");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("o0o1"));a("f3/d"),a("Btvt"),a("VRzm"),a("dRSK"),a("Z2Ku"),a("bWfx"),a("0l/t"),a("hhXQ"),a("CX2u"),a("XfO3"),a("yt8O"),a("rGqo"),a("INYr"),a("RW0V");var i,l,c,s=n(a("RIqP")),u=n(a("lSNA")),d=n(a("yXPU")),f=n(a("lwsE")),p=n(a("W8MJ")),m=n(a("PJYZ")),v=n(a("7W2i")),h=n(a("a1gu")),g=n(a("Nsbk")),E=a("mVeg"),y=de(a("cDcd")),b=n(a("17x9")),I=n(a("V/h/")),S=n(a("Zsd2")),T=n(a("E+oP")),w=n(a("NIJN")),C=n(a("Y+p1")),O=n(a("zqxM")),N=a("IgEJ"),P=a("7bn+"),j=a("nuIr"),D=a("DgMC"),k=a("DgMC"),R=a("xgZS"),M=a("Z4vw"),A=a("DKcV"),L=a("AwMv"),x=a("aHEs"),_=a("w3Wo"),F=a("82Y3"),W=a("h74D"),B=n(a("mSbZ")),H=n(a("uk0h")),U=n(a("htee")),Y=n(a("4Fdf")),q=n(a("sftu")),G=n(a("KUqB")),z=n(a("aWB4")),V=n(a("Th6D")),Z=de(a("NI22")),K=n(a("SLo4")),J=n(a("z0hg")),Q=n(a("SUhN")),X=n(a("QPj7")),$=a("885C"),ee=n(a("T8xO")),te=n(a("L8Eh")),ae=n(a("ai0/")),ne=n(a("OTim")),re=n(a("XLbL")),oe=(n(a("M/Qn")),a("LC46")),ie=n(a("K2gz")),le=n(a("1hCk")),ce=n(a("246l")),se=n(a("q18W"));function ue(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(ue=function(e){return e?a:t})(e)}function de(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=ue(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}function fe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function pe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function me(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,g.default)(e);if(t){var r=(0,g.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,h.default)(this,a)}}var ve=(0,W.connect)((function(e){var t,a=e.APP,n=a.enterprise,r=a.user,o=e.CURRENT_USER_ENTERPRISE_PERMISSION_NAMESPACE_FOR_REDUX_STORE;return{user:r,enterpriseGlobalKey:n.key,ramOnline:null===o||void 0===o||null===(t=o.ramStatus)||void 0===t?void 0:t.ramOnline}}))(i=(0,B.default)(i=(0,H.default)(i=(0,U.default)(i=(0,Y.default)((c=l=function(e){(0,v.default)(a,e);var t=me(a);function a(e){var n,r,i;return(0,f.default)(this,a),(i=t.call(this,e)).getPageIdFromConversion=function(){if((0,Z.isBlockType)(i.state.editorType)){var e=i.props,t=e.defectCode,a=e.currentProject;return(0,_.getPageIdFromConversion)(a.id,t).then((function(e){var t=e.data;i.initCreatePage(t.pageId),i.setState({showDescriptionPlaceholder:!1})}))}},i.initCreatePage=function(e){var t=i.props,a=t.currentProject,n=t.issueTypeDetail,r=i.state,o=r.name,l=r.editorType;if(!(0,Z.isBlockType)(l))return Promise.resolve();if(!e)return(0,x.fetchMarkdownTemplate)(a.name,n.id).then((function(e){var t=e.data;i.setState({initEditorData:{pageId:t.pageId,pageDraftId:t.draftId,historyId:t.historyId},editorAutoFocus:!!o,showDescriptionPlaceholder:!1})}));var c=i.props.currentProject.id,s={module:"collaboration",function:"description",scopeType:"project",scopeId:c,projectId:c};return e&&(s.pageId=e),(0,Z.createPageDraft)(s).then((function(e){var t=e.data;i.setState({initEditorData:{pageId:t.pageId,pageDraftId:t.pageDraftId,historyId:t.historyId}})}))},i.copyCreatePage=function(){var e=(0,d.default)(o.default.mark((function e(t){var a,n,r,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.props.currentProject,n=i.state.editorType,(0,Z.isBlockType)(n)){e.next=4;break}return e.abrupt("return",Promise.resolve());case 4:return e.next=6,(0,x.copyMarkdownTemplate)(a.id,t);case 6:return r=e.sent,l=r.data,i.setState({initEditorData:{pageId:l.pageId,pageDraftId:l.draftId,historyId:l.historyId}}),e.abrupt("return",Promise.resolve());case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.onEpicChange=function(e){i.setState({localEpicCode:e})},i.handleAttentionChange=function(e){i.changeAttributes({type:"watchers",value:e})},i.onDescriptionChange=function(e){if(!e.isEmpty){var t="".concat(i.props.currentProject.name,"_").concat(i.props.issueTypeDetail.issueType,"_").concat(i.props.issueTypeDetail.id,"_CREATOR");(0,Z.setIssueDescriptionDraft)(t,i.state.initEditorData)}},i.onDescriptionScroll=function(){i.getAttachmentsStickyState()},i.onUpdateStateAndStorage=function(e,t){i.setState({autoNext:e,autoCopyNext:t},(function(){localStorage.setItem("REQUIREMENT_CREATION_AUTO_NEXT",e),localStorage.setItem("REQUIREMENT_CREATION_AUTO_COPY_NEXT",t)}))},i.onEditorTypeChange=function(e){if((0,F.setPreferEditorType)(e),i.setState({editorType:e}),(0,Z.isBlockType)(e))return i.removeDraft(),void i.initCreatePage();var t="".concat(i.props.currentProject.name,"_").concat(i.props.issueTypeDetail.issueType,"_").concat(i.props.issueTypeDetail.id,"_CREATOR");(0,Z.setIssueDescriptionDraft)(t);var a={pageId:i.state.initEditorData.pageId,pageDraftId:i.state.initEditorData.pageDraftId,module:"collaboration",function:"description",scopeType:"project",scopeId:i.props.currentProject.id};(0,Z.delPageDraft)(a).then((function(){return i.setState({initEditorData:null})}))},i.onCancel=function(){i.props.closeHandle()},i.removeDraft=function(){var e,t;null!==(e=i.editorRef)&&void 0!==e&&null!==(t=e.current)&&void 0!==t&&t.removeDraft&&i.editorRef.current.removeDraft()},i.onAttrScroll=function(){i.setState({isElemScroll:!0})},i.validateDefect=function(e,t){var a,n=i.state.attributes,r=null===(a=i.props.requirementSchemeFieldArchives[e])||void 0===a?void 0:a.issueField,o=["\u81f4\u547d","\u4e25\u91cd"],l=!!r&&r.options.find((function(e){return e.value===t&&o.includes(e.name)}));return!(!r||"\u7f3a\u9677\u4e25\u91cd\u7a0b\u5ea6"!==r.name||!l||n.defectKindIds.length&&n.defectPhaseId)&&((0,R.warning)((0,E.t)("\u8bf7\u5148\u586b\u5199\u201c\u5f15\u5165\u7f3a\u9677\u9636\u6bb5\u201d\u548c\u201c\u7f3a\u9677\u7c7b\u578b\u201d")),!0)},i.quickSave=function(e){i.state.isMac?e.metaKey&&"Enter"===e.key&&i.onSubmit():e.ctrlKey&&"Enter"===e.key&&i.onSubmit()},i.startEditing=function(e){i.state.isMac?e.metaKey||"Enter"!==e.key||i.setState({showDescriptionPlaceholder:!1}):e.ctrlKey||"Enter"!==e.key||i.setState({showDescriptionPlaceholder:!1})},i.showEpicDropdown=function(){var e=i.props,t=e.currentProjectCooperateSettings,a=e.epicCode;return t&&t.EPIC===j.MODULE_SWITCH.OPENED&&"SCRUM"===t.COOPERATE_MODE&&!a},i.handleAssigneeChange=function(e){var t=i.state.attributes.participants;t.some((function(t){return t.id===e.id}))||setTimeout((function(){i.changeAttributes({type:"participants",value:(0,w.default)(t,e)})})),i.changeAttributes({type:"assignee",value:e})},i.getHeights=function(){var e=Math.max(320,Math.min(680,document.body.clientHeight-120-300)),t=Math.max(320,Math.min(460,document.body.clientHeight-120-300));i.setState({maxMainBodyHeight:e,editorMinHeight:t},i.getAttachmentsStickyState)},i.getAttachmentsStickyState=function(){var e,t=null===(e=i.bodyRef)||void 0===e?void 0:e.current;i.setState({attachmentsSticky:t&&t.scrollTop+t.offsetHeight<t.scrollHeight&&t.scrollHeight>t.clientHeight})},i.titleInputFocus=function(){var e,t;null===(e=i.inputRef)||void 0===e||null===(t=e.current)||void 0===t||t.focus()},i.combineThirdLinks=function(){var e=i.state,t=e.attachments,a=e.thirdLinks;if(a){var n=a.map((function(e){if(e.name)return e;var t=e.isModao,a=e.isCodesign,n="";return t&&(n=e.modao.title||(0,E.t)("\u58a8\u5200\u9644\u4ef6")),a&&(n=e.codesign.title),pe(pe({},e),{},{noUpload:!0,isModao:t,isCodesign:a,name:n,createdAt:e.timestamp})})),r=[].concat((0,s.default)(t),(0,s.default)(n));i.setState({allAttachments:i.sortAttachments(r)})}else i.setState({allAttachments:i.sortAttachments(t)})},i.sortAttachments=function(e){var t=(0,s.default)(e);return t.sort((function(e,t){return e.timestamp-t.timestamp})),t},i.onAddThirdLink=function(e){i.hideImportOutResourcePicker(),i.setState({thirdLinks:[].concat((0,s.default)(i.state.thirdLinks),(0,s.default)(e))},i.combineThirdLinks)},i.showImportOutResourcePicker=function(){i.setState({isShowImportOutResourcePicker:!0})},i.hideImportOutResourcePicker=function(){i.setState({isShowImportOutResourcePicker:!1})},i.state={name:e.name,autoNext:"true"===localStorage.getItem("REQUIREMENT_CREATION_AUTO_NEXT"),autoCopyNext:"true"===localStorage.getItem("REQUIREMENT_CREATION_AUTO_COPY_NEXT"),isPending:!1,isLoading:!0,attributes:{assignee:void 0,priority:void 0,requirementType:void 0,startDate:void 0,dueDate:void 0,workingHours:void 0,projectModule:void 0,labels:[],watchers:[],progress:void 0,fields:{},estimatedWorkHour:void 0,defectKindIds:[],defectPhaseId:void 0,defectSourceId:void 0,wuKongReloadId:void 0,systemsId:(null===e||void 0===e||null===(n=e.dmData)||void 0===n?void 0:n.systemsPropId)||void 0,participants:[],programId:(null===e||void 0===e||null===(r=e.dmData)||void 0===r?void 0:r.programPropId)||void 0,milestone:void 0,groupTeamId:void 0,softwareUnitDTO:[]},editionId:void 0,releaseList:e.releaseInfo?[e.releaseInfo]:[],releaseIds:e.releaseInfo?[e.releaseInfo.id]:[],isReloading:!1,iterationCode:e.iteration?"COMPLETED"===e.iteration.status&&e.parentCode?0:e.iteration.code:void 0,epicCode:e.epicCode,iterationList:[],localEpicCode:void 0,storyPoint:void 0,isElemScroll:!1,isMac:(0,D.isMac)(),initEditorData:null,showDescriptionPlaceholder:!0,editorAutoFocus:!0,attachmentsSticky:!1,maxMainBodyHeight:0,editorMinHeight:0,editorType:(0,F.getPreferEditorType)(),fullscreen:!1,allAttachments:[],attachments:[],isShowImportOutResourcePicker:!1,thirdLinks:[],showButton:!1,toLeft:0},i.inputRef=y.default.createRef(),i.bodyRef=y.default.createRef(),i.editorRef=y.default.createRef(),i.sideRef=y.default.createRef(),i.setDefaultValues=i.setDefaultValues.bind((0,m.default)(i)),i.onTitleChange=i.onTitleChange.bind((0,m.default)(i)),i.onSubmit=i.onSubmit.bind((0,m.default)(i)),i.resetFormData=i.resetFormData.bind((0,m.default)(i)),i.resetPartialFormData=i.resetPartialFormData.bind((0,m.default)(i)),i.onAutoFlagChange=i.onAutoFlagChange.bind((0,m.default)(i)),i.onAutoCopyFlagChange=i.onAutoCopyFlagChange.bind((0,m.default)(i)),i.onUpdateStateAndStorage=i.onUpdateStateAndStorage.bind((0,m.default)(i)),i.onIterationChange=i.onIterationChange.bind((0,m.default)(i)),i.changeAttributes=i.changeAttributes.bind((0,m.default)(i)),i.wrapperRef=y.default.createRef(),i.listRef=y.default.createRef(),i.moveContent=i.moveContent.bind((0,m.default)(i)),i.handleDeleteAttachment=i.handleDeleteAttachment.bind((0,m.default)(i)),i.onFileDropSuccess=i.onFileDropSuccess.bind((0,m.default)(i)),i.onFileDropFail=i.onFileDropFail.bind((0,m.default)(i)),i.onFileDropDelete=i.onFileDropDelete.bind((0,m.default)(i)),i.onFileDropCancel=i.onFileDropCancel.bind((0,m.default)(i)),i.fileUpload=i.fileUpload.bind((0,m.default)(i)),i}return(0,p.default)(a,[{key:"renderAttachmentSection",value:function(){var e=this,t=this.state,a=t.attachments,n=t.allAttachments,r=t.isShowImportOutResourcePicker,o=t.showButton,i=t.toLeft,l=this.props,c=l.enterpriseGlobalKey,s=l.currentProject,u=l.user,d=s.name,f=s.id;return y.default.createElement("div",{className:le.default.attachementSectionContainer},y.default.createElement("div",{className:le.default.sectionHeader},y.default.createElement("span",{className:le.default.title},(0,E.t)("\u9644\u4ef6")),y.default.createElement("span",{className:le.default.dividerLine}),y.default.createElement(K.default,{onHandleAttachments:this.fileUpload,currentAttachmentNum:a.length,attachmentLimit:n.length>=20},y.default.createElement("a",{className:le.default.uploadButton},(0,E.t)("\u672c\u5730\u4e0a\u4f20"))),y.default.createElement("div",{className:le.default.importOutResourceWrap},y.default.createElement(Q.default,{onHandleAttachments:this.onAddThirdLink,isShowPicker:r,onShow:this.showImportOutResourcePicker,onHide:this.hideImportOutResourcePicker,attachmentLimit:n.length>=20}))),y.default.createElement("div",{className:le.default.attachmentSection},n.length?y.default.createElement("div",{className:(0,ie.default)(le.default.attachmentWrapper,o&&le.default.rightBorder,i<0&&le.default.leftBorder),ref:this.wrapperRef},y.default.createElement("div",{className:le.default.attachmentList,ref:this.listRef,style:{left:"".concat(i,"px")}},!!n.length&&y.default.createElement($.ThemeConsumer,null,(function(t){var a=t.hiddenFolderDirs;return n.map((function(t){return y.default.createElement("div",{className:le.default.attachmentItem,key:t.fileId},y.default.createElement(J.default,{attachment:t,enterpriseGlobalKey:c,currentProjectName:d,currentProjectId:f,dir:a[j.HIDDEN_FILE_TYPE.REQUIREMENTS].file_id,uploadFileSuccess:e.onFileDropSuccess,uploadFileFailed:e.onFileDropFail,uploadFileDelete:e.onFileDropDelete,uploadFileCancel:e.onFileDropCancel,allowPreview:!1,userId:u.id}))}))})))):y.default.createElement("div",{className:le.default.sectionPlaceholder},(0,E.t)("\u5c1a\u672a\u6dfb\u52a0\u9644\u4ef6")),o&&y.default.createElement("a",{className:le.default.next,onClick:this.moveContent}),i<0&&y.default.createElement("a",{className:le.default.pre,onClick:function(){return e.moveContent(!1)}})))}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.name,r=a.autoNext,o=a.autoCopyNext,i=a.isLoading,l=a.attributes,c=a.isReloading,s=a.iterationCode,u=a.iterationList,d=a.localEpicCode,f=a.storyPoint,p=a.isMac,m=a.initEditorData,v=a.showDescriptionPlaceholder,h=a.editorAutoFocus,g=a.attachmentsSticky,b=a.maxMainBodyHeight,I=a.editorMinHeight,S=a.isPending,T=this.props,C=T.currentProject,O=T.show,P=T.isShowCreateNext,D=T.requirementSchemeFieldArchives,k=T.requirementCreationFieldIDs,R=T.user,M=T.currentProjectCooperateSettings,L=T.isPermissible,x=T.labels,_=T.requirementTypes,F=T.addLabel,W=T.bugTypes,B=T.moduleSchemes,H=T.issueTypeDetail,U=(T.ramOnline,M&&M.ITERATION&&M.ITERATION===j.MODULE_SWITCH.OPENED),Y=L([{function:A.ProjectPermissionFunction.PROJECT_ITERATION,action:A.ProjectPermissionAction.UPDATE}]),K=this.getAssigneeFieldWhetherRequired(D,k,N.FIELD_TYPE.ASSIGNEE),J=this.getAssigneeFieldWhetherRequired(D,k,N.FIELD_TYPE.PARTICIPANT),Q=M&&M.STORY_POINT===j.MODULE_SWITCH.OPENED,X=M&&M.STORY_POINT_TYPE===j.STORY_POINT_TYPE.TSHIRT,$={id:R.id,value:R.id,text:R.name,name:R.name,name_pinyin:R.name_pinyin,avatar:R.avatar,media:R.avatar};return y.default.createElement(q.default,{className:(0,ie.default)(le.default.wrapper),show:O,outsideClickCloseable:!1,keyboard:!1,enforceFocus:!1},y.default.createElement("span",{className:(0,ie.default)(le.default.closeButton),onClick:this.onCancel}),i&&y.default.createElement("div",{className:le.default.modalLoading}),!i&&y.default.createElement("div",{className:le.default.main},y.default.createElement("div",{className:le.default.mainHeader},y.default.createElement("div",{className:le.default.headerInfoSection},y.default.createElement("span",{style:{marginRight:"8px"}},(0,E.t)("\u521b\u5efa")),y.default.createElement(G.default,{type:H.iconType}),y.default.createElement("span",null,H.name),this.showEpicDropdown()&&y.default.createElement(y.default.Fragment,null,y.default.createElement("span",{className:le.default.dividerLine}),y.default.createElement(z.default,{currentProject:C,value:d,onSelect:this.onEpicChange})),y.default.createElement("div",{className:le.default.attentionWrapper},y.default.createElement(V.default,{type:"REQUIREMENT",projectID:C.id,watchers:l.watchers||[],onChange:this.handleAttentionChange,user:$,action:"create",suffixText:(0,E.t)("\u4eba\u5173\u6ce8\u4e2d"),showTooltip:!0}))),y.default.createElement("div",{className:le.default.headerTitleSection},y.default.createElement("input",{className:le.default.titleInput,ref:this.inputRef,autoFocus:!0,placeholder:"".concat((0,E.t)("\u8f93\u5165\u4e8b\u9879\u6807\u9898\uff08")).concat(p?"\u2318":"Ctrl").concat((0,E.t)(" + Enter \u53ef\u5feb\u901f\u521b\u5efa\uff09")),value:n,onChange:this.onTitleChange}))),y.default.createElement("div",{className:le.default.mainBody,style:{maxHeight:"".concat(b,"px")},ref:this.bodyRef,onScroll:this.onDescriptionScroll},v?y.default.createElement("div",{className:le.default.descriptionPlaceholder,style:{height:"".concat(I,"px")},onClick:function(){return t.setState({showDescriptionPlaceholder:!1})}},(0,E.t)("\u6309\u56de\u8f66\u6216\u70b9\u6b64\u5f00\u59cb\u7f16\u8f91\u63cf\u8ff0")):y.default.createElement("div",{className:le.default.editorContainer},y.default.createElement(Z.default,{type:this.state.editorType,readOnly:this.state.isPending,isEditing:!0,autofocus:h,container:this.bodyRef.current,currentProject:C,initEditorData:m,richClientSaveUuid:"REQUIREMENT_EDITOR_CREATOR",onEditorChange:this.onDescriptionChange,isDisabled:S,canChangeType:!0,onEditorTypeChangeCallback:function(e){return t.onEditorTypeChange(e)},onFullScreenCallback:function(e){return t.setState({fullscreen:e})},onLoad:function(e){if(e.isError){if((0,Z.isBlockType)(t.state.editorType)&&e.isDraftIdNotExist){var a="".concat(C.name,"_").concat(H.issueType,"_").concat(H.id,"_CREATOR");(0,Z.setIssueDescriptionDraft)(a),t.setState({initEditorData:null},t.initCreatePage)}}else t.getAttachmentsStickyState()},className:(0,ie.default)(le.default.customSectionZindex,!this.state.fullscreen&&le.default.editorHeight),ref:this.editorRef}))),y.default.createElement("div",{className:(0,ie.default)(le.default.mainFooter,g&&le.default.sticky)},this.renderAttachmentSection(),y.default.createElement("div",{className:le.default.operationsWrapper},y.default.createElement("div",{disabled:c,className:(0,ie.default)(le.default.operationButton,!p&&le.default.wider,ce.default.newButton,ce.default.primary,ce.default.h32,c&&ce.default.disabled),onClick:this.onSubmit,"data-container":!0,"data-title":"\u521b\u5efa".concat(H.name,"-\u786e\u5b9a")},(0,E.t)("\u521b\u5efa"),y.default.createElement("span",{className:le.default.key},p?"\u2318":"Ctrl"),y.default.createElement("span",{className:(0,ie.default)(le.default.key,le.default.enter)})),y.default.createElement("div",{className:(0,ie.default)(le.default.operationButton,ce.default.newButton,ce.default.default,ce.default.h32),"data-container":!0,"data-title":"\u521b\u5efa".concat(H.name,"-\u53d6\u6d88"),onClick:this.onCancel},(0,E.t)("\u53d6\u6d88")),P&&y.default.createElement(y.default.Fragment,null,y.default.createElement("span",{className:le.default.switch},y.default.createElement(ee.default,{checked:r,onChange:this.onAutoFlagChange}),y.default.createElement("span",{className:le.default.switchText},(0,E.t)("\u7ee7\u7eed\u521b\u5efa\u4e0b\u4e00\u4e2a"))),y.default.createElement("span",{className:le.default.switch},y.default.createElement(ee.default,{checked:o,onChange:this.onAutoCopyFlagChange}),y.default.createElement("span",{className:le.default.switchText},(0,E.t)("\u590d\u5236\u5e76\u65b0\u5efa\u4e0b\u4e00\u4e2a"))))))),!i&&y.default.createElement("div",{className:le.default.aside,onScroll:this.onAttrScroll,ref:this.sideRef},y.default.createElement("div",{className:le.default.asideContent},y.default.createElement("div",{className:le.default.issuePropertyContainer},y.default.createElement("div",{className:le.default.issuePropertySection},y.default.createElement("label",null,(0,E.t)("\u5904\u7406\u4eba"),K&&y.default.createElement("span",{className:le.default.highlight},"*")),y.default.createElement(te.default,{inProject:!0,projectID:C.id,value:l.assignee||null,clearable:!K,onSelect:this.handleAssigneeChange,onClear:function(){return t.changeAttributes({type:"assignee"})},triggerExtraProps:{initialSelectedItem:(null===l||void 0===l?void 0:l.defaultAssignee)||null}})),y.default.createElement("div",{className:le.default.issuePropertySection},y.default.createElement("label",null,(0,E.t)("\u53c2\u4e0e\u4eba"),J&&y.default.createElement("span",{className:le.default.highlight},"*")),y.default.createElement(te.default,{inProject:!0,projectID:C.id,value:l.participants.map((function(e){return e.id})),clearable:!J,isMultiple:!0,onSelect:function(e){var a=l.participants,n=[];n=a.find((function(t){return t.id===e.id}))?a.filter((function(t){return e.id!==t.id})):(0,w.default)(a,e),t.changeAttributes({type:"participants",value:n})},onClear:function(){return t.changeAttributes({type:"participants"})},triggerExtraProps:{initialSelectedItem:l.participants||[]}})),U&&y.default.createElement("div",{className:le.default.issuePropertySection},y.default.createElement("label",null,(0,E.t)("\u6240\u5c5e\u8fed\u4ee3")),y.default.createElement(ae.default,{searchable:!0,type:{issueType:"sprint",iconType:"sprint"},placeholder:(0,E.t)("\u672a\u89c4\u5212\u8fdb\u8fed\u4ee3"),clearPlaceholder:(0,E.t)("\u79fb\u51fa\u8fed\u4ee3"),searchPlaceholder:(0,E.t)("\u5feb\u901f\u7b5b\u9009"),value:s,items:u,isBase:!0,onSelect:this.onIterationChange,onClear:function(){return t.onIterationChange()},projectPath:C.project_path,disabled:!Y,portalProps:{toRight:!0,popDropdownMenuWidth:280,portalWrapStyle:{zIndex:1049,width:"280px"},isScroll:this.state.isElemScroll,resetIsScroll:function(){t.setState({isElemScroll:!1})}}})),Q&&y.default.createElement("div",{className:le.default.issuePropertySection},y.default.createElement("label",null,(0,E.t)("\u6545\u4e8b\u70b9")),y.default.createElement(ne.default,{useSize:X,value:f,onSelect:function(e){t.setState({storyPoint:e>-1?e:void 0})},onClear:function(){t.setState({storyPoint:void 0})}})),(!this.props.issueTypeDetail.type||"requirement"===this.props.issueTypeDetail.type)&&y.default.createElement(se.default,{status:"isCreate",getVersion:function(e){return t.setState({editionId:e})},boxStyle:le.default.issuePropertySection,projectId:C.id,isSetDropdownPanelWidth:!0,planDateCustomID:null===(e=Object.values(D).find((function(e){var t;return"\u8ba1\u5212\u4e0a\u7ebf\u65e5\u671f"===(null===(t=e.issueField)||void 0===t?void 0:t.name)})))||void 0===e?void 0:e.issueFieldId,onChange:this.changeAttributes})),y.default.createElement("div",{className:(0,ie.default)(le.default.issuePropertyContainer,le.default.hasNoBorder)},y.default.createElement(re.default,{isCreate:!0,schemeFieldArchives:D,fieldIds:k,issueType:"REQUIREMENT",onChange:this.changeAttributes,customAttributes:l,labels:x,requirementTypes:_,bugTypes:W,moduleSchemes:B,addLabel:F,projectID:C.id,currentProject:C,isPermissible:L,portalProps:{toRight:!0,portalWrapStyle:{zIndex:1099},isScroll:this.state.isElemScroll,resetIsScroll:function(){t.setState({isElemScroll:!1})}},parentRef:this.sideRef})))))}},{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.currentProject,n=t.issueTypeDetail,r=t.defectCode,o=this.state,i=o.name,l=o.editorType;document.addEventListener("keydown",this.quickSave),document.addEventListener("keydown",this.startEditing),window.addEventListener("resize",this.getHeights),this.getBasicInfo().then((function(){var t=e.props,a=t.requirementCreationFieldIDs,n=t.requirementSchemeFieldArchives;e.setDefaultValues(n,a),e.getHeights()})).finally((function(){if(!(0,Z.isBlockType)(l)||r)e.setState({isLoading:!1,editorAutoFocus:!!i,showDescriptionPlaceholder:!1});else{var t=(0,Z.getIssueDescriptionDraft)("".concat(a.name,"_").concat(n.issueType,"_").concat(n.id,"_CREATOR"));t?e.setState({isLoading:!1,initEditorData:{pageId:t.pageId,pageDraftId:t.pageDraftId,historyId:t.historyId},editorAutoFocus:!!i,showDescriptionPlaceholder:!1}):e.initCreatePage().then((function(){e.setState({isLoading:!1})}))}}))}},{key:"componentDidUpdate",value:function(e,t){if(t.isReloading!==this.state.isReloading){var a=this.props,n=a.requirementSchemeFieldArchives,r=a.requirementCreationFieldIDs,o=e.requirementSchemeFieldArchives,i=e.requirementCreationFieldIDs;if(!(0,C.default)(n,o)&&!(0,C.default)(r,i)){var l=(0,O.default)(r,i);this.setDefaultValues(n,l)}}t.allAttachments.length!==this.state.allAttachments.length&&this.whetherShowMoveButton(),t.editorType!==this.state.editorType&&(0,Z.isBlockType)(this.state.editorType)&&!this.state.initEditorData&&this.initCreatePage()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.quickSave),document.removeEventListener("keydown",this.startEditing),window.removeEventListener("resize",this.getHeights)}},{key:"getBasicInfo",value:function(){return Promise.all([this.getIterationList(),this.props.getRequirementScheme(!0),this.props.getRequirementTypes(),this.props.getBugTypes(),this.props.getModuleSchemes()].concat((0,s.default)(this.props.defectCode?[this.getPageIdFromConversion()]:[])))}},{key:"getIterationList",value:function(){var e=this,t=this.props.currentProject;(0,_.fetchIterationList)(t.id).then((function(t){e.setState({iterationList:e.formatIterationList(t.data)})}))}},{key:"formatIterationList",value:function(e){return e.map((function(e){return{value:e.code,text:e.name,progress:{finished:e.completedCount,processing:e.processingCount,unstart:e.waitProcessCount}}}))}},{key:"onTitleChange",value:function(e){this.setState({name:e.target.value})}},{key:"onAutoFlagChange",value:function(e){this.onUpdateStateAndStorage(e,!e&&this.state.autoCopyNext)}},{key:"onAutoCopyFlagChange",value:function(e){this.onUpdateStateAndStorage(!e&&this.state.autoNext,e)}},{key:"onSubmit",value:function(){var e=(0,d.default)(o.default.mark((function e(){var t,a,n,r,i,l,c,s,u,d,f,p,m,v,h,g,y,b,I,w,C,O,j,D,A,x,_,F,W,B,H,U,Y,q,G,z,V,K,J,Q,$,ee,te,ae,ne,re,ie,le,ce,se,ue,de,fe,me,ve,he,ge,Ee,ye,be,Ie,Se,Te,we,Ce,Oe,Ne,Pe=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=this.props.currentProject,c=l.id,s=l.project_path,u=l.name,d=this.props,f=d.isShowCreateNext,p=d.requirementSchemeFieldArchives,m=d.requirementCreationFieldIDs,v=d.closeHandle,h=d.callback,g=d.parentCode,y=d.createWithTargetCode,b=d.defectCode,I=d.callbackWithData,w=d.txcPostId,C=d.issueTypeDetail,O=d.fromDM,j=d.dmCallback,D=this.state,A=D.name,x=D.autoNext,_=D.autoCopyNext,F=D.isPending,W=D.allAttachments,B=D.attachments,H=D.iterationCode,U=D.localEpicCode,Y=D.epicCode,q=D.storyPoint,G=D.attributes,z=G.assignee,V=G.priority,K=G.requirementType,J=G.dueDate,Q=G.startDate,$=G.workingHours,ee=G.labels,te=G.watchers,ae=G.fields,ne=G.projectModule,re=G.progress,ie=G.estimatedWorkHour,le=G.defectKindIds,ce=G.defectPhaseId,se=G.defectSourceId,ue=G.wuKongReloadId,de=G.systemsId,fe=G.participants,me=G.programId,ve=G.milestone,he=G.groupTeamId,ge=G.softwareUnitDTO,Ee=D.thirdLinks,ye=D.initEditorData,be=D.releaseIds,Ie=D.editorType,Se=D.editionId,null===(t=this.editorRef)||void 0===t||!t.current||!(0,Z.isBlockType)(Ie)){e.next=12;break}return e.prev=4,e.next=7,(0,oe.getBlockEditorFinished)(this.editorRef.current);case 7:e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(4),e.abrupt("return",(0,R.warning)((0,E.t)("\u66f4\u65b0\u63cf\u8ff0\u8d85\u65f6")));case 12:if(!F){e.next=14;break}return e.abrupt("return");case 14:if(!(0,T.default)((0,S.default)(A))){e.next=17;break}return(0,R.warning)((0,E.t)("{{name}}\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a",{name:C.name})),e.abrupt("return");case 17:if(128,!((0,S.default)(A).length>128)){e.next=21;break}return(0,R.warning)("".concat((0,E.t)("{{name}}\u540d\u79f0\u6700\u591a\u652f\u6301",{name:C.name})).concat(128).concat((0,E.t)("\u4f4d"))),e.abrupt("return");case 21:if(!(Te=m.find((function(e){var t=p[e],a=t.required,n=t.issueField.type;if(a){var r;switch(n){case N.FIELD_TYPE.ASSIGNEE:r=z;break;case N.FIELD_TYPE.PROGRESS:r=re;break;case N.FIELD_TYPE.PRIORITY:r=V;break;case N.FIELD_TYPE.REQUIREMENT_TYPE:r=K;break;case N.FIELD_TYPE.START_DATE:r=Q;break;case N.FIELD_TYPE.DUE_DATE:r=J;break;case N.FIELD_TYPE.WORKING_HOURS:r=$;break;case N.FIELD_TYPE.LABEL:r=ee;break;case N.FIELD_TYPE.WATCHER:r=te;break;case N.FIELD_TYPE.MODULE:r=ne;break;case N.FIELD_TYPE.SYSTEM:r=de;break;case N.FIELD_TYPE.GROUP_TEAM:r=he;break;case N.FIELD_TYPE.PARTICIPANT:r=fe;break;case N.FIELD_TYPE.INPROGRAM:r=me;break;case N.FIELD_TYPE.DEFECT_KIND:r=le;break;case N.FIELD_TYPE.DEFECT_PHASE:r=ce;break;case N.FIELD_TYPE.DEFECT_SOURCE:r=se;break;case N.FIELD_TYPE.WUKONG_RELOAD:r=ue;break;case N.FIELD_TYPE.MILESTONE:r=ve;break;default:r=ae[e]}return!(Array.isArray(r)?r.length:null!==r&&void 0!==r)}return!1})))){e.next=25;break}return(0,R.warning)("".concat((0,E.t)("\u8bf7\u586b\u5199")).concat(p[Te].issueField.name)),e.abrupt("return");case 25:if(!(B.length&&B.findIndex((function(e){return e.fileId<0}))>-1)){e.next=28;break}return(0,R.warning)((0,E.t)("\u6709\u9644\u4ef6\u6b63\u5728\u4e0a\u4f20\uff0c\u8bf7\u7a0d\u540e\u63d0\u4ea4")),e.abrupt("return");case 28:this.setState({isPending:!0}),we=Object.keys(ae).filter((function(e){return void 0!==ae[e]})).map((function(e){var t=p[e].issueField.componentType;return t===P.PROPERTY_TYPE_CONSTANTS.SELECT_ITERATION_MULTI||t===P.PROPERTY_TYPE_CONSTANTS.SELECT_MEMBER_MULTI?{id:e,content:ae[e].map((function(e){return e.id}))}:t===P.PROPERTY_TYPE_CONSTANTS.SELECT_ITERATION_SINGLE||t===P.PROPERTY_TYPE_CONSTANTS.SELECT_MEMBER_SINGLE?{id:e,content:ae[e].id}:{id:e,content:ae[e]}})),Ce=(0,X.default)(W,Ee).map((function(e){return pe(pe({createdAt:e.createdAt},e.modao),e.codesign)})),Oe=(0,Z.isBlockType)(Ie)?pe(pe({},ye),{},{descriptionType:Z.EditorType.BLOCK}):{content:(null===(a=this.editorRef)||void 0===a||null===(n=a.current)||void 0===n?void 0:n.getRichContent())||"",slateRaw:(null===(r=this.editorRef)||void 0===r||null===(i=r.current)||void 0===i?void 0:i.getRichContent("raw"))||"",descriptionType:Z.EditorType.MARKDOWN},Ne={iterationCode:H||0,epicCode:Y||U&&U.code,storyPoint:q,parentCode:g||0,name:(0,S.default)(A),fileIds:B.map((function(e){return e.fileId})),thirdLinks:Ce,customFieldValueMap:we.length?we:null,assignee:z,priority:V,requirementTypeId:K,dueDate:J,startDate:Q,workingHours:$,labelIds:ee,watchers:te.map((function(e){return e.id})),projectModuleId:ne,defectCode:b,progress:re,issueTypeId:C.id,kmPage:Oe,releaseIds:be,wuKongReloadId:ue,programId:me,estimatedWorkHour:ie,defectKindIds:le,defectPhaseId:ce,defectSourceId:se,systemsId:de,participants:fe.map((function(e){return e.id})),milestoneId:ve,groupTeamId:he,editionId:Se,softwareUnitIds:ge.map((function(e){return e.id}))},y&&(Ne.targetSortCode=y),w&&(Ne.txcPostId=w),(0,L.createRequirement)(c,Ne,!0).then((function(e){var t=e.data,a="".concat(u,"_").concat(C.issueType,"_").concat(C.id,"_CREATOR");(0,Z.setIssueDescriptionDraft)(a),(0,R.success)((0,E.t)("{{name}} #{{code}} \u521b\u5efa\u6210\u529f\uff0c\u70b9\u51fb\u67e5\u770b{{name}}\uff01",{code:t.code,name:C.name}),{link:"".concat(s,"/requirements/issues/").concat(t.code,"/detail")}),Pe.removeDraft(),h&&h(null,t.issueStatusId,H),O&&j(null,t.issueStatusId,H,t),I&&I(t),f&&x?Pe.resetFormData():f&&_?Pe.resetPartialFormData(t.id):v()}),(function(e){var t=e.code,a=e.data,n=e.msg;if(8026===t)m.findIndex((function(e){return e===a.issueField.issueFieldId}))<0?((0,R.danger)((0,E.t)("\u521b\u5efa\u9875\u5c5e\u6027\u5df2\u53d8\u66f4\uff0c\u8bf7\u68c0\u67e5\u5fc5\u586b\u5c5e\u6027\u5e76\u518d\u6b21\u63d0\u4ea4\u3002")),Pe.setState({isReloading:!0},(function(){Promise.all([Pe.props.getRequirementScheme(),Pe.props.getRequirementScheme(!0)]).then((function(){Pe.setState({isReloading:!1})}))}))):(0,R.danger)((0,M.getErrorMessage)(n));else{if((0,k.configPlanNotToastMsg)(t))return;(0,R.danger)((0,M.getErrorMessage)(n))}})).finally((function(){Pe.setState({isPending:!1})}));case 36:case"end":return e.stop()}}),e,this,[[4,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"onIterationChange",value:function(e){this.setState({iterationCode:e?e.value:void 0})}},{key:"changeAttributes",value:function(e){var t=e.isCustom,a=e.type,n=e.value,r=e.issueFieldId,o=this.state.attributes;if(!this.validateDefect(r,n)){var i;switch(a){case"assignee":i={assignee:n?n.value:null,defaultAssignee:n};break;case"participants":i={participants:n||[]};break;case"softwareUnitDTO":i={softwareUnitDTO:n||[]};break;case"programId":i={programId:null!==n&&void 0!==n&&n.id?n.id:n,selectedProgram:n||{},milestone:0};break;case"defectKindIds":i={defectPhaseId:customValue,defectKindIds:n};break;case"defectPhaseId":i={defectPhaseId:n,defectKindIds:[]};break;case"workingHours":i={workingHours:null===n||void 0===n?void 0:n.workingHours,estimatedWorkHour:n};break;case"systemsId":i={systemsId:n||0,softwareUnitDTO:[]};break;default:i=(0,u.default)({},a,n)}this.setState({attributes:pe(pe({},o),t?{fields:pe(pe({},o.fields),{},(0,u.default)({},r,n))}:i)})}}},{key:"getAssigneeFieldWhetherRequired",value:function(e,t,a){if(!e||!t.length||!a)return!1;var n=t.find((function(t){return e[t].issueField.type===a}));return!!n&&e[n].required}},{key:"setDefaultValues",value:function(e,t){var a=this.state.attributes,n=this.props.user,r={id:n.id,value:n.id,text:n.name,name:n.name,name_pinyin:n.name_pinyin,avatar:n.avatar,media:n.avatar};this.setState({attributes:(0,I.default)(a,(function(a){a.participants=[r],t&&t.forEach((function(t){var o=e[t],i=o.needDefault,l=o.value,c=o.userMap,u=o.iterationMap,d=o.issueField,f=d.type,p=d.componentType;if(i&&null!==l)switch(f){case N.FIELD_TYPE.ASSIGNEE:"VARIABLE"===l.type?(a.assignee=n.id,a.defaultAssignee=r):"CONSTANT"===l.type&&(a.assignee=l.value,a.defaultAssignee=c[l.value]);break;case N.FIELD_TYPE.PRIORITY:a.priority=l.value;break;case N.FIELD_TYPE.REQUIREMENT_TYPE:a.requirementType=l.value;break;case N.FIELD_TYPE.START_DATE:a.startDate=l.value;break;case N.FIELD_TYPE.DUE_DATE:a.dueDate=l.value;break;case N.FIELD_TYPE.MODULE:a.projectModule=l.value;break;case N.FIELD_TYPE.WORKING_HOURS:a.workingHours=l.value;break;case N.FIELD_TYPE.LABEL:a.labels=l.value;break;case N.FIELD_TYPE.WATCHER:"VARIABLE"===l.type?a.watchers=(0,s.default)("CREATOR"===l.value?[r]:[]):a.watchers=l.value.map((function(e){return c[e]}));break;case N.FIELD_TYPE.PROGRESS:a.progress=l.value;break;case N.FIELD_TYPE.PARTICIPANT:a.participants=l.value&&l.value.length?l.value.map((function(e){return c[e]})):[];break;case N.FIELD_TYPE.DEFECT_KIND:a.defectKindIds=l.value;break;case N.FIELD_TYPE.DEFECT_PHASE:a.defectPhaseId=l.value;break;case N.FIELD_TYPE.WUKONG_RELOAD:a.wuKongReloadId=l.value;break;case N.FIELD_TYPE.INPROGRAM:a.programId=l.value;break;default:p===P.PROPERTY_TYPE_CONSTANTS.SELECT_MEMBER_SINGLE||p===P.PROPERTY_TYPE_CONSTANTS.SELECT_MEMBER_MULTI?"VARIABLE"===l.type?a.fields[t]=r:Array.isArray(l.value)?a.fields[t]=l.value.map((function(e){return c[e]})):a.fields[t]=c[l.value]:p===P.PROPERTY_TYPE_CONSTANTS.SELECT_ITERATION_SINGLE||p===P.PROPERTY_TYPE_CONSTANTS.SELECT_ITERATION_MULTI?Array.isArray(l.value)?a.fields[t]=l.value.map((function(e){return u[e]})):a.fields[t]=u[l.value]:a.fields[t]=l.value}}))}))})}},{key:"resetFormData",value:function(){var e=this,t=this.props,a=t.requirementCreationFieldIDs,n=t.requirementSchemeFieldArchives,r=t.iteration,o=t.isShowCreateNext,i=this.state.autoNext;this.setState({name:"",storyPoint:void 0,attachments:[],thirdLinks:[],isPending:!1,attributes:{assignee:void 0,priority:void 0,requirementType:void 0,projectModule:void 0,dueDate:void 0,startDate:void 0,workingHours:void 0,labels:[],watchers:[],fields:{},progress:void 0,defectKindIds:[],defectPhaseId:void 0,defectSourceId:void 0,wuKongReloadId:void 0,participants:[],systemsId:void 0,groupTeamId:void 0,estimatedWorkHour:void 0},iterationCode:void 0,localEpicCode:void 0,initEditorData:null,editorAutoFocus:!0,editionId:void 0},(function(){e.setDefaultValues(n,a),e.setState({iterationCode:r&&"COMPLETED"!==r.status&&r.code||void 0}),e.combineThirdLinks(),o&&i&&(e.initCreatePage(),e.setState({showDescriptionPlaceholder:!0}),e.titleInputFocus())}))}},{key:"resetPartialFormData",value:function(e){var t=this,a=this.props.isShowCreateNext,n=this.state,r=n.autoCopyNext,o=n.attributes;this.setState({name:"",attachments:[],thirdLinks:[],isPending:!1,attributes:pe(pe({},o),{},{workingHours:void 0,estimatedWorkHour:void 0}),initEditorData:null},(function(){t.combineThirdLinks(),a&&r&&(t.copyCreatePage(e),t.titleInputFocus())}))}},{key:"fileUpload",value:function(e){this.setState({attachments:(0,I.default)(this.state.attachments,(function(t){t.splice.apply(t,[t.length,0].concat((0,s.default)(e)))}))},this.combineThirdLinks)}},{key:"handleDeleteAttachment",value:function(e,t){var a=this;(0,_.delAttachment)(e,t).then((function(){a.setState({attachments:(0,I.default)(a.state.attachments,(function(e){var a=e.findIndex((function(e){return e.fileId===t}));e.splice(a,1)}))},a.combineThirdLinks)}))}},{key:"onFileDropSuccess",value:function(e){var t=this;this.setState((function(t){return{attachments:(0,I.default)(t.attachments,(function(t){var a;if("MODAO"===e.thirdType)(0,R.success)("".concat((0,E.t)("\u5f15\u5165\u6210\u529f"))),a=t.findIndex((function(t){return t.timestamp===e.timestamp}));else if(t.find((function(t){return t.fileId===e.fileId}))){(0,R.success)("".concat(e.name).concat((0,E.t)(" \u6587\u4ef6\u5df2\u66f4\u65b0!")));var n=t.findIndex((function(t){return t.timestamp===e.timestamp}));t.splice(n,1),a=t.findIndex((function(t){return t.fileId===e.fileId}))}else a=t.findIndex((function(t){return t.timestamp===e.timestamp}));t[a]=pe(pe({},t[a]),e)}))}})),this.setState((function(){t.combineThirdLinks()}))}},{key:"onFileDropFail",value:function(e){var t=e.timestamp;this.setState({attachments:(0,I.default)(this.state.attachments,(function(e){var a=e.findIndex((function(e){return e.timestamp===t}));e.splice(a,1)}))})}},{key:"onFileDropDelete",value:function(e){var t=e.fileId,a=e.isModao,n=e.isCodesign,r=this.props.currentProject.id;a||n?this.setState({thirdLinks:this.state.thirdLinks.filter((function(e){return e.fileId!==t}))},this.combineThirdLinks):this.handleDeleteAttachment(r,t)}},{key:"onFileDropCancel",value:function(e){var t=e.timestamp,a=e.isModao,n=e.isCodesign;a||n?this.setState({thirdLinks:this.state.thirdLinks.filter((function(e){return e.timestamp!==t}))},this.combineThirdLinks):this.setState({attachments:(0,I.default)(this.state.attachments,(function(e){var a=e.findIndex((function(e){return e.timestamp===t}));e.splice(a,1)}))},this.combineThirdLinks)}},{key:"whetherShowMoveButton",value:function(){if(this.wrapperRef.current&&this.listRef.current){var e=this.wrapperRef.current.getBoundingClientRect().width,t=this.listRef.current.getBoundingClientRect().width;this.setState({showButton:t>e})}}},{key:"moveContent",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.wrapperRef.current&&this.listRef.current){var t=this.state.toLeft,a=this.wrapperRef.current.getBoundingClientRect(),n=a.width,r=this.listRef.current.getBoundingClientRect(),o=r.width,i=o+t-n;e?i<=n?this.setState({toLeft:t+-1*i,showButton:!1}):this.setState({toLeft:t-n}):i<=n?this.setState({toLeft:0,showButton:!0}):this.setState({toLeft:t+n})}}}]),a}(y.Component),l.propTypes=pe(pe({show:b.default.bool,isShowCreateNext:b.default.bool,closeHandle:b.default.func,callback:b.default.func,txcPostId:b.default.string,currentProject:b.default.shape({id:b.default.number.isRequired,name:b.default.string,owner_user_name:b.default.string}),user:b.default.object,labels:b.default.array,addLabel:b.default.func,moduleSchemes:b.default.array,parentCode:b.default.number,requirementSchemeFieldArchives:b.default.object,requirementCreationFieldIDs:b.default.array,requirementTypes:b.default.array,getRequirementScheme:b.default.func,getRequirementTypes:b.default.func,bugTypes:b.default.array,getBugTypes:b.default.func,enterpriseGlobalKey:b.default.string,isDetail:b.default.bool,getModuleSchemes:b.default.func,createWithContent:b.default.func,iteration:b.default.object,epic:b.default.object,epicCode:b.default.number,name:b.default.string,currentProjectCooperateSettings:b.default.object,createWithTargetCode:b.default.number},A.WithProjectPermissionProps),{},{markdown:b.default.string,defectCode:b.default.number,callbackWithData:b.default.func,releaseInfo:b.default.object,ramOnline:b.default.bool,fromDM:b.default.bool,dmData:b.default.object,dmCallback:b.default.func,dmErrorCallback:b.default.func}),l.defaultProps={isShowCreateNext:!0,isDetail:!1},i=c))||i)||i)||i)||i)||i;t.default=ve},uH1L:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=a("1qdz"),v=n(a("74sH"));function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item;return f.default.createElement("div",{className:m.listItem,key:e.id},f.default.createElement("div",{className:m.dot}),f.default.createElement("div",{className:m.content},f.default.createElement(v.default,{className:"mr-10"}),f.default.createElement("span",{className:m.user},e.creator.name)," ",f.default.createElement("span",{className:m.msg,title:e.issueLog.content.val},(0,u.t)("\u66f4\u65b0\u4e86\u8f6f\u4ef6\u5355\u5143\u4e3a {{value}}",{value:e.issueLog.content.val||"\u65e0"})),f.default.createElement("span",{className:m.time},(0,p.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=E,E.propTypes={item:d.default.object}},uLjc:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=n(a("17x9")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=v(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),f=a("FaIw"),p=n(a("74sH")),m=a("1qdz");function v(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(v=function(e){return e?a:t})(e)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,l.default)(a,e);var t=h(a);function a(){var e;(0,o.default)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).getContent=function(){var t=e.props.item.issueLog;return"".concat(t.creator.name," \u66f4\u6539\u4e86 ").concat(t.targetName," \u4e3a ").concat(t.content.name)},e}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item;return d.default.createElement("div",{className:m.listItem,key:e.id},d.default.createElement("div",{className:m.dot}),d.default.createElement("div",{className:m.content},d.default.createElement(p.default,{className:"mr-10 ".concat(m.icon)}),d.default.createElement("span",{className:m.msg,title:e.issueLog.content.val},this.getContent()),d.default.createElement("span",{className:m.time},(0,f.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(d.Component);t.default=g,g.propTypes={item:u.default.object}},uQHf:function(e,t,a){"use strict";a("RW0V"),a("ioFf"),a("0l/t"),a("mYba"),a("jm62"),a("EK0E"),a("XfO3"),a("yt8O"),a("rGqo");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonHeader=void 0,a("CX2u"),a("Btvt"),a("VRzm");var o=n(a("lSNA")),i=n(a("J4zp")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),c=a("gdfu"),s=n(a("l2PE"));function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.ButtonHeader=function(e){var t=e.header,a=e.params,n=void 0===a?{}:a,r=e.method,u=e.reloadData,d=e.setCreateModal,p=(0,l.useState)({day:!1,week:!1}),m=(0,i.default)(p,2),v=m[0],h=m[1],g=(0,l.useState)({day:!1,week:!1}),E=(0,i.default)(g,2),y=E[0],b=E[1],I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"day";h((function(t){return f(f({},t),{},(0,o.default)({},e,!0))})),r(f(f({},n),{},{type:e})).then((function(e){0===(null===e||void 0===e?void 0:e.code)&&!0===(null===e||void 0===e?void 0:e.data)&&(d(!1),u&&u())})).finally((function(){h((function(t){return f(f({},t),{},(0,o.default)({},e,!1))}))}))},S=l.default.createElement("div",{className:s.default.buttonArea},l.default.createElement(c.Button,{loading:v.day,type:"primary",onClick:function(){return I("day")},onMouseLeave:function(){return b((function(e){return f(f({},e),{},{day:!1})}))},onMouseEnter:function(){return b((function(e){return f(f({},e),{},{day:!0})}))}},y.day?l.default.createElement(c.Tooltip,{getContainer:function(){return document.body},title:l.default.createElement("div",null,"\u70b9\u51fb\u540e\u4e00\u952e\u767b\u8bb0\u5f53\u65e5\u5269\u4f59\u5de5\u65f6\u81f3\u672c\u5361\u7247")},"\u4e00\u952e\u586b\u62a5\u5f53\u65e5\u5de5\u65f6"):"\u4e00\u952e\u586b\u62a5\u5f53\u65e5\u5de5\u65f6"),l.default.createElement(c.Button,{loading:v.week,type:"primary",onClick:function(){return I("week")},style:{marginLeft:"10px"},onMouseLeave:function(){return b((function(e){return f(f({},e),{},{week:!1})}))},onMouseEnter:function(){return b((function(e){return f(f({},e),{},{week:!0})}))}},y.week?l.default.createElement(c.Tooltip,{getContainer:function(){return document.body},title:l.default.createElement("div",null,"\u70b9\u51fb\u540e\u4e00\u952e\u767b\u8bb0\u5f53\u5468\u5269\u4f59\u5de5\u65f6\u81f3\u672c\u5361\u7247")},"\u4e00\u952e\u586b\u62a5\u5f53\u5468\u5de5\u65f6"):"\u4e00\u952e\u586b\u62a5\u5f53\u5468\u5de5\u65f6"));return l.default.createElement("div",{className:s.default.recordHoursHeader},t,S)}},uZPZ:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=n(a("iMON")),v=a("1qdz");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E={ADD:(0,u.t)("\u4e0a\u4f20"),REMOVE:(0,u.t)("\u5220\u9664"),DELETE:(0,u.t)("\u5220\u9664")},y=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item;return f.default.createElement("div",{className:v.listItem,key:e.id},f.default.createElement("div",{className:v.dot}),f.default.createElement("div",{className:v.content},f.default.createElement(m.default,{className:"mr-10 ".concat(v.icon)}),f.default.createElement("span",{className:v.user},e.creator.name),e.issueLog&&1===e.issueLog.old?"\u3010\u6e90\u3011":"",f.default.createElement("span",null,E[e.issueLog.action],(0,u.t)("\u4e86\u9644\u4ef6")),f.default.createElement("span",{className:"ml-10 ".concat(v.moreDot),title:e.issueLog.content.title},e.issueLog.content.title),f.default.createElement("span",{className:v.time},(0,p.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=y,y.propTypes={item:d.default.object}},unJ8:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("o0o1")),i=n(a("yXPU")),l=n(a("lwsE")),c=n(a("W8MJ")),s=n(a("7W2i")),u=n(a("a1gu")),d=n(a("Nsbk")),f=a("mVeg"),p=n(a("17x9")),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),v=a("FaIw"),h=n(a("zIEN")),g=a("dtw8"),E=a("w3Wo"),y=a("1qdz");function b(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(b=function(e){return e?a:t})(e)}function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var S={ADD:(0,f.t)("\u5173\u8054\u4e86"),REMOVE:(0,f.t)("\u89e3\u9664\u4e86")},T=function(e){(0,s.default)(a,e);var t=I(a);function a(){var e;(0,l.default)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(){var t=(0,i.default)(o.default.mark((function t(a,n){var r,i,l,c,s,u;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,i=r.projectId,l=r.item,t.prev=1,a.preventDefault(),t.next=5,(0,E.fetchIssueDetailByCode)(i,null===l||void 0===l||null===(c=l.issueLog)||void 0===c||null===(s=c.content)||void 0===s?void 0:s.code);case 5:u=t.sent,u.data.code&&window.open(n),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(1);case 12:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,a){return t.apply(this,arguments)}}(),e}return(0,c.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.item,n=t.projectPath;return m.default.createElement("div",{className:y.listItem,key:a.id},m.default.createElement("div",{className:y.dot}),m.default.createElement("div",{className:y.content},m.default.createElement(h.default,{className:"mr-10 ".concat(y.icon)}),m.default.createElement("span",{className:y.user},a.creator.name),a.issueLog&&1===a.issueLog.old?"\u3010\u6e90\u3011":"",m.default.createElement("span",null,S[a.issueLog.action],a.issueLog.content.issueTypeName),"MISSION"!==a.issueLog.content.type?m.default.createElement(g.Link,{className:"ml-10",target:"_blank",onClick:function(t){e.handleClick(t,"".concat(n,"/requirements/issues/").concat(a.issueLog.content.code,"/detail"))}},"#",a.issueLog.content.code,"-",a.issueLog.content.name):m.default.createElement(g.Link,{className:"ml-10",target:"_blank",onClick:function(t){e.handleClick(t,"".concat(n,"/assignments/issues/").concat(a.issueLog.content.code,"/detail"))}},"#",a.issueLog.content.code,"-",a.issueLog.content.name),"REMOVE"===a.issueLog.action&&m.default.createElement("span",{className:"ml-10"},(0,f.t)("\u7684\u5173\u8054")),m.default.createElement("span",{className:y.time},(0,v.timeFormat)(a.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(m.Component);t.default=T,T.propTypes={item:p.default.object,projectPath:p.default.string,projectId:p.default.number}},up41:function(e,t,a){e.exports=a.p+"110b4206cf105626123e524a9d9aac5c.svg"},v3Uf:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t){(0,s.default)(n,t);var a=function(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}(n);function n(e){var t;return(0,i.default)(this,n),(t=a.call(this,e)).state={largeSize:!1},t.toggleStyle=t.toggleStyle.bind((0,c.default)(t)),t}return(0,l.default)(n,[{key:"render",value:function(){var t=this.state.largeSize;return f.default.createElement(e,(0,o.default)({largeSize:t},this.props))}},{key:"componentDidMount",value:function(){this.toggleStyle(),window.addEventListener("resize",this.toggleStyle,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.toggleStyle,!1)}},{key:"toggleStyle",value:function(){this.setState({largeSize:window.innerWidth>=1600})}}]),n}(f.Component)},t.sizeProps=void 0;var o=n(a("pVnL")),i=n(a("lwsE")),l=n(a("W8MJ")),c=n(a("PJYZ")),s=n(a("7W2i")),u=n(a("a1gu")),d=n(a("Nsbk")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd"));function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}var m={largeSize:n(a("17x9")).default.bool};t.sizeProps=m},vhVw:function(e,t,a){e.exports={"failed-container":"failed-container-1wy-9KPWYJ",failedContainer:"failed-container-1wy-9KPWYJ","failed-item":"failed-item-WvpqZAuDra",failedItem:"failed-item-WvpqZAuDra"}},vife:function(e,t,a){e.exports=a.p+"ee00c7bffed214afafc62d3cd33948d8.svg"},vtbA:function(e,t,a){"use strict";a.r(t),a.d(t,"ProjectSelector",(function(){return h}));var n=a("mVeg"),r=a("cDcd"),o=a.n(r),i=a("BKNj"),l=a("K2gz"),c=a.n(l),s=a("EuaE"),u=a.n(s),d=a("fmVk"),f=a("w3Wo"),p=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),m=function(){return(m=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},v=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={loading:!1,items:[],Program:{}},t.fetchProjects=function(){t.setState({loading:!0});var e=t.props,a=e.dataFromZip,n=e.unCompleted,r=void 0!==n&&n;if("DEFECT"!==t.props.issueType&&"REQUIREMENT"!==t.props.issueType&&"MISSION"!==t.props.issueType&&a){if(0===a.code){var o=a.data.map((function(e){return{avatar:e.icon,text:e.displayName||e.display_name||e.name,value:e.id,name:e.name,id:e.id,displayName:e.displayName||e.display_name}}));t.setState({items:o})}t.setState({loading:!1})}else Object(f.fetchPrograms)({page:1,pageSize:99999,unCompleted:r}).then((function(e){var a=e.data.map((function(e){return{avatar:e.icon,text:e.displayName||e.display_name||e.name,value:e.id,name:e.name,id:e.id,displayName:e.displayName||e.display_name}}));t.setState({items:a})})).finally((function(){return t.setState({loading:!1})}))},t.projectItem=function(e){var t=e.item,a=e.value,n=e.onSelect,r=a&&t.value===a;return o.a.createElement("div",{className:u.a.menuItem,onClick:function(){n&&!r&&n(t)}},o.a.createElement("img",{className:u.a.projectAvatar,src:t.avatar}),o.a.createElement("span",{className:u.a.name,title:t.text},t.text),!!r&&o.a.createElement("span",{className:u.a.checked}))},t.projectTrigger=function(e){var a=e.items,n=e.value,r=e.disabled,i=e.active,l=e.placeholder,s=void 0===l?"\u672a\u89c4\u5212\u9879\u76ee":l,d=a.find((function(e){return e.value===n})),f=d||t.state.Program;return o.a.createElement("div",{className:c()(u.a.projectTrigger,i&&u.a.active,r&&u.a.disabled),title:null===f||void 0===f?void 0:f.text},(null===f||void 0===f?void 0:f.avatar)&&o.a.createElement("img",{className:u.a.avatar,src:f.avatar}),o.a.createElement("div",{className:c()(u.a.content,!Object.keys(f).length&&u.a.placeholder)},(null===f||void 0===f?void 0:f.text)||o.a.createElement("span",{style:{color:"#b8c0cb"}},s)),o.a.createElement("span",{className:c()(u.a.caret)}))},t}return p(t,e),t.prototype.componentDidMount=function(){this.fetchProjects(),this.initSelected()},t.prototype.componentWillReceiveProps=function(e){var t,a,n,r;(null===(t=null===e||void 0===e?void 0:e.selectedProgram)||void 0===t?void 0:t.id)||(null===(a=null===e||void 0===e?void 0:e.selectedProgram)||void 0===a?void 0:a.id)===(null===(r=null===(n=this.props)||void 0===n?void 0:n.selectedProgram)||void 0===r?void 0:r.id)||this.setState({Program:{}})},t.prototype.initSelected=function(){var e=this.props.selectedProgram;e&&this.setState({Program:{avatar:e.icon,text:e.displayName||e.display_name||e.name,value:e.id,name:e.name,id:e.id,displayName:e.displayName||e.display_name}})},t.prototype.getProjectId=function(){var e;return(null===(e=d.store.getState().APP.currentProject)||void 0===e?void 0:e.id)||this.props.projectID},t.prototype.render=function(){var e=this.state,t=e.loading,a=e.items,r=v(this.props,[]);return o.a.createElement(i.default,m({searchable:!0,searchPlaceholder:Object(n.t)("\u7b5b\u9009\u9879\u76ee"),placeholder:Object(n.t)("\u8bf7\u9009\u62e9\u9879\u76ee"),items:a,Item:this.projectItem,Trigger:this.projectTrigger,dataFetching:t},r))},t}(r.Component);t.default=h},vyFa:function(e,t,a){e.exports={button:"button-1RLKOF4bAu",primary:"primary-xB5GQYiiFy",disabled:"disabled-1OjeWYP-R2","plus-icon":"plus-icon-S1RCQ93uZh",plusIcon:"plus-icon-S1RCQ93uZh",default:"default-1bEibjqily",warning:"warning-29AguxINBm","h-32":"h-32-1JmxoqSOJA",h32:"h-32-1JmxoqSOJA","h-28":"h-28-1_cVaQRDwq",h28:"h-28-1_cVaQRDwq","h-24":"h-24-1dhDE4wz0K",h24:"h-24-1dhDE4wz0K"}},w35b:function(e,t,a){e.exports=a.p+"773945a9e5dd80a71dfb4cc3ad01e1cd.svg"},w7na:function(e,t,a){e.exports=a.p+"92f254604b74d47528fc1b9fd5efef33.svg"},w9Zt:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o,i=n(a("lwsE")),l=n(a("W8MJ")),c=n(a("7W2i")),s=n(a("a1gu")),u=n(a("Nsbk")),d=n(a("lSNA")),f=a("mVeg"),p=n(a("17x9")),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=y(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),v=a("FaIw"),h=n(a("FVZw")),g=a("1qdz"),E=a("XnCo");function y(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(y=function(e){return e?a:t})(e)}function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var I=(o={},(0,d.default)(o,E.LOG_TYPE.START_DATE,(0,f.t)("\u5f00\u59cb\u65e5\u671f")),(0,d.default)(o,E.LOG_TYPE.DUE_DATE,(0,f.t)("\u622a\u6b62\u65e5\u671f")),o),S=function(e){(0,c.default)(a,e);var t=b(a);function a(){return(0,i.default)(this,a),t.apply(this,arguments)}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.itemType,n=e.logType;return m.default.createElement("div",{className:g.listItem,key:t.id},m.default.createElement("div",{className:g.dot}),m.default.createElement("div",{className:g.content},m.default.createElement(h.default,{className:"mr-10 ".concat(g.icon)}),m.default.createElement("span",{className:g.user},t.creator.name),t.issueLog&&1===t.issueLog.old?"\u3010\u6e90\u3011":"",("UPDATE"===t.issueLog.action||"REMOVE"===t.issueLog.action)&&m.default.createElement(m.default.Fragment,null,m.default.createElement("span",null,(0,f.t)("\u66f4\u65b0\u4e86{{type}}\u7684{{time}}\u4e3a",{type:a,time:I[n]})),m.default.createElement("span",{className:"ml-10"},t.issueLog.content.val||(0,f.t)("\u65e0")),m.default.createElement("span",{className:g.time},(0,v.timeFormat)(t.createdAt,"YYYY-MM-DD HH:mm")))))}}]),a}(m.Component);t.default=S,S.propTypes={item:p.default.object,itemType:p.default.string,logType:p.default.string}},wMIR:function(e,t,a){"use strict";var n=a("cDcd"),r=a.n(n),o=a("gRP+"),i=a.n(o),l=a("K2gz"),c=a.n(l);t.a=function(e){var t=e.type,a=e.className;return r.a.createElement("div",{className:c()(i.a.status,i.a["status-".concat(t)],a)})}},wMO9:function(e,t,a){e.exports={tag:"tag-1b1vurtFOu","limit-width":"limit-width-1Ph-XRS6AF",limitWidth:"limit-width-1Ph-XRS6AF",color:"color-3LSS05aLe9",text:"text-7IODWjfJRp",close:"close-1VXYaJ0tDg","tag-list":"tag-list-3EKcYlzWa4",tagList:"tag-list-3EKcYlzWa4",add:"add-20q9FebLjp",plus:"plus-3-BraVSgP9",active:"active-2uKE1FFrAN",disabled:"disabled-3r6cG1plX7","add-disable":"add-disable-35049N-bwG",addDisable:"add-disable-35049N-bwG","tag-panel":"tag-panel-17cMPIMjmd",tagPanel:"tag-panel-17cMPIMjmd","expand-panel":"expand-panel-p-bzVWiIs4",expandPanel:"expand-panel-p-bzVWiIs4","is-create":"is-create-1zBtZ5XpYr",isCreate:"is-create-1zBtZ5XpYr",main:"main-1JpXqCXX-Z",search:"search-3xTmmOWkZX",icon:"icon-22_mycMBLN",input:"input-2IXcLj47L5",menus:"menus-2rF_tJWOrb",item:"item-34Mea-on58","item-select":"item-select-HaFfDjJ3sA",itemSelect:"item-select-HaFfDjJ3sA",return:"return-ezPbqijRNC",check:"check-1mbg_fdo6K",selected:"selected-E1l3HPQy8j",opts:"opts-1H8lqGuzW2","has-hover":"has-hover-1pjCoyCJId",hasHover:"has-hover-1pjCoyCJId","text-eli":"text-eli-2XHD_FHL2_",textEli:"text-eli-2XHD_FHL2_",second:"second-2-Wh4kudfc","s-text":"s-text-W1v174Tf7P",sText:"s-text-W1v174Tf7P",title:"title-2Y_W6fEeGr","tag-name":"tag-name-cE61NeMXLk",tagName:"tag-name-cE61NeMXLk","tag-color":"tag-color-2bx8X-gvIp",tagColor:"tag-color-2bx8X-gvIp",colors:"colors-1ooqC7yFD3","color-wrapper":"color-wrapper-32cUlmNQjl",colorWrapper:"color-wrapper-32cUlmNQjl","color-cake":"color-cake-1i7X-IoQK2",colorCake:"color-cake-1i7X-IoQK2",bs:"bs-3ByavTTE_L"}},wSCF:function(e,t,a){"use strict";a.r(t),a.d(t,"AllPowerFulLogItem",(function(){return v}));var n=a("cDcd"),r=a.n(n),o=a("1qdz"),i=a("Phlg"),l=a("74sH"),c=a.n(l),s=a("kBmI"),u=a.n(s),d=a("u3SJ"),f=a.n(d),p=a("FaIw"),m={ROBOT:{key:"ROBOT",actions:{},targetName:"",icon:{},defaultIcon:u.a},ISSUE_PROGRAM_FOR:{key:"ISSUE_PROGRAM_FOR",actions:{UPDATE:"\u66f4\u65b0\u4e86",REMOVE:"\u79fb\u9664\u4e86"},targetName:"\u6240\u5c5e\u9879\u76ee",prefix:"\u901a\u8fc7\u6d41\u7a0b\u4e2d\u5fc3\u8303\u56f4\u53d8\u66f4\u8bc4\u5ba1 ",midfix:"\u4e3a",icon:{ADD:c.a,REMOVE:c.a}},RISK:{key:"RISK",actions:{ADD:"\u6807\u8bb0\u4e86",REMOVE:"\u89e3\u9664\u4e86"},targetName:"\u98ce\u9669",icon:{ADD:f.a,REMOVE:c.a}}},v=function(e){var t,a,n,l,s,u,d,f,v=e.item,h=m[null===(t=v.issueLog)||void 0===t?void 0:t.target]||{},g=(null===(a=h.icon)||void 0===a?void 0:a[null===(n=v.issueLog)||void 0===n?void 0:n.action])||(null===h||void 0===h?void 0:h.defaultIcon)||c.a;return r.a.createElement("div",{className:i.logListItem,key:null===v||void 0===v?void 0:v.id},r.a.createElement("div",{className:o.dot}),r.a.createElement("div",{className:o.content},r.a.createElement(g,{className:"mr-10 ".concat(o.icon)}),r.a.createElement("span",{className:o.user},null===(l=null===v||void 0===v?void 0:v.creator)||void 0===l?void 0:l.name),r.a.createElement("span",{className:i.contentItem},h.prefix,(null===(s=h.actions)||void 0===s?void 0:s[null===(u=v.issueLog)||void 0===u?void 0:u.action])||"",function(e){switch(e.target){case"ROBOT":return"";case"ISSUE_PROGRAM_FOR":case"RISK":return null===e||void 0===e?void 0:e.targetName;default:return null}}(v.issueLog),h.midfix,r.a.createElement("span",{className:"ml-10 ".concat(o.moreDot)},function(e,t){if(!t)return null;switch(e){case"ROBOT":return r.a.createElement("span",{title:t},t);case"ISSUE_PROGRAM_FOR":return r.a.createElement("span",{title:null===t||void 0===t?void 0:t.name},null===t||void 0===t?void 0:t.name);default:return null}}(null===(d=v.issueLog)||void 0===d?void 0:d.target,null===(f=v.issueLog)||void 0===f?void 0:f.content)),h.suffix),r.a.createElement("span",{className:o.time},Object(p.timeFormat)(null===v||void 0===v?void 0:v.createdAt,"YYYY-MM-DD HH:mm"))))}},wYSa:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=n(a("17x9")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),p=a("FaIw"),m=n(a("74sH")),v=a("1qdz");function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.item;return f.default.createElement("div",{className:v.listItem,key:e.id},f.default.createElement("div",{className:v.dot}),f.default.createElement("div",{className:v.content},f.default.createElement(m.default,{className:"mr-10 ".concat(v.icon)}),f.default.createElement("span",{className:v.user},e.creator.name),e.issueLog&&1===e.issueLog.old?"\u3010\u6e90\u3011":"",f.default.createElement("span",{className:v.msg,title:e.issueLog.content.val},(0,u.t)("\u62c6\u89e3\u4e86 {{issueType}} \u3010{{name}}\u3011 \u4e3a {{value}}",{issueType:e.issueTypeName,name:e.issueName,value:e.issueLog.content.val})),f.default.createElement("span",{className:v.time},(0,p.timeFormat)(e.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(f.Component);t.default=E,E.propTypes={item:d.default.object}},x2Em:function(e,t,a){"use strict";a("I5cv"),a("RW0V"),a("ioFf"),a("mYba"),a("jm62"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("xfY5"),a("f3/d"),a("0l/t");var o,i,l,c=n(a("lSNA")),s=n(a("RIqP")),u=n(a("lwsE")),d=n(a("W8MJ")),f=n(a("PJYZ")),p=n(a("7W2i")),m=n(a("a1gu")),v=n(a("Nsbk")),h=a("mVeg"),g=H(a("cDcd")),E=a("iR1w"),y=n(a("nWua")),b=n(a("17x9")),I=n(a("K2gz")),S=a("nuIr"),T=a("uKPp"),w=a("dtw8"),C=n(a("+QRC")),O=a("xgZS"),N=a("DKcV"),P=H(a("OajT")),j=a("BXnm"),D=n(a("Qkhu")),k=a("5kKY"),R=a("sWxF"),M=a("k65d"),A=a("DgMC"),L=n(a("TT2u")),x=n(a("HwxY")),_=n(a("6Mal")),F=n(a("L8Eh")),W=a("iTKN");function B(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(B=function(e){return e?a:t})(e)}function H(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=B(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function q(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,v.default)(e);if(t){var r=(0,v.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,m.default)(this,a)}}var G=(0,P.default)(o=(0,L.default)((l=i=function(e){(0,p.default)(a,e);var t=q(a);function a(e){var n;return(0,u.default)(this,a),(n=t.call(this,e)).getListHeight=function(){return Math.min(345,36*n.props.affairs.length)},n.getPortalContainer=function(){return document.querySelector('div[data-frontend-module-container="coding-project-management-frontend"]')},n.renderItem=function(e){var t=e.index,a=e.style,r=n.props,o=r.affairs,i=r.isPermissible,l=r.params,c=(r.isDetail,o[t]),u=("".concat(c.projectId,"-").concat(c.code),c&&c.issueStatus&&c.issueStatus.type&&"COMPLETED"===c.issueStatus.type),d=i([{function:N.ProjectPermissionFunction.PROJECT_ISSUE,action:N.ProjectPermissionAction.UPDATE}]),f=i([{function:N.ProjectPermissionFunction.PROJECT_ISSUE,action:N.ProjectPermissionAction.DELETE}]),p=n.props.isFullScreen?S.FULL_SCREEN.disabledBottomSpace:0;return g.default.createElement(x.default.Consumer,null,(function(e){var t;return g.default.createElement("div",{className:(0,I.default)(y.default.items,Number(l.issueCode)===c.code&&y.default.active),key:c.id,style:a},g.default.createElement("div",{className:y.default.itemLeft},n.renderIcon(c.type),n.renderLink(c.type,c.code,c.name)),g.default.createElement("div",{className:y.default.itemRight},c.dueDate&&g.default.createElement("div",{className:(0,I.default)(y.default.tag,y.default.dueDate,y.default[(0,A.parseDueDate)(c.dueDate,u).color]),title:(0,A.parseDueDate)(c.dueDate,u).formatDate},(0,A.parseDueDate)(c.dueDate,u).text),g.default.createElement("div",{className:y.default.itemPriority},g.default.createElement(_.default,{componentType:W.ComponentType.ICON,value:c.priority,disabled:!d,onSelect:function(e){return n.changeAttributes(c.type,c.code,{priority:e.id})},isPortal:!0,portalProps:{portalContainer:n.getPortalContainer(),toRight:!0,scrollControl:e.scrollControl},disabledBottomSpace:p})),g.default.createElement("div",{className:y.default.itemStatus},g.default.createElement(j.StatusSelect,{value:c.issueStatus,projectID:n.props.projectID,project:c.project,issueCode:c.code,disabled:!d,onSelect:function(e){return n.changeAttributes(c.type,c.code,e)},portalContainer:n.getPortalContainer,portalAlign:{top:21,toRight:!0},disabledBottomSpace:p})),g.default.createElement("div",{className:y.default.itemAssignee},g.default.createElement(F.default,{componentType:W.ComponentType.ICON,disabled:!d,value:null===(t=c.assignee)||void 0===t?void 0:t.id,inProject:!0,projectID:n.props.projectID,initialSelectedItem:c.assignee,onSelect:function(e){n.changeAttributes(c.type,c.code,{assignee:e.id})},onClear:function(){n.changeAttributes(c.type,c.code,{assignee:0})},triggerExtraProps:{initialSelectedItem:c.assignee},isPortal:!0,portalProps:{portalWrapStyle:{zIndex:1055},portalContainer:n.getPortalContainer(),toRight:!0,scrollControl:e.scrollControl},disabledBottomSpace:p})),g.default.createElement(k.ItemDropdown,{popupStyle:{width:160},portalContainer:n.getPortalContainer,portalAlign:{top:24,left:-96},options:[{name:(0,h.t)("\u590d\u5236\u94fe\u63a5"),id:T.ITEMS_ACTION.COPY_PATH}].concat((0,s.default)(d?[{id:"divider",name:"",type:"divider"},{name:(0,h.t)("\u53d6\u6d88\u5173\u8054"),id:T.ITEMS_ACTION.UNLINK}]:[]),(0,s.default)(f?[{name:(0,h.t)("\u5220\u9664"),id:T.ITEMS_ACTION.DELETE,type:"delete"}]:[])),onSelect:function(e){return n.onSelect(e,c)}})))}))},n.getUrlByType=function(e){var t=n.props.projectPath;switch(e.type){case S.ISSUE_TYPE.REQUIREMENT:return"".concat(t,"/requirements/issues/").concat(e.code,"/detail");case S.ISSUE_TYPE.ASSIGNMENT:return"".concat(t,"/assignments/issues/").concat(e.code,"/detail");case S.ISSUE_TYPE.DEFECT:return"".concat(t,"/bug-tracking/issues/").concat(e.code,"/detail");default:return""}},n.deleteIssue=function(){var e=n.state.deleteItem,t=n.props,a=t.callback,r=t.projectID,o=function(){};switch(e.type){case S.ISSUE_TYPE.REQUIREMENT:o=M.deleteRequirement;break;case S.ISSUE_TYPE.ASSIGNMENT:o=M.deleteAssignment;break;case S.ISSUE_TYPE.DEFECT:o=M.deleteBug}o(r,e.code).then((function(){(0,O.success)((0,h.t)("\u5220\u9664\u6210\u529f")),n.closeConfirm(),a()}))},n.closeConfirm=function(){n.setState({showDeleteModal:!1,deleteItem:void 0})},n.onSelect=function(e,t){var a=n.props,r=a.callback,o=a.projectID,i=a.issueCode,l=a.browserRouter,c=n.getUrlByType(t);switch(e.id){case T.ITEMS_ACTION.UNLINK:(0,R.removeDefectFromRequirement)(o,i,t.code).then((function(){(0,O.success)((0,h.t)("\u53d6\u6d88\u5173\u8054\u6210\u529f")),r()}));break;case T.ITEMS_ACTION.COPY_PATH:(0,C.default)("".concat(window.location.origin).concat(c)),(0,O.success)((0,h.t)("\u6210\u529f\u590d\u5236\u5230\u526a\u5207\u677f"));break;case T.ITEMS_ACTION.OPEN_IN_NEW_WINDOW:window.open(c);break;case T.ITEMS_ACTION.DETAIL:l.push(c);break;case T.ITEMS_ACTION.DELETE:n.setState({showDeleteModal:!0,deleteItem:t});break;default:window.console.danger((0,h.t)("\u672a\u77e5\u7814\u53d1\u7a7a\u95f4"))}},n.changeAttributes=function(e,t,a){var r=n.props,o=r.projectID,i=r.callback;return(0,R.modifyIssue)(e,o,t,a,!1).then((function(e){return(0,O.success)((0,h.t)("\u66f4\u65b0\u6210\u529f")),i(),e}))},n.state={showDeleteModal:!1,deleteItem:void 0,transfers:{}},n.createSimpleAffairs=n.createSimpleAffairs.bind((0,f.default)(n)),n.createFullAffairs=n.createFullAffairs.bind((0,f.default)(n)),n.associateAffairs=n.associateAffairs.bind((0,f.default)(n)),n}return(0,d.default)(a,[{key:"render",value:function(){var e=this.state,t=e.showDeleteModal,a=e.deleteItem,n=this.props,r=n.affairs,o=n.sectionExpanded;n.isCreateAffairsVisible;return g.default.createElement("div",{className:y.default.subitemWrapper},this.renderHeader(),o&&!!r.length&&this.renderList(),g.default.createElement(D.default,{text:(0,h.t)("\u5220\u9664\u4e8b\u9879"),type:a?a.type:"",show:t,onConfirm:this.deleteIssue,onClose:this.closeConfirm}))}},{key:"renderIcon",value:function(e){switch(e){case S.ISSUE_TYPE.ASSIGNMENT:return g.default.createElement("div",{className:(0,I.default)(y.default.assignmentIcon,y.default.itemIcon)});case S.ISSUE_TYPE.DEFECT:return g.default.createElement("div",{className:(0,I.default)(y.default.defectIcon,y.default.itemIcon)});default:return g.default.createElement("div",{className:(0,I.default)(y.default.requirementIcon,y.default.itemIcon)})}}},{key:"renderLink",value:function(e,t,a){var n=this.props,r=n.projectPath;n.params,n.isDetail;return g.default.createElement(w.Link,{to:"".concat(r,"/bug-tracking/issues/").concat(t,"/detail"),className:y.default.itemDetail,target:"_blank"},g.default.createElement("div",{className:y.default.itemCode},"#",t),g.default.createElement("div",{className:y.default.itemSpec},g.default.createElement("div",{className:y.default.itemTitle,title:a},a)))}},{key:"renderList",value:function(){var e=this.props.affairs;return g.default.createElement("div",{className:y.default.subitemDetail},e&&!!e.length&&g.default.createElement(E.FixedSizeList,{itemCount:e.length,itemSize:36,height:this.getListHeight(),itemData:{affairs:e}},this.renderItem))}},{key:"renderHeader",value:function(){var e=this,t=this.props,a=t.affairs,n=t.SectionToggletrigger,r=t.isPermissible,o=(a.filter((function(e){return"COMPLETED"===e.issueStatus.type})),r([{function:N.ProjectPermissionFunction.PROJECT_ISSUE,action:N.ProjectPermissionAction.UPDATE}]));return g.default.createElement("div",{className:y.default.subitemHeader},g.default.createElement("div",{className:(0,I.default)(y.default.title,!o&&y.default.noBorder)},(0,h.t)("\u7f3a\u9677"),g.default.createElement(n,null)),g.default.createElement("div",{className:y.default.operation},o&&g.default.createElement("div",{className:y.default.createButton,onClick:function(){return e.createSimpleAffairs("")}})))}},{key:"createSimpleAffairs",value:function(e){this.props.handleSimpleCreate(e)}},{key:"createFullAffairs",value:function(e){this.props.handleFullCreate(e)}},{key:"associateAffairs",value:function(e){this.props.handleAssociate(e)}}]),a}(g.Component),i.propTypes=Y(Y(Y({params:b.default.object,isDetail:b.default.bool,affairs:b.default.array,projectPath:b.default.string,projectID:b.default.number,issueCode:b.default.number,handleFullCreate:b.default.func,handleSimpleCreate:b.default.func,handleAssociate:b.default.func,callback:b.default.func},N.WithProjectPermissionProps),P.ToggleSectionWrapperProps),{},{isCreateAffairsVisible:b.default.bool,browserRouter:b.default.object,isFullScreen:b.default.bool}),o=l))||o)||o;t.default=G},xIf5:function(e,t,a){"use strict";a.r(t);var n=a("mVeg"),r=a("cDcd"),o=a.n(r),i=a("ooH1"),l=a("K2gz"),c=a.n(l),s=a("xhX+"),u=a.n(s),d=a("Z4vw"),f=a("xgZS"),p=a("sWxF"),m=a("uQHf"),v=a("38k+"),h=a("5JFE"),g=a("TRyi"),E=a.n(g),y=function(){return(y=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},b=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i};t.default=function(e){var t,a,l=e.detailInfo,s=e.isFromDetailPage,g=e.allowUpdate,I=e.onForwardLogs,S=e.schemeFields,T=e.user,w=e.programId,C=e.onUpdate,O=b(Object(r.useState)(!1),2),N=O[0],P=O[1],j=b(Object(r.useState)(void 0),2),D=j[0],k=j[1],R=(null===l||void 0===l?void 0:l.workingHours)?Math.round((null===l||void 0===l?void 0:l.workingHours)/8*100)/100:null===l||void 0===l?void 0:l.workingHours;Object(r.useEffect)((function(){M(!1)}),[w,l]);var M=function(e){var t;Object(p.getqueryProgramInfoApi)(l.id,{type:e,issueType:null===(t=null===l||void 0===l?void 0:l.issueTypeDetail)||void 0===t?void 0:t.type}).then((function(e){0===e.code&&e.data&&k(e.data)}))},A=Object(r.useMemo)((function(){var e;return{issueId:null===l||void 0===l?void 0:l.id,check:!0,issueType:null===(e=null===l||void 0===l?void 0:l.issueTypeDetail)||void 0===e?void 0:e.type}}),[null===l||void 0===l?void 0:l.id]);return o.a.createElement("div",{className:c()([u.a.container,s?u.a.isDetail:"",!g&&u.a.disabled]),"data-container":!0,"data-title":"REQUIREMENT"===(null===(t=null===l||void 0===l?void 0:l.issueTypeDetail)||void 0===t?void 0:t.issueType)&&"requirement"!==(null===(a=null===l||void 0===l?void 0:l.issueTypeDetail)||void 0===a?void 0:a.type)?"\u9700\u6c42\u6c60\u586b\u62a5":"\u7814\u53d1\u7a7a\u95f4\u586b\u62a5"},o.a.createElement(i.a,{recordHours:(null===D||void 0===D?void 0:D.workHour)||"",remainingHours:(null===D||void 0===D?void 0:D.workHour)?R-(null===D||void 0===D?void 0:D.workHour):R,className:g?u.a.progress:u.a.noPermissionProgress,onClick:function(){var e;g&&Object(p.getqueryProgramInfoApi)(l.id,{type:!0,issueType:null===(e=null===l||void 0===l?void 0:l.issueTypeDetail)||void 0===e?void 0:e.type}).then((function(e){var t,a,r;if(0===e.code&&"CURRENT_USER_NOT_IN_THIS_PROGRAM_APPLY_MANAGER"===(null===(t=null===e||void 0===e?void 0:e.data)||void 0===t?void 0:t.exceptionType))return h.Modal.error({title:o.a.createElement(o.a.Fragment,null,"\u5de5\u65f6\u586b\u62a5\uff1a\u5f53\u524d\u7528\u6237\u4e0d\u662f\u9879\u76ee\u6210\u5458\u4e0d\u53ef\u4ee5\u586b\u62a5\uff1b\u82e5\u8981\u6b63\u5e38\u586b\u62a5\u5de5\u65f6\u9700\u52a0\u5165\u8be5\u9879\u76ee\uff0c\u8bf7\u5411\u9879\u76ee\u7ecf\u7406\u3010",o.a.createElement("span",{style:{color:"#0066ff"}}," ",Object(n.t)(null===(a=null===e||void 0===e?void 0:e.data)||void 0===a?void 0:a.exceptionMessage)),"\u3011\u7533\u8bf7\u52a0\u5165\u8be5\u9879\u76ee"),closable:!0,getContainer:function(){return document.querySelector('[data-frontend-module-container="coding-project-management-frontend"]')||document.body},zIndex:2080,className:u.a.confirm,icon:o.a.createElement("div",{style:{float:"left",marginRight:"16px"}},o.a.createElement(E.a,{style:{color:"#ff4d4f",width:"22px",height:"22px"},translate:void 0,onAuxClick:void 0,onAuxClickCapture:void 0})),onOk:function(){},okButtonProps:{style:{display:"none"}},okText:"\u5173\u95ed"});if(0===e.code&&e.data){if("SUB_TASK"===(null===(r=null===e||void 0===e?void 0:e.data)||void 0===r?void 0:r.type))return Object(f.danger)(Object(d.getErrorMessage)("\u4efb\u52a1\u5b50\u7c7b\u578b\u4e0d\u652f\u6301\u5de5\u65f6\u586b\u62a5\uff01"));k(e.data),P(!0)}}))}}),I&&o.a.createElement("div",{className:u.a.log,onClick:I},Object(n.t)("\u67e5\u770b\u5de5\u65f6\u65e5\u5fd7")),N&&D&&o.a.createElement(v.default,{header:o.a.createElement(m.ButtonHeader,{header:Object(n.t)("\u767b\u8bb0\u5de5\u65f6"),setCreateModal:P,params:A,method:p.createWorkHoursAuto,reloadData:C}),show:N,body:y(y({},e.detailInfo),{recordHours:(null===D||void 0===D?void 0:D.workHour)||"",remainingHours:(null===D||void 0===D?void 0:D.workHour)?R-(null===D||void 0===D?void 0:D.workHour):R,workHourType:null===D||void 0===D?void 0:D.currentWorkhourType}),user:T,fillDetail:D,schemeFields:S,onSetting:function(e){Object(p.createAcpi)(y(y({},e),{programId:null===e.programId?0:e.programId})).then((function(e){0===e.code&&(M(!1),P(!1),C&&C())}))},onHide:function(){return P(!1)}}))}},"xhX+":function(e,t,a){e.exports={container:"container-1fictlv4zY",disabled:"disabled-VlftE6ZdRd",progress:"progress-3GfurSvZ9w","no-permission-progress":"no-permission-progress-1psUvzMzUV",noPermissionProgress:"no-permission-progress-1psUvzMzUV",log:"log-2YeL0U9u7p",confirm:"confirm-1rWqLm1A9s"}},"yF+s":function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d"),a("bWfx");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),u=a("mVeg"),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=v(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),f=n(a("zEfz")),p=n(a("17x9")),m=n(a("K2gz"));function v(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(v=function(e){return e?a:t})(e)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var g=[{id:1,title:(0,u.t)("\u5b8c\u6574\u521b\u5efa"),subTitle:"Shift + Enter"}],E=function(e){(0,l.default)(a,e);var t=h(a);function a(){var e;(0,o.default)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={expanded:!1},e.handleSelect=function(t){var a=e.props.onSelect;"function"===typeof a&&a(t)},e.handleClick=function(t){var a=e.props,n=a.disabled,r=a.onClick;n||"function"===typeof r&&r(t)},e.toggleExpand=function(){if(e.state.expanded)e.closePanel();else{if(e.props.disabled)return;e.openPanel()}},e.openPanel=function(){e.setState({expanded:!0}),document.addEventListener("click",e.closePanel)},e.closePanel=function(){e.setState({expanded:!1}),document.removeEventListener("click",e.closePanel)},e}return(0,i.default)(a,[{key:"render",value:function(){var e=this,t=this.state.expanded,a=this.props,n=a.disabled,r=a.top,o=a.willCreateIssueType,i=a.creationType;return d.default.createElement("div",{className:(0,m.default)(f.default.wrapper,n&&f.default.wrapperDisabled)},o?d.default.createElement("div",{className:f.default.buttonText,onClick:this.handleClick,"data-container":!0,"data-title":"\u521b\u5efa".concat(o.name,"-\u521b\u5efa")},(0,u.t)("\u521b\u5efa")):"DEFECT"===i?d.default.createElement("div",{className:f.default.buttonText,onClick:this.handleClick,"data-container":!0,"data-title":"\u5173\u8054\u7f3a\u9677-\u521b\u5efa"},(0,u.t)("\u521b\u5efa")):d.default.createElement("div",{className:f.default.buttonText,onClick:this.handleClick},(0,u.t)("\u521b\u5efa")),d.default.createElement("div",{className:(0,m.default)(f.default.buttonDropdown,t&&f.default.expanded),onClick:this.toggleExpand}),t&&d.default.createElement("ul",{className:(0,m.default)(f.default.selectItems,r?f.default.selectItemsTop:"")},g.map((function(t){return d.default.createElement("li",{key:t.id,onClick:function(){return e.handleSelect(t)}},d.default.createElement("span",null,t.title),d.default.createElement("span",{className:f.default.shiftIcon}),d.default.createElement("span",{className:f.default.enterIcon}))}))))}}]),a}(d.Component);E.propTypes={disabled:p.default.bool,onClick:p.default.func,onSelect:p.default.func,top:p.default.bool,willCreateIssueType:p.default.object,creationType:p.default.string};var y=E;t.default=y},yTHi:function(e,t,a){"use strict";var n=a("cDcd"),r=a.n(n),o=a("wMO9"),i=a.n(o),l=a("K2gz"),c=a.n(l),s=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),u=function(e){function t(t){var a=e.call(this,t)||this;return a.remove=function(){var e=a.props,t=e.onRemove,n=e.item;t&&t(n)},a}return s(t,e),t.prototype.render=function(){var e=this.props,t=e.name,a=e.color,n=e.canClose,o=e.className,l={background:a};return r.a.createElement("div",{className:c()(i.a.tag,!n&&i.a.limitWidth,o),title:t},r.a.createElement("span",{className:i.a.color,style:l}),r.a.createElement("span",{className:i.a.text},t),n&&r.a.createElement("span",{className:i.a.close,onClick:this.remove}))},t.defaultProps={canClose:!0},t}(r.a.Component);t.a=u},yTui:function(e,t,a){"use strict";a.r(t);var n=a("5JFE"),r=a("cDcd"),o=a.n(r),i=a("GrEx"),l=a.n(i),c=a("4b23"),s=function(){return(s=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},u=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i},d=n.Input.TextArea,f=function(e){var t=e.value,a=e.placeholder,i=e.onPressEnter,s=e.onChange,f=e.onFocus,p=e.onBlur,m=e.viewLine,v=void 0===m?2:m,h=e.initFocus,g=e.forwardedRef,E=u(Object(r.useState)(t),2),y=E[0],b=E[1],I=u(Object(r.useState)(!1),2),S=I[0],T=I[1],w=Object(r.useRef)(""),C=function(){T(!0),f&&f()},O=function(){setTimeout((function(){var e;null===(e=null===g||void 0===g?void 0:g.current)||void 0===e||e.focus({cursor:"end",preventScroll:!0});var t=document.getElementById(w.current);t&&(t.scrollTop=t.scrollHeight)}),0)};Object(r.useEffect)((function(){t!==y&&b(t)}),[t]),Object(r.useEffect)((function(){w.current=Object(c.a)(),h&&(C(),O())}),[]);var N={"-webkit-box-orient":"vertical","-webkit-line-clamp":"".concat(v)};return o.a.createElement("div",{className:l.a.titleInputWrap},S?null:o.a.createElement(n.Tooltip,{title:y,placement:"bottomLeft"},o.a.createElement("div",{className:"".concat(l.a.titleView," ").concat(1===v?l.a.oneLine:""),onClick:function(){T(!0),O()},style:N},y)),o.a.createElement(d,{className:"".concat(l.a.input," ").concat(S?l.a.inputEdit:""),ref:g,id:w.current,value:y,onChange:function(e){b(e.target.value),s&&s(e.target.value)},onKeyDown:function(e){return function(e){13!==e.keyCode||e.preventDefault()}(e)},placeholder:a,autoSize:{minRows:1,maxRows:2},onPressEnter:function(){i&&i()},onFocus:C,onBlur:function(){T(!1),p&&p()},maxLength:128,showCount:!0}))};function p(e,t){return o.a.createElement(f,s({},e,{forwardedRef:t}))}p.displayName="IssueTitleInputForward",t.default=o.a.forwardRef(p)},"yg2+":function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return i}));var n=/\.([^.]*)$/,r=function(e){var t=e.match(n);return t?t[1]:""},o=function(e){return"jpeg"===e||"jpg"===e||"png"===e},i=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}},yjaU:function(e,t,a){"use strict";a("I5cv"),a("EK0E"),a("XfO3"),a("Btvt"),a("yt8O"),a("rGqo"),a("mYba");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("f3/d");var o=n(a("o0o1")),i=n(a("yXPU")),l=n(a("lwsE")),c=n(a("W8MJ")),s=n(a("7W2i")),u=n(a("a1gu")),d=n(a("Nsbk")),f=a("mVeg"),p=n(a("17x9")),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("cDcd")),v=a("FaIw"),h=n(a("oHG8")),g=a("K/Fc"),E=a("dtw8"),y=a("1qdz");function b(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(b=function(e){return e?a:t})(e)}function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var S=function(e){(0,s.default)(a,e);var t=I(a);function a(){var e;(0,l.default)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(){var t=(0,i.default)(o.default.mark((function t(a,n){var r,i,l,c,s,u;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,i=r.projectId,l=r.item,t.prev=1,a.preventDefault(),t.next=5,(0,g.fetchIterationDetail)(i,null===l||void 0===l||null===(c=l.issueLog)||void 0===c||null===(s=c.content)||void 0===s?void 0:s.iterationCode);case 5:u=t.sent,u.data.code&&window.open(n),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(1);case 12:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,a){return t.apply(this,arguments)}}(),e}return(0,c.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.item,n=t.projectPath;return m.default.createElement("div",{className:y.listItem,key:a.id},m.default.createElement("div",{className:y.dot}),m.default.createElement("div",{className:y.content},m.default.createElement(h.default,{className:"mr-10 ".concat(y.icon)}),m.default.createElement("span",{className:y.user},a.creator.name),a.issueLog&&1===a.issueLog.old?"\u3010\u6e90\u3011":"",m.default.createElement("span",null,(0,f.t)("\u66f4\u65b0\u4e86\u6240\u5c5e\u8fed\u4ee3\u4e3a")),a.issueLog.content.iterationCode?m.default.createElement(E.Link,{className:"ml-10 ".concat(y.customAction," ").concat(y.moreDot),target:"_blank",onClick:function(t){e.handleClick(t,"".concat(n,"/iterations/").concat(a.issueLog.content.iterationCode,"/issues"))}},"#",a.issueLog.content.iterationCode,"-",a.issueLog.content.iterationName):m.default.createElement("span",{className:"ml-10"},(0,f.t)("\u672a\u89c4\u5212")),m.default.createElement("span",{className:y.time},(0,v.timeFormat)(a.createdAt,"YYYY-MM-DD HH:mm"))))}}]),a}(m.Component);t.default=S,S.propTypes={item:p.default.object,projectPath:p.default.string,projectId:p.default.number}},z98G:function(e,t,a){e.exports=a.p+"7cb591232f38a28ff70f94cc135a494d.svg"},zCif:function(e,t,a){e.exports=a.p+"fe0964baa9b1dcd0ed3f0a00998415c3.svg"},zEfz:function(e,t,a){e.exports={wrapper:"wrapper-32vhrmqnn2","button-text":"button-text-Jfrs7BX1KE",buttonText:"button-text-Jfrs7BX1KE","button-dropdown":"button-dropdown-3dUNvDvygE",buttonDropdown:"button-dropdown-3dUNvDvygE",expanded:"expanded-14Imx-tZ-f","wrapper-disabled":"wrapper-disabled-2Vh30f-Qbi",wrapperDisabled:"wrapper-disabled-2Vh30f-Qbi","select-items":"select-items-2ZIMsnBost",selectItems:"select-items-2ZIMsnBost","shift-icon":"shift-icon-2y6vJwleY0",shiftIcon:"shift-icon-2y6vJwleY0","enter-icon":"enter-icon-3SWHRDCiOQ",enterIcon:"enter-icon-3SWHRDCiOQ","select-items-top":"select-items-top-2sT3Bw-DQL",selectItemsTop:"select-items-top-2sT3Bw-DQL"}},zyt4:function(e,t,a){e.exports={item:"item-3MRbUZRLD7","item-search":"item-search-3IKorKkeVv",itemSearch:"item-search-3IKorKkeVv",opacity:"opacity-_98aOln2xD",icon:"icon-12U8gklYJV",code:"code-uI6BqIwvdB",name:"name-23Pubrgp9B",link:"link-Sd_TYFChKG",right:"right-3oUusCOtll",priority:"priority-HvaZeT23Oc","priority-0":"priority-0-18VNiaXxW2",priority0:"priority-0-18VNiaXxW2","priority-1":"priority-1-3IVKtF7RId",priority1:"priority-1-3IVKtF7RId","priority-2":"priority-2-25Lquam-3Y",priority2:"priority-2-25Lquam-3Y","priority-3":"priority-3-2i9FqlSr3c",priority3:"priority-3-2i9FqlSr3c","op-wrap":"op-wrap-sK1_K5MNZX",opWrap:"op-wrap-sK1_K5MNZX","op-btn":"op-btn-32HMXaoNK5",opBtn:"op-btn-32HMXaoNK5","op-list":"op-list-13l98P0ArV",opList:"op-list-13l98P0ArV","op-item":"op-item-1Z9_3lWrQR",opItem:"op-item-1Z9_3lWrQR"}}}]);