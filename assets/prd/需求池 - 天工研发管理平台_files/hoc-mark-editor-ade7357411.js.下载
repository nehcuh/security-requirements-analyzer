(window["microFrontendexternal-dm"]=window["microFrontendexternal-dm"]||[]).push([["hoc-mark-editor"],{EppD:function(e,t,a){"use strict";a.r(t),a.d(t,"pluginInstance",(function(){return i})),a.d(t,"setConfig",(function(){return o}));var r=a("4Vas"),s=a("XcxU"),n={getDefaultGKMentionDisabled:function(){return!1},defaultSuggestText:!1,getHelpLink:function(){return"".concat(s.helpLinkHost,"/docs/management/markdown.html")}},i=new r.a(n,"mark-editor"),o=i.setConfig},fx5L:function(e,t,a){"use strict";a("rGqo");var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.createWithContent=S,t.default=function(e){class t extends o.Component{constructor(e){super(e),this.onChange=(e,t)=>{const a=e.getCurrentContent().getPlainText();if(a===this.lastEdit)return;const{onChange:r}=this.props;(0,i.default)(r)&&r(e,t),this.setState({lastEdit:a},()=>{this.setHashSearchParamsHandler(e)})},this.focus=()=>{this.editor.focus()},this.focusToEnd=()=>{this.editor.focusToEnd()},this.onFetch=(e,t=!0)=>{this.editor.hasLocalSave()?t&&this.focusToEnd():this.setState({lastEdit:e},()=>{this.props.onChange(S(e),t?this.focusToEnd:null)})},this.onUpdate=e=>{this.setState({lastEdit:e},()=>{this.props.onChange(S(e),this.focusToEnd)})},this.onSave=()=>{this.editor.clearLocalSave(),this.editor.clear()},this.onCancel=()=>{this.editor.clearLocalSave()},this.createPreviewPromise=(...e)=>f.createPreviewPromise(...e).then(e=>(setTimeout(()=>(0,d.default)(document)),e)),this.getPrevCursorText=e=>{const t=e.getCurrentContent(),a=e.getSelection(),r=a.getFocusKey(),s=t.getBlockForKey(r);if(!s)return;const n=a.getStartOffset();return s.getText().substring(0,n)},this.setHashSearchParamsHandler=e=>{const{hashSearchParams:t}=this.state,a=this.getPrevCursorText(e);if(!a)return;(e=>{const t=e.trimStart(),a=t.lastIndexOf("#");if(!a)return!t.includes(" ");return" "===t[a-1]})(a)?this.setHashSearchParams(this.props.hashSearchParams):t&&this.setHashSearchParams(null)},this.setHashSearchParams=e=>{this.setState({hashSearchParams:e})},this.renderHashItem=e=>o.default.createElement(m.default,{item:e}),this.state={hashSearchParams:e.hashSearchParams,lastEdit:null}}componentDidMount(){this.props.autoFocus&&this.focus()}componentDidCatch(){this.forceUpdate()}render(){const{className:t,mentionParams:a,...r}=this.props,{hashSearchParams:c}=this.state,u=(0,h.default)(n.default.markEditor,t),d=p.pluginInstance.getPlugin(),m=(0,i.default)(d.defaultSuggestText)?{suggestText:d.defaultSuggestText}:{},g=a?{suggestItemWidth:200,mentionSortable:!0}:{};return o.default.createElement(l.default,(0,s.default)({className:u,ref:e=>this.editor=e,createPreviewPromise:this.createPreviewPromise},g,{createHashSearchPromise:c?(e=>{if(window.location.pathname.indexOf("production-problem")>0){const e=window.location.pathname.split("/");return f.listRelatedIssueResource({page:1,pageSize:6,type:"prd_issue",code:Number(e[e.length-1])})}return f.createHashSearchPromise(e)})(c):f.emptyHashSearchPromise(),renderHashItem:this.props.renderHashItem||this.renderHashItem,emojiList:f.emojiList,recommendEmojiList:f.recommendEmojiList,helpLink:d.getHelpLink()},m,r,e(this.props),{onChange:this.onChange,maxSuggest:7}))}}return t.propTypes={className:c.default.string,autoFocus:c.default.bool,mentionParams:c.default.object,hashSearchParams:c.default.object,onChange:c.default.func.isRequired,renderHashItem:c.default.func},t.getPlainText=l.default.getPlainText,t.defaultProps={hashSearchParams:{},gkMentionDisabled:p.pluginInstance.getPlugin().getDefaultGKMentionDisabled()},t};var s=r(a("pVnL")),n=r(a("qWK9")),i=r(a("lSCD")),o=P(a("cDcd")),c=r(a("17x9")),u=a("v83y"),h=r(a("K2gz")),l=r(a("0yTv")),d=r(a("c6cg")),f=P(a("sonf")),m=r(a("v8cH")),p=a("EppD");function g(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(g=function(e){return e?a:t})(e)}function P(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=g(t);if(a&&a.has(e))return a.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n]}return r.default=e,a&&a.set(e,r),r}function S(e){const t=u.ContentState.createFromText(e);return u.EditorState.createWithContent(t)}},qWK9:function(e,t,a){e.exports={"mark-editor":"mark-editor-3yeSLilb5d",markEditor:"mark-editor-3yeSLilb5d",finish:"finish-akW9yUvdHD",content:"content-Bz9zl18fk0"}},v8cH:function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a("cDcd")),n=r(a("GzxT")),i=r(a("qWK9")),o=r(a("K2gz")),c=r(a("17x9"));const u=({item:e})=>{var t;const a=`#${e.code} ${e.title}`,r=(0,o.default)(i.default.content);return s.default.createElement("div",null,(0,n.default)(null!==(t=e.target_issue_type)&&void 0!==t?t:e.target_type),s.default.createElement("span",{className:r},a))};u.propTypes={item:c.default.object};var h=u;t.default=h}}]);